parcelRequire=function(e,r,n,t){function i(n,t){function o(e){return i(o.resolve(e))}function c(r){return e[n][1][r]||r}if(!r[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!t&&l)return l(n,!0);if(u)return u(n,!0);if(f&&"string"==typeof n)return f(n);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}o.resolve=c;var a=r[n]=new i.Module(n);e[n][0].call(a.exports,o,a,a.exports,this)}return r[n].exports}function o(e){this.id=e,this.bundle=i,this.exports={}}var u="function"==typeof parcelRequire&&parcelRequire,f="function"==typeof require&&require;i.isParcelRequire=!0,i.Module=o,i.modules=e,i.cache=r,i.parent=u;for(var c=0;c<n.length;c++)i(n[c]);if(n.length){var l=i(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):t&&(this[t]=l)}return i}({37:[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],38:[function(require,module,exports) {
"use strict";var e=function(e){};function n(n,r,i,o,t,a,f,s){if(e(r),!n){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,o,t,a,f,s],l=0;(u=new Error(r.replace(/%s/g,function(){return d[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}module.exports=n;
},{}],39:[function(require,module,exports) {
"use strict";var e={};module.exports=e;
},{}],40:[function(require,module,exports) {
"use strict";function t(t){return function(){return t}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},module.exports=n;
},{}],11:[function(require,module,exports) {
"use strict";var e=require("object-assign"),t=require("fbjs/lib/invariant"),r=require("fbjs/lib/emptyObject"),n=require("fbjs/lib/emptyFunction"),o="function"==typeof Symbol&&Symbol.for,u=o?Symbol.for("react.element"):60103,l=o?Symbol.for("react.portal"):60106,i=o?Symbol.for("react.fragment"):60107,f=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.provider"):60109,a=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.async_mode"):60111,s=o?Symbol.for("react.forward_ref"):60112,y="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var r=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,o=0;o<r;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);t(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function h(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||v}function m(){}function b(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||v}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&d("85"),this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=h.prototype;var _=b.prototype=new m;_.constructor=b,e(_,h.prototype),_.isPureReactComponent=!0;var S={current:null},g=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function $(e,t,r){var n=void 0,o={},l=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)g.call(t,n)&&!k.hasOwnProperty(n)&&(o[n]=t[n]);var f=arguments.length-2;if(1===f)o.children=r;else if(1<f){for(var c=Array(f),a=0;a<f;a++)c[a]=arguments[a+2];o.children=c}if(e&&e.defaultProps)for(n in f=e.defaultProps)void 0===o[n]&&(o[n]=f[n]);return{$$typeof:u,type:e,key:l,ref:i,props:o,_owner:S.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}function w(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var x=/\/+/g,P=[];function R(e,t,r,n){if(P.length){var o=P.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function C(e,t,r,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case u:case l:i=!0}}if(i)return r(n,e,""===t?"."+A(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var f=0;f<e.length;f++){var c=t+A(o=e[f],f);i+=C(o,c,r,n)}else if(null===e||void 0===e?c=null:c="function"==typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),f=0;!(o=e.next()).done;)i+=C(o=o.value,c=t+A(o,f++),r,n);else"object"===o&&d("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return i}function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?w(e.key):t.toString(36)}function E(e,t){e.func.call(e.context,t,e.count++)}function q(e,t,r){var o=e.result,l=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,o,r,n.thatReturnsArgument):null!=e&&(j(e)&&(t=l+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(x,"$&/")+"/")+r,e={$$typeof:u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),o.push(e))}function U(e,t,r,n,o){var u="";null!=r&&(u=(""+r).replace(x,"$&/")+"/"),t=R(t,u,n,o),null==e||C(e,"",q,t),O(t)}var F={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return U(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=R(null,null,t,r),null==e||C(e,"",E,t),O(t)},count:function(e){return null==e?0:C(e,"",n.thatReturnsNull,null)},toArray:function(e){var t=[];return U(e,t,null,n.thatReturnsArgument),t},only:function(e){return j(e)||d("143"),e}},createRef:function(){return{current:null}},Component:h,PureComponent:b,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:s,render:e}},Fragment:i,StrictMode:f,unstable_AsyncMode:p,createElement:$,cloneElement:function(t,r,n){(null===t||void 0===t)&&d("267",t);var o=void 0,l=e({},t.props),i=t.key,f=t.ref,c=t._owner;if(null!=r){void 0!==r.ref&&(f=r.ref,c=S.current),void 0!==r.key&&(i=""+r.key);var a=void 0;for(o in t.type&&t.type.defaultProps&&(a=t.type.defaultProps),r)g.call(r,o)&&!k.hasOwnProperty(o)&&(l[o]=void 0===r[o]&&void 0!==a?a[o]:r[o])}if(1===(o=arguments.length-2))l.children=n;else if(1<o){a=Array(o);for(var p=0;p<o;p++)a[p]=arguments[p+2];l.children=a}return{$$typeof:u,type:t.type,key:i,ref:f,props:l,_owner:c}},createFactory:function(e){var t=$.bind(null,e);return t.type=e,t},isValidElement:j,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:S,assign:e}},I=Object.freeze({default:F}),M=I&&F||I;module.exports=M.default?M.default:M;
},{"object-assign":37,"fbjs/lib/invariant":38,"fbjs/lib/emptyObject":39,"fbjs/lib/emptyFunction":40}],8:[function(require,module,exports) {
"use strict";module.exports=require("./cjs/react.production.min.js");
},{"./cjs/react.production.min.js":11}],43:[function(require,module,exports) {
"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};module.exports=n;
},{}],44:[function(require,module,exports) {
"use strict";function e(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}module.exports=e;
},{}],45:[function(require,module,exports) {
"use strict";var t=Object.prototype.hasOwnProperty;function e(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function r(r,n){if(e(r,n))return!0;if("object"!=typeof r||null===r||"object"!=typeof n||null===n)return!1;var o=Object.keys(r),u=Object.keys(n);if(o.length!==u.length)return!1;for(var l=0;l<o.length;l++)if(!t.call(n,o[l])||!e(r[o[l]],n[o[l]]))return!1;return!0}module.exports=r;
},{}],56:[function(require,module,exports) {
"use strict";function e(e){var o=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof o.Node?e instanceof o.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=e;
},{}],51:[function(require,module,exports) {
"use strict";var e=require("./isNode");function r(r){return e(r)&&3==r.nodeType}module.exports=r;
},{"./isNode":56}],46:[function(require,module,exports) {
"use strict";var o=require("./isTextNode");function e(n,t){return!(!n||!t)&&(n===t||!o(n)&&(o(t)?e(n,t.parentNode):"contains"in n?n.contains(t):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(t))))}module.exports=e;
},{"./isTextNode":51}],12:[function(require,module,exports) {
"use strict";var e=require("fbjs/lib/invariant"),t=require("react"),n=require("fbjs/lib/ExecutionEnvironment"),r=require("object-assign"),o=require("fbjs/lib/emptyFunction"),a=require("fbjs/lib/getActiveElement"),i=require("fbjs/lib/shallowEqual"),l=require("fbjs/lib/containsNode"),u=require("fbjs/lib/emptyObject");function c(t){for(var n=arguments.length-1,r="http://reactjs.org/docs/error-decoder.html?invariant="+t,o=0;o<n;o++)r+="&args[]="+encodeURIComponent(arguments[o+1]);e(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}function s(e,t,n,r,o,a,i,l,u){this._hasCaughtError=!1,this._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}t||c("227");var f={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,o,a,i,l,u){s.apply(f,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,a,i,l,u){if(f.invokeGuardedCallback.apply(this,arguments),f.hasCaughtError()){var c=f.clearCaughtError();f._hasRethrowError||(f._hasRethrowError=!0,f._rethrowError=c)}},rethrowCaughtError:function(){return d.apply(f,arguments)},hasCaughtError:function(){return f._hasCaughtError},clearCaughtError:function(){if(f._hasCaughtError){var e=f._caughtError;return f._caughtError=null,f._hasCaughtError=!1,e}c("198")}};function d(){if(f._hasRethrowError){var e=f._rethrowError;throw f._rethrowError=null,f._hasRethrowError=!1,e}}var p=null,h={};function m(){if(p)for(var e in h){var t=h[e],n=p.indexOf(e);if(-1<n||c("96",e),!v[n])for(var r in t.extractEvents||c("97",e),v[n]=t,n=t.eventTypes){var o=void 0,a=n[r],i=t,l=r;y.hasOwnProperty(l)&&c("99",l),y[l]=a;var u=a.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&g(u[o],i,l);o=!0}else a.registrationName?(g(a.registrationName,i,l),o=!0):o=!1;o||c("98",r,e)}}}function g(e,t,n){b[e]&&c("100",e),b[e]=t,C[e]=t.eventTypes[n].dependencies}var v=[],y={},b={},C={};function x(e){p&&c("101"),p=Array.prototype.slice.call(e),m()}function k(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&c("102",t),h[t]=r,n=!0)}n&&m()}var w=Object.freeze({plugins:v,eventNameDispatchConfigs:y,registrationNameModules:b,registrationNameDependencies:C,possibleRegistrationNames:null,injectEventPluginOrder:x,injectEventPluginsByName:k}),T=null,E=null,S=null;function _(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=S(r),f.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function P(e,t){return null==t&&c("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function N(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var I=null;function F(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)_(e,t,n[o],r[o]);else n&&_(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function M(e){return F(e,!0)}function D(e){return F(e,!1)}var R={injectEventPluginOrder:x,injectEventPluginsByName:k};function U(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&c("231",t,typeof n),n)}function O(e,t){null!==e&&(I=P(I,e)),e=I,I=null,e&&(N(e,t?M:D),I&&c("95"),f.rethrowCaughtError())}function z(e,t,n,r){for(var o=null,a=0;a<v.length;a++){var i=v[a];i&&(i=i.extractEvents(e,t,n,r))&&(o=P(o,i))}O(o,!1)}var L=Object.freeze({injection:R,getListener:U,runEventsInBatch:O,runExtractedEventsInBatch:z}),H=Math.random().toString(36).slice(2),A="__reactInternalInstance$"+H,V="__reactEventHandlers$"+H;function B(e){if(e[A])return e[A];for(;!e[A];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[A]).tag||6===e.tag?e:null}function W(e){if(5===e.tag||6===e.tag)return e.stateNode;c("33")}function j(e){return e[V]||null}var K=Object.freeze({precacheFiberNode:function(e,t){t[A]=e},getClosestInstanceFromNode:B,getInstanceFromNode:function(e){return!(e=e[A])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:W,getFiberCurrentPropsFromNode:j,updateFiberProps:function(e,t){e[V]=t}});function Q(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function q(e,t,n){for(var r=[];e;)r.push(e),e=Q(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function $(e,t,n){(t=U(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=P(n._dispatchListeners,t),n._dispatchInstances=P(n._dispatchInstances,e))}function G(e){e&&e.dispatchConfig.phasedRegistrationNames&&q(e._targetInst,$,e)}function Y(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;q(t=t?Q(t):null,$,e)}}function X(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=U(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=P(n._dispatchListeners,t),n._dispatchInstances=P(n._dispatchInstances,e))}function Z(e){e&&e.dispatchConfig.registrationName&&X(e._targetInst,null,e)}function J(e){N(e,G)}function ee(e,t,n,r){if(n&&r)e:{for(var o=n,a=r,i=0,l=o;l;l=Q(l))i++;l=0;for(var u=a;u;u=Q(u))l++;for(;0<i-l;)o=Q(o),i--;for(;0<l-i;)a=Q(a),l--;for(;i--;){if(o===a||o===a.alternate)break e;o=Q(o),a=Q(a)}o=null}else o=null;for(a=o,o=[];n&&n!==a&&(null===(i=n.alternate)||i!==a);)o.push(n),n=Q(n);for(n=[];r&&r!==a&&(null===(i=r.alternate)||i!==a);)n.push(r),r=Q(r);for(r=0;r<o.length;r++)X(o[r],"bubbled",e);for(e=n.length;0<e--;)X(n[e],"captured",t)}var te=Object.freeze({accumulateTwoPhaseDispatches:J,accumulateTwoPhaseDispatchesSkipTarget:function(e){N(e,Y)},accumulateEnterLeaveDispatches:ee,accumulateDirectDispatches:function(e){N(e,Z)}}),ne=null;function re(){return!ne&&n.canUseDOM&&(ne="textContent"in document.documentElement?"textContent":"innerText"),ne}var oe={_root:null,_startText:null,_fallbackText:null};function ae(){if(oe._fallbackText)return oe._fallbackText;var e,t,n=oe._startText,r=n.length,o=ie(),a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return oe._fallbackText=o.slice(e,1<t?1-t:void 0),oe._fallbackText}function ie(){return"value"in oe._root?oe._root.value:oe._root[re()]}var le="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ue={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function ce(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}function se(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function fe(e){e instanceof this||c("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=se,e.release=fe}r(ce.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<le.length;t++)this[le[t]]=null}}),ce.Interface=ue,ce.extend=function(e){function t(){}function n(){return o.apply(this,arguments)}var o=this;t.prototype=o.prototype;var a=new t;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},o.Interface,e),n.extend=o.extend,de(n),n},de(ce);var pe=ce.extend({data:null}),he=ce.extend({data:null}),me=[9,13,27,32],ge=n.canUseDOM&&"CompositionEvent"in window,ve=null;n.canUseDOM&&"documentMode"in document&&(ve=document.documentMode);var ye=n.canUseDOM&&"TextEvent"in window&&!ve,be=n.canUseDOM&&(!ge||ve&&8<ve&&11>=ve),Ce=String.fromCharCode(32),xe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},ke=!1;function we(e,t){switch(e){case"topKeyUp":return-1!==me.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Te(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ee=!1;function Se(e,t){switch(e){case"topCompositionEnd":return Te(t);case"topKeyPress":return 32!==t.which?null:(ke=!0,Ce);case"topTextInput":return(e=t.data)===Ce&&ke?null:e;default:return null}}function _e(e,t){if(Ee)return"topCompositionEnd"===e||!ge&&we(e,t)?(e=ae(),oe._root=null,oe._startText=null,oe._fallbackText=null,Ee=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return be?null:t.data;default:return null}}var Pe={eventTypes:xe,extractEvents:function(e,t,n,r){var o=void 0,a=void 0;if(ge)e:{switch(e){case"topCompositionStart":o=xe.compositionStart;break e;case"topCompositionEnd":o=xe.compositionEnd;break e;case"topCompositionUpdate":o=xe.compositionUpdate;break e}o=void 0}else Ee?we(e,n)&&(o=xe.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=xe.compositionStart);return o?(be&&(Ee||o!==xe.compositionStart?o===xe.compositionEnd&&Ee&&(a=ae()):(oe._root=r,oe._startText=ie(),Ee=!0)),o=pe.getPooled(o,t,n,r),a?o.data=a:null!==(a=Te(n))&&(o.data=a),J(o),a=o):a=null,(e=ye?Se(e,n):_e(e,n))?((t=he.getPooled(xe.beforeInput,t,n,r)).data=e,J(t)):t=null,null===a?t:null===t?a:[a,t]}},Ne=null,Ie={injectFiberControlledHostComponent:function(e){Ne=e}},Fe=null,Me=null;function De(e){if(e=E(e)){Ne&&"function"==typeof Ne.restoreControlledState||c("194");var t=T(e.stateNode);Ne.restoreControlledState(e.stateNode,e.type,t)}}function Re(e){Fe?Me?Me.push(e):Me=[e]:Fe=e}function Ue(){return null!==Fe||null!==Me}function Oe(){if(Fe){var e=Fe,t=Me;if(Me=Fe=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}var ze=Object.freeze({injection:Ie,enqueueStateRestore:Re,needsStateRestore:Ue,restoreStateIfNeeded:Oe});function Le(e,t){return e(t)}function He(e,t,n){return e(t,n)}function Ae(){}var Ve=!1;function Be(e,t){if(Ve)return e(t);Ve=!0;try{return Le(e,t)}finally{Ve=!1,Ue()&&(Ae(),Oe())}}var We={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!We[e.type]:"textarea"===t}function Ke(e){return(e=e.target||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Qe(e,t){return!(!n.canUseDOM||t&&!("addEventListener"in document))&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $e(e){var t=qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function Ge(e){e._valueTracker||(e._valueTracker=$e(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Xe=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ze="function"==typeof Symbol&&Symbol.for,Je=Ze?Symbol.for("react.element"):60103,et=Ze?Symbol.for("react.call"):60104,tt=Ze?Symbol.for("react.return"):60105,nt=Ze?Symbol.for("react.portal"):60106,rt=Ze?Symbol.for("react.fragment"):60107,ot=Ze?Symbol.for("react.strict_mode"):60108,at=Ze?Symbol.for("react.provider"):60109,it=Ze?Symbol.for("react.context"):60110,lt=Ze?Symbol.for("react.async_mode"):60111,ut=Ze?Symbol.for("react.forward_ref"):60112,ct="function"==typeof Symbol&&Symbol.iterator;function st(e){return null===e||void 0===e?null:"function"==typeof(e=ct&&e[ct]||e["@@iterator"])?e:null}function ft(e){if("function"==typeof(e=e.type))return e.displayName||e.name;if("string"==typeof e)return e;switch(e){case rt:return"ReactFragment";case nt:return"ReactPortal";case et:return"ReactCall";case tt:return"ReactReturn"}if("object"==typeof e&&null!==e)switch(e.$$typeof){case ut:return""!==(e=e.render.displayName||e.render.name||"")?"ForwardRef("+e+")":"ForwardRef"}return null}function dt(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,o=ft(e),a=null;n&&(a=ft(n)),n=r,o="\n    in "+(o||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":a?" (created by "+a+")":"");break e;default:o=""}t+=o,e=e.return}while(e);return t}var pt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ht={},mt={};function gt(e){return!!mt.hasOwnProperty(e)||!ht.hasOwnProperty(e)&&(pt.test(e)?mt[e]=!0:(ht[e]=!0,!1))}function vt(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function yt(e,t,n,r){if(null===t||void 0===t||vt(e,t,n,r))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ct[e]=new bt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ct[t]=new bt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ct[e]=new bt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){Ct[e]=new bt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ct[e]=new bt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Ct[e]=new bt(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){Ct[e]=new bt(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){Ct[e]=new bt(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){Ct[e]=new bt(e,5,!1,e.toLowerCase(),null)});var xt=/[\-:]([a-z])/g;function kt(e){return e[1].toUpperCase()}function wt(e,t,n,r){var o=Ct.hasOwnProperty(t)?Ct[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(yt(t,n,o,r)&&(n=null),r||null===o?gt(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Tt(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Et(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=It(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function St(e,t){null!=(t=t.checked)&&wt(e,"checked",t,!1)}function _t(e,t){St(e,t);var n=It(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?Nt(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nt(e,t.type,It(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Pt(e,t){(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===e.value&&(e.value=""+e._wrapperState.initialValue),e.defaultValue=""+e._wrapperState.initialValue),""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function Nt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function It(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xt,kt);Ct[t]=new bt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xt,kt);Ct[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xt,kt);Ct[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Ct.tabIndex=new bt("tabIndex",1,!1,"tabindex",null);var Ft={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function Mt(e,t,n){return(e=ce.getPooled(Ft.change,e,t,n)).type="change",Re(n),J(e),e}var Dt=null,Rt=null;function Ut(e){O(e,!1)}function Ot(e){if(Ye(W(e)))return e}function zt(e,t){if("topChange"===e)return t}var Lt=!1;function Ht(){Dt&&(Dt.detachEvent("onpropertychange",At),Rt=Dt=null)}function At(e){"value"===e.propertyName&&Ot(Rt)&&Be(Ut,e=Mt(Rt,e,Ke(e)))}function Vt(e,t,n){"topFocus"===e?(Ht(),Rt=n,(Dt=t).attachEvent("onpropertychange",At)):"topBlur"===e&&Ht()}function Bt(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Ot(Rt)}function Wt(e,t){if("topClick"===e)return Ot(t)}function jt(e,t){if("topInput"===e||"topChange"===e)return Ot(t)}n.canUseDOM&&(Lt=Qe("input")&&(!document.documentMode||9<document.documentMode));var Kt={eventTypes:Ft,_isInputEventSupported:Lt,extractEvents:function(e,t,n,r){var o=t?W(t):window,a=void 0,i=void 0,l=o.nodeName&&o.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===o.type?a=zt:je(o)?Lt?a=jt:(a=Bt,i=Vt):(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(a=Wt),a&&(a=a(e,t)))return Mt(a,n,r);i&&i(e,o,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||o._wrapperState)&&e.controlled&&"number"===o.type&&Nt(o,"number",o.value)}},Qt=ce.extend({view:null,detail:null}),qt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $t(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=qt[e])&&!!t[e]}function Gt(){return $t}var Yt=Qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Zt={eventTypes:Xt,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?B(t):null):e=null,e===t)return null;var a=null==e?o:W(e);o=null==t?o:W(t);var i=Yt.getPooled(Xt.mouseLeave,e,n,r);return i.type="mouseleave",i.target=a,i.relatedTarget=o,(n=Yt.getPooled(Xt.mouseEnter,t,n,r)).type="mouseenter",n.target=o,n.relatedTarget=a,ee(i,n,e,t),[i,n]}};function Jt(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function en(e){return!!(e=e._reactInternalFiber)&&2===Jt(e)}function tn(e){2!==Jt(e)&&c("188")}function nn(e){var t=e.alternate;if(!t)return 3===(t=Jt(e))&&c("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var i=o.child;i;){if(i===n)return tn(o),e;if(i===r)return tn(o),t;i=i.sibling}c("188")}if(n.return!==r.return)n=o,r=a;else{i=!1;for(var l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}i||c("189")}}n.alternate!==r&&c("190")}return 3!==n.tag&&c("188"),n.stateNode.current===n?e:t}function rn(e){if(!(e=nn(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function on(e){if(!(e=nn(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=ce.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ln=ce.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),un=Qt.extend({relatedTarget:null});function cn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn=Qt.extend({key:function(e){if(e.key){var t=sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=cn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gt,charCode:function(e){return"keypress"===e.type?cn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?cn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pn=Yt.extend({dataTransfer:null}),hn=Qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gt}),mn=ce.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gn=Yt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),vn={},yn={};function bn(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n;t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n="top"+n],isInteractive:t},vn[e]=t,yn[n]=t}"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(e){bn(e,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(e){bn(e,!1)});var Cn={eventTypes:vn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var o=yn[e];if(!o)return null;switch(e){case"topKeyPress":if(0===cn(n))return null;case"topKeyDown":case"topKeyUp":e=dn;break;case"topBlur":case"topFocus":e=un;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Yt;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=pn;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=hn;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=an;break;case"topTransitionEnd":e=mn;break;case"topScroll":e=Qt;break;case"topWheel":e=gn;break;case"topCopy":case"topCut":case"topPaste":e=ln;break;default:e=ce}return J(t=e.getPooled(o,t,n,r)),t}},xn=Cn.isInteractiveTopLevelEventType,kn=[];function wn(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=B(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],z(e.topLevelType,t,e.nativeEvent,Ke(e.nativeEvent))}var Tn=!0;function En(e){Tn=!!e}function Sn(e,t,n){if(!n)return null;e=(xn(e)?Pn:Nn).bind(null,e),n.addEventListener(t,e,!1)}function _n(e,t,n){if(!n)return null;e=(xn(e)?Pn:Nn).bind(null,e),n.addEventListener(t,e,!0)}function Pn(e,t){He(Nn,e,t)}function Nn(e,t){if(Tn){var n=Ke(t);if(null!==(n=B(n))&&"number"==typeof n.tag&&2!==Jt(n)&&(n=null),kn.length){var r=kn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Be(wn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>kn.length&&kn.push(e)}}}var In=Object.freeze({get _enabled(){return Tn},setEnabled:En,isEnabled:function(){return Tn},trapBubbledEvent:Sn,trapCapturedEvent:_n,dispatchEvent:Nn});function Fn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var Mn={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionend:Fn("Transition","TransitionEnd")},Dn={},Rn={};function Un(e){if(Dn[e])return Dn[e];if(!Mn[e])return e;var t,n=Mn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rn)return Dn[e]=n[t];return e}n.canUseDOM&&(Rn=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);var On={topAnimationEnd:Un("animationend"),topAnimationIteration:Un("animationiteration"),topAnimationStart:Un("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Un("transitionend"),topWheel:"wheel"},zn={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Ln={},Hn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function Vn(e){return Object.prototype.hasOwnProperty.call(e,An)||(e[An]=Hn++,Ln[e[An]]={}),Ln[e[An]]}function Bn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wn(e,t){var n,r=Bn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bn(r)}}function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}var Kn=n.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Qn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},qn=null,$n=null,Gn=null,Yn=!1;function Xn(e,t){if(Yn||null==qn||qn!==a())return null;var n=qn;return"selectionStart"in n&&jn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,Gn&&i(Gn,n)?null:(Gn=n,(e=ce.getPooled(Qn.select,$n,e,t)).type="select",e.target=qn,J(e),e)}var Zn={eventTypes:Qn,extractEvents:function(e,t,n,r){var o,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(o=!a)){e:{a=Vn(a),o=C.onSelect;for(var i=0;i<o.length;i++){var l=o[i];if(!a.hasOwnProperty(l)||!a[l]){a=!1;break e}}a=!0}o=!a}if(o)return null;switch(a=t?W(t):window,e){case"topFocus":(je(a)||"true"===a.contentEditable)&&(qn=a,$n=t,Gn=null);break;case"topBlur":Gn=$n=qn=null;break;case"topMouseDown":Yn=!0;break;case"topContextMenu":case"topMouseUp":return Yn=!1,Xn(n,r);case"topSelectionChange":if(Kn)break;case"topKeyDown":case"topKeyUp":return Xn(n,r)}return null}};function Jn(e,t,n,r){this.tag=e,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function er(e,t,n){var r=e.alternate;return null===r?((r=new Jn(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function tr(e,t,n){var r=e.type,o=e.key;e=e.props;var a=void 0;if("function"==typeof r)a=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"==typeof r)a=5;else switch(r){case rt:return nr(e.children,t,n,o);case lt:a=11,t|=3;break;case ot:a=11,t|=2;break;case et:a=7;break;case tt:a=9;break;default:if("object"==typeof r&&null!==r)switch(r.$$typeof){case at:a=13;break;case it:a=12;break;case ut:a=14;break;default:if("number"==typeof r.tag)return(t=r).pendingProps=e,t.expirationTime=n,t;c("130",null==r?r:typeof r,"")}else c("130",null==r?r:typeof r,"")}return(t=new Jn(a,e,o,t)).type=r,t.expirationTime=n,t}function nr(e,t,n,r){return(e=new Jn(10,e,r,t)).expirationTime=n,e}function rr(e,t,n){return(e=new Jn(6,e,null,t)).expirationTime=n,e}function or(e,t,n){return(t=new Jn(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}R.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=K.getFiberCurrentPropsFromNode,E=K.getInstanceFromNode,S=K.getNodeFromInstance,R.injectEventPluginsByName({SimpleEventPlugin:Cn,EnterLeaveEventPlugin:Zt,ChangeEventPlugin:Kt,SelectEventPlugin:Zn,BeforeInputEventPlugin:Pe});var ar=null,ir=null;function lr(e){return function(t){try{return e(t)}catch(e){}}}function ur(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ar=lr(function(e){return t.onCommitFiberRoot(n,e)}),ir=lr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function cr(e){"function"==typeof ar&&ar(e)}function sr(e){"function"==typeof ir&&ir(e)}function fr(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function dr(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}new Set;var pr=void 0,hr=void 0;function mr(e){pr=hr=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=fr(null)),null!==t?null===(e=t.updateQueue)&&(e=t.updateQueue=fr(null)):e=null,pr=n,hr=e!==n?e:null}function gr(e,t){mr(e),e=pr;var n=hr;null===n?dr(e,t):null===e.last||null===n.last?(dr(e,t),dr(n,t)):(dr(e,t),n.last=t)}function vr(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}function yr(e,t,n,o,a,i){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var l=!0,u=n.first,c=!1;null!==u;){var s=u.expirationTime;if(s>i){var f=n.expirationTime;(0===f||f>s)&&(n.expirationTime=s),c||(c=!0,n.baseState=e)}else c||(n.first=u.next,null===n.first&&(n.last=null)),u.isReplace?(e=vr(u,o,e,a),l=!0):(s=vr(u,o,e,a))&&(e=l?r({},e,s):r(e,s),l=!1),u.isForced&&(n.hasForceUpdate=!0),null!==u.callback&&(null===(s=n.callbackList)&&(s=n.callbackList=[]),s.push(u)),null!==u.capturedValue&&(null===(s=n.capturedValues)?n.capturedValues=[u.capturedValue]:s.push(u.capturedValue));u=u.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),c||(n.baseState=e),e}function br(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],o=r.callback;r.callback=null,"function"!=typeof o&&c("191",o),o.call(t)}}function Cr(e,t,n,o,a){function l(e,t,n,r,o,a){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var l=e.stateNode;return e=e.type,"function"==typeof l.shouldComponentUpdate?l.shouldComponentUpdate(n,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!i(t,n)||!i(r,o))}function c(e,t){t.updater=v,e.stateNode=t,t._reactInternalFiber=e}function s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&v.enqueueReplaceState(t,t.state,null)}function f(e,t,n,r){if("function"==typeof(e=e.type).getDerivedStateFromProps)return e.getDerivedStateFromProps.call(null,n,r)}var d=e.cacheContext,p=e.getMaskedContext,h=e.getUnmaskedContext,m=e.isContextConsumer,g=e.hasContextChanged,v={isMounted:en,enqueueSetState:function(e,r,o){e=e._reactInternalFiber,o=void 0===o?null:o;var a=n(e);gr(e,{expirationTime:a,partialState:r,callback:o,isReplace:!1,isForced:!1,capturedValue:null,next:null}),t(e,a)},enqueueReplaceState:function(e,r,o){e=e._reactInternalFiber,o=void 0===o?null:o;var a=n(e);gr(e,{expirationTime:a,partialState:r,callback:o,isReplace:!0,isForced:!1,capturedValue:null,next:null}),t(e,a)},enqueueForceUpdate:function(e,r){e=e._reactInternalFiber,r=void 0===r?null:r;var o=n(e);gr(e,{expirationTime:o,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),t(e,o)}};return{adoptClassInstance:c,callGetDerivedStateFromProps:f,constructClassInstance:function(e,t){var n=e.type,o=h(e),a=m(e),i=a?p(e,o):u,l=null!==(n=new n(t,i)).state&&void 0!==n.state?n.state:null;return c(e,n),e.memoizedState=l,null!==(t=f(e,0,t,l))&&void 0!==t&&(e.memoizedState=r({},e.memoizedState,t)),a&&d(e,o,i),n},mountClassInstance:function(e,t){var n=e.type,r=e.alternate,o=e.stateNode,a=e.pendingProps,i=h(e);o.props=a,o.state=e.memoizedState,o.refs=u,o.context=p(e,i),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(n=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),n!==o.state&&v.enqueueReplaceState(o,o.state,null),null!==(n=e.updateQueue)&&(o.state=yr(r,e,n,o,a,t))),"function"==typeof o.componentDidMount&&(e.effectTag|=4)},resumeMountClassInstance:function(e,t){var n=e.type,i=e.stateNode;i.props=e.memoizedProps,i.state=e.memoizedState;var u=e.memoizedProps,c=e.pendingProps,d=i.context,m=h(e);m=p(e,m),(n="function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(u!==c||d!==m)&&s(e,i,c,m),d=e.memoizedState,t=null!==e.updateQueue?yr(null,e,e.updateQueue,i,c,t):d;var v=void 0;if(u!==c&&(v=f(e,0,c,t)),null!==v&&void 0!==v){t=null===t||void 0===t?v:r({},t,v);var y=e.updateQueue;null!==y&&(y.baseState=r({},y.baseState,v))}return u!==c||d!==t||g()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((u=l(e,u,c,d,t,m))?(n||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(e.effectTag|=4)):("function"==typeof i.componentDidMount&&(e.effectTag|=4),o(e,c),a(e,t)),i.props=c,i.state=t,i.context=m,u):("function"==typeof i.componentDidMount&&(e.effectTag|=4),!1)},updateClassInstance:function(e,t,n){var i=t.type,u=t.stateNode;u.props=t.memoizedProps,u.state=t.memoizedState;var c=t.memoizedProps,d=t.pendingProps,m=u.context,v=h(t);v=p(t,v),(i="function"==typeof i.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(c!==d||m!==v)&&s(t,u,d,v),m=t.memoizedState,n=null!==t.updateQueue?yr(e,t,t.updateQueue,u,d,n):m;var y=void 0;if(c!==d&&(y=f(t,0,d,n)),null!==y&&void 0!==y){n=null===n||void 0===n?y:r({},n,y);var b=t.updateQueue;null!==b&&(b.baseState=r({},b.baseState,y))}return c!==d||m!==n||g()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((y=l(t,c,d,m,n,v))?(i||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(d,n,v),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(d,n,v)),"function"==typeof u.componentDidUpdate&&(t.effectTag|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(t.effectTag|=2048)):("function"!=typeof u.componentDidUpdate||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!=typeof u.getSnapshotBeforeUpdate||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),o(t,d),a(t,n)),u.props=d,u.state=n,u.context=v,y):("function"!=typeof u.componentDidUpdate||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!=typeof u.getSnapshotBeforeUpdate||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),!1)}}}var xr=Array.isArray;function kr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){var r=void 0;(n=n._owner)&&(2!==n.tag&&c("110"),r=n.stateNode),r||c("147",e);var o=""+e;return null!==t&&null!==t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs===u?r.refs={}:r.refs;null===e?delete t[o]:t[o]=e})._stringRef=o,t)}"string"!=typeof e&&c("148"),n._owner||c("254",e)}return e}function wr(e,t){"textarea"!==e.type&&c("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Tr(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return(e=er(e,t,n)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=rr(n,e.mode,r)).return=e,t):((t=o(t,n,r)).return=e,t)}function u(e,t,n,r){return null!==t&&t.type===n.type?((r=o(t,n.props,r)).ref=kr(e,t,n),r.return=e,r):((r=tr(n,e.mode,r)).ref=kr(e,t,n),r.return=e,r)}function s(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=or(n,e.mode,r)).return=e,t):((t=o(t,n.children||[],r)).return=e,t)}function f(e,t,n,r,a){return null===t||10!==t.tag?((t=nr(n,e.mode,r,a)).return=e,t):((t=o(t,n,r)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=rr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Je:return(n=tr(t,e.mode,n)).ref=kr(e,null,t),n.return=e,n;case nt:return(t=or(t,e.mode,n)).return=e,t}if(xr(t)||st(t))return(t=nr(t,e.mode,n,null)).return=e,t;wr(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Je:return n.key===o?n.type===rt?f(e,t,n.props.children,r,o):u(e,t,n,r):null;case nt:return n.key===o?s(e,t,n,r):null}if(xr(n)||st(n))return null!==o?null:f(e,t,n,r,null);wr(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Je:return e=e.get(null===r.key?n:r.key)||null,r.type===rt?f(t,e,r.props.children,o,r.key):u(t,e,r,o);case nt:return s(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(xr(r)||st(r))return f(t,e=e.get(n)||null,r,o,null);wr(t,r)}return null}function m(o,i,l,u){for(var c=null,s=null,f=i,m=i=0,g=null;null!==f&&m<l.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=p(o,f,l[m],u);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(o,f),i=a(v,i,m),null===s?c=v:s.sibling=v,s=v,f=g}if(m===l.length)return n(o,f),c;if(null===f){for(;m<l.length;m++)(f=d(o,l[m],u))&&(i=a(f,i,m),null===s?c=f:s.sibling=f,s=f);return c}for(f=r(o,f);m<l.length;m++)(g=h(f,o,m,l[m],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),i=a(g,i,m),null===s?c=g:s.sibling=g,s=g);return e&&f.forEach(function(e){return t(o,e)}),c}function g(o,i,l,u){var s=st(l);"function"!=typeof s&&c("150"),null==(l=s.call(l))&&c("151");for(var f=s=null,m=i,g=i=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(o,m,y.value,u);if(null===b){m||(m=v);break}e&&m&&null===b.alternate&&t(o,m),i=a(b,i,g),null===f?s=b:f.sibling=b,f=b,m=v}if(y.done)return n(o,m),s;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(o,y.value,u))&&(i=a(y,i,g),null===f?s=y:f.sibling=y,f=y);return s}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=h(m,o,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),i=a(y,i,g),null===f?s=y:f.sibling=y,f=y);return e&&m.forEach(function(e){return t(o,e)}),s}return function(e,r,a,l){"object"==typeof a&&null!==a&&a.type===rt&&null===a.key&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case Je:e:{var s=a.key;for(u=r;null!==u;){if(u.key===s){if(10===u.tag?a.type===rt:u.type===a.type){n(e,u.sibling),(r=o(u,a.type===rt?a.props.children:a.props,l)).ref=kr(e,u,a),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===rt?((r=nr(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=tr(a,e.mode,l)).ref=kr(e,r,a),l.return=e,e=l)}return i(e);case nt:e:{for(u=a.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=o(r,a.children||[],l)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=or(a,e.mode,l)).return=e,e=r}return i(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,a,l)).return=e,e=r):(n(e,r),(r=rr(a,e.mode,l)).return=e,e=r),i(e);if(xr(a))return m(e,r,a,l);if(st(a))return g(e,r,a,l);if(u&&wr(e,a),void 0===a)switch(e.tag){case 2:case 1:c("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var Er=Tr(!0),Sr=Tr(!1);function _r(e,t,n,o,a,i,l){function u(e,t,n){s(e,t,n,t.expirationTime)}function s(e,t,n,r){t.child=null===e?Sr(t,null,n,r):Er(t,e.child,n,r)}function f(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function d(e,t,n,r,o,a){if(f(e,t),!n&&!o)return r&&S(t,!1),m(e,t);n=t.stateNode,Xe.current=t;var i=o?null:n.render();return t.effectTag|=1,o&&(s(e,t,null,a),t.child=null),s(e,t,i,a),t.memoizedState=n.state,t.memoizedProps=n.props,r&&S(t,!0),t.child}function p(e){var t=e.stateNode;t.pendingContext?E(e,t.pendingContext,t.pendingContext!==t.context):t.context&&E(e,t.context,!1),b(e,t.containerInfo)}function h(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){switch(o.tag){case 12:var a=0|o.stateNode;if(o.type===t&&0!=(a&n)){for(a=o;null!==a;){var i=a.alternate;if(0===a.expirationTime||a.expirationTime>r)a.expirationTime=r,null!==i&&(0===i.expirationTime||i.expirationTime>r)&&(i.expirationTime=r);else{if(null===i||!(0===i.expirationTime||i.expirationTime>r))break;i.expirationTime=r}a=a.return}a=null}else a=o.child;break;case 13:a=o.type===e.type?null:o.child;break;default:a=o.child}if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){a=o;break}a=a.return}o=a}}function m(e,t){if(null!==e&&t.child!==e.child&&c("153"),null!==t.child){var n=er(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=er(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}var g=e.shouldSetTextContent,v=e.shouldDeprioritizeSubtree,y=t.pushHostContext,b=t.pushHostContainer,C=o.pushProvider,x=n.getMaskedContext,k=n.getUnmaskedContext,w=n.hasContextChanged,T=n.pushContextProvider,E=n.pushTopLevelContextObject,S=n.invalidateContextProvider,_=a.enterHydrationState,P=a.resetHydrationState,N=a.tryToClaimNextHydratableInstance,I=(e=Cr(n,i,l,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,F=e.callGetDerivedStateFromProps,M=e.constructClassInstance,D=e.mountClassInstance,R=e.resumeMountClassInstance,U=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:p(t);break;case 2:T(t);break;case 4:b(t,t.stateNode.containerInfo);break;case 13:C(t)}return null}switch(t.tag){case 0:null!==e&&c("155");var o=t.type,a=t.pendingProps,i=k(t);return o=o(a,i=x(t,i)),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(i=t.type,t.tag=2,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,"function"==typeof i.getDerivedStateFromProps&&(null!==(a=F(t,o,a,t.memoizedState))&&void 0!==a&&(t.memoizedState=r({},t.memoizedState,a))),a=T(t),I(t,o),D(t,n),e=d(e,t,!0,a,!1,n)):(t.tag=1,u(e,t,o),t.memoizedProps=a,e=t.child),e;case 1:return a=t.type,n=t.pendingProps,w()||t.memoizedProps!==n?(o=k(t),a=a(n,o=x(t,o)),t.effectTag|=1,u(e,t,a),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 2:a=T(t),null===e?null===t.stateNode?(M(t,t.pendingProps),D(t,n),o=!0):o=R(t,n):o=U(e,t,n),i=!1;var l=t.updateQueue;return null!==l&&null!==l.capturedValues&&(i=o=!0),d(e,t,o,a,i,n);case 3:e:if(p(t),o=t.updateQueue,null!==o){if(i=t.memoizedState,a=yr(e,t,o,null,null,n),t.memoizedState=a,null!==(o=t.updateQueue)&&null!==o.capturedValues)o=null;else{if(i===a){P(),e=m(e,t);break e}o=a.element}i=t.stateNode,(null===e||null===e.child)&&i.hydrate&&_(t)?(t.effectTag|=2,t.child=Sr(t,null,o,n)):(P(),u(e,t,o)),t.memoizedState=a,e=t.child}else P(),e=m(e,t);return e;case 5:return y(t),null===e&&N(t),a=t.type,l=t.memoizedProps,o=t.pendingProps,i=null!==e?e.memoizedProps:null,w()||l!==o||((l=1&t.mode&&v(a,o))&&(t.expirationTime=1073741823),l&&1073741823===n)?(l=o.children,g(a,o)?l=null:i&&g(a,i)&&(t.effectTag|=16),f(e,t),1073741823!==n&&1&t.mode&&v(a,o)?(t.expirationTime=1073741823,t.memoizedProps=o,e=null):(u(e,t,l),t.memoizedProps=o,e=t.child)):e=m(e,t),e;case 6:return null===e&&N(t),t.memoizedProps=t.pendingProps,null;case 8:t.tag=7;case 7:return a=t.pendingProps,w()||t.memoizedProps!==a||(a=t.memoizedProps),o=a.children,t.stateNode=null===e?Sr(t,t.stateNode,o,n):Er(t,e.stateNode,o,n),t.memoizedProps=a,t.stateNode;case 9:return null;case 4:return b(t,t.stateNode.containerInfo),a=t.pendingProps,w()||t.memoizedProps!==a?(null===e?t.child=Er(t,null,a,n):u(e,t,a),t.memoizedProps=a,e=t.child):e=m(e,t),e;case 14:return u(e,t,n=(n=t.type.render)(t.pendingProps,t.ref)),t.memoizedProps=n,t.child;case 10:return n=t.pendingProps,w()||t.memoizedProps!==n?(u(e,t,n),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 11:return n=t.pendingProps.children,w()||null!==n&&t.memoizedProps!==n?(u(e,t,n),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 13:return function(e,t,n){var r=t.type._context,o=t.pendingProps,a=t.memoizedProps;if(!w()&&a===o)return t.stateNode=0,C(t),m(e,t);var i=o.value;if(t.memoizedProps=o,null===a)i=1073741823;else if(a.value===o.value){if(a.children===o.children)return t.stateNode=0,C(t),m(e,t);i=0}else{var l=a.value;if(l===i&&(0!==l||1/l==1/i)||l!=l&&i!=i){if(a.children===o.children)return t.stateNode=0,C(t),m(e,t);i=0}else if(i="function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823,0==(i|=0)){if(a.children===o.children)return t.stateNode=0,C(t),m(e,t)}else h(t,r,i,n)}return t.stateNode=i,C(t),u(e,t,o.children),t.child}(e,t,n);case 12:e:{o=t.type,i=t.pendingProps,l=t.memoizedProps,a=o._currentValue;var s=o._changedBits;if(w()||0!==s||l!==i){t.memoizedProps=i;var E=i.unstable_observedBits;if(void 0!==E&&null!==E||(E=1073741823),t.stateNode=E,0!=(s&E))h(t,o,s,n);else if(l===i){e=m(e,t);break e}u(e,t,n=(n=i.children)(a)),e=t.child}else e=m(e,t)}return e;default:c("156")}}}}function Pr(e,t,n,r,o){function a(e){e.effectTag|=4}var i=e.createInstance,l=e.createTextInstance,u=e.appendInitialChild,s=e.finalizeInitialChildren,f=e.prepareUpdate,d=e.persistence,p=t.getRootHostContainer,h=t.popHostContext,m=t.getHostContext,g=t.popHostContainer,v=n.popContextProvider,y=n.popTopLevelContextObject,b=r.popProvider,C=o.prepareToHydrateHostInstance,x=o.prepareToHydrateHostTextInstance,k=o.popHydrationState,w=void 0,T=void 0,E=void 0;return e.mutation?(w=function(){},T=function(e,t,n){(t.updateQueue=n)&&a(t)},E=function(e,t,n,r){n!==r&&a(t)}):c(d?"235":"236"),{completeWork:function(e,t,n){var r=t.pendingProps;switch(t.tag){case 1:return null;case 2:return v(t),e=t.stateNode,null!==(r=t.updateQueue)&&null!==r.capturedValues&&(t.effectTag&=-65,"function"==typeof e.componentDidCatch?t.effectTag|=256:r.capturedValues=null),null;case 3:return g(t),y(t),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(k(t),t.effectTag&=-3),w(t),null!==(e=t.updateQueue)&&null!==e.capturedValues&&(t.effectTag|=256),null;case 5:h(t),n=p();var o=t.type;if(null!==e&&null!=t.stateNode){var d=e.memoizedProps,S=t.stateNode,_=m();S=f(S,o,d,r,n,_),T(e,t,S,o,d,r,n,_),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!r)return null===t.stateNode&&c("166"),null;if(e=m(),k(t))C(t,n,e)&&a(t);else{d=i(o,r,n,e,t);e:for(_=t.child;null!==_;){if(5===_.tag||6===_.tag)u(d,_.stateNode);else if(4!==_.tag&&null!==_.child){_.child.return=_,_=_.child;continue}if(_===t)break;for(;null===_.sibling;){if(null===_.return||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s(d,o,r,n,e)&&a(t),t.stateNode=d}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)E(e,t,e.memoizedProps,r);else{if("string"!=typeof r)return null===t.stateNode&&c("166"),null;e=p(),n=m(),k(t)?x(t)&&a(t):t.stateNode=l(r,e,n,t)}return null;case 7:(r=t.memoizedProps)||c("165"),t.tag=8,o=[];e:for((d=t.stateNode)&&(d.return=t);null!==d;){if(5===d.tag||6===d.tag||4===d.tag)c("247");else if(9===d.tag)o.push(d.pendingProps.value);else if(null!==d.child){d.child.return=d,d=d.child;continue}for(;null===d.sibling;){if(null===d.return||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}return r=(d=r.handler)(r.props,o),t.child=Er(t,null!==e?e.child:null,r,n),t.child;case 8:return t.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return g(t),w(t),null;case 13:return b(t),null;case 12:return null;case 0:c("167");default:c("156")}}}}function Nr(e,t,n,r,o){var a=e.popHostContainer,i=e.popHostContext,l=t.popContextProvider,u=t.popTopLevelContextObject,c=n.popProvider;return{throwException:function(e,t,n){t.effectTag|=512,t.firstEffect=t.lastEffect=null,t={value:n,source:t,stack:dt(t)};do{switch(e.tag){case 3:return mr(e),e.updateQueue.capturedValues=[t],void(e.effectTag|=1024);case 2:if(n=e.stateNode,0==(64&e.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&!o(n)){mr(e);var r=(n=e.updateQueue).capturedValues;return null===r?n.capturedValues=[t]:r.push(t),void(e.effectTag|=1024)}}e=e.return}while(null!==e)},unwindWork:function(e){switch(e.tag){case 2:l(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return a(e),u(e),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return i(e),null;case 4:return a(e),null;case 13:return c(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case 2:l(e);break;case 3:a(e),u(e);break;case 5:i(e);break;case 4:a(e);break;case 13:c(e)}}}}function Ir(e,t){var n=t.source;null===t.stack&&dt(n),null!==n&&ft(n),t=t.value,null!==e&&2===e.tag&&ft(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function Fr(e,t,n,r,o){function a(e){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){t(e,n)}else n.current=null}function i(e){switch("function"==typeof sr&&sr(e),e.tag){case 2:a(e);var n=e.stateNode;if("function"==typeof n.componentWillUnmount)try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(n){t(e,n)}break;case 5:a(e);break;case 7:l(e.stateNode);break;case 4:d&&s(e)}}function l(e){for(var t=e;;)if(i(t),null===t.child||d&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function u(e){return 5===e.tag||3===e.tag||4===e.tag}function s(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&c("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)l(t),o?k(r,t.stateNode):x(r,t.stateNode);else if(4===t.tag?r=t.stateNode.containerInfo:i(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var f=e.getPublicInstance,d=e.mutation;e=e.persistence,d||c(e?"235":"236");var p=d.commitMount,h=d.commitUpdate,m=d.resetTextContent,g=d.commitTextUpdate,v=d.appendChild,y=d.appendChildToContainer,b=d.insertBefore,C=d.insertInContainerBefore,x=d.removeChild,k=d.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(e,t){switch(t.tag){case 2:if(2048&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;(e=t.stateNode).props=t.memoizedProps,e.state=t.memoizedState,t=e.getSnapshotBeforeUpdate(n,r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:break;default:c("163")}},commitResetTextContent:function(e){m(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(u(t)){var n=t;break e}t=t.return}c("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:c("161")}16&n.effectTag&&(m(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||u(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)n?r?C(t,o.stateNode,n):b(t,o.stateNode,n):r?y(t,o.stateNode):v(t,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){s(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&h(n,a,o,e,r,t)}break;case 6:null===t.stateNode&&c("162"),n=t.memoizedProps,g(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:c("163")}},commitLifeCycles:function(e,t,n){switch(n.tag){case 2:if(e=n.stateNode,4&n.effectTag)if(null===t)e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidMount();else{var r=t.memoizedProps;t=t.memoizedState,e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}null!==(n=n.updateQueue)&&br(n,e);break;case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=f(n.child.stateNode);break;case 2:e=n.child.stateNode}br(t,e)}break;case 5:e=n.stateNode,null===t&&4&n.effectTag&&p(e,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:c("163")}},commitErrorLogging:function(e,t){switch(e.tag){case 2:var n=e.type;t=e.stateNode;var r=e.updateQueue;(null===r||null===r.capturedValues)&&c("264");var a=r.capturedValues;for(r.capturedValues=null,"function"!=typeof n.getDerivedStateFromCatch&&o(t),t.props=e.memoizedProps,t.state=e.memoizedState,n=0;n<a.length;n++){var i=(r=a[n]).value,l=r.stack;Ir(e,r),t.componentDidCatch(i,{componentStack:null!==l?l:""})}break;case 3:for((null===(n=e.updateQueue)||null===n.capturedValues)&&c("264"),a=n.capturedValues,n.capturedValues=null,n=0;n<a.length;n++)Ir(e,r=a[n]),t(r.value);break;default:c("265")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=f(n);break;default:e=n}"function"==typeof t?t(e):t.current=e}},commitDetachRef:function(e){null!==(e=e.ref)&&("function"==typeof e?e(null):e.current=null)}}}var Mr={};function Dr(e,t){function n(e){return e===Mr&&c("174"),e}var r=e.getChildHostContext,o=e.getRootHostContext;e=t.createCursor;var a=t.push,i=t.pop,l=e(Mr),u=e(Mr),s=e(Mr);return{getHostContext:function(){return n(l.current)},getRootHostContainer:function(){return n(s.current)},popHostContainer:function(e){i(l,e),i(u,e),i(s,e)},popHostContext:function(e){u.current===e&&(i(l,e),i(u,e))},pushHostContainer:function(e,t){a(s,t,e),a(u,e,e),a(l,Mr,e),t=o(t),i(l,e),a(l,t,e)},pushHostContext:function(e){var t=n(s.current),o=n(l.current);o!==(t=r(o,e.type,t))&&(a(u,e,e),a(l,t,e))}}}function Rr(e){function t(e,t){var n=new Jn(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=i(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function r(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;d=e}var o=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){c("175")},prepareToHydrateHostTextInstance:function(){c("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,i=e.canHydrateTextInstance,l=e.getNextHydratableSibling,u=e.getFirstHydratableChild,s=e.hydrateInstance,f=e.hydrateTextInstance,d=null,p=null,h=!1;return{enterHydrationState:function(e){return p=u(e.stateNode.containerInfo),d=e,h=!0},resetHydrationState:function(){p=d=null,h=!1},tryToClaimNextHydratableInstance:function(e){if(h){var r=p;if(r){if(!n(e,r)){if(!(r=l(r))||!n(e,r))return e.effectTag|=2,h=!1,void(d=e);t(d,p)}d=e,p=u(r)}else e.effectTag|=2,h=!1,d=e}},prepareToHydrateHostInstance:function(e,t,n){return t=s(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return f(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==d)return!1;if(!h)return r(e),h=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=p;n;)t(e,n),n=l(n);return r(e),p=d?l(e.stateNode):null,!0}}}function Ur(e){function t(e,t,n){(e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function n(e){return 2===e.tag&&null!=e.type.childContextTypes}function o(e,t){var n=e.stateNode,o=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var a in n=n.getChildContext())a in o||c("108",ft(e)||"Unknown",a);return r({},t,n)}var a=e.createCursor,i=e.push,l=e.pop,s=a(u),f=a(!1),d=u;return{getUnmaskedContext:function(e){return n(e)?d:s.current},cacheContext:t,getMaskedContext:function(e,n){var r=e.type.contextTypes;if(!r)return u;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===n)return o.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=n[a];return o&&t(e,n,i),i},hasContextChanged:function(){return f.current},isContextConsumer:function(e){return 2===e.tag&&null!=e.type.contextTypes},isContextProvider:n,popContextProvider:function(e){n(e)&&(l(f,e),l(s,e))},popTopLevelContextObject:function(e){l(f,e),l(s,e)},pushTopLevelContextObject:function(e,t,n){null!=s.cursor&&c("168"),i(s,t,e),i(f,n,e)},processChildContext:o,pushContextProvider:function(e){if(!n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||u,d=s.current,i(s,t,e),i(f,f.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||c("169"),t){var r=o(e,d);n.__reactInternalMemoizedMergedChildContext=r,l(f,e),l(s,e),i(s,r,e)}else l(f,e);i(f,t,e)},findCurrentUnmaskedContext:function(e){for((2!==Jt(e)||2!==e.tag)&&c("170");3!==e.tag;){if(n(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||c("171")}return e.stateNode.context}}}function Or(e){var t=e.createCursor,n=e.push,r=e.pop,o=t(null),a=t(null),i=t(0);return{pushProvider:function(e){var t=e.type._context;n(i,t._changedBits,e),n(a,t._currentValue,e),n(o,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode},popProvider:function(e){var t=i.current,n=a.current;r(o,e),r(a,e),r(i,e),(e=e.type._context)._currentValue=n,e._changedBits=t}}}function zr(){var e=[],t=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===t},pop:function(n){0>t||(n.current=e[t],e[t]=null,t--)},push:function(n,r){e[++t]=n.current,n.current=r},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function Lr(e){function t(){if(null!==Z)for(var e=Z.return;null!==e;)M(e),e=e.return;J=null,ee=0,Z=null,re=!1}function n(e){return null!==oe&&oe.has(e)}function r(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){t=N(t,e,ee);var o=e;if(1073741823===ee||1073741823!==o.expirationTime){e:switch(o.tag){case 3:case 2:var a=o.updateQueue;a=null===a?0:a.expirationTime;break e;default:a=0}for(var i=o.child;null!==i;)0!==i.expirationTime&&(0===a||a>i.expirationTime)&&(a=i.expirationTime),i=i.sibling;o.expirationTime=a}if(null!==t)return t;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){re=!0;break}e=n}else{if(null!==(e=F(e)))return e.effectTag&=2559,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function o(e){var t=P(e.alternate,e,ee);return null===t&&(t=r(e)),Xe.current=null,t}function a(e,n,a){X&&c("243"),X=!0,n===ee&&e===J&&null!==Z||(t(),ee=n,Z=er((J=e).current,null,ee),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(a)for(;null!==Z&&!k();)Z=o(Z);else for(;null!==Z;)Z=o(Z)}catch(e){if(null===Z){i=!0,w(e);break}var l=(a=Z).return;if(null===l){i=!0,w(e);break}I(l,a,e),Z=r(a)}break}return X=!1,i||null!==Z?null:re?(e.pendingCommitExpirationTime=n,e.current.alternate):void c("262")}function i(e,t,n,r){gr(t,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:e={value:n,source:e,stack:dt(e)},next:null}),s(t,r)}function l(e,t){e:{X&&!ne&&c("263");for(var r=e.return;null!==r;){switch(r.tag){case 2:var o=r.stateNode;if("function"==typeof r.type.getDerivedStateFromCatch||"function"==typeof o.componentDidCatch&&!n(o)){i(e,r,t,1),e=void 0;break e}break;case 3:i(e,r,t,1),e=void 0;break e}r=r.return}3===e.tag&&i(e,e,t,1),e=void 0}return e}function u(e){return e=0!==Y?Y:X?ne?1:ee:1&e.mode?be?10*(1+((f()+15)/10|0)):25*(1+((f()+500)/25|0)):1,be&&(0===de||e>de)&&(de=e),e}function s(e,n){e:{for(;null!==e;){if((0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>n)&&(e.alternate.expirationTime=n),null===e.return){if(3!==e.tag){n=void 0;break e}var r=e.stateNode;!X&&0!==ee&&n<ee&&t(),X&&!ne&&J===r||h(r,n),ke>xe&&c("185")}e=e.return}n=void 0}return n}function f(){return $=B()-q,2+($/10|0)}function d(e,t,n,r,o){var a=Y;Y=1;try{return e(t,n,r,o)}finally{Y=a}}function p(e){if(0!==le){if(e>le)return;j(ue)}var t=B()-q;le=e,ue=W(g,{timeout:10*(e-2)-t})}function h(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===ie?(ae=ie=e,e.nextScheduledRoot=e):(ie=ie.nextScheduledRoot=e).nextScheduledRoot=ae;else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}ce||(ve?ye&&(se=e,fe=1,C(e,1,!1)):1===t?v():p(t))}function m(){var e=0,t=null;if(null!==ie)for(var n=ie,r=ae;null!==r;){var o=r.remainingExpirationTime;if(0===o){if((null===n||null===ie)&&c("244"),r===r.nextScheduledRoot){ae=ie=r.nextScheduledRoot=null;break}if(r===ae)ae=o=r.nextScheduledRoot,ie.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===ie){(ie=n).nextScheduledRoot=ae,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=r),r===ie)break;n=r,r=r.nextScheduledRoot}}null!==(n=se)&&n===t&&1===e?ke++:ke=0,se=t,fe=e}function g(e){y(0,!0,e)}function v(){y(1,!1,null)}function y(e,t,n){if(ge=n,m(),t)for(;null!==se&&0!==fe&&(0===e||e>=fe)&&(!pe||f()>=fe);)C(se,fe,!pe),m();else for(;null!==se&&0!==fe&&(0===e||e>=fe);)C(se,fe,!1),m();null!==ge&&(le=0,ue=-1),0!==fe&&p(fe),ge=null,pe=!1,b()}function b(){if(ke=0,null!==Ce){var e=Ce;Ce=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){he||(he=!0,me=e)}}}if(he)throw e=me,me=null,he=!1,e}function C(e,t,n){ce&&c("245"),ce=!0,n?null!==(n=e.finishedWork)?x(e,n,t):(e.finishedWork=null,null!==(n=a(e,t,!0))&&(k()?e.finishedWork=n:x(e,n,t))):null!==(n=e.finishedWork)?x(e,n,t):(e.finishedWork=null,null!==(n=a(e,t,!1))&&x(e,n,t)),ce=!1}function x(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Ce?Ce=[r]:Ce.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);e.finishedWork=null,ne=X=!0,(n=t.stateNode).current===t&&c("177"),0===(r=n.pendingCommitExpirationTime)&&c("261"),n.pendingCommitExpirationTime=0;var o=f();if(Xe.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var a=t.firstEffect}else a=t;else a=t.firstEffect;for(K(n.containerInfo),te=a;null!==te;){var i=!1,u=void 0;try{for(;null!==te;)2048&te.effectTag&&D(te.alternate,te),te=te.nextEffect}catch(e){i=!0,u=e}i&&(null===te&&c("178"),l(te,u),null!==te&&(te=te.nextEffect))}for(te=a;null!==te;){i=!1,u=void 0;try{for(;null!==te;){var s=te.effectTag;if(16&s&&R(te),128&s){var d=te.alternate;null!==d&&V(d)}switch(14&s){case 2:U(te),te.effectTag&=-3;break;case 6:U(te),te.effectTag&=-3,z(te.alternate,te);break;case 4:z(te.alternate,te);break;case 8:O(te)}te=te.nextEffect}}catch(e){i=!0,u=e}i&&(null===te&&c("178"),l(te,u),null!==te&&(te=te.nextEffect))}for(Q(n.containerInfo),n.current=t,te=a;null!==te;){s=!1,d=void 0;try{for(a=n,i=o,u=r;null!==te;){var p=te.effectTag;36&p&&L(a,te.alternate,te,i,u),256&p&&H(te,w),128&p&&A(te);var h=te.nextEffect;te.nextEffect=null,te=h}}catch(e){s=!0,d=e}s&&(null===te&&c("178"),l(te,d),null!==te&&(te=te.nextEffect))}X=ne=!1,"function"==typeof cr&&cr(t.stateNode),0===(t=n.current.expirationTime)&&(oe=null),e.remainingExpirationTime=t}function k(){return!(null===ge||ge.timeRemaining()>we)&&(pe=!0)}function w(e){null===se&&c("246"),se.remainingExpirationTime=0,he||(he=!0,me=e)}var T=zr(),E=Dr(e,T),S=Ur(T);T=Or(T);var _=Rr(e),P=_r(e,E,S,T,_,s,u).beginWork,N=Pr(e,E,S,T,_).completeWork,I=(E=Nr(E,S,T,s,n)).throwException,F=E.unwindWork,M=E.unwindInterruptedWork,D=(E=Fr(e,l,s,u,function(e){null===oe?oe=new Set([e]):oe.add(e)},f)).commitBeforeMutationLifeCycles,R=E.commitResetTextContent,U=E.commitPlacement,O=E.commitDeletion,z=E.commitWork,L=E.commitLifeCycles,H=E.commitErrorLogging,A=E.commitAttachRef,V=E.commitDetachRef,B=e.now,W=e.scheduleDeferredCallback,j=e.cancelDeferredCallback,K=e.prepareForCommit,Q=e.resetAfterCommit,q=B(),$=q,G=0,Y=0,X=!1,Z=null,J=null,ee=0,te=null,ne=!1,re=!1,oe=null,ae=null,ie=null,le=0,ue=-1,ce=!1,se=null,fe=0,de=0,pe=!1,he=!1,me=null,ge=null,ve=!1,ye=!1,be=!1,Ce=null,xe=1e3,ke=0,we=1;return{recalculateCurrentTime:f,computeExpirationForFiber:u,scheduleWork:s,requestWork:h,flushRoot:function(e,t){ce&&c("253"),se=e,fe=t,C(e,t,!1),v(),b()},batchedUpdates:function(e,t){var n=ve;ve=!0;try{return e(t)}finally{(ve=n)||ce||v()}},unbatchedUpdates:function(e,t){if(ve&&!ye){ye=!0;try{return e(t)}finally{ye=!1}}return e(t)},flushSync:function(e,t){ce&&c("187");var n=ve;ve=!0;try{return d(e,t)}finally{ve=n,v()}},flushControlled:function(e){var t=ve;ve=!0;try{d(e)}finally{(ve=t)||ce||y(1,!1,null)}},deferredUpdates:function(e){var t=Y;Y=25*(1+((f()+500)/25|0));try{return e()}finally{Y=t}},syncUpdates:d,interactiveUpdates:function(e,t,n){if(be)return e(t,n);ve||ce||0===de||(y(de,!1,null),de=0);var r=be,o=ve;ve=be=!0;try{return e(t,n)}finally{be=r,(ve=o)||ce||v()}},flushInteractiveUpdates:function(){ce||0===de||(y(de,!1,null),de=0)},computeUniqueAsyncExpiration:function(){var e=25*(1+((f()+500)/25|0));return e<=G&&(e=G+1),G=e},legacyContext:S}}function Hr(e){function t(e,t,n,r,o,a){if(r=t.current,n){n=n._reactInternalFiber;var l=s(n);n=f(n)?d(n,l):l}else n=u;return null===t.context?t.context=n:t.pendingContext=n,gr(r,{expirationTime:o,partialState:{element:e},callback:void 0===(t=a)?null:t,isReplace:!1,isForced:!1,capturedValue:null,next:null}),i(r,o),o}var n=e.getPublicInstance,o=(e=Lr(e)).recalculateCurrentTime,a=e.computeExpirationForFiber,i=e.scheduleWork,l=e.legacyContext,s=l.findCurrentUnmaskedContext,f=l.isContextProvider,d=l.processChildContext;return{createContainer:function(e,t,n){return e={current:t=new Jn(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e},updateContainer:function(e,n,r,i){var l=n.current;return t(e,n,r,o(),l=a(l),i)},updateContainerAtExpirationTime:function(e,n,r,a,i){return t(e,n,r,o(),a,i)},flushRoot:e.flushRoot,requestWork:e.requestWork,computeUniqueAsyncExpiration:e.computeUniqueAsyncExpiration,batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,syncUpdates:e.syncUpdates,interactiveUpdates:e.interactiveUpdates,flushInteractiveUpdates:e.flushInteractiveUpdates,flushControlled:e.flushControlled,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?c("188"):c("268",Object.keys(e))),null===(e=rn(t))?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return null===(e=on(e))?null:e.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return ur(r({},e,{findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}}}var Ar=Object.freeze({default:Hr}),Vr=Ar&&Hr||Ar,Br=Vr.default?Vr.default:Vr;function Wr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:nt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}var jr="object"==typeof performance&&"function"==typeof performance.now,Kr=void 0;Kr=jr?function(){return performance.now()}:function(){return Date.now()};var Qr=void 0,qr=void 0;if(n.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var $r=null,Gr=!1,Yr=-1,Xr=!1,Zr=0,Jr=33,eo=33,to=void 0;to=jr?{didTimeout:!1,timeRemaining:function(){var e=Zr-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Zr-Date.now();return 0<e?e:0}};var no="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===no){if(Gr=!1,e=Kr(),0>=Zr-e){if(!(-1!==Yr&&Yr<=e))return void(Xr||(Xr=!0,requestAnimationFrame(ro)));to.didTimeout=!0}else to.didTimeout=!1;Yr=-1,e=$r,$r=null,null!==e&&e(to)}},!1);var ro=function(e){Xr=!1;var t=e-Zr+eo;t<eo&&Jr<eo?(8>t&&(t=8),eo=t<Jr?Jr:t):Jr=t,Zr=e+eo,Gr||(Gr=!0,window.postMessage(no,"*"))};Qr=function(e,t){return $r=e,null!=t&&"number"==typeof t.timeout&&(Yr=Kr()+t.timeout),Xr||(Xr=!0,requestAnimationFrame(ro)),0},qr=function(){$r=null,Gr=!1,Yr=-1}}else Qr=window.requestIdleCallback,qr=window.cancelIdleCallback;else Qr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},qr=function(e){clearTimeout(e)};function oo(e){var n="";return t.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(n+=e)}),n}function ao(e,t){return e=r({children:void 0},t),(t=oo(t.children))&&(e.children=t),e}function io(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function lo(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function uo(e,t){return null!=t.dangerouslySetInnerHTML&&c("91"),r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function co(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&c("92"),Array.isArray(t)&&(1>=t.length||c("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function so(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function fo(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var po={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ho(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mo(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ho(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var go=void 0,vo=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==po.svg||"innerHTML"in e)e.innerHTML=t;else{for((go=go||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=go.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var bo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Co=["Webkit","ms","Moz","O"];function xo(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=n,a=t[n];o=null==a||"boolean"==typeof a||""===a?"":r||"number"!=typeof a||0===a||bo.hasOwnProperty(o)&&bo[o]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(bo).forEach(function(e){Co.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bo[t]=bo[e]})});var ko=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wo(e,t,n){t&&(ko[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&c("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&c("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||c("61")),null!=t.style&&"object"!=typeof t.style&&c("62",n()))}function To(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=o.thatReturns("");function So(e,t){var n=Vn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=C[t];for(var r=0;r<t.length;r++){var o=t[r];n.hasOwnProperty(o)&&n[o]||("topScroll"===o?_n("topScroll","scroll",e):"topFocus"===o||"topBlur"===o?(_n("topFocus","focus",e),_n("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===o?(Qe("cancel",!0)&&_n("topCancel","cancel",e),n.topCancel=!0):"topClose"===o?(Qe("close",!0)&&_n("topClose","close",e),n.topClose=!0):On.hasOwnProperty(o)&&Sn(o,On[o],e),n[o]=!0)}}function _o(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===po.html&&(r=ho(e)),r===po.html?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function Po(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function No(e,t,n,a){var i=To(t,n);switch(t){case"iframe":case"object":Sn("topLoad","load",e);var l=n;break;case"video":case"audio":for(l in zn)zn.hasOwnProperty(l)&&Sn(l,zn[l],e);l=n;break;case"source":Sn("topError","error",e),l=n;break;case"img":case"image":case"link":Sn("topError","error",e),Sn("topLoad","load",e),l=n;break;case"form":Sn("topReset","reset",e),Sn("topSubmit","submit",e),l=n;break;case"details":Sn("topToggle","toggle",e),l=n;break;case"input":Et(e,n),l=Tt(e,n),Sn("topInvalid","invalid",e),So(a,"onChange");break;case"option":l=ao(e,n);break;case"select":lo(e,n),l=r({},n,{value:void 0}),Sn("topInvalid","invalid",e),So(a,"onChange");break;case"textarea":co(e,n),l=uo(e,n),Sn("topInvalid","invalid",e),So(a,"onChange");break;default:l=n}wo(t,l,Eo);var u,c=l;for(u in c)if(c.hasOwnProperty(u)){var s=c[u];"style"===u?xo(e,s,Eo):"dangerouslySetInnerHTML"===u?null!=(s=s?s.__html:void 0)&&vo(e,s):"children"===u?"string"==typeof s?("textarea"!==t||""!==s)&&yo(e,s):"number"==typeof s&&yo(e,""+s):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(b.hasOwnProperty(u)?null!=s&&So(a,u):null!=s&&wt(e,u,s,i))}switch(t){case"input":Ge(e),Pt(e,n);break;case"textarea":Ge(e),fo(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?io(e,!!n.multiple,t,!1):null!=n.defaultValue&&io(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=o)}}function Io(e,t,n,a,i){var l=null;switch(t){case"input":n=Tt(e,n),a=Tt(e,a),l=[];break;case"option":n=ao(e,n),a=ao(e,a),l=[];break;case"select":n=r({},n,{value:void 0}),a=r({},a,{value:void 0}),l=[];break;case"textarea":n=uo(e,n),a=uo(e,a),l=[];break;default:"function"!=typeof n.onClick&&"function"==typeof a.onClick&&(e.onclick=o)}wo(t,a,Eo),t=e=void 0;var u=null;for(e in n)if(!a.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var c=n[e];for(t in c)c.hasOwnProperty(t)&&(u||(u={}),u[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(b.hasOwnProperty(e)?l||(l=[]):(l=l||[]).push(e,null));for(e in a){var s=a[e];if(c=null!=n?n[e]:void 0,a.hasOwnProperty(e)&&s!==c&&(null!=s||null!=c))if("style"===e)if(c){for(t in c)!c.hasOwnProperty(t)||s&&s.hasOwnProperty(t)||(u||(u={}),u[t]="");for(t in s)s.hasOwnProperty(t)&&c[t]!==s[t]&&(u||(u={}),u[t]=s[t])}else u||(l||(l=[]),l.push(e,u)),u=s;else"dangerouslySetInnerHTML"===e?(s=s?s.__html:void 0,c=c?c.__html:void 0,null!=s&&c!==s&&(l=l||[]).push(e,""+s)):"children"===e?c===s||"string"!=typeof s&&"number"!=typeof s||(l=l||[]).push(e,""+s):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(b.hasOwnProperty(e)?(null!=s&&So(i,e),l||c===s||(l=[])):(l=l||[]).push(e,s))}return u&&(l=l||[]).push("style",u),l}function Fo(e,t,n,r,o){"input"===n&&"radio"===o.type&&null!=o.name&&St(e,o),To(n,r),r=To(n,o);for(var a=0;a<t.length;a+=2){var i=t[a],l=t[a+1];"style"===i?xo(e,l,Eo):"dangerouslySetInnerHTML"===i?vo(e,l):"children"===i?yo(e,l):wt(e,i,l,r)}switch(n){case"input":_t(e,o);break;case"textarea":so(e,o);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(n=o.value)?io(e,!!o.multiple,n,!1):t!==!!o.multiple&&(null!=o.defaultValue?io(e,!!o.multiple,o.defaultValue,!0):io(e,!!o.multiple,o.multiple?[]:"",!1))}}function Mo(e,t,n,r,a){switch(t){case"iframe":case"object":Sn("topLoad","load",e);break;case"video":case"audio":for(var i in zn)zn.hasOwnProperty(i)&&Sn(i,zn[i],e);break;case"source":Sn("topError","error",e);break;case"img":case"image":case"link":Sn("topError","error",e),Sn("topLoad","load",e);break;case"form":Sn("topReset","reset",e),Sn("topSubmit","submit",e);break;case"details":Sn("topToggle","toggle",e);break;case"input":Et(e,n),Sn("topInvalid","invalid",e),So(a,"onChange");break;case"select":lo(e,n),Sn("topInvalid","invalid",e),So(a,"onChange");break;case"textarea":co(e,n),Sn("topInvalid","invalid",e),So(a,"onChange")}for(var l in wo(t,n,Eo),r=null,n)n.hasOwnProperty(l)&&(i=n[l],"children"===l?"string"==typeof i?e.textContent!==i&&(r=["children",i]):"number"==typeof i&&e.textContent!==""+i&&(r=["children",""+i]):b.hasOwnProperty(l)&&null!=i&&So(a,l));switch(t){case"input":Ge(e),Pt(e,n);break;case"textarea":Ge(e),fo(e,n);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=o)}return r}function Do(e,t){return e.nodeValue!==t}var Ro=Object.freeze({createElement:_o,createTextNode:Po,setInitialProperties:No,diffProperties:Io,updateProperties:Fo,diffHydratedProperties:Mo,diffHydratedText:Do,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(_t(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=j(r);o||c("90"),Ye(r),_t(r,o)}}}break;case"textarea":so(e,n);break;case"select":null!=(t=n.value)&&io(e,!!n.multiple,t,!1)}}});Ie.injectFiberControlledHostComponent(Ro);var Uo=null,Oo=null;function zo(e){this._expirationTime=Bo.computeUniqueAsyncExpiration(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Lo(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ho(e,t,n){this._internalRoot=Bo.createContainer(e,t,n)}function Ao(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vo(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}zo.prototype.render=function(e){this._defer||c("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Lo;return Bo.updateContainerAtExpirationTime(e,t,null,n,r._onCommit),r},zo.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},zo.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||c("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&c("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Bo.flushRoot(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},zo.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Lo.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Lo.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&c("191",n),n()}}},Ho.prototype.render=function(e,t){var n=this._internalRoot,r=new Lo;return null!==(t=void 0===t?null:t)&&r.then(t),Bo.updateContainer(e,n,null,r._onCommit),r},Ho.prototype.unmount=function(e){var t=this._internalRoot,n=new Lo;return null!==(e=void 0===e?null:e)&&n.then(e),Bo.updateContainer(null,t,null,n._onCommit),n},Ho.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new Lo;return null!==(n=void 0===n?null:n)&&o.then(n),Bo.updateContainer(t,r,e,o._onCommit),o},Ho.prototype.createBatch=function(){var e=new zo(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e};var Bo=Br({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mo(null,"");break;default:e=mo(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}return e},getChildHostContext:function(e,t){return mo(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Uo=Tn;var e=a();if(jn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var i=0,l=-1,u=-1,c=0,s=0,f=e,d=null;t:for(;;){for(var p;f!==t||0!==r&&3!==f.nodeType||(l=i+r),f!==o||0!==n&&3!==f.nodeType||(u=i+n),3===f.nodeType&&(i+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===t&&++c===r&&(l=i),d===o&&++s===n&&(u=i),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}t=-1===l||-1===u?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;Oo={focusedElem:e,selectionRange:t},En(!1)},resetAfterCommit:function(){var e=Oo,t=a(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&l(document.documentElement,n)){if(jn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var o=n[re()].length;e=Math.min(r.start,o),r=void 0===r.end?e:Math.min(r.end,o),!t.extend&&e>r&&(o=r,r=e,e=o),o=Wn(n,e);var i=Wn(n,r);if(o&&i&&(1!==t.rangeCount||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)){var u=document.createRange();u.setStart(o.node,o.offset),t.removeAllRanges(),e>r?(t.addRange(u),t.extend(i.node,i.offset)):(u.setEnd(i.node,i.offset),t.addRange(u))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}Oo=null,En(Uo),Uo=null},createInstance:function(e,t,n,r,o){return(e=_o(e,t,n,r))[A]=o,e[V]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return No(e,t,n,r),Vo(t,n)},prepareUpdate:function(e,t,n,r,o){return Io(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return(e=Po(e,t))[A]=r,e},now:Kr,mutation:{commitMount:function(e,t,n){Vo(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,o){e[V]=o,Fo(e,t,n,r,o)},resetTextContent:function(e){yo(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,o,a){return e[A]=a,e[V]=n,Mo(e,t,n,o,r)},hydrateTextInstance:function(e,t,n){return e[A]=n,Do(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Qr,cancelDeferredCallback:qr}),Wo=Bo;function jo(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ho(e,!1,t)}function Ko(e,t,n,r,o){Ao(n)||c("200");var a=n._reactRootContainer;if(a){if("function"==typeof o){var i=o;o=function(){var e=Bo.getPublicRootInstance(a._internalRoot);i.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)}else{if(a=n._reactRootContainer=jo(n,r),"function"==typeof o){var l=o;o=function(){var e=Bo.getPublicRootInstance(a._internalRoot);l.call(e)}}Bo.unbatchedUpdates(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)})}return Bo.getPublicRootInstance(a._internalRoot)}function Qo(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ao(t)||c("200"),Wr(e,t,null,n)}Le=Wo.batchedUpdates,He=Wo.interactiveUpdates,Ae=Wo.flushInteractiveUpdates;var qo={createPortal:Qo,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:Bo.findHostInstance(e)},hydrate:function(e,t,n){return Ko(null,e,t,!0,n)},render:function(e,t,n){return Ko(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&c("38"),Ko(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Ao(e)||c("40"),!!e._reactRootContainer&&(Bo.unbatchedUpdates(function(){Ko(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Qo.apply(void 0,arguments)},unstable_batchedUpdates:Bo.batchedUpdates,unstable_deferredUpdates:Bo.deferredUpdates,flushSync:Bo.flushSync,unstable_flushControlled:Bo.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:L,EventPluginRegistry:w,EventPropagators:te,ReactControlledComponent:ze,ReactDOMComponentTree:K,ReactDOMEventListener:In},unstable_createRoot:function(e,t){return new Ho(e,!0,null!=t&&!0===t.hydrate)}};Bo.injectIntoDevTools({findFiberByHostInstance:B,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var $o=Object.freeze({default:qo}),Go=$o&&qo||$o;module.exports=Go.default?Go.default:Go;
},{"fbjs/lib/invariant":38,"react":8,"fbjs/lib/ExecutionEnvironment":43,"object-assign":37,"fbjs/lib/emptyFunction":40,"fbjs/lib/getActiveElement":44,"fbjs/lib/shallowEqual":45,"fbjs/lib/containsNode":46,"fbjs/lib/emptyObject":39}],9:[function(require,module,exports) {
"use strict";function _(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(_){console.error(_)}}}_(),module.exports=require("./cjs/react-dom.production.min.js");
},{"./cjs/react-dom.production.min.js":12}],50:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],291:[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var o=require("process"),e=arguments[3];function n(o){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var t="object"!==(void 0===o?"undefined":n(o))||"[object process]"!==String(o)||o.browser;module.exports={window:"undefined"!=typeof window?window:e,global:void 0!==e?e:window,document:"undefined"!=typeof document?document:{},isBrowser:t};
},{"process":50}],388:[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var o=require("process"),e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r="object"!==(void 0===o?"undefined":t(o))||"[object process]"!=o+""||o.browser,n="undefined"==typeof window?e:window,s="undefined"==typeof document?{}:document,p=void 0===e?window:e,d="object"===(void 0===o?"undefined":t(o))?o:{},i="1.0.2";exports.window=n,exports.document=s,exports.global=p,exports.process=d,exports.console=console,exports.isBrowser=r,exports.VERSION=i;
},{"process":50}],469:[function(require,module,exports) {
"use strict";var t=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){try{var e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(t){return null}}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function n(t,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"sessionStorage";e(this,n),this.storage=i(o),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return t(n,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),n}();exports.default=n;
},{}],470:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startTimestamp=void 0,exports.getTimestamp=r;var e=require("./globals");function r(){if(!e.isBrowser){var r=e.process.hrtime();return r[0]+r[1]/1e6}return e.window.performance?e.window.performance.now():Date.now()}var t=exports.startTimestamp=r();
},{"./globals":388}],471:[function(require,module,exports) {
"use strict";function e(e){return 10>e?e.toFixed(2)+"ms":100>e?e.toFixed(1)+"ms":1e3>e?e.toFixed(0)+"ms":(e/1e3).toFixed(2)+"s"}function t(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return""+" ".repeat(r)+e}function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return""+e+" ".repeat(r)}function n(e){var t=e,r=0;if(0!==e){for(;10<=t||-10>=t;)t/=10,r++;for(;1>t&&-1<t;)t*=10,r--}return{base:t,exponent:r}}function i(e){var t={0:"",1:"K",2:"M",3:"G","-1":"m","-2":"µ","-3":"n"},r=e+"";return r in t?t[r]:"e"+3*e}function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,r=n(e),o=r.base,a=r.exponent,u=Math.floor(a/3);return""+(o*Math.pow(10,a-3*u)).toPrecision(t)+i(u)}function a(e){var t=Math.abs,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.isInteger,i=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return u(e,r);if(!Number.isFinite(e))return e+"";if(t(e)<1e-16)return i?"0":"0.";if(i)return e.toFixed(0);if(100<t(e)&&1e4>t(e))return e.toFixed(0);var o=e.toPrecision(2);return o.indexOf(".0")===o.length-2?o.slice(0,-1):o}function u(e,t){for(var r=t.maxElts,n=void 0===r?16:r,i=t.size,o=void 0===i?1:i,u="[",f=0;f<e.length&&f<n;++f)0<f&&(u+=","+(0==f%o?" ":"")),u+=a(e[f],t);return""+u+(e.length>n?"...":"]")}function f(e,t,r){var n=Math.floor,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:600,o=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>i&&(r=Math.min(r,i/e.width));var a=e.width*r,u=e.height*r;return[t+" %c+",["font-size:1px;","padding:"+n(u/2)+"px "+n(a/2)+"px;","line-height:"+u+"px;","background:url("+o+");","background-size:"+a+"px "+u+"px;","color:transparent;"].join("")]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=e,exports.leftPad=t,exports.rightPad=r,exports.getSISuffix=i,exports.formatSI=o,exports.formatValue=a,exports.formatImage=f;
},{}],389:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COLOR=void 0,exports.addColor=o;var e=require("./globals"),r=exports.COLOR={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function t(e){return"string"==typeof e?r[e.toUpperCase()]||r.WHITE:e}function o(r,o,E){return e.isBrowser||"string"!=typeof r||(o&&(r="["+(o=t(o))+"m"+r+"[39m"),E&&(o=t(E),r="["+(E+10)+"m"+r+"[49m")),r}
},{"./globals":388}],472:[function(require,module,exports) {
"use strict";function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),o=!0,i=!1,u=void 0;try{for(var c,f=function(){var r=c.value;"function"!=typeof t[r]||e.find(function(t){return r===t})||(t[r]=t[r].bind(t))},a=n[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)f()}catch(t){i=!0,u=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw u}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=t;
},{}],473:[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error("Assertion failed. "+r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],338:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){function e(e,t){for(var r,o=0;o<t.length;o++)(r=t[o]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),r=require("./utils/globals"),o=require("./utils/local-storage"),i=c(o),n=require("./utils/timestamp"),a=require("./utils/formatters"),s=require("./utils/color"),u=require("./utils/autobind"),l=require("../lib/utils/assert"),g=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d={debug:r.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},y={enabled:!1,priority:0};function h(){}var p={};function v(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}var _=function(){function o(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).id;f(this,o),this.id=e,this.VERSION=r.VERSION,this._startTs=(0,n.getTimestamp)(),this._deltaTs=(0,n.getTimestamp)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new i.default("__probe-"+this.id+"__",y),this.userData={},this.timeStamp(this.id+" started"),(0,u.autobind)(this),Object.seal(this)}return t(o,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return+((0,n.getTimestamp)()-this._startTs).toPrecision(10)}},{key:"getDelta",value:function(){return+((0,n.getTimestamp)()-this._deltaTs).toPrecision(10)}},{key:"enable",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"warn",value:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return this._getLogFunction({message:e,args:r,method:d.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return this._getLogFunction({message:e,args:r,method:d.error})}},{key:"deprecated",value:function(e,t){return this.warn("`"+e+"` is deprecated and will be removed in a later version. Use `"+t+"` instead")}},{key:"removed",value:function(e,t){return this.error("`"+e+"` has been removed. Use `"+t+"` instead")}},{key:"probe",value:function(e,t){for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.debug})}},{key:"info",value:function(e,t){for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:console.info})}},{key:"once",value:function(e,t){for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.debug||d.info,once:!0})}},{key:"table",value:function(e,t,r){if(t){var o=v(t);return this._getLogFunction({priority:e,message:t,args:r&&[r],tag:o,method:console.table||h})}return h}},{key:"image",value:function(e){var t=e.priority,o=e.image,i=e.message,n=void 0===i?"":i,a=e.scale,s=void 0===a?1:a;return t>this.getPriority()?h:r.isBrowser?this._logImageInBrowser({image:o,message:n,scale:s}):this._logImageInNode({image:o,message:n,scale:s})}},{key:"_logImageInNode",value:function(e){var t=e.image,r=(e.message,e.scale),o=void 0===r?1:r,i=null;try{i=module.require("asciify-image")}catch(e){}return i?function(){return i(t,{fit:"box",width:Math.round(80*o)+"%"}).then(function(e){return console.log(e)})}:h}},{key:"_logImageInBrowser",value:function(e){var t=e.image,r=e.message,o=void 0===r?"":r,i=e.scale,n=void 0===i?1:i;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=(0,a.formatImage)(s,o,n);(e=console).log.apply(e,m(t))},s.src=t,h}var u,l=t.nodeName||"";if("img"===l.toLowerCase())return(u=console).log.apply(u,m((0,a.formatImage)(t,o,n))),h;if("canvas"===l.toLowerCase()){var g=new Image;return g.onload=function(){var e;return(e=console).log.apply(e,m((0,a.formatImage)(g,o,n)))},g.src=t.toDataURL(),h}return h}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||h})}},{key:"group",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},o=(r=this._normalizeArguments({priority:e,message:t,opts:r})).collapsed;return this._getLogFunction({priority:e,message:t,opts:r,method:(o?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||h})}},{key:"withGroup",value:function(e,t,r){var o=this._normalizeArguments({priority:e,message:t});this.group(o);try{r()}finally{this.groupEnd(o.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=(0,n.getTimestamp)(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),(0,g.default)(t);var r=e.message,o=e.tag||e.message;if(e.once){if(p[o])return h;p[o]=(0,n.getTimestamp)()}return r=this._decorateMessage(r,e),t.bind.apply(t,[console,r].concat(m(e.args)))}return h}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),r=this._getElapsedTime(),o=r.delta,i=r.total;return Object.assign(e,t,{delta:o,total:i})}},{key:"_normalizePriority",value:function(t){var r;switch(void 0===t?"undefined":e(t)){case"number":r=t;break;case"object":r=t.priority||0;break;default:r=0}return(0,g.default)(Number.isFinite(r)&&0<=r),r}},{key:"_normalizeArguments",value:function(t){var r=t.priority,o=t.message,i=t.args,n=void 0===i?[]:i,a=t.opts,s={priority:this._normalizePriority(r),message:o,args:n};switch(void 0===r?"undefined":e(r)){case"string":case"function":void 0!==o&&n.unshift(o),Object.assign(s,{message:r});break;case"object":Object.assign(s,r)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),(0,g.default)("string"==typeof s.message||"object"===e(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var r="";if(t.time){var o=this._getElapsedTime().total;r=(0,a.leftPad)((0,a.formatTime)(o))}e=t.time?this.id+": "+r+"  "+e:this.id+": "+e,e=(0,s.addColor)(e,t.color,t.background)}return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),o}();exports.default=_,_.VERSION=r.VERSION;
},{"./utils/globals":388,"./utils/local-storage":469,"./utils/timestamp":470,"./utils/formatters":471,"./utils/color":389,"./utils/autobind":472,"../lib/utils/assert":473}],339:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e=require("./utils/timestamp"),i=require("./utils/formatters");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(t){var i=t.id;n(this,r),this.id=i,this.time=(0,e.getTimestamp)(),this.counters={},Object.seal(this)}var u=Math.round;return t(r,[{key:"addCounter",value:function(t){return this._getCounter(t),this}},{key:"bump",value:function(t){var e=this._getCounter(t);return e.call++,e.count++,this}},{key:"increment",value:function(t,e){var i=this._getCounter(t);return i.call++,i.count+=e,this}},{key:"addTimer",value:function(t){return this._getCounter(t).time=0,this}},{key:"addTime",value:function(t,e){var i=this._getCounter(t);return i.time+=e,i.count++,this}},{key:"timeStart",value:function(t){this._getCounter(t)._startTime=(0,e.getTimestamp)()}},{key:"timeEnd",value:function(t){var i=this._getCounter(t);this.addTime(t,(0,e.getTimestamp)()-i._startTime)}},{key:"reset",value:function(){for(var t in this.time=(0,e.getTimestamp)(),this.counters){var i=this.counters[t];i.count=0,i.time=0}return this}},{key:"hasTimeElapsed",value:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0],1e3<(0,e.getTimestamp)()-this.time}},{key:"getStats",value:function(){var t=((0,e.getTimestamp)()-this.time)/1e3,n={};for(var r in this.counters){var a=this.counters[r];n[a.title]={total:a.count,fps:u(a.count/t)},a.time&&(n[a.title].totalTime=(0,i.formatTime)(a.time),n[a.title].avgTime=(0,i.formatTime)(a.time/a.count))}return n}},{key:"getStatsTable",value:function(){var t=this.getStats();for(var e in t)0===t[e].total&&delete t[e];return t}},{key:"getStatNames",value:function(){return Object.keys(this.counters)}},{key:"get",value:function(t){return this._getCounter(t).count}},{key:"getCount",value:function(t){return this._getCounter(t).count}},{key:"getFPS",value:function(t){var i=this._getCounter(t),n=((0,e.getTimestamp)()-this.time)/1e3;return u(i.count/n)}},{key:"getTimeString",value:function(){return this.id+":"+(0,i.formatTime)(this.time)+"("+this.count+")"}},{key:"oneSecondPassed",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(t)}},{key:"_getCounter",value:function(t){var e=this.counters[t];return e||(e={title:t,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[t]=e),e}},{key:"_incrementTimer",value:function(t,e,i){t.count+=i,t.totalTime+=e,t.averageTime=t.totalTime/i}}]),r}();exports.default=r;
},{"./utils/timestamp":470,"./utils/formatters":471}],335:[function(require,module,exports) {
"use strict";var l=require("./lib/utils/globals");l.global.probe={};
},{"./lib/utils/globals":388}],390:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableDOMLogging=n,exports.logLineToDOM=r;var e=require("./globals"),o=null;function n(){var n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];n&&!o&&(o=e.console.log.bind(e.console),e.console.log=function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}),!n&&o&&(e.console.log=o,o=null)}var l=null;function r(o){if(!l){var n=e.global.probe.markdown;l=e.document.createElement(n?"pre":"div")}var r=e.document.body.childNodes;e.document.body.insertBefore(l,r&&r[0]),"string"==typeof o&&(l.innerHTML+=o+"<br />")}exports.default=n;
},{"./globals":388}],318:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.experimental=exports.Stats=exports.COLOR=exports.Log=exports.VERSION=void 0;var e=require("./lib/utils/globals");Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return e.VERSION}});var r=require("./lib/log");Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return u(r).default}});var t=require("./lib/utils/color");Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return t.COLOR}});var o=require("./lib/stats");Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return u(o).default}}),require("./init");var i=require("./lib/utils/log-to-dom"),n=u(r);function u(e){return e&&e.__esModule?e:{default:e}}var l=exports.experimental={enableDOMLogging:i.enableDOMLogging};exports.default=new n.default({id:"probe.gl"});
},{"./lib/utils/globals":388,"./lib/log":338,"./lib/utils/color":389,"./lib/stats":339,"./init":335,"./lib/utils/log-to-dom":390}],209:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("probe.gl");exports.default=new e.Log({id:"deck"});
},{"probe.gl":318}],600:[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(){return"undefined"!=typeof window&&"object"===o(window.process)&&"renderer"===window.process.type||(!(void 0===e||"object"!==o(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":o(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t();
},{"process":50}],474:[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowserMainThread=void 0;var o=require("./is-electron"),r=t(o);function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u="object"===(void 0===e?"undefined":n(e))&&"[object process]"===String(e)&&!e.browser,i=!u||r.default,s=exports.isBrowserMainThread=i&&"undefined"!=typeof document;exports.default=i;
},{"./is-electron":600,"process":50}],475:[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},d=o.self||o.window||o.global,n=o.window||o.self||o.global,l=o.global||o.self||o.window,t=o.document||{};exports.self=d,exports.window=n,exports.global=l,exports.document=t;
},{}],476:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("probe.gl");exports.default=new e.Log({id:"luma"}).enable();
},{"probe.gl":318}],386:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.global=void 0;var l=require("./utils/is-browser"),e=r(l),o=require("./utils/globals"),a=require("./utils/log"),t=r(a);function r(l){return l&&l.__esModule?l:{default:l}}var u="5.3.0",s="set luma.log.priority=1 (or higher) to trace rendering";if(o.global.luma&&o.global.luma.VERSION!==u)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(o.global.luma.VERSION," vs ").concat(u));o.global.luma||(e.default&&t.default.log(0,"luma.gl ".concat(u," - ").concat(s))(),o.global.luma=o.global.luma||{VERSION:u,version:u,log:t.default,stats:{},globals:{modules:{},nodeIO:{}}}),exports.global=o.global,exports.default=o.global.luma;
},{"./utils/is-browser":474,"./utils/globals":475,"./utils/log":476}],873:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGL2RenderingContext=exports.WebGLShaderPrecisionFormat=exports.WebGLActiveInfo=exports.WebGLUniformLocation=exports.WebGLTexture=exports.WebGLRenderbuffer=exports.WebGLFramebuffer=exports.WebGLBuffer=exports.WebGLShader=exports.WebGLProgram=exports.WebGLRenderingContext=exports.Image=exports.webGLTypesAvailable=exports.headlessTypes=void 0;var e=require("../utils/globals"),r=require("../utils/is-browser"),o=t(r);function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function s(e,r){if(!n(e,r))throw new TypeError("Cannot call a class as a function")}var i=exports.headlessTypes=null;if(!o.default){try{exports.headlessTypes=i=module.require("gl/wrap")}catch(e){console.error("".concat(e.message))}console.warn(i&&i.WebGLRenderingContext)}var a=function e(){s(this,e)},b=i||e.global,f=b.WebGLRenderingContext,u=void 0===f?a:f,x=b.WebGLProgram,p=void 0===x?a:x,L=b.WebGLShader,d=void 0===L?a:L,l=b.WebGLBuffer,G=void 0===l?a:l,W=b.WebGLFramebuffer,c=void 0===W?a:W,v=b.WebGLRenderbuffer,m=void 0===v?a:v,g=b.WebGLTexture,h=void 0===g?a:g,y=b.WebGLUniformLocation,R=void 0===y?a:y,S=b.WebGLActiveInfo,T=void 0===S?a:S,C=b.WebGLShaderPrecisionFormat,I=void 0===C?a:C,w=exports.webGLTypesAvailable=u!==a&&p!==a&&d!==a&&G!==a&&c!==a&&m!==a&&h!==a&&R!==a&&T!==a&&I!==a;function P(){return e.global.WebGL2RenderingContext||function e(){s(this,e)}}function F(){return e.global.Image||function e(){s(this,e)}}var A=P(),_=F();exports.Image=_,exports.WebGLRenderingContext=u,exports.WebGLProgram=p,exports.WebGLShader=d,exports.WebGLBuffer=G,exports.WebGLFramebuffer=c,exports.WebGLRenderbuffer=m,exports.WebGLTexture=h,exports.WebGLUniformLocation=R,exports.WebGLActiveInfo=T,exports.WebGLShaderPrecisionFormat=I,exports.WebGL2RenderingContext=A;
},{"../utils/globals":475,"../utils/is-browser":474}],874:[function(require,module,exports) {
"use strict";function e(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function n(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestAnimationFrame=e,exports.cancelAnimationFrame=n;
},{}],876:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.getShaderTypeName=n;var e=35632,t=35633;function r(e){var t=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return t?t[1]:"unnamed"}function n(r){switch(r){case e:return"fragment";case t:return"vertex";default:return"unknown type"}}
},{}],875:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseGLSLCompilerError=e,exports.default=a;var r=require("./get-shader-name"),n=t(r);function t(r){return r&&r.__esModule?r:{default:r}}function e(t,e,a){for(var i=t.split(/\r?\n/),s={},u={},l=(0,n.default)(e)||"(unnamed)",f="".concat((0,r.getShaderTypeName)(a)," shader ").concat(l),g=0;g<i.length;g++){var p=i[g];if(!(p.length<=1)){var h=p.split(":"),v=h[0],d=parseInt(h[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(f,": ").concat(t));"WARNING"!==v?s[d]=p:u[d]=p}}var m=c(e);return{shaderName:f,errors:o(s,m),warnings:o(u,m)}}function a(r,n,t){var a=e(r,n,t),o=a.shaderName,c=a.errors,i=a.warnings;return"GLSL compilation error in ".concat(o,"\n\n").concat(c,"\n").concat(i)}function o(r,n){for(var t="",e=0;e<n.length;e++){var a=n[e];if((r[e+3]||r[e+2]||r[e+1])&&(t+="".concat(a,"\n"),r[e+1])){var o=r[e+1],c=o.split(":",3),s=c[0],u=parseInt(c[1],10)||0,l=o.substring(c.join(":").length+1).trim();t+=i("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return t}function c(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",e=r.split(/\r?\n/),a=String(e.length+n-1).length;return e.map(function(r,e){var o=e+n,c=String(o).length;return i(o,a-c)+t+r})}function i(r,n){for(var t="",e=0;e<n;++e)t+=" ";return"".concat(t).concat(r)}
},{"./get-shader-name":876}],490:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTypeFromTypedArray=d,exports.getTypedArrayFromGLType=A,exports.flipRows=p,exports.scalePixels=h;var r=5120,e=5121,t=5122,a=5123,n=5124,s=5125,o=5126,i=32819,c=32820,y=33635,u="Failed to deduce GL constant from typed array";function d(i){switch(ArrayBuffer.isView(i)?i.constructor:i){case Float32Array:return o;case Uint16Array:return a;case Uint32Array:return s;case Uint8Array:case Uint8ClampedArray:return e;case Int8Array:return r;case Int16Array:return t;case Int32Array:return n;default:throw new Error(u)}}function A(u){var d=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,A=void 0===d||d;switch(u){case o:return Float32Array;case a:case y:case i:case c:return Uint16Array;case s:return Uint32Array;case e:return A?Uint8ClampedArray:Uint8Array;case r:return Int8Array;case t:return Int16Array;case n:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function p(r){var e=r.data,t=r.width,a=r.height,n=r.bytesPerPixel,s=void 0===n?4:n,o=r.temp,i=t*s;o=o||new Uint8Array(i);for(var c=0;c<a/2;++c){var y=c*i,u=(a-c-1)*i;o.set(e.subarray(y,y+i)),e.copyWithin(y,u,u+i),e.set(o,u)}}function h(r){for(var e=r.data,t=r.width,a=r.height,n=Math.round(t/2),s=Math.round(a/2),o=new Uint8Array(n*s*4),i=0;i<s;i++)for(var c=0;c<n;c++)for(var y=0;y<4;y++)o[4*(i*n+c)+y]=e[4*(2*i*t+2*c)+y];return{data:o,width:n,height:s}}
},{}],479:[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],392:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKeyValue=n,exports.getKey=u,exports.getKeyType=i;var e=require("../utils/assert"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var u=e[t=t.replace(/^.*\./,"")];return(0,r.default)(void 0!==u,"Accessing undefined constant GL.".concat(t)),u}function u(e,r){for(var t in r=Number(r),e)if(e[t]===r)return"gl.".concat(t);return String(r)}function i(e,t){for(var n in(0,r.default)(void 0!==t,"undefined key"),t=Number(t),e)if(e[n]===t)return"gl.".concat(n);return String(t)}
},{"../utils/assert":479}],387:[function(require,module,exports) {
module.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795};
},{}],705:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./webgl-types");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return e.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return e.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return e.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return e.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return e.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return e.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return e.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return e.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return e.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return e.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return e.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return e.WebGL2RenderingContext}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return e.webGLTypesAvailable}});var r=require("./webgl-checks");Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return r.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return r.isWebGL2}}),Object.defineProperty(exports,"assertWebGLContext",{enumerable:!0,get:function(){return r.assertWebGLContext}}),Object.defineProperty(exports,"assertWebGL2Context",{enumerable:!0,get:function(){return r.assertWebGL2Context}});var t=require("./request-animation-frame");Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return t.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return t.cancelAnimationFrame}});var n=require("./format-glsl-error");Object.defineProperty(exports,"formatGLSLCompilerError",{enumerable:!0,get:function(){return a(n).default}}),Object.defineProperty(exports,"parseGLSLCompilerError",{enumerable:!0,get:function(){return n.parseGLSLCompilerError}});var o=require("./get-shader-name");Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return a(o).default}});var u=require("./typed-array-utils");Object.defineProperty(exports,"getGLTypeFromTypedArray",{enumerable:!0,get:function(){return u.getGLTypeFromTypedArray}}),Object.defineProperty(exports,"getTypedArrayFromGLType",{enumerable:!0,get:function(){return u.getTypedArrayFromGLType}}),Object.defineProperty(exports,"flipRows",{enumerable:!0,get:function(){return u.flipRows}}),Object.defineProperty(exports,"scalePixels",{enumerable:!0,get:function(){return u.scalePixels}});var i=require("../webgl-utils/constants-to-keys");Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return i.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return i.getKey}}),Object.defineProperty(exports,"getKeyType",{enumerable:!0,get:function(){return i.getKeyType}});var b=require("../constants");function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"GL",{enumerable:!0,get:function(){return a(b).default}});
},{"./webgl-types":873,"./webgl-checks":391,"./request-animation-frame":874,"./format-glsl-error":875,"./get-shader-name":876,"./typed-array-utils":490,"../webgl-utils/constants-to-keys":392,"../constants":387}],391:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0,exports.isWebGL=l,exports.isWebGL2=x,exports.assertWebGLContext=E,exports.assertWebGL2Context=b;var e=require("../webgl-utils"),t=require("../utils/assert"),n=o(t);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var s=34962,u=32874,i=exports.ERR_CONTEXT="Invalid WebGLRenderingContext",R=exports.ERR_WEBGL=i,a=exports.ERR_WEBGL2="Requires WebGL2";function l(t){return Boolean(t&&(r(t,e.WebGLRenderingContext)||t.ARRAY_BUFFER===s))}function x(t){return Boolean(t&&(r(t,e.WebGL2RenderingContext)||t.TEXTURE_BINDING_3D===u))}function E(e){(0,n.default)(l(e),i)}function b(e){(0,n.default)(x(e),a)}
},{"../webgl-utils":705,"../utils/assert":479}],480:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebglAvailable=exports.headlessGL=void 0,exports.createHeadlessContext=i;var e=require("../utils/is-browser"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var l='WebGL not available in Node.js, install using "npm install gl".',s="Failed to create WebGL context in Node.js, headless gl not available",o="Failed to create WebGL context in Node.js, headless gl returned null",a=exports.headlessGL=null;if(!t.default)try{exports.headlessGL=a=module.require("gl")}catch(e){console.error(),console.error("".concat(l,"\n").concat(e.message))}var n=exports.isWebglAvailable=t.default||a;function i(e){var t=e.width,r=e.height,l=e.opts,n=e.onError,i=l.webgl1;if(l.webgl2&&!i)return n("headless-gl does not support WebGL2");if(!a)return n(s);var d=a(t,r,l);return d||n(o)}
},{"../utils/is-browser":474}],877:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window.navigator||{},n=r.userAgent||t.userAgent,i=-1!==n.indexOf("MSIE "),o=-1!==n.indexOf("Trident/");return i||o}
},{"./globals":475}],878:[function(require,module,exports) {
"use strict";function e(e){return function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return new Promise(function(r,n){e.apply(void 0,t.concat([function(e,t){try{e?n(e):r(t)}catch(e){n(e)}}]))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.promisify=e;
},{}],879:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uid=u,exports.isPowerOfTwo=o,exports.isObjectEmpty=a;var e=require("./assert"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var n={};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";n[e]=n[e]||1;var r=n[e]++;return"".concat(e,"-").concat(r)}function o(e){return(0,r.default)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function a(e){var r=!0;for(var t in e){r=!1;break}return r}
},{"./assert":479}],880:[function(require,module,exports) {
"use strict";function e(e,t){for(var i=t.maxElts,n=void 0===i?16:i,a=t.size,o=void 0===a?1:a,s="[",u=0;u<e.length&&u<n;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=r(e[u],t);var f=e.length>n?"...":"]";return"".concat(s).concat(f)}function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isInteger,n=void 0!==i&&i;if(Array.isArray(r)||ArrayBuffer.isView(r))return e(r,t);if(!Number.isFinite(r))return String(r);if(Math.abs(r)<1e-16)return n?"0":"0.";if(n)return r.toFixed(0);if(Math.abs(r)>100&&Math.abs(r)<1e4)return r.toFixed(0);var a=r.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=r;
},{}],706:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-browser");Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return s(e).default}});var r=require("./is-old-ie");Object.defineProperty(exports,"isOldIE",{enumerable:!0,get:function(){return s(r).default}});var t=require("./promise-utils");Object.defineProperty(exports,"promisify",{enumerable:!0,get:function(){return t.promisify}});var u=require("./utils");Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return u.uid}}),Object.defineProperty(exports,"isPowerOfTwo",{enumerable:!0,get:function(){return u.isPowerOfTwo}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return u.isObjectEmpty}});var n=require("./log");Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return s(n).default}});var o=require("./format-value");Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return o.formatValue}});var i=require("./assert");function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return s(i).default}});
},{"./is-browser":474,"./is-old-ie":877,"./promise-utils":878,"./utils":879,"./log":476,"./format-value":880,"./assert":479}],481:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pageLoadPromise=void 0,exports.getPageLoadPromise=i,exports.createCanvas=r,exports.getCanvas=a;var e=require("../utils"),t=e.isBrowser&&"undefined"!=typeof document,o=t&&"complete"===document.readyState,n=exports.pageLoadPromise=t?new Promise(function(e,t){o?e(document):window.onload=function(){o=!0,e(document)}}):Promise.resolve({});function i(){return n}function r(e){var t=e.width,o=void 0===t?800:t,n=e.height,r=void 0===n?600:n,a=e.id,d=void 0===a?"gl-canvas":a,s=e.insert,c=void 0===s||s,u=document.createElement("canvas");return u.id=d,u.style.width=Number.isFinite(o)?"".concat(o,"px"):"100%",u.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",c&&i().then(function(e){var t=e.body;t.insertBefore(u,t.firstChild)}),u}function a(e){var t,n=e.canvas,i=e.width,a=e.height,d=e.onError,s=void 0===d?function(){}:d;return"string"==typeof n?(o||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||r({id:"lumagl-canvas",width:i,height:a,onError:s}),t}
},{"../utils":706}],483:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBrowserContext=r,exports.trackContextCreation=a;var e=require("../utils/assert"),t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function r(e){var t=e.canvas,n=e.opts,o=void 0===n?{}:n,r=e.onError,a=void 0===r?function(e){return null}:r;function i(e){a("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",i,!1);var s=o.webgl1,l=void 0===s||s,c=o.webgl2,u=void 0===c||c,v=null;return u&&(v=(v=v||t.getContext("webgl2",o))||t.getContext("experimental-webgl2",o)),l&&(v=(v=v||t.getContext("webgl",o))||t.getContext("experimental-webgl",o)),t.removeEventListener("webglcontextcreationerror",i,!1),v||a("Failed to create ".concat(u&&!l?"WebGL2":"WebGL"," context"))}function a(e){var n=e.onContextCreate,r=void 0===n?function(){return null}:n,a=e.onContextCreated,i=void 0===a?function(){}:a;if((0,t.default)(r||i),"undefined"!=typeof HTMLCanvasElement){var s=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(e,t){var n;return"webgl"===e&&(n=r({canvas:this,type:e,opts:t,getContext:s.bind(this)})),o(n=n||s.call(this,e,t),WebGLRenderingContext)&&i({canvas:this,context:n,type:e,opts:t}),n}}}
},{"../utils/assert":479}],485:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_PARAMETER_GETTERS=exports.GL_PARAMETER_SETTERS=exports.GL_PARAMETER_DEFAULTS=void 0,exports.setParameter=s,exports.setParameters=D,exports.getParameter=B,exports.getParameters=K,exports.getDefaultParameters=U,exports.resetParameters=p,exports.getModifiedParameters=G;var e,t,a,u=require("../constants"),E=r(u),_=require("../webgl-utils"),l=require("../utils/assert"),f=r(l);function r(e){return e&&e.__esModule?e:{default:e}}function A(e){return S(e)||d(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function S(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T=exports.GL_PARAMETER_DEFAULTS=(L(e={},E.default.BLEND,!1),L(e,E.default.BLEND_COLOR,new Float32Array([0,0,0,0])),L(e,E.default.BLEND_EQUATION_RGB,E.default.FUNC_ADD),L(e,E.default.BLEND_EQUATION_ALPHA,E.default.FUNC_ADD),L(e,E.default.BLEND_SRC_RGB,E.default.ONE),L(e,E.default.BLEND_DST_RGB,E.default.ZERO),L(e,E.default.BLEND_SRC_ALPHA,E.default.ONE),L(e,E.default.BLEND_DST_ALPHA,E.default.ZERO),L(e,E.default.COLOR_CLEAR_VALUE,new Float32Array([0,0,0,0])),L(e,E.default.COLOR_WRITEMASK,[!0,!0,!0,!0]),L(e,E.default.CULL_FACE,!1),L(e,E.default.CULL_FACE_MODE,E.default.BACK),L(e,E.default.DEPTH_TEST,!1),L(e,E.default.DEPTH_CLEAR_VALUE,1),L(e,E.default.DEPTH_FUNC,E.default.LESS),L(e,E.default.DEPTH_RANGE,new Float32Array([0,1])),L(e,E.default.DEPTH_WRITEMASK,!0),L(e,E.default.DITHER,!0),L(e,E.default.FRAMEBUFFER_BINDING,null),L(e,E.default.FRONT_FACE,E.default.CCW),L(e,E.default.GENERATE_MIPMAP_HINT,E.default.DONT_CARE),L(e,E.default.LINE_WIDTH,1),L(e,E.default.POLYGON_OFFSET_FILL,!1),L(e,E.default.POLYGON_OFFSET_FACTOR,0),L(e,E.default.POLYGON_OFFSET_UNITS,0),L(e,E.default.SAMPLE_COVERAGE_VALUE,1),L(e,E.default.SAMPLE_COVERAGE_INVERT,!1),L(e,E.default.SCISSOR_TEST,!1),L(e,E.default.SCISSOR_BOX,new Int32Array([0,0,1024,1024])),L(e,E.default.STENCIL_TEST,!1),L(e,E.default.STENCIL_CLEAR_VALUE,0),L(e,E.default.STENCIL_WRITEMASK,4294967295),L(e,E.default.STENCIL_BACK_WRITEMASK,4294967295),L(e,E.default.STENCIL_FUNC,E.default.ALWAYS),L(e,E.default.STENCIL_REF,0),L(e,E.default.STENCIL_VALUE_MASK,4294967295),L(e,E.default.STENCIL_BACK_FUNC,E.default.ALWAYS),L(e,E.default.STENCIL_BACK_REF,0),L(e,E.default.STENCIL_BACK_VALUE_MASK,4294967295),L(e,E.default.STENCIL_FAIL,E.default.KEEP),L(e,E.default.STENCIL_PASS_DEPTH_FAIL,E.default.KEEP),L(e,E.default.STENCIL_PASS_DEPTH_PASS,E.default.KEEP),L(e,E.default.STENCIL_BACK_FAIL,E.default.KEEP),L(e,E.default.STENCIL_BACK_PASS_DEPTH_FAIL,E.default.KEEP),L(e,E.default.STENCIL_BACK_PASS_DEPTH_PASS,E.default.KEEP),L(e,E.default.VIEWPORT,new Int32Array([0,0,1024,1024])),L(e,E.default.PACK_ALIGNMENT,4),L(e,E.default.UNPACK_ALIGNMENT,4),L(e,E.default.UNPACK_FLIP_Y_WEBGL,!1),L(e,E.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),L(e,E.default.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.default.BROWSER_DEFAULT_WEBGL),L(e,E.default.FRAGMENT_SHADER_DERIVATIVE_HINT,E.default.DONT_CARE),L(e,E.default.READ_FRAMEBUFFER_BINDING,null),L(e,E.default.RASTERIZER_DISCARD,!1),L(e,E.default.PACK_ROW_LENGTH,0),L(e,E.default.PACK_SKIP_PIXELS,0),L(e,E.default.PACK_SKIP_ROWS,0),L(e,E.default.UNPACK_ROW_LENGTH,0),L(e,E.default.UNPACK_IMAGE_HEIGHT,0),L(e,E.default.UNPACK_SKIP_PIXELS,0),L(e,E.default.UNPACK_SKIP_ROWS,0),L(e,E.default.UNPACK_SKIP_IMAGES,0),e),C=function(e,t,a){return t?e.enable(a):e.disable(a)},N=function(e,t,a){return e.hint(a,t)},I=function(e,t,a){return e.pixelStorei(a,t)},P=function(e,t){var a=(0,_.isWebGL2)(e)?E.default.DRAW_FRAMEBUFFER:E.default.FRAMEBUFFER;return e.bindFramebuffer(a,t)},R=function(e,t){return e.bindFramebuffer(E.default.READ_FRAMEBUFFER,t)},i=exports.GL_PARAMETER_SETTERS=(L(t={},E.default.BLEND,C),L(t,E.default.BLEND_COLOR,function(e,t){return e.blendColor.apply(e,A(t))}),L(t,E.default.BLEND_EQUATION_RGB,"blendEquation"),L(t,E.default.BLEND_EQUATION_ALPHA,"blendEquation"),L(t,E.default.BLEND_SRC_RGB,"blendFunc"),L(t,E.default.BLEND_DST_RGB,"blendFunc"),L(t,E.default.BLEND_SRC_ALPHA,"blendFunc"),L(t,E.default.BLEND_DST_ALPHA,"blendFunc"),L(t,E.default.COLOR_CLEAR_VALUE,function(e,t){return e.clearColor.apply(e,A(t))}),L(t,E.default.COLOR_WRITEMASK,function(e,t){return e.colorMask.apply(e,A(t))}),L(t,E.default.CULL_FACE,C),L(t,E.default.CULL_FACE_MODE,function(e,t){return e.cullFace(t)}),L(t,E.default.DEPTH_TEST,C),L(t,E.default.DEPTH_CLEAR_VALUE,function(e,t){return e.clearDepth(t)}),L(t,E.default.DEPTH_FUNC,function(e,t){return e.depthFunc(t)}),L(t,E.default.DEPTH_RANGE,function(e,t){return e.depthRange.apply(e,A(t))}),L(t,E.default.DEPTH_WRITEMASK,function(e,t){return e.depthMask(t)}),L(t,E.default.DITHER,C),L(t,E.default.FRAGMENT_SHADER_DERIVATIVE_HINT,N),L(t,E.default.FRAMEBUFFER_BINDING,P),L(t,E.default.FRONT_FACE,function(e,t){return e.frontFace(t)}),L(t,E.default.GENERATE_MIPMAP_HINT,N),L(t,E.default.LINE_WIDTH,function(e,t){return e.lineWidth(t)}),L(t,E.default.POLYGON_OFFSET_FILL,C),L(t,E.default.POLYGON_OFFSET_FACTOR,"polygonOffset"),L(t,E.default.POLYGON_OFFSET_UNITS,"polygonOffset"),L(t,E.default.RASTERIZER_DISCARD,C),L(t,E.default.SAMPLE_COVERAGE_VALUE,"sampleCoverage"),L(t,E.default.SAMPLE_COVERAGE_INVERT,"sampleCoverage"),L(t,E.default.SCISSOR_TEST,C),L(t,E.default.SCISSOR_BOX,function(e,t){return e.scissor.apply(e,A(t))}),L(t,E.default.STENCIL_TEST,C),L(t,E.default.STENCIL_CLEAR_VALUE,function(e,t){return e.clearStencil(t)}),L(t,E.default.STENCIL_WRITEMASK,function(e,t){return e.stencilMaskSeparate(E.default.FRONT,t)}),L(t,E.default.STENCIL_BACK_WRITEMASK,function(e,t){return e.stencilMaskSeparate(E.default.BACK,t)}),L(t,E.default.STENCIL_FUNC,"stencilFuncFront"),L(t,E.default.STENCIL_REF,"stencilFuncFront"),L(t,E.default.STENCIL_VALUE_MASK,"stencilFuncFront"),L(t,E.default.STENCIL_BACK_FUNC,"stencilFuncBack"),L(t,E.default.STENCIL_BACK_REF,"stencilFuncBack"),L(t,E.default.STENCIL_BACK_VALUE_MASK,"stencilFuncBack"),L(t,E.default.STENCIL_FAIL,"stencilOpFront"),L(t,E.default.STENCIL_PASS_DEPTH_FAIL,"stencilOpFront"),L(t,E.default.STENCIL_PASS_DEPTH_PASS,"stencilOpFront"),L(t,E.default.STENCIL_BACK_FAIL,"stencilOpBack"),L(t,E.default.STENCIL_BACK_PASS_DEPTH_FAIL,"stencilOpBack"),L(t,E.default.STENCIL_BACK_PASS_DEPTH_PASS,"stencilOpBack"),L(t,E.default.VIEWPORT,function(e,t){return e.viewport.apply(e,A(t))}),L(t,E.default.PACK_ALIGNMENT,I),L(t,E.default.UNPACK_ALIGNMENT,I),L(t,E.default.UNPACK_FLIP_Y_WEBGL,I),L(t,E.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I),L(t,E.default.UNPACK_COLORSPACE_CONVERSION_WEBGL,I),L(t,E.default.PACK_ROW_LENGTH,I),L(t,E.default.PACK_SKIP_PIXELS,I),L(t,E.default.PACK_SKIP_ROWS,I),L(t,E.default.READ_FRAMEBUFFER_BINDING,R),L(t,E.default.UNPACK_ROW_LENGTH,I),L(t,E.default.UNPACK_IMAGE_HEIGHT,I),L(t,E.default.UNPACK_SKIP_PIXELS,I),L(t,E.default.UNPACK_SKIP_ROWS,I),L(t,E.default.UNPACK_SKIP_IMAGES,I),t),o={blendEquation:function(e,t){return e.blendEquationSeparate(t[E.default.BLEND_EQUATION_RGB],t[E.default.BLEND_EQUATION_ALPHA])},blendFunc:function(e,t){return e.blendFuncSeparate(t[E.default.BLEND_SRC_RGB],t[E.default.BLEND_DST_RGB],t[E.default.BLEND_SRC_ALPHA],t[E.default.BLEND_DST_ALPHA])},polygonOffset:function(e,t){return e.polygonOffset(t[E.default.POLYGON_OFFSET_FACTOR],t[E.default.POLYGON_OFFSET_UNITS])},sampleCoverage:function(e,t){return e.sampleCoverage(t[E.default.SAMPLE_COVERAGE_VALUE],t[E.default.SAMPLE_COVERAGE_INVERT])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(E.default.FRONT,t[E.default.STENCIL_FUNC],t[E.default.STENCIL_REF],t[E.default.STENCIL_VALUE_MASK])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(E.default.BACK,t[E.default.STENCIL_BACK_FUNC],t[E.default.STENCIL_BACK_REF],t[E.default.STENCIL_BACK_VALUE_MASK])},stencilOpFront:function(e,t){return e.stencilOpSeparate(E.default.FRONT,t[E.default.STENCIL_FAIL],t[E.default.STENCIL_PASS_DEPTH_FAIL],t[E.default.STENCIL_PASS_DEPTH_PASS])},stencilOpBack:function(e,t){return e.stencilOpSeparate(E.default.BACK,t[E.default.STENCIL_BACK_FAIL],t[E.default.STENCIL_BACK_PASS_DEPTH_FAIL],t[E.default.STENCIL_BACK_PASS_DEPTH_PASS])}},F=function(e,t){return e.isEnabled(t)},c=exports.GL_PARAMETER_GETTERS=(L(a={},E.default.BLEND,F),L(a,E.default.CULL_FACE,F),L(a,E.default.DEPTH_TEST,F),L(a,E.default.DITHER,F),L(a,E.default.POLYGON_OFFSET_FILL,F),L(a,E.default.SAMPLE_ALPHA_TO_COVERAGE,F),L(a,E.default.SAMPLE_COVERAGE,F),L(a,E.default.SCISSOR_TEST,F),L(a,E.default.STENCIL_TEST,F),L(a,E.default.RASTERIZER_DISCARD,F),a),O=function(e,t){if(e===t)return!0;var a=Array.isArray(e)||ArrayBuffer.isView(e),u=Array.isArray(t)||ArrayBuffer.isView(t);if(a&&u&&e.length===t.length){for(var E=0;E<e.length;++E)if(e[E]!==t[E])return!1;return!0}return!1};function s(e,t,a){var u=c[t],E=u?u(e,Number(t)):e.getParameter(Number(t)),_=i[t];return(0,f.default)("function"==typeof _),_(e,a,Number(t)),E}function D(e,t){var a={};for(var u in t){var E=Number(u),_=i[u];_&&("string"==typeof _?a[_]=!0:_(e,t[u],E))}var l=e.state&&e.state.cache;if(l){var f=Object.assign({},l,t);for(var r in a){(0,o[r])(e,f)}}}function B(e,t){var a=c[t];return a?a(e,Number(t)):e.getParameter(Number(t))}function K(e,t){t=t||T;var a=Array.isArray(t)?t:Object.keys(t),u={},E=!0,_=!1,l=void 0;try{for(var f,r=a[Symbol.iterator]();!(E=(f=r.next()).done);E=!0){var A=f.value;u[A]=B(e,A)}}catch(e){_=!0,l=e}finally{try{E||null==r.return||r.return()}finally{if(_)throw l}}return u}function U(e){return Object.assign({},T,{})}function p(e){D(e,U(e))}function G(e){var t=K(T),a={};for(var u in T)O(t[u],T[u])||(a[u]=t[u]);return a}
},{"../constants":387,"../webgl-utils":705,"../utils/assert":479}],695:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParameterPolyfill=o;var _,E=require("../constants"),e=t(E);function t(_){return _&&_.__esModule?_:{default:_}}function u(_,E,e){return E in _?Object.defineProperty(_,E,{value:e,enumerable:!0,configurable:!0,writable:!0}):_[E]=e,_}var n="OES_element_index",M="WEBGL_draw_buffers",T="EXT_disjoint_timer_query",A="EXT_disjoint_timer_query_webgl2",R="EXT_texture_filter_anisotropic",r="WEBGL_debug_renderer_info",N=35723,f=4352,O=36795,a=34047,i=37445,d=37446,l=function(_){return S(_)?void 0:0},X=(u(_={},e.default.READ_BUFFER,function(_){return S(_)?void 0:e.default.COLOR_ATTACHMENT0}),u(_,N,function(_){return S(_)?void 0:f}),u(_,e.default.RASTERIZER_DISCARD,l),u(_,e.default.SAMPLES,l),u(_,O,function(_,E){var e=S(_)?_.getExtension(A):_.getExtension(T);return e&&e.GPU_DISJOINT_EXT?E(e.GPU_DISJOINT_EXT):0}),u(_,i,function(_,E){var t=_.getExtension(r);return E(t&&t.UNMASKED_VENDOR_WEBGL||e.default.VENDOR)}),u(_,d,function(_,E){var t=_.getExtension(r);return E(t&&t.UNMASKED_RENDERER_WEBGL||e.default.RENDERER)}),u(_,a,function(_,E){var e=_.luma.extensions[R];return e?E(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),u(_,e.default.MAX_3D_TEXTURE_SIZE,l),u(_,e.default.MAX_ARRAY_TEXTURE_LAYERS,l),u(_,e.default.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,l),u(_,e.default.MAX_COLOR_ATTACHMENTS,function(_,E){if(!S(_)){var e=_.getExtension(M);return e?E(e.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),u(_,e.default.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,l),u(_,e.default.MAX_COMBINED_UNIFORM_BLOCKS,l),u(_,e.default.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,l),u(_,e.default.MAX_DRAW_BUFFERS,function(_){if(!S(_)){var E=_.getExtension(M);return E?E.MAX_DRAW_BUFFERS_WEBGL:0}}),u(_,e.default.MAX_ELEMENT_INDEX,function(_){return _.getExtension(n)?2147483647:65535}),u(_,e.default.MAX_ELEMENTS_INDICES,function(_){return _.getExtension(n)?16777216:65535}),u(_,e.default.MAX_ELEMENTS_VERTICES,function(_){return 16777216}),u(_,e.default.MAX_FRAGMENT_INPUT_COMPONENTS,l),u(_,e.default.MAX_FRAGMENT_UNIFORM_BLOCKS,l),u(_,e.default.MAX_FRAGMENT_UNIFORM_COMPONENTS,l),u(_,e.default.MAX_SAMPLES,l),u(_,e.default.MAX_SERVER_WAIT_TIMEOUT,l),u(_,e.default.MAX_TEXTURE_LOD_BIAS,l),u(_,e.default.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,l),u(_,e.default.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,l),u(_,e.default.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,l),u(_,e.default.MAX_UNIFORM_BLOCK_SIZE,l),u(_,e.default.MAX_UNIFORM_BUFFER_BINDINGS,l),u(_,e.default.MAX_VARYING_COMPONENTS,l),u(_,e.default.MAX_VERTEX_OUTPUT_COMPONENTS,l),u(_,e.default.MAX_VERTEX_UNIFORM_BLOCKS,l),u(_,e.default.MAX_VERTEX_UNIFORM_COMPONENTS,l),u(_,e.default.MIN_PROGRAM_TEXEL_OFFSET,l),u(_,e.default.MAX_PROGRAM_TEXEL_OFFSET,l),u(_,e.default.UNIFORM_BUFFER_OFFSET_ALIGNMENT,l),_);function S(_){return _&&32874===_.TEXTURE_BINDING_3D}function o(_,E,e){var t=X[e],u="function"==typeof t?t(_,E,e):t;return void 0!==u?u:E(e)}
},{"../constants":387}],639:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=E;var e,t=require("../utils/assert"),r=u(t),n=require("./polyfill-get-parameter");function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i="OES_vertex_array_object",o="ANGLE_instanced_arrays",f="WEBGL_draw_buffers",c="EXT_disjoint_timer_query",l="EXT_disjoint_timer_query_webgl2",s="EXT_texture_filter_anisotropic",d="VertexArray requires WebGL2 or OES_vertex_array_object extension";function y(e){return e&&32874===e.TEXTURE_BINDING_3D}function g(e,t){return{webgl2:y(e),ext:e.getExtension(t)}}var m=(a(e={},i,{meta:{suffix:"OES"},createVertexArray:function(){(0,r.default)(!1,d)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),a(e,o,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){(0,r.default)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),a(e,f,{meta:{suffix:"WEBGL"},drawBuffers:function(){(0,r.default)(!1)}}),a(e,c,{meta:{suffix:"EXT"},createQuery:function(){(0,r.default)(!1)},deleteQuery:function(){(0,r.default)(!1)},beginQuery:function(){(0,r.default)(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),a(e,l,{meta:{suffix:"EXT"},queryCounter:null}),a(e,"OVERRIDES",{readBuffer:function(e,t,r){y(e)&&t(r)},getVertexAttrib:function(e,t,r,n){var u,a=g(e,o),i=a.webgl2,f=a.ext;switch(n){case 35069:u=!!i&&void 0;break;case 35070:u=i||f?void 0:0}return void 0!==u?u:t(r,n)},getProgramParameter:function(e,t,r,n){if(!y(e))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return t(r,n)},getInternalformatParameter:function(e,t,r,n,u){if(!y(e))switch(u){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,u)},getTexParameter:function(e,t,r,n){switch(n){case 34046:var u=e.luma.extensions[s];n=u&&u.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(r,n)},getParameter:n.getParameterPolyfill,hint:function(e,t,r,n){return t(r,n)}}),e);function x(e){e.luma.extensions={};var t=e.getSupportedExtensions(),r=!0,n=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var o=a.value;e.luma[o]=e.getExtension(o)}}catch(e){n=!0,u=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw u}}}function _(e,t){var n=t.extension,u=t.target,a=t.target2,i=m[n];(0,r.default)(i);var o=i.meta,f=(void 0===o?{}:o).suffix,c=void 0===f?"":f,l=e.getExtension(n);Object.keys(i).forEach(function(t){var r="".concat(t).concat(c),n=null;"meta"===t||"function"==typeof e[t]||(l&&"function"==typeof l[r]?n=function(){return l[r].apply(l,arguments)}:"function"==typeof i[t]&&(n=i[t].bind(u))),n&&(u[t]=n,a[t]=n)})}function v(e,t){var r=t.target,n=t.target2,u=m.OVERRIDES;Object.keys(u).forEach(function(t){if("function"==typeof u[t]){var a=e[t]?e[t].bind(e):function(){},i=u[t].bind(null,e,a);r[t]=i,n[t]=i}})}function E(e){if(e.luma=e.luma||{},x(e),!e.luma.polyfilled){for(var t in m)"overrides"!==t&&_(e,{extension:t,target:e.luma,target2:e});v(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}
},{"../utils/assert":479,"./polyfill-get-parameter":695}],482:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_STATE_SETTERS=exports.deepEqual=exports.clone=void 0,exports.default=C,exports.pushContextState=N,exports.popContextState=h;var t=require("../constants"),e=f(t),a=require("./set-parameters"),n=require("./polyfill-context"),r=f(n),u=require("../utils/assert"),l=f(u);function f(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t,e){if(!i(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var E=exports.clone=function(t){return Array.isArray(t)||ArrayBuffer.isView(t)?t.slice():t},s=exports.deepEqual=function(t,e){var a=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(a&&n&&t.length===e.length){for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return t===e},A={enable:function(t,e){return t(d({},e,!0))},disable:function(t,e){return t(d({},e,!1))},pixelStorei:function(t,e,a){return t(d({},e,a))},hint:function(t,e,a){return t(d({},e,a))},bindFramebuffer:function(t,a,n){var r;switch(a){case e.default.FRAMEBUFFER:return t((d(r={},e.default.DRAW_FRAMEBUFFER_BINDING,n),d(r,e.default.READ_FRAMEBUFFER_BINDING,n),r));case e.default.DRAW_FRAMEBUFFER:return t(d({},e.default.DRAW_FRAMEBUFFER_BINDING,n));case e.default.READ_FRAMEBUFFER:return t(d({},e.default.READ_FRAMEBUFFER_BINDING,n));default:return null}},blendColor:function(t,a,n,r,u){return t(d({},e.default.BLEND_COLOR,new Float32Array([a,n,r,u])))},blendEquation:function(t,a){var n;return t((d(n={},e.default.BLEND_EQUATION_RGB,a),d(n,e.default.BLEND_EQUATION_ALPHA,a),n))},blendEquationSeparate:function(t,a,n){var r;return t((d(r={},e.default.BLEND_EQUATION_RGB,a),d(r,e.default.BLEND_EQUATION_ALPHA,n),r))},blendFunc:function(t,a,n){var r;return t((d(r={},e.default.BLEND_SRC_RGB,a),d(r,e.default.BLEND_DST_RGB,n),d(r,e.default.BLEND_SRC_ALPHA,a),d(r,e.default.BLEND_DST_ALPHA,n),r))},blendFuncSeparate:function(t,a,n,r,u){var l;return t((d(l={},e.default.BLEND_SRC_RGB,a),d(l,e.default.BLEND_DST_RGB,n),d(l,e.default.BLEND_SRC_ALPHA,r),d(l,e.default.BLEND_DST_ALPHA,u),l))},clearColor:function(t,a,n,r,u){return t(d({},e.default.COLOR_CLEAR_VALUE,new Float32Array([a,n,r,u])))},clearDepth:function(t,a){return t(d({},e.default.DEPTH_CLEAR_VALUE,a))},clearStencil:function(t,a){return t(d({},e.default.STENCIL_CLEAR_VALUE,a))},colorMask:function(t,a,n,r,u){return t(d({},e.default.COLOR_WRITEMASK,[a,n,r,u]))},cullFace:function(t,a){return t(d({},e.default.CULL_FACE_MODE,a))},depthFunc:function(t,a){return t(d({},e.default.DEPTH_FUNC,a))},depthRange:function(t,a,n){return t(d({},e.default.DEPTH_RANGE,new Float32Array([a,n])))},depthMask:function(t,a){return t(d({},e.default.DEPTH_WRITEMASK,a))},frontFace:function(t,a){return t(d({},e.default.FRONT_FACE,a))},lineWidth:function(t,a){return t(d({},e.default.LINE_WIDTH,a))},polygonOffset:function(t,a,n){var r;return t((d(r={},e.default.POLYGON_OFFSET_FACTOR,a),d(r,e.default.POLYGON_OFFSET_UNITS,n),r))},sampleCoverage:function(t,a,n){var r;return t((d(r={},e.default.SAMPLE_COVERAGE_VALUE,a),d(r,e.default.SAMPLE_COVERAGE_INVERT,n),r))},scissor:function(t,a,n,r,u){return t(d({},e.default.SCISSOR_BOX,new Int32Array([a,n,r,u])))},stencilMask:function(t,a){var n;return t((d(n={},e.default.STENCIL_WRITEMASK,a),d(n,e.default.STENCIL_BACK_WRITEMASK,a),n))},stencilMaskSeparate:function(t,a,n){return t(d({},a===e.default.FRONT?e.default.STENCIL_WRITEMASK:e.default.STENCIL_BACK_WRITEMASK,n))},stencilFunc:function(t,a,n,r){var u;return t((d(u={},e.default.STENCIL_FUNC,a),d(u,e.default.STENCIL_REF,n),d(u,e.default.STENCIL_VALUE_MASK,r),d(u,e.default.STENCIL_BACK_FUNC,a),d(u,e.default.STENCIL_BACK_REF,n),d(u,e.default.STENCIL_BACK_VALUE_MASK,r),u))},stencilFuncSeparate:function(t,a,n,r,u){var l;return t((d(l={},a===e.default.FRONT?e.default.STENCIL_FUNC:e.default.STENCIL_BACK_FUNC,n),d(l,a===e.default.FRONT?e.default.STENCIL_REF:e.default.STENCIL_BACK_REF,r),d(l,a===e.default.FRONT?e.default.STENCIL_VALUE_MASK:e.default.STENCIL_BACK_VALUE_MASK,u),l))},stencilOp:function(t,a,n,r){var u;return t((d(u={},e.default.STENCIL_FAIL,a),d(u,e.default.STENCIL_PASS_DEPTH_FAIL,n),d(u,e.default.STENCIL_PASS_DEPTH_PASS,r),d(u,e.default.STENCIL_BACK_FAIL,a),d(u,e.default.STENCIL_BACK_PASS_DEPTH_FAIL,n),d(u,e.default.STENCIL_BACK_PASS_DEPTH_PASS,r),u))},stencilOpSeparate:function(t,a,n,r,u){var l;return t((d(l={},a===e.default.FRONT?e.default.STENCIL_FAIL:e.default.STENCIL_BACK_FAIL,n),d(l,a===e.default.FRONT?e.default.STENCIL_PASS_DEPTH_FAIL:e.default.STENCIL_BACK_PASS_DEPTH_FAIL,r),d(l,a===e.default.FRONT?e.default.STENCIL_PASS_DEPTH_PASS:e.default.STENCIL_BACK_PASS_DEPTH_PASS,u),l))},viewport:function(t,a,n,r,u){return t(d({},e.default.VIEWPORT,new Int32Array([a,n,r,u])))}};function S(t,e){var a=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=a.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:a.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function L(t,e,a){var n=t[e].bind(t);t[e]=function(){for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];var f,i=a.apply(void 0,[t.state._updateCache].concat(u)),c=i.valueChanged,o=i.oldValue;c&&((f=t.state).log.apply(f,["gl.".concat(e)].concat(u)),n.apply(void 0,u));return o},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}exports.GL_STATE_SETTERS=A;var T=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,u=void 0!==r&&r,l=n.log,f=void 0===l?function(){}:l;c(this,t),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=u?(0,a.getParameters)(e):Object.assign({},a.GL_PARAMETER_DEFAULTS),this.log=f,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return _(t,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){(0,l.default)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];(0,a.setParameters)(this.gl,t,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,a=!1,n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var r in t)(0,l.default)(void 0!==r),s(t[r],this.cache[r])||(a=!0,e=this.cache[r],!n||r in n||(n[r]=this.cache[r]),this.cache[r]=t[r]);return{valueChanged:a,oldValue:e}}}]),t}();function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.enable,n=void 0===a||a,u=e.copyState;if((0,l.default)(void 0!==u),!t.state){for(var f in(0,r.default)(t),t.state=new T(t,{copyState:u,enable:n}),A){L(t,f,A[f])}S(t,"getParameter"),S(t,"isEnabled")}return t.state.enable=n,t}function N(t){t.state||C(t,{copyState:!1}),t.state.push()}function h(t){(0,l.default)(t.state),t.state.pop()}
},{"../constants":387,"./set-parameters":485,"./polyfill-context":639,"../utils/assert":479}],397:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableDebug=l,exports.makeDebugContext=u,exports.getRealContext=a,exports.getDebugContext=i;var e=require("../utils/globals"),n=require("../utils");function t(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n}function o(e,n){if(!t(e,n))throw new TypeError("Cannot call a class as a function")}function r(e){return e.luma=e.luma||{},e.luma}function l(e){n.log.debug=e}function u(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===e?null:void 0===n||n?i(e):a(e)}function a(e){if(null===e)return null;var n=r(e);return n.realContext?n.realContext:e}function i(t){if(null===t)return null;if(!e.global.WebGLDebug)return n.log.warn('WebGL debug mode activation failed. import "luma.gl/debug" to enable.')(),t;var l=r(t);if(l.realContext)return t;if(l.debugContext)return l.debugContext;var u=e.global.WebGLDebug.makeDebugContext(t,c,b);return Object.assign(function e(){o(this,e)}.prototype,u),l.debugContext=u,u.debug=!0,u.gl=t,n.log.info("debug context actived."),u}function g(n,t){var o=e.global.WebGLDebug.glFunctionArgsToString(n,t);return o="".concat(o.slice(0,100)).concat(o.length>100?"...":""),"gl.".concat(n,"(").concat(o,")")}function c(t,o,r){var l=e.global.WebGLDebug.glEnumToString(t),u=e.global.WebGLDebug.glFunctionArgsToString(o,r),a="".concat(l," in gl.").concat(o,"(").concat(u,")");if(n.log.throw)throw new Error(a);n.log.error(a)()}function b(e,t){var o;if(n.log.priority>=4&&(o=g(e,t),n.log.info(4,o)()),n.log.break){o=o||g(e,t);n.log.break&&n.log.break.every(function(e){return-1!==o.indexOf(e)})}var r=!0,l=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){if(void 0===a.value){if(o=o||g(e,t),n.log.throw)throw new Error("Undefined argument: ".concat(o));n.log.error("Undefined argument: ".concat(o))}}}catch(e){l=!0,u=e}finally{try{r||null==i.return||i.return()}finally{if(l)throw u}}}
},{"../utils/globals":475,"../utils":706}],395:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEST_EXPORTS=void 0,exports.getContextLimits=R,exports.getGLContextInfo=u,exports.getGLContextInfo2=A,exports.getContextInfo=r,exports.glGetDebugInfo=f;var e,E=require("../constants"),l=_(E),t=require("../webgl-utils");function _(e){return e&&e.__esModule?e:{default:e}}function a(e,E,l){return E in e?Object.defineProperty(e,E,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[E]=l,e}var g=(a(e={},l.default.ALIASED_LINE_WIDTH_RANGE,{gl1:new Float32Array([1,1])}),a(e,l.default.ALIASED_POINT_SIZE_RANGE,{gl1:new Float32Array([1,1])}),a(e,l.default.MAX_TEXTURE_SIZE,{gl1:64,gl2:2048}),a(e,l.default.MAX_CUBE_MAP_TEXTURE_SIZE,{gl1:16}),a(e,l.default.MAX_TEXTURE_IMAGE_UNITS,{gl1:8}),a(e,l.default.MAX_COMBINED_TEXTURE_IMAGE_UNITS,{gl1:8}),a(e,l.default.MAX_VERTEX_TEXTURE_IMAGE_UNITS,{gl1:0}),a(e,l.default.MAX_RENDERBUFFER_SIZE,{gl1:1}),a(e,l.default.MAX_VARYING_VECTORS,{gl1:8}),a(e,l.default.MAX_VERTEX_ATTRIBS,{gl1:8}),a(e,l.default.MAX_VERTEX_UNIFORM_VECTORS,{gl1:128}),a(e,l.default.MAX_FRAGMENT_UNIFORM_VECTORS,{gl1:16}),a(e,l.default.MAX_VIEWPORT_DIMS,{gl1:new Int32Array([0,0])}),a(e,l.default.MAX_3D_TEXTURE_SIZE,{gl1:0,gl2:256}),a(e,l.default.MAX_ARRAY_TEXTURE_LAYERS,{gl1:0,gl2:256}),a(e,l.default.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,{gl1:0,gl2:0}),a(e,l.default.MAX_COLOR_ATTACHMENTS,{gl1:0,gl2:4}),a(e,l.default.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_COMBINED_UNIFORM_BLOCKS,{gl1:0,gl2:0}),a(e,l.default.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_DRAW_BUFFERS,{gl1:0,gl2:4}),a(e,l.default.MAX_ELEMENT_INDEX,{gl1:0,gl2:0}),a(e,l.default.MAX_ELEMENTS_INDICES,{gl1:0,gl2:0}),a(e,l.default.MAX_ELEMENTS_VERTICES,{gl1:0,gl2:0}),a(e,l.default.MAX_FRAGMENT_INPUT_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_FRAGMENT_UNIFORM_BLOCKS,{gl1:0,gl2:0}),a(e,l.default.MAX_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_SAMPLES,{gl1:0,gl2:0}),a(e,l.default.MAX_SERVER_WAIT_TIMEOUT,{gl1:0,gl2:0}),a(e,l.default.MAX_TEXTURE_LOD_BIAS,{gl1:0,gl2:0}),a(e,l.default.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,{gl1:0,gl2:0}),a(e,l.default.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_UNIFORM_BLOCK_SIZE,{gl1:0,gl2:0}),a(e,l.default.MAX_UNIFORM_BUFFER_BINDINGS,{gl1:0,gl2:0}),a(e,l.default.MAX_VARYING_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_VERTEX_OUTPUT_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MAX_VERTEX_UNIFORM_BLOCKS,{gl1:0,gl2:0}),a(e,l.default.MAX_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),a(e,l.default.MIN_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:-8,negative:!0}),a(e,l.default.MAX_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:7}),a(e,l.default.UNIFORM_BUFFER_OFFSET_ALIGNMENT,{gl1:0,gl2:0}),e);function R(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var E=(0,t.isWebGL2)(e);for(var l in g){var _=g[l],a=_.gl1,R="gl2"in _?_.gl2:_.gl1,u=E?R:a,M="gl2"in _&&!E||"extension"in _&&!e.getExtension(_.extension)?u:e.getParameter(l);e.luma.limits[l]=M,e.luma.webgl1MinLimits[l]=a,e.luma.webgl2MinLimits[l]=R}}return e.luma.limits}function u(e){if(e.luma=e.luma||{},!e.luma.info){var E,t=e.getExtension("WEBGL_debug_renderer_info");e.luma.info=(a(E={},l.default.VENDOR,e.getParameter(l.default.VENDOR)),a(E,l.default.RENDERER,e.getParameter(l.default.RENDERER)),a(E,l.default.UNMASKED_VENDOR_WEBGL,e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||l.default.VENDOR)),a(E,l.default.UNMASKED_RENDERER_WEBGL,e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||l.default.RENDERER)),a(E,l.default.VERSION,e.getParameter(l.default.VERSION)),a(E,l.default.SHADING_LANGUAGE_VERSION,e.getParameter(l.default.SHADING_LANGUAGE_VERSION)),E)}return e.luma.info}var M=37445,N=37446;function A(e){var E=e.getParameter(l.default.VENDOR),t=e.getParameter(l.default.RENDERER),_=e.getExtension("WEBGL_debug_renderer_info"),a=_&&e.getParameter(_.UNMASKED_VENDOR_WEBGL||l.default.VENDOR),g=_&&e.getParameter(_.UNMASKED_RENDERER_WEBGL||l.default.RENDERER);return{vendor:a||E,renderer:g||t,vendorMasked:E,rendererMasked:t,version:e.getParameter(l.default.VERSION),shadingLanguageVersion:e.getParameter(l.default.SHADING_LANGUAGE_VERSION)}}function r(e){var E=R(e),t=u(e);return{vendor:t[M]||t[l.default.VENDOR],renderer:t[N]||t[l.default.RENDERER],version:t[l.default.VERSION],shadingLanguageVersion:t[l.default.SHADING_LANGUAGE_VERSION],info:t,limits:E,webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits}}function f(e){return A(e)}var T=exports.TEST_EXPORTS={WEBGL_LIMITS:g};
},{"../constants":387,"../webgl-utils":705}],484:[function(require,module,exports) {
"use strict";function e(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function r(r,n){if(!e(r,n))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,r,i){return r&&n(e.prototype,r),i&&n(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0});var t="Query was deleted before result was available",a="Query was canceled before result was available",l=function(e){return e},u=function(){function n(){r(this,n),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return i(n,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var r=!0,n=!1,i=void 0;try{for(var t,a=this.pendingQueries.values()[Symbol.iterator]();!(r=(t=a.next()).done);r=!0){var l=t.value;if(l.isResultAvailable()){var u=l.getResult();this.resolveQuery(l,u)}}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setInvalidator",value:function(e){var r=e.queryType,n=e.errorMessage,i=e.checkInvalid;this.invalidQueryType=r,this.invalidErrorMessage=n,this.checkInvalid=i}},{key:"beginQuery",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var i={};return e.promise=new Promise(function(e,r){i.resolve=e,i.reject=r}),Object.assign(e.promise,i),this.pendingQueries.add(e),e.promise.then(r).catch(n)}},{key:"resolveQuery",value:function(e,r){this.pendingQueries.delete(e),e.promise.resolve(r)}},{key:"rejectQuery",value:function(e,r){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(r))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,t)}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,a)}},{key:"invalidateQuery",value:function(r){e(r,this.invalidQueryType)&&this.rejectQuery(r,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var r=!0,n=!1,i=void 0;try{for(var t,a=this.pendingQueries.values()[Symbol.iterator]();!(r=(t=a.next()).done);r=!0){var l=t.value;this.invalidateQuery(l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}}}]),n}();exports.default=new u;
},{}],393:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0,exports.isWebGL=G,exports.isWebGL2=E,exports.assertWebGLContext=R,exports.assertWebGL2Context=L,exports.setContextDefaults=_,exports.createGLContext=W,exports.destroyGLContext=y,exports.resizeGLContext=q,exports.pollGLContext=B;var e=require("../webgl-utils"),t=require("./create-headless-context"),n=require("./create-canvas"),r=require("./create-browser-context"),o=require("./track-context-state"),i=h(o),a=require("./debug-context"),s=require("./context-limits"),u=require("../webgl-utils/query-manager"),c=h(u),l=require("../utils"),g=require("../utils/assert"),d=h(g);function h(e){return e&&e.__esModule?e:{default:e}}function x(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var v=34962,f=32874,b=exports.ERR_CONTEXT="Invalid WebGLRenderingContext",p=exports.ERR_WEBGL=b,w=exports.ERR_WEBGL2="Requires WebGL2";function G(t){return Boolean(t&&(x(t,e.WebGLRenderingContext)||t.ARRAY_BUFFER===v))}function E(t){return Boolean(t&&(x(t,e.WebGL2RenderingContext)||t.TEXTURE_BINDING_3D===f))}function R(e){(0,d.default)(G(e),b)}function L(e){(0,d.default)(E(e),w)}var C={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(C,{width:1,height:1},e)}function W(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=o=Object.assign({},C,o),u=s.canvas,c=s.width,g=s.height,d=s.throwOnError,h=s.manageState,x=s.debug;function v(e){if(d)throw new Error(e);return null}if(l.isBrowser){var f=(0,n.getCanvas)({canvas:u,width:c,height:g,onError:v});e=(0,r.createBrowserContext)({canvas:f,opts:o})}else e=(0,t.createHeadlessContext)({width:c,height:g,opts:o,onError:v});return e?(h&&(0,i.default)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.log.log.apply(l.log,[1].concat(t))()}}),l.isBrowser&&x&&(e=(0,a.makeDebugContext)(e,{debug:x}),l.log.priority=Math.max(l.log.priority,1)),m(e),e):null}function y(e){var t=e.getExtension("STACKGL_destroy_context");t&&t.destroy()}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=t.useDevicePixels&&window.devicePixelRatio||1,r="width"in t?t.width:e.canvas.clientWidth,o="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=r*n,void(e.canvas.height=o*n)}var i=e.getExtension("STACKGL_resize_drawingbuffer");i&&"width"in t&&"height"in t&&i.resize(t.width,t.height)}function B(e){c.default.poll(e)}function m(e){var t=E(e)?"WebGL2":"WebGL1",n=(0,s.glGetDebugInfo)(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",o=e.debug?" debug":"";l.log.once(0,"".concat(t).concat(o," context ").concat(r))()}
},{"../webgl-utils":705,"./create-headless-context":480,"./create-canvas":481,"./create-browser-context":483,"./track-context-state":482,"./debug-context":397,"./context-limits":395,"../webgl-utils/query-manager":484,"../utils":706,"../utils/assert":479}],394:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getModifiedParameters=exports.resetParameters=exports.setParameter=exports.getParameters=exports.getParameter=exports.LUMA_SETTERS=void 0,exports.setParameters=y,exports.withParameters=m;var e=require("../constants"),t=l(e),r=require("../webgl-context/track-context-state"),n=require("../webgl-context/set-parameters"),a=require("../utils"),u=require("../utils/assert"),o=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return s(e)||f(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){var r=[],n=!0,a=!1,u=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw u}}return r}function s(e){if(Array.isArray(e))return e}function p(e){return T(e)||S(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function S(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function T(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var E={framebuffer:function(e,r){var n=r&&r.handle?r.handle:r;return e.bindFramebuffer(t.default.FRAMEBUFFER,n)},blend:function(e,r){return r?e.enable(t.default.BLEND):e.disable(t.default.BLEND)},blendColor:function(e,t){return e.blendColor.apply(e,p(t))},blendEquation:function(e,t){t=b(t)?t:[t,t],e.blendEquationSeparate.apply(e,p(t))},blendFunc:function(e,t){t=b(t)&&2===t.length?p(t).concat(p(t)):t,e.blendFuncSeparate.apply(e,p(t))},clearColor:function(e,t){return e.clearColor.apply(e,p(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,p(t))},cull:function(e,r){return r?e.enable(t.default.CULL_FACE):e.disable(t.default.CULL_FACE)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,r){return r?e.enable(t.default.DEPTH_TEST):e.disable(t.default.DEPTH_TEST)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,p(t))},dither:function(e,r){return r?e.enable(t.default.DITHER):e.disable(t.default.DITHER)},derivativeHint:function(e,r){e.hint(t.default.FRAGMENT_SHADER_DERIVATIVE_HINT,r)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,r){return e.hint(t.default.GENERATE_MIPMAP_HINT,r)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,r){return r?e.enable(t.default.POLYGON_OFFSET_FILL):e.disable(t.default.POLYGON_OFFSET_FILL)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,p(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,p(t))},scissorTest:function(e,r){return r?e.enable(t.default.SCISSOR_TEST):e.disable(t.default.SCISSOR_TEST)},scissor:function(e,t){return e.scissor.apply(e,p(t))},stencilTest:function(e,r){return r?e.enable(t.default.STENCIL_TEST):e.disable(t.default.STENCIL_TEST)},stencilMask:function(e,r){var n=i(r=b(r)?r:[r,r],2),a=n[0],u=n[1];e.stencilMaskSeparate(t.default.FRONT,a),e.stencilMaskSeparate(t.default.BACK,u)},stencilFunc:function(e,r){var n=i(r=b(r)&&3===r.length?p(r).concat(p(r)):r,6),a=n[0],u=n[1],o=n[2],l=n[3],c=n[4],f=n[5];e.stencilFuncSeparate(t.default.FRONT,a,u,o),e.stencilFuncSeparate(t.default.BACK,l,c,f)},stencilOp:function(e,r){var n=i(r=b(r)&&3===r.length?p(r).concat(p(r)):r,6),a=n[0],u=n[1],o=n[2],l=n[3],c=n[4],f=n[5];e.stencilOpSeparate(t.default.FRONT,a,u,o),e.stencilOpSeparate(t.default.BACK,l,c,f)},viewport:function(e,t){return e.viewport.apply(e,p(t))}};function b(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function y(e,t){for(var r in(0,n.setParameters)(e,t),t){var a=E[r];a&&a(e,t[r],r)}}function m(e,t,n){if((0,a.isObjectEmpty)(t))return n(e);var u,l=t.nocatch,i=void 0===l||l;if((0,o.default)(!t.frameBuffer),(0,r.pushContextState)(e),y(e,t),i)u=n(e),(0,r.popContextState)(e);else try{u=n(e)}finally{(0,r.popContextState)(e)}return u}exports.LUMA_SETTERS=E,exports.getParameter=n.getParameter,exports.getParameters=n.getParameters,exports.setParameter=n.setParameter,exports.resetParameters=n.resetParameters,exports.getModifiedParameters=n.getModifiedParameters;
},{"../constants":387,"../webgl-context/track-context-state":482,"../webgl-context/set-parameters":485,"../utils":706,"../utils/assert":479}],641:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./context");Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return e.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return e.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return e.resizeGLContext}}),Object.defineProperty(exports,"pollGLContext",{enumerable:!0,get:function(){return e.pollGLContext}});var t=require("./context-state");Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return t.withParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return t.resetParameters}});var r=require("./context-limits");Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return r.getContextInfo}});var n=require("./create-canvas");Object.defineProperty(exports,"pageLoadPromise",{enumerable:!0,get:function(){return n.pageLoadPromise}}),Object.defineProperty(exports,"getPageLoadPromise",{enumerable:!0,get:function(){return n.getPageLoadPromise}}),Object.defineProperty(exports,"createCanvas",{enumerable:!0,get:function(){return n.createCanvas}}),Object.defineProperty(exports,"getCanvas",{enumerable:!0,get:function(){return n.getCanvas}});var o=require("./create-headless-context");Object.defineProperty(exports,"createHeadlessContext",{enumerable:!0,get:function(){return o.createHeadlessContext}});var a=require("./create-browser-context");Object.defineProperty(exports,"trackContextCreation",{enumerable:!0,get:function(){return a.trackContextCreation}}),Object.defineProperty(exports,"createBrowserContext",{enumerable:!0,get:function(){return a.createBrowserContext}});var u=require("./polyfill-context");Object.defineProperty(exports,"polyfillContext",{enumerable:!0,get:function(){return i(u).default}});var c=require("./track-context-state");function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return i(c).default}});
},{"./context":393,"./context-state":394,"./context-limits":395,"./create-canvas":481,"./create-headless-context":480,"./create-browser-context":483,"./polyfill-context":639,"./track-context-state":482}],396:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEST_EXPORTS=exports.FEATURES=void 0,exports.canCompileGLGSExtension=u,exports.hasFeature=i,exports.hasFeatures=l,exports.getFeatures=s;var e=require("../webgl-utils"),_=require("../utils"),r=require("../utils/assert"),t=E(r);function E(e){return e&&e.__esModule?e:{default:e}}var a={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},T={};Object.keys(a).forEach(function(e){T[e]=e}),exports.FEATURES=T;var o={};function u(e,r){var E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},T=a[r];if((0,t.default)(T,r),!(0,_.isOldIE)(E))return!0;if(r in o)return o[r];var u=T[0],n="#extension GL_".concat(u," : enable\nvoid main(void) {}"),i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,n),e.compileShader(i);var l=e.getShaderParameter(i,e.COMPILE_STATUS);return e.deleteShader(i),o[r]=l,l}function n(_,r){var E=a[r];(0,t.default)(E,r);var T=(0,e.isWebGL2)(_)&&E[1]||E[0],o="string"==typeof T?Boolean(_.getExtension(T)):T;return(0,t.default)(!1===o||!0===o),o}function i(e,_){return l(e,_)}function l(e,_){return(_=Array.isArray(_)?_:[_]).every(function(_){return n(e,_)})}function s(_){if(_.luma=_.luma||{},!_.luma.caps)for(var r in _.luma.caps={},_.luma.caps.webgl2=(0,e.isWebGL2)(_),a)_.luma.caps[r]=n(_,r);return _.luma.caps}var f=exports.TEST_EXPORTS={WEBGL_FEATURES:a};
},{"../webgl-utils":705,"../utils":706,"../utils/assert":479}],486:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../init"),t=s(e),r=require("../webgl-context"),n=require("../webgl-utils"),a=require("../utils"),i=require("../utils/assert"),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var d="Resource subclass must define virtual methods",f=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),(0,n.assertWebGLContext)(t);var o=i.id,s=i.userData,u=void 0===s?{}:s;this.gl=t,this.ext=(0,r.polyfillContext)(t),this.id=o||(0,a.uid)(this.constructor.name),this.userData=u,this.opts=i,this._handle=i.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return h(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),r&&t&&r.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(0,n.getKeyValue)(this.gl,e),(0,o.default)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var a=(0,n.isWebGL2)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var i=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1;return a?s:i}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,a=t.keys,i=this.constructor.PARAMETERS||{},o=(0,n.isWebGL2)(this.gl),s={},u=r||Object.keys(i),l=!0,c=!1,h=void 0;try{for(var d,f=u[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var v=d.value,g=i[v];if(g&&(!("webgl2"in g)||o)&&(!("extension"in g)||this.gl.getExtension(g.extension))){var y=a?(0,n.getKey)(this.gl,v):v;s[y]=this.getParameter(v,e),a&&"GLenum"===g.type&&(s[y]=(0,n.getKey)(this.gl,s[y]))}}}catch(e){c=!0,h=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw h}}return s}},{key:"setParameter",value:function(e,t){e=(0,n.getKeyValue)(this.gl,e),(0,o.default)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var a=(0,n.isWebGL2)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=(0,n.getKeyValue)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(d)}},{key:"_deleteHandle",value:function(){throw new Error(d)}},{key:"_getOptsFromHandle",value:function(){throw new Error(d)}},{key:"_getParameter",value:function(e,t){throw new Error(d)}},{key:"_setParameter",value:function(e,t){throw new Error(d)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,r=t.default.stats;r.resourceCount=r.resourceCount||0,r.resourceMap=r.resourceMap||{},r.resourceCount++,r.resourceMap[e]=r.resourceMap[e]||{created:0,active:0},r.resourceMap[e].created++,r.resourceMap[e].active++}},{key:"_removeStats",value:function(){var e=this.constructor.name;t.default.stats.resourceMap[e].active--}},{key:"handle",get:function(){return this._handle}}]),e}();exports.default=f;
},{"../init":386,"../webgl-context":641,"../webgl-utils":705,"../utils":706,"../utils/assert":479}],399:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BufferLayout=void 0;var e=require("./resource"),t=s(e),i=require("../webgl-utils"),n=require("../webgl-utils/typed-array-utils"),r=require("../utils/assert"),a=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}var c=36662,b=36663,v=35982,p=35345,m=34962,B=35044,x=5126,_=exports.BufferLayout=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.type,n=t.size,r=void 0===n?1:n,a=t.offset,s=void 0===a?0:a,o=t.stride,l=void 0===o?0:o,u=t.normalized,f=void 0!==u&&u,d=t.integer,h=void 0!==d&&d,g=t.instanced,c=void 0===g?0:g;y(this,e),this.type=i,this.size=r,this.offset=s,this.stride=l,this.normalized=f,this.integer=h,this.instanced=c},w=function(e){function r(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,r),(t=d(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,i))).target=i.target||(t.gl.webgl2?c:m),t.setData(i),Object.seal(g(t)),t}return h(r,t.default),f(r,[{key:"setDataLayout",value:function(e){var t=e.layout,i=e.type,n=e.size,r=void 0===n?1:n,a=e.offset,s=void 0===a?0:a,o=e.stride,l=void 0===o?0:o,u=e.normalized,f=void 0!==u&&u,d=e.integer,h=void 0!==d&&d,g=e.instanced,y=void 0===g?0:g;return this.layout=t||new _({type:i||this.type,size:r,offset:s,stride:l,normalized:f,integer:h,instanced:y}),this}},{key:"updateLayout",value:function(e){Object.assign(this.layout,e)}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,i=e.bytes,r=e.usage,s=void 0===r?B:r,o=(e.layout,e.type),l=(e.size,e.offset,e.stride,e.normalized,e.integer,e.instanced,e.index),u=void 0===l?null:l,f=arguments[0];t?(o=o||(0,n.getGLTypeFromTypedArray)(t),i=t.byteLength,(0,a.default)(o)):(o=o||x,i&&0!==i||(i=0,t=new Float32Array(0))),this.bytes=i,this.bytesUsed=i,this.data=t,this.type=o,this.usage=s,this.index=u,this.setDataLayout(Object.assign(f));var d=this.gl.webgl2?b:this.target;return this.gl.bindBuffer(d,this.handle),this.gl.bufferData(d,t||i,s),this.gl.bindBuffer(d,null),this}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.offset,r=void 0===n?0:n,s=e.srcOffset,o=void 0===s?0:s,l=e.length;(0,a.default)(t);var u=this.gl.webgl2?b:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==l?((0,i.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,r,t,o,l||0)):this.gl.bufferSubData(u,r,t),this.gl.bindBuffer(u,null),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,a=e.writeOffset,s=void 0===a?0:a,o=e.size;return(0,i.assertWebGL2Context)(this.gl),this.gl.bindBuffer(c,t.handle),this.gl.bindBuffer(b,this.handle),this.gl.copyBufferSubData(c,b,r,s,o),this.gl.bindBuffer(c,null),this.gl.bindBuffer(b,null),this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,r=void 0===t?null:t,s=e.srcByteOffset,o=void 0===s?0:s,l=e.dstOffset,u=void 0===l?0:l,f=e.length,d=void 0===f?0:f;(0,i.assertWebGL2Context)(this.gl);var h,g,y=(0,n.getTypedArrayFromGLType)(this.type,{clamped:!1}),b=this._getAvailableElementCount(o),v=u;r?h=(g=r.length)-v:g=v+(h=Math.min(b,d||b));var p=Math.min(b,h);return d=d||p,(0,a.default)(d<=p,"Invalid srcByteOffset, dstOffset and length combination"),r=r||new y(g),this.gl.bindBuffer(c,this.handle),this.gl.getBufferSubData(c,o,r,u,d),this.gl.bindBuffer(c,null),r}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,s=void 0===r?this.index:r,o=e.offset,l=void 0===o?0:o,u=e.size;switch(n===p||n===v?void 0!==u?"ranged":"indexed":"non-indexed"){case"non-indexed":this.gl.bindBuffer(n,this.handle);break;case"indexed":(0,i.assertWebGL2Context)(this.gl),(0,a.default)(0===l),this.gl.bindBufferBase(n,s,this.handle);break;case"ranged":(0,i.assertWebGL2Context)(this.gl),this.gl.bindBufferRange(n,s,this.handle,l,u);break;default:(0,a.default)(!1)}return this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,i=void 0===t?this.target:t,n=e.index,r=void 0===n?this.index:n;return i===p||i===v?this.gl.bindBufferBase(i,r,null):this.gl.bindBuffer(i,null),this}},{key:"getIndexedParameter",value:function(e,t){var i=this.gl.webgl2?c:this.target;return this.gl.bindBuffer(i,t),this.gl.getIndexedParameter(e,t)}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"_getAvailableElementCount",value:function(e){var t=(0,n.getTypedArrayFromGLType)(this.type,{clamped:!1});return this.bytes/t.BYTES_PER_ELEMENT-e/t.BYTES_PER_ELEMENT}}]),r}();exports.default=w;
},{"./resource":486,"../webgl-utils":705,"../webgl-utils/typed-array-utils":490,"../utils/assert":479}],400:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var e=require("./resource"),t=i(e),r=require("../webgl-utils"),n=require("../utils"),o=require("../utils/assert"),a=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y="Shader: GLSL source code must be a JavaScript string",g=35632,m=35633,S=35713,b=35663,_=exports.Shader=function(e){function o(e,t,i){var u;return c(this,o),(0,r.assertWebGLContext)(e),(0,a.default)("string"==typeof t,y),(u=l(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,{id:(0,r.getShaderName)(t)||(0,n.uid)(o.getTypeName(i))}))).shaderType=i,u.source=t,u.opts.source=t,u.initialize(u.opts),u}return p(o,t.default),f(o,null,[{key:"getTypeName",value:function(e){switch(e){case m:return"vertex-shader";case g:return"fragment-shader";default:return(0,a.default)(!1),"unknown"}}}]),f(o,[{key:"initialize",value:function(e){var t=e.source,o=(0,r.getShaderName)(t);o&&(this.id=(0,n.uid)(o)),this._compile(t),this.opts.source=t}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,r.getShaderName)(this.opts.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(S)){var e=this.gl.getShaderInfoLog(this.handle),t=(0,r.parseGLSLCompilerError)(e,this.source,this.shaderType),o=t.shaderName,a=t.errors,i=t.warnings;throw n.log.error("GLSL compilation errors in ".concat(o,"\n").concat(a))(),n.log.warn("GLSL compilation warnings in ".concat(o,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(o))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(b),source:this.getSource()}}}]),o}(),v=exports.VertexShader=function(e){function t(e,r){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,m))}return p(t,_),f(t,[{key:"_createHandle",value:function(){return this.gl.createShader(m)}}]),t}(),w=exports.FragmentShader=function(e){function t(e,r){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,g))}return p(t,_),f(t,[{key:"_createHandle",value:function(){return this.gl.createShader(g)}}]),t}();
},{"./resource":486,"../webgl-utils":705,"../utils":706,"../utils/assert":479}],414:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./resource"),t=n(e),r=require("../webgl-utils"),i=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function f(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A="OES_vertex_array_object",g=34963,x=34338,_=34339,m=34340,p=34341,k=34922,E=34373,w=34975,L=35069,V=35070,B=[x,_,m,p,k,E,w,L,V],I="elements must be GL.ELEMENT_ARRAY_BUFFER",R=function(e){function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),(t=b(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r))).elements=null,t.buffers={},t.locations={},t.names={},t.drawParameters={},t._bound=!1,t._filledLocations={},Object.seal(d(t)),t.initialize(r),t}return y(n,t.default),h(n,[{key:"MAX_ATTRIBUTES",get:function(){return this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS)}}],[{key:"isSupported",value:function(e){return(0,r.isWebGL2)(e)||e.getExtension(A)}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new n(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return e.getParameter(e.MAX_VERTEX_ATTRIBS)}}]),h(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffers,r=void 0===t?{}:t,i=e.elements,n=void 0===i?null:i,a=e.locations,s=void 0===a?{}:a;this.setLocations(s),this.setBuffers(r,{clear:!0}),this.setElements(n)}},{key:"setBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.location,n=e.buffer,a=e.target,s=e.layout,o=this.gl;a=void 0!==a?a:n.target,s=void 0!==s?s:n.layout,(0,i.assert)(a,"setBuffer needs target"),(0,i.assert)(s,"setBuffer called on uninitialized buffer"),this._filledLocations[t]=!0,this.bind(function(){n.bind({target:o.ARRAY_BUFFER});var e=s,a=e.size,l=e.type,u=e.normalized,c=e.stride,f=e.offset;s.integer?((0,i.assert)((0,r.isWebGL2)(o)),o.vertexAttribIPointer(t,a,l,c,f)):o.vertexAttribPointer(t,a,l,u,c,f)})}},{key:"setBuffers",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clear;(void 0===t||t)&&this.clearBindings();var r=this._getLocations(e),i=r.locations,n=r.elements;for(var a in this.ext.bindVertexArray(this.handle),i){var s=i[a];if(s){var o=this._getBufferAndLayout(s),l=o.buffer,u=o.layout;this.setBuffer({location:a,buffer:l,layout:u}),this.setDivisor(a,u.instanced?1:0),this.enable(a)}else this.disable(a)}this.buffers=e,this.ext.bindVertexArray(null),n&&this.setElements(n)}},{key:"setLocations",value:function(e){this.locations=e,this.names={}}},{key:"setElements",value:function(e){return(0,i.assert)(!e||e.target===g,I),this.ext.bindVertexArray(this.handle),this.gl.bindBuffer(g,e&&e.handle),this.ext.bindVertexArray(null),this.elements=e,this}},{key:"clearBindings",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableZero,r=void 0!==t&&t;this.bind(function(){for(var t in e._filledLocations)e._filledLocations[t]&&(t>0||r)&&e.gl.disableVertexAttribArray(t);e._filledLocations={}})}},{key:"enable",value:function(e){var t=this;this.bind(function(){t.gl.enableVertexAttribArray(e)})}},{key:"disable",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e>0||r)&&this.bind(function(){t.gl.disableVertexAttribArray(e)})}},{key:"setDivisor",value:function(e,t){var r=this;this.bind(function(){r.ext.vertexAttribDivisor(e,t)})}},{key:"setGeneric",value:function(e){var t=e.location,r=e.array;switch(this._filledLocations[t]=!0,r.constructor){case Float32Array:this._setGenericFloatArray(t,r);break;case Int32Array:this._setGenericIntArray(t,r);break;case Uint32Array:this._setGenericUintArray(t,r);break;default:this.setGenericValues.apply(this,[t].concat(o(r)))}}},{key:"setGenericValues",value:function(e,t,r,n,a){var s=this.gl;switch(arguments.length-1){case 1:s.vertexAttrib1f(e,t);break;case 2:s.vertexAttrib2f(e,t,r);break;case 3:s.vertexAttrib3f(e,t,r,n);break;case 4:s.vertexAttrib4f(e,t,r,n,a);break;default:(0,i.assert)(!1)}}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this.bindVertexArray(t),this):(this._bound?e=t():(this.ext.bindVertexArray(this.handle),this._bound=!0,e=t(),this.ext.bindVertexArray(null),this._bound=!1),e)}},{key:"_deduceDrawParameters",value:function(){var e=!1,t=!1,r=null;return this.elements&&(t=!0,r=this.elements.layout.type),this.buffers.forEach(function(t){t.layout.instanced>0&&(e=!0)}),{isInstanced:e,isIndexed:t,indexType:r}}},{key:"_getLocations",value:function(e){var t=null,r={};for(var n in e){var a=e[n];a&&a.target===g&&((0,i.assert)(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=a);var s=Number(n);Number.isFinite(s)||(s=this.locations[n]),(0,i.assert)(Number.isFinite(s)),(0,i.assert)(!r[s],"Duplicate attribute for binding point ".concat(s)),r[s]=a}return{locations:r,elements:t}}},{key:"_sortBuffersByLocation",value:function(e){var t=null,r=new Array(this._attributeCount).fill(null);for(var n in e){var a=e[n];a.target===g?((0,i.assert)(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=a):this._warn[n]||(i.log.warn(2,"".concat(this._print(n)," not used"))(),this._warn[n]=!0);var s=Number(n);Number.isFinite(s)||(s=this.locations[n]),r[s]=n,(0,i.assert)(null===r[s],"Duplicate attribute for binding point ".concat(s)),r[s]=s}return{locations:r,elements:t}}},{key:"_getBufferAndLayout",value:function(e){var t,r;return e.handle?(t=e,r=e.layout):(t=e.buffer,r=Object.assign({},t.layout,e.layout||{},e)),{buffer:t,layout:r}}},{key:"_setGenericFloatArray",value:function(e,t){var r=this.gl;switch(t.length){case 1:r.vertexAttrib1fv(e,t);break;case 2:r.vertexAttrib2fv(e,t);break;case 3:r.vertexAttrib3fv(e,t);break;case 4:r.vertexAttrib4fv(e,t);break;default:(0,i.assert)(!1)}}},{key:"_setGenericIntArray",value:function(e,t){var n=this.gl;switch((0,i.assert)((0,r.isWebGL2)(n)),t.length){case 1:n.vertexAttribI1iv(e,t);break;case 2:n.vertexAttribI2iv(e,t);break;case 3:n.vertexAttribI3iv(e,t);break;case 4:n.vertexAttribI4iv(e,t);break;default:(0,i.assert)(!1)}}},{key:"_setGenericUintArray",value:function(e,t){var n=this.gl;switch((0,i.assert)((0,r.isWebGL2)(n)),t.length){case 1:n.vertexAttribI1uiv(e,t);break;case 2:n.vertexAttribI2uiv(e,t);break;case 3:n.vertexAttribI3uiv(e,t);break;case 4:n.vertexAttribI4uiv(e,t);break;default:(0,i.assert)(!1)}}},{key:"_createHandle",value:function(){return this.ext.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.ext.deleteVertexArray(e),[this.elements]}},{key:"_getParameter",value:function(e,t){var r,n=t.location;switch((0,i.assert)(Number.isFinite(n)),this.ext.bindVertexArray(this.handle),e){case E:r=this.gl.getVertexAttribOffset(n,e);break;default:r=this.ext.getVertexAttrib(n,e)}return this.ext.bindVertexArray(null),r}},{key:"_getData",value:function(){var e=this;return new Array(this.MAX_ATTRIBUTES).fill(0).map(function(t,i){var n={};return B.forEach(function(t){n[(0,r.getKey)(e.gl,t)]=e.getParameter(t,{location:i})}),n})}},{key:"_bind",value:function(e){this.ext.bindVertexArray(e)}},{key:"filledLocations",get:function(){return this._filledLocations}}]),n}();exports.default=R;
},{"./resource":486,"../webgl-utils":705,"../utils":706}],487:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXTURE_FORMATS=void 0;var t,e=require("../constants"),a=f(e),i=require("./resource"),r=f(i),d=require("./buffer"),o=f(d),n=require("../webgl-context/context-state"),u=require("../webgl-utils"),s=require("../utils"),l=require("../utils/assert"),h=f(l);function f(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function T(t,e){if(!c(t,e))throw new TypeError("Cannot call a class as a function")}function m(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e,a){return e&&E(t.prototype,e),a&&E(t,a),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var b=[a.default.LINEAR,a.default.NEAREST],w=exports.TEXTURE_FORMATS=(y(t={},a.default.RGB,{dataFormat:a.default.RGB,types:[a.default.UNSIGNED_BYTE,a.default.UNSIGNED_SHORT_5_6_5]}),y(t,a.default.RGBA,{dataFormat:a.default.RGBA,types:[a.default.UNSIGNED_BYTE,a.default.UNSIGNED_SHORT_4_4_4_4,a.default.UNSIGNED_SHORT_5_5_5_1]}),y(t,a.default.ALPHA,{dataFormat:a.default.ALPHA,types:[a.default.UNSIGNED_BYTE]}),y(t,a.default.LUMINANCE,{dataFormat:a.default.LUMINANCE,types:[a.default.UNSIGNED_BYTE]}),y(t,a.default.LUMINANCE_ALPHA,{dataFormat:a.default.LUMINANCE_ALPHA,types:[a.default.UNSIGNED_BYTE]}),t);function x(t,e){var a=w[e];if(!a)return!1;if(void 0===a.gl1&&void 0===a.gl2)return!0;var i=(0,u.isWebGL2)(t)&&a.gl2||a.gl1;return"string"==typeof i?t.getExtension(i):i}function P(t,e){var i=w[e];switch(i&&i.types[0]){case a.default.FLOAT:return t.getExtension("OES_texture_float_linear");case a.default.HALF_FLOAT:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var I=function(t){function e(t,a){var i;T(this,e);var r=a.id,d=void 0===r?(0,s.uid)("texture"):r,o=a.handle,n=a.target;return(i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{id:d,handle:o}))).target=n,i.hasFloatTexture=t.getExtension("OES_texture_float"),i.textureUnit=void 0,i}return v(e,r.default),_(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.format,i=e.linearFiltering,r=!0;return a&&(r=(r=r&&x(t,a))&&(!i||P(t,a))),r}}]),_(e,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,i=t.pixels,r=void 0===i?null:i,d=t.format,o=void 0===d?a.default.RGBA:d,n=t.type,u=void 0===n?a.default.UNSIGNED_BYTE:n,l=t.border,h=void 0===l?0:l,f=t.recreate,g=void 0!==f&&f,c=t.parameters,T=void 0===c?{}:c,m=t.pixelStore,p=void 0===m?{}:m,E=t.unpackFlipY,_=void 0===E||E,v=t.mipmaps,b=void 0===v||v;e||(e=r);var w=t.width,x=t.height,P=t.dataFormat,I=this._deduceParameters({format:o,type:u,dataFormat:P,compressed:!1,data:e,width:w,height:x});w=I.width,x=I.height,P=I.dataFormat,this.width=w,this.height=x,this.format=o,this.type=u,this.dataFormat=P,this.border=h,this.mipmaps=b;var R=y({},a.default.UNPACK_FLIP_Y_WEBGL,_),N=Object.assign({},R,p);this._isNPOT()&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),b=!1,this._updateForNPOT(T)),this.setImageData({data:e,width:w,height:x,format:o,type:u,dataFormat:P,border:h,mipmaps:b,parameters:N}),b&&this.generateMipmap(),this.setParameters(T),g&&(this.data=e)}},{key:"resize",value:function(t){var e=t.width,a=t.height;return e!==this.width||a!==this.height?this.initialize({width:e,height:a,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),(0,n.withParameters)(this.gl,e,function(){t.gl.generateMipmap(t.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(t){var e=this,i=t.target,r=void 0===i?this.target:i,d=t.pixels,o=void 0===d?null:d,s=t.data,l=void 0===s?null:s,f=t.width,g=t.height,c=t.level,T=void 0===c?0:c,m=t.format,p=void 0===m?a.default.RGBA:m,E=t.type,_=t.dataFormat,v=t.offset,y=void 0===v?0:v,b=t.border,w=void 0===b?0:b,x=t.compressed,P=void 0!==x&&x,I=t.parameters,R=void 0===I?{}:I;l||(l=o);var N=this._deduceParameters({format:p,type:E,dataFormat:_,compressed:P,data:l,width:f,height:g});E=N.type,_=N.dataFormat,P=N.compressed,f=N.width,g=N.height;var A=this.gl;A.bindTexture(this.target,this.handle);var U,L=this._getDataType({data:l,compressed:P});l=L.data,U=L.dataType,(0,n.withParameters)(this.gl,R,function(){switch(U){case"null":A.texImage2D(r,T,p,f,g,w,_,E,l);break;case"typed-array":A.texImage2D(r,T,p,f,g,w,_,E,l,y);break;case"buffer":(0,u.assertWebGL2Context)(A),A.bindBuffer(a.default.PIXEL_UNPACK_BUFFER,l.handle||l),A.texImage2D(r,T,p,f,g,w,p,E,y);break;case"browser-object":A.texImage2D(r,T,p,p,E,l);break;case"compressed":A.compressedTexImage2D(e.target,T,p,f,g,w,l);break;default:(0,h.default)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(t){var e=this,i=t.target,r=void 0===i?this.target:i,d=t.pixels,s=void 0===d?null:d,l=t.data,h=void 0===l?null:l,f=t.x,g=void 0===f?0:f,T=t.y,m=void 0===T?0:T,p=t.width,E=t.height,_=t.level,v=void 0===_?0:_,y=t.format,b=void 0===y?a.default.RGBA:y,w=t.type,x=t.dataFormat,P=t.compressed,I=void 0!==P&&P,R=t.offset,N=void 0===R?0:R,A=t.border,U=void 0===A?0:A,L=t.parameters,F=void 0===L?{}:L,O=this._deduceParameters({format:b,type:w,dataFormat:x,compressed:I,data:h,width:p,height:E});if(w=O.type,x=O.dataFormat,I=O.compressed,p=O.width,E=O.height,h||(h=s),h&&h.data){var D=h;h=D.data,p=D.shape[0],E=D.shape[1]}c(h,o.default)&&(h=h.handle),this.gl.bindTexture(this.target,this.handle),(0,n.withParameters)(this.gl,F,function(){I?e.gl.compressedTexSubImage2D(r,v,g,m,p,E,b,h):null===h?e.gl.texSubImage2D(r,v,b,p,E,U,x,w,null):ArrayBuffer.isView(h)?e.gl.texSubImage2D(r,v,g,m,p,E,b,w,h,N):c(h,u.WebGLBuffer)?((0,u.assertWebGL2Context)(e.gl),e.gl.bindBuffer(a.default.PIXEL_UNPACK_BUFFER,h),e.gl.texSubImage2D(r,v,b,p,E,U,b,w,N),e.gl.bindBuffer(a.default.GL_PIXEL_UNPACK_BUFFER,null)):e.gl.texSubImage2D(r,v,g,m,b,w,h)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(t){var e=t.target,i=(void 0===e&&this.target,t.framebuffer),r=(t.offset,t.x),d=void 0===r?0:r,o=t.y,n=void 0===o?0:o,u=t.width,s=t.height,l=t.level,h=void 0===l?0:l,f=t.internalFormat,g=void 0===f?a.default.RGBA:f,c=t.border,T=void 0===c?0:c;i&&i.bind(),this.bind(),this.gl.copyTexImage2D(this.target,h,g,d,n,u,s,T),this.unbind(),i&&i.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(a.default.ACTIVE_TEXTURE)-a.default.TEXTURE0}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,this.gl.activeTexture(a.default.TEXTURE0+t),this.gl.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(a.default.TEXTURE0+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(t){var e=t.data,a=t.compressed;return void 0!==a&&a?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:c(e,o.default)?{data:e.handle,dataType:"buffer"}:c(e,u.WebGLBuffer)?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"setImage3D",value:function(t){var e=t.level,i=void 0===e?0:e,r=t.internalformat,d=void 0===r?a.default.RGBA:r,n=t.width,u=t.height,s=t.depth,l=void 0===s?1:s,h=t.border,f=void 0===h?0:h,g=t.format,T=t.type,m=void 0===T?a.default.UNSIGNED_BYTE:T,p=t.offset,E=void 0===p?0:p,_=t.pixels;return ArrayBuffer.isView(_)?(this.gl.texImage3D(this.target,i,d,n,u,l,f,g,m,_),this):(c(_,o.default)&&(this.gl.bindBuffer(a.default.PIXEL_UNPACK_BUFFER,_.handle),this.gl.texImage3D(this.target,i,d,n,u,l,f,g,m,E)),this)}},{key:"_deduceParameters",value:function(t){var e=t.format,a=t.data,i=t.width,r=t.height,d=t.dataFormat,o=t.type,n=t.compressed,u=w[e];d=d||u&&u.dataFormat,o=o||u&&u.types[0],n=n||u&&u.compressed;var s=this._deduceImageSize({data:a,width:i,height:r});return{dataFormat:d,type:o,compressed:n,width:i=s.width,height:r=s.height,format:e,data:a}}},{key:"_deduceImageSize",value:function(t){var e,a=t.data,i=t.width,r=t.height;return e="undefined"!=typeof ImageData&&c(a,ImageData)?{width:a.width,height:a.height}:"undefined"!=typeof HTMLImageElement&&c(a,HTMLImageElement)?{width:a.naturalWidth,height:a.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&c(a,HTMLCanvasElement)?{width:a.width,height:a.height}:"undefined"!=typeof HTMLVideoElement&&c(a,HTMLVideoElement)?{width:a.videoWidth,height:a.videoHeight}:a?{width:i,height:r}:{width:i>=0?i:1,height:r>=0?r:1},(0,h.default)(e,"Could not deduced texture size"),(0,h.default)(void 0===i||e.width===i,"Deduced texture width does not match supplied width"),(0,h.default)(void 0===r||e.height===r,"Deduced texture height does not match supplied height"),e}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(t){switch(t){case a.default.TEXTURE_WIDTH:return this.width;case a.default.TEXTURE_HEIGHT:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case a.default.TEXTURE_MIN_LOD:case a.default.TEXTURE_MAX_LOD:this.gl.texParameterf(this.handle,t,e);break;case a.default.TEXTURE_WIDTH:case a.default.TEXTURE_HEIGHT:throw new Error("Cannot set emulated parameter");default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!((0,u.isWebGL2)(this.gl)||(0,s.isPowerOfTwo)(this.width)&&(0,s.isPowerOfTwo)(this.height))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"))(),t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, forcing TEXTURE_WRAP_S to CLAMP_TO_EDGE"))(),t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, forcing TEXTURE_WRAP_T to CLAMP_TO_EDGE"))(),t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case a.default.TEXTURE_MIN_FILTER:-1===b.indexOf(e)&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"))(),e=a.default.LINEAR);break;case a.default.TEXTURE_WRAP_S:case a.default.TEXTURE_WRAP_T:e!==a.default.CLAMP_TO_EDGE&&(s.log.warn("texture: ".concat(this," is Non-Power-Of-Two, ").concat((0,u.getKey)(this.gl,t)," to CLAMP_TO_EDGE"))(),e=a.default.CLAMP_TO_EDGE)}return e}}]),e}();exports.default=I;
},{"../constants":387,"./resource":486,"./buffer":399,"../webgl-context/context-state":394,"../webgl-utils":705,"../utils":706,"../utils/assert":479}],404:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../constants"),e=i(t),n=require("./texture"),r=i(n),o=require("../webgl-utils");function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?p(t):e}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var y=function(t){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,n),(0,o.assertWebGLContext)(t),(e=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,Object.assign({},r,{target:t.TEXTURE_2D})))).initialize(r),Object.seal(p(e)),e}return b(n,r.default),c(n,null,[{key:"isSupported",value:function(t,e){return r.default.isSupported(t,e)}}]),c(n,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return t.activeTexture(t.TEXTURE0+this.textureUnit),t.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(e.default.ACTIVE_TEXTURE)-e.default.TEXTURE0}}]),n}();exports.default=y;
},{"../constants":387,"./texture":487,"../webgl-utils":705}],403:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.RENDERBUFFER_FORMATS=void 0;var e,t=require("../constants"),l=f(t),r=require("../webgl-utils"),a=require("./resource"),n=f(a),u=require("../utils/assert"),i=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function h(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,l){return t&&h(e.prototype,t),l&&h(e,l),e}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var y=36161,m=32937,_=36162,v=36163,G=36164,I=36011,E="EXT_color_buffer_float",P=exports.RENDERBUFFER_FORMATS=(p(e={},l.default.DEPTH_COMPONENT16,{}),p(e,l.default.DEPTH_COMPONENT24,{gl2:!0}),p(e,l.default.DEPTH_COMPONENT32F,{gl2:!0}),p(e,l.default.STENCIL_INDEX8,{}),p(e,l.default.DEPTH_STENCIL,{}),p(e,l.default.DEPTH24_STENCIL8,{gl2:!0}),p(e,l.default.DEPTH32F_STENCIL8,{gl2:!0}),p(e,l.default.RGBA4,{}),p(e,l.default.RGB565,{}),p(e,l.default.RGB5_A1,{}),p(e,l.default.R8,{gl2:!0}),p(e,l.default.R8UI,{gl2:!0}),p(e,l.default.R8I,{gl2:!0}),p(e,l.default.R16UI,{gl2:!0}),p(e,l.default.R16I,{gl2:!0}),p(e,l.default.R32UI,{gl2:!0}),p(e,l.default.R32I,{gl2:!0}),p(e,l.default.RG8,{gl2:!0}),p(e,l.default.RG8UI,{gl2:!0}),p(e,l.default.RG8I,{gl2:!0}),p(e,l.default.RG16UI,{gl2:!0}),p(e,l.default.RG16I,{gl2:!0}),p(e,l.default.RG32UI,{gl2:!0}),p(e,l.default.RG32I,{gl2:!0}),p(e,l.default.RGB8,{gl2:!0}),p(e,l.default.RGBA8,{gl2:!0}),p(e,l.default.RGB10_A2,{gl2:!0}),p(e,l.default.RGBA8UI,{gl2:!0}),p(e,l.default.RGBA8I,{gl2:!0}),p(e,l.default.RGB10_A2UI,{gl2:!0}),p(e,l.default.RGBA16UI,{gl2:!0}),p(e,l.default.RGBA16I,{gl2:!0}),p(e,l.default.RGBA32I,{gl2:!0}),p(e,l.default.RGBA32UI,{gl2:!0}),p(e,l.default.R16F,{gl2:E}),p(e,l.default.RG16F,{gl2:E}),p(e,l.default.RGBA16F,{gl2:E}),p(e,l.default.R32F,{gl2:E}),p(e,l.default.RG32F,{gl2:E}),p(e,l.default.RGBA32F,{gl2:E}),p(e,l.default.R11F_G11F_B10F,{gl2:E}),e);function F(e,t,l){var a=l[t];if(!a)return!1;var n=(0,r.isWebGL2)(e)&&a.gl2||a.gl1;return"string"==typeof n?e.getExtension(n):n}var O=function(e){function t(e){var l,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,t),(l=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))).initialize(r),Object.seal(b(l)),l}return R(t,n.default),c(t,null,[{key:"isSupported",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||F(e,t,P)}},{key:"getSamplesForFormat",value:function(e,t){var l=t.format;return e.getInternalformatParameter(y,l,m)}}]),c(t,[{key:"initialize",value:function(e){var t=e.format,l=e.width,a=void 0===l?1:l,n=e.height,u=void 0===n?1:n,f=e.samples,o=void 0===f?0:f;return(0,i.default)(t,"Needs format"),this.gl.bindRenderbuffer(y,this.handle),0!==o&&(0,r.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(y,o,t,a,u):this.gl.renderbufferStorage(y,t,a,u),this.format=t,this.width=a,this.height=u,this.samples=o,this}},{key:"resize",value:function(e){var t=e.width,l=e.height;return t!==this.width||l!==this.height?this.initialize({width:t,height:l,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(G),this.width=this.getParameter(_),this.height=this.getParameter(v),this.samples=this.getParameter(I)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(y,this.handle),this.gl.getRenderbufferParameter(y,e)}}]),t}();exports.default=O;
},{"../constants":387,"../webgl-utils":705,"./resource":486,"../utils/assert":479}],407:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=w,exports.clearBuffer=m;var e=require("../webgl-context/context-state"),r=require("../webgl-utils"),t=require("../utils/assert"),a=u(t);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,r){return i(e)||n(e,r)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,r){var t=[],a=!0,u=!1,l=void 0;try{for(var f,n=e[Symbol.iterator]();!(a=(f=n.next()).done)&&(t.push(f.value),!r||t.length!==r);a=!0);}catch(e){u=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw l}}return t}function i(e){if(Array.isArray(e))return e}var o=256,c=1024,s=16384,v=6144,d=6145,b=6146,h=34041,y="clear: bad arguments";function w(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=t.framebuffer,l=void 0===u?null:u,f=t.color,n=void 0===f?null:f,i=t.depth,v=void 0===i?null:i,d=t.stencil,b=void 0===d?null:d,h={};l&&(h.framebuffer=l);var w=0;n&&(w|=s,!0!==n&&(h.clearColor=n)),v&&(w|=o,!0!==v&&(h.clearDepth=v)),b&&(w|=c,!0!==v&&(h.clearStencil=v)),(0,a.default)(0!==w,y),(0,e.withParameters)(r,h,function(){r.clear(w)})}function m(t){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=u.framebuffer,n=void 0===f?null:f,i=u.buffer,o=void 0===i?v:i,c=u.drawBuffer,s=void 0===c?0:c,w=u.value,m=void 0===w?[0,0,0,0]:w;(0,r.assertWebGL2Context)(t),(0,e.withParameters)(t,{framebuffer:n},function(){switch(o){case v:switch(m.constructor){case Int32Array:t.clearBufferiv(o,s,m);break;case Uint32Array:t.clearBufferuiv(o,s,m);break;case Float32Array:default:t.clearBufferfv(o,s,m)}break;case d:t.clearBufferfv(d,0,[m]);break;case b:t.clearBufferiv(b,0,[m]);break;case h:var e=l(m,2),r=e[0],u=e[1];t.clearBufferfi(h,0,r,u);break;default:(0,a.default)(!1,y)}})}
},{"../webgl-context/context-state":394,"../webgl-utils":705,"../utils/assert":479}],491:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glFormatToComponents=i,exports.glTypeToBytes=d;var e=require("../utils/assert"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var u=6406,s=6407,a=6408,n=5121,c=32819,o=32820,l=33635,f=5126;function i(e){switch(e){case u:return 1;case s:return 3;case a:return 4;default:return(0,t.default)(!1),0}}function d(e){switch(e){case n:return 1;case l:case c:case o:return 2;case f:return 4;default:return(0,t.default)(!1),0}}
},{"../utils/assert":479}],402:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=E(e),r=require("./resource"),a=E(r),i=require("./texture-2d"),n=E(i),u=require("./renderbuffer"),l=E(u),f=require("./buffer"),h=E(f),o=require("./clear"),d=require("../webgl-context"),s=require("../webgl-context/context-features"),c=require("../webgl-utils/typed-array-utils"),v=require("../webgl-utils/format-utils"),g=require("../webgl-utils"),m=require("../utils"),b=require("../utils/assert"),y=E(b);function E(e){return e&&e.__esModule?e:{default:e}}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return w(e)||F(e,t)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function F(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done)&&(r.push(u.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw n}}return r}function w(e){if(Array.isArray(e))return e}function R(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function B(e,t){if(!R(e,t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?S(e):t}function k(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=36160,C=36008,O=36009,I=36064,L=36096,U=36128,D=36161,G=32879,H=35866,X=3553,W=34067,j=34069,q=256,z=1024,Y=16384,Z="Multiple render targets not supported",K=function(e){function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return B(this,r),(t=x(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,a))).width=null,t.height=null,t.attachments={},t.readBuffer=I,t.drawBuffers=[I],t.initialize(a),Object.seal(S(t)),t}return M(r,a.default),N(r,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,a=t.colorBufferHalfFloat;return r&&e.getExtension((0,g.isWebGL2)(e)?"EXT_color_buffer_float":"WEBGL_color_buffer_float"),a&&e.getExtension((0,g.isWebGL2)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer||(e.luma.defaultFramebuffer=new r(e,{handle:null,attachments:{}})),e.luma.defaultFramebuffer}}]),N(r,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,a=e.height,i=void 0===a?1:a,n=e.attachments,u=void 0===n?null:n,l=e.color,f=void 0===l||l,h=e.depth,o=void 0===h||h,d=e.stencil,s=void 0!==d&&d,c=e.check,v=void 0===c||c,g=e.readBuffer,m=e.drawBuffers;if((0,y.default)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,u)for(var b in u){var E=u[b];(Array.isArray(E)?E[0]:E).resize({width:r,height:i})}else u=this._createDefaultAttachments({color:f,depth:o,stencil:s,width:r,height:i});this.update({clearAttachments:!0,attachments:u,readBuffer:g,drawBuffers:m}),u&&v&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,r=void 0===t?{}:t,a=e.readBuffer,i=e.drawBuffers,n=e.clearAttachments,u=void 0!==n&&n;this.attach(r,{clearAttachments:u});var l=this.gl,f=l.bindFramebuffer(P,this.handle);return a&&this._setReadBuffer(a),i&&this._setDrawBuffers(i),l.bindFramebuffer(P,f||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return(0,y.default)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var a in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&m.log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r)),this.attachments)this.attachments[a].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clearAttachments,a={};void 0!==r&&r&&Object.keys(this.attachments).forEach(function(e){a[e]=null}),Object.assign(a,e);var i=this.gl.bindFramebuffer(P,this.handle);for(var n in a){(0,y.default)("undefined"!==n,"Misspelled framebuffer binding point?");var u=a[n],f=u;if(f)if(R(f,l.default))this._attachRenderbuffer({attachment:n,renderbuffer:f});else if(Array.isArray(u)){var h=p(u,3),o=h[0],d=h[1],s=void 0===d?0:d,c=h[2],v=void 0===c?0:c;f=o,this._attachTexture({attachment:n,texture:o,layer:s,level:v})}else this._attachTexture({attachment:n,texture:f,layer:0,level:0});else this._unattach({attachment:n});f&&f.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(P,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(P,this.handle),r=e.checkFramebufferStatus(P);if(e.bindFramebuffer(P,t||null),r!==e.FRAMEBUFFER_COMPLETE)throw new Error(Q(r));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,a=e.stencil,i=e.drawBuffers,n=void 0===i?[]:i,u=this.gl.bindFramebuffer(P,this.handle);return(t||r||a)&&(0,o.clear)(this.gl,{color:t,depth:r,stencil:a}),n.forEach(function(e,t){(0,o.clearBuffer)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(P,u||null),this}},{key:"readPixels",value:function(e){var r=e.x,a=void 0===r?0:r,i=e.y,n=void 0===i?0:i,u=e.width,l=void 0===u?this.width:u,f=e.height,h=void 0===f?this.height:f,o=e.format,d=void 0===o?t.default.RGBA:o,s=e.type,g=e.pixelArray,m=void 0===g?null:g,b=e.attachment,y=void 0===b?I:b,E=this.gl;if(y===t.default.COLOR_ATTACHMENT0&&null===this.handle&&(y=t.default.FRONT),!m){s=s||E.UNSIGNED_BYTE;var T=(0,c.getTypedArrayFromGLType)(s,{clamped:!1}),_=(0,v.glFormatToComponents)(d);m=m||new T(l*h*_)}s=s||(0,c.getGLTypeFromTypedArray)(m);var p=this.gl.bindFramebuffer(P,this.handle);return this.gl.readPixels(a,n,l,h,d,s,m),this.gl.bindFramebuffer(P,p||null),m}},{key:"readPixelsToBuffer",value:function(e){var r=e.x,a=void 0===r?0:r,i=e.y,n=void 0===i?0:i,u=e.width,l=void 0===u?this.width:u,f=e.height,o=void 0===f?this.height:f,s=e.format,c=void 0===s?t.default.RGBA:s,m=e.type,b=e.buffer,y=void 0===b?null:b,E=e.byteOffset,T=void 0===E?0:E,_=this.gl;if((0,g.assertWebGL2Context)(_),m=m||(y?y.type:t.default.UNSIGNED_BYTE),!y){var p=(0,v.glFormatToComponents)(c),A=(0,v.glTypeToBytes)(m),F=T+l*o*p*A;y=new h.default(_,{bytes:F,type:m,size:p})}return y.bind({target:t.default.PIXEL_PACK_BUFFER}),(0,d.withParameters)(_,{framebuffer:this},function(){_.readPixels(a,n,l,o,c,m,T)}),y.unbind({target:t.default.PIXEL_PACK_BUFFER}),y}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,r=void 0===t?I:t,a=e.maxHeight,i=void 0===a?Number.MAX_SAFE_INTEGER:a,n=this.readPixels({attachment:r}),u=this.width,l=this.height;l>i;){var f=(0,g.scalePixels)({data:n,width:u,height:l});n=f.data,u=f.width,l=f.height}(0,g.flipRows)({data:n,width:u,height:l});var h=document.createElement("canvas");h.width=u,h.height=l;var o=h.getContext("2d"),d=o.createImageData(u,l);return d.data.set(n),o.putImageData(d,0,0),h.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,r=void 0===t?null:t,a=e.attachment,i=void 0===a?I:a,n=e.maxHeight,u=(void 0===n&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(r=r||new Image).src=u,r}},{key:"copyToTexture",value:function(e){var t=e.texture,r=e.target,a=e.xoffset,i=void 0===a?0:a,n=e.yoffset,u=void 0===n?0:n,l=e.zoffset,f=void 0===l?0:l,h=e.mipmapLevel,o=void 0===h?0:h,d=e.attachment,s=void 0===d?I:d,c=e.x,v=void 0===c?0:c,g=e.y,m=void 0===g?0:g,b=e.width,y=e.height,E=this.gl,T=E.bindFramebuffer(P,this.handle),_=E.readBuffer(s);switch(b=Number.isFinite(b)?b:t.width,y=Number.isFinite(y)?y:t.height,t.target){case X:case W:E.copyTexSubImage2D(r||t.target,o,i,u,v,m,b,y);break;case H:case G:E.copyTexSubImage3D(r||t.target,o,i,u,f,v,m,b,y)}return E.readBuffer(_),E.bindFramebuffer(P,T||null),t}},{key:"blit",value:function(e){var r=e.srcFramebuffer,a=e.attachment,i=void 0===a?I:a,n=e.srcX0,u=void 0===n?0:n,l=e.srcY0,f=void 0===l?0:l,h=e.srcX1,o=e.srcY1,d=e.dstX0,s=void 0===d?0:d,c=e.dstY0,v=void 0===c?0:c,m=e.dstX1,b=e.dstY1,E=e.color,T=void 0===E||E,_=e.depth,p=void 0!==_&&_,A=e.stencil,F=void 0!==A&&A,w=e.mask,R=void 0===w?0:w,B=e.filter,x=void 0===B?t.default.NEAREST:B,k=this.gl;(0,g.assertWebGL2Context)(k),r.handle||i!==I||(i=t.default.FRONT),T&&(R|=Y),p&&(R|=q),F&&(R|=z),(0,y.default)(R),h=void 0===h?r.width:h,o=void 0===o?r.height:o,m=void 0===m?this.width:m,b=void 0===b?this.height:b;var N=k.bindFramebuffer(C,this.handle),M=k.bindFramebuffer(O,r.handle);return k.readBuffer(i),k.blitFramebuffer(u,f,h,o,s,v,m,b,R,x),k.readBuffer(this.readBuffer),k.bindFramebuffer(O,M||null),k.bindFramebuffer(C,N||null),this}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,a=e.x,i=void 0===a?0:a,n=e.y,u=void 0===n?0:n,l=e.width,f=e.height,h=this.gl;(0,g.assertWebGL2Context)(h);var o=h.bindFramebuffer(O,this.handle);return 0===i&&0===u&&void 0===l&&void 0===f?h.invalidateFramebuffer(O,r):h.invalidateFramebuffer(O,r,i,u,l,f),h.bindFramebuffer(O,o),this}},{key:"getAttachmentParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,r=void 0===t?I:t,a=e.pname,i=this._getAttachmentParameterFallback(a);return null===i&&(this.gl.bindTexture(P,this.handle),i=this.gl.getFramebufferAttachmentParameter(P,r,a),this.gl.bindTexture(P,null)),i}},{key:"getAttachmentParameters",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.ATTACHMENT_PARAMETERS||{},t={};for(var r in e)t[r]=this.getAttachmentParameter(r);return this}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.priority,r=void 0===t?0:t,a=e.message,i=void 0===a?"":a;if(r>m.log.priority||"undefined"==typeof window)return this;i=i||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return m.log.image({priority:r,message:i,image:n},i)(),this}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?P:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?P:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function(e){var r,a=e.color,i=e.depth,u=(e.stencil,e.width),f=e.height,h=null;a&&((h=h||{})[I]=new n.default(this.gl,{pixels:null,format:t.default.RGBA,type:t.default.UNSIGNED_BYTE,width:u,height:f,mipmaps:!1,parameters:(r={},_(r,t.default.TEXTURE_MIN_FILTER,t.default.NEAREST),_(r,t.default.TEXTURE_MAG_FILTER,t.default.NEAREST),_(r,t.default.TEXTURE_WRAP_S,t.default.CLAMP_TO_EDGE),_(r,t.default.TEXTURE_WRAP_T,t.default.CLAMP_TO_EDGE),r)}));return i&&((h=h||{})[L]=new l.default(this.gl,{format:t.default.DEPTH_COMPONENT16,width:u,height:f})),h}},{key:"_unattach",value:function(e){var t=e.attachment;this.gl.bindRenderbuffer(D,this.handle),this.gl.framebufferRenderbuffer(P,t,D,null),delete this.attachments[t]}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?I:t,a=e.renderbuffer;this.gl.framebufferRenderbuffer(P,r,D,a.handle),this.attachments[r]=a}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?I:t,a=e.texture,i=e.layer,n=e.level,u=this.gl;switch(u.bindTexture(a.target,a.handle),a.target){case H:case G:u.framebufferTextureLayer(P,r,a.target,n,i);break;case W:var l=J(i);u.framebufferTexture2D(P,r,l,a.handle,n);break;case X:u.framebufferTexture2D(P,r,X,a.handle,n);break;default:(0,y.default)(!1,"Illegal texture type")}u.bindTexture(a.target,null),this.attachments[r]=a}},{key:"_setReadBuffer",value:function(e,r){(0,g.isWebGL2)(e)?e.readBuffer(r):(0,y.default)(r===I||r===t.default.BACK,Z),this.readBuffer=r}},{key:"_setDrawBuffers",value:function(e,r){if((0,g.isWebGL2)(e))e.drawBuffers(r);else{var a=e.getExtension("WEBGL_draw_buffers");a?a.drawBuffersWEBGL(r):(0,y.default)(1===r.length&&(r[0]===I||r[0]===t.default.BACK),Z)}this.drawBuffers=r}},{key:"_getAttachmentParameterFallback",value:function(e){var r=(0,s.getFeatures)(this.gl);switch(e){case t.default.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:return r.webgl2?null:0;case t.default.FRAMEBUFFER_ATTACHMENT_RED_SIZE:case t.default.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:case t.default.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:case t.default.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:case t.default.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:case t.default.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:return r.webgl2?null:8;case t.default.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:return r.webgl2?null:t.default.UNSIGNED_INT;case t.default.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:return r.webgl2||r.EXT_sRGB?null:t.default.LINEAR;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"color",get:function(){return this.attachments[I]||null}},{key:"texture",get:function(){return this.attachments[I]||null}},{key:"depth",get:function(){return this.attachments[L]||null}},{key:"stencil",get:function(){return this.attachments[U]||null}}]),r}();function J(e){return e<j?e+j:e}function Q(e){return(K.STATUS||{})[e]||"Framebuffer error ".concat(e)}exports.default=K;
},{"../constants":387,"./resource":486,"./texture-2d":404,"./renderbuffer":403,"./buffer":399,"./clear":407,"../webgl-context":641,"../webgl-context/context-features":396,"../webgl-utils/typed-array-utils":490,"../webgl-utils/format-utils":491,"../webgl-utils":705,"../utils":706,"../utils/assert":479}],410:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=u(e),n=require("../webgl-utils"),r=require("./resource"),o=u(r);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!l(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?y(e):t}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function r(e,t){var o;return i(this,r),(0,n.assertWebGL2Context)(e),o=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t)),Object.seal(y(o)),o}return p(r,o.default),f(r,null,[{key:"isSupported",value:function(e){return(0,n.isWebGL2)(e)}},{key:"isHandle",value:function(e){return this.gl.isSampler(this.handle)}}]),f(r,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,n){switch(e){case t.default.TEXTURE_MIN_LOD:case t.default.TEXTURE_MAX_LOD:this.gl.samplerParameterf(this.handle,e,n);break;default:this.gl.samplerParameteri(this.handle,e,n)}return this}}]),r}();exports.default=h;
},{"../constants":387,"../webgl-utils":705,"./resource":486}],488:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUniformName=fr,exports.getUniformSetter=ar,exports.checkUniformValues=cr,exports.areUniformsEqual=vr,exports.getUniformsTable=sr;var r,n=require("./framebuffer"),t=m(n),u=require("./texture"),i=m(u),e=require("./sampler"),o=m(e),f=require("../utils"),a=require("../utils/assert"),c=m(a);function m(r){return r&&r.__esModule?r:{default:r}}function l(r,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](r):r instanceof n}function v(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}var s=5126,d=35664,y=35665,h=35666,x=5124,b=35667,p=35668,w=35669,M=35670,g=35671,A=35672,O=35673,S=35674,U=35675,N=35676,q=35678,B=35680,E=5125,T=36294,V=36295,_=36296,F=35685,I=35686,L=35687,j=35688,k=35689,D=35690,P=35679,G=35682,z=36289,C=36292,R=36293,H=36298,J=36299,K=36300,Q=36303,W=36306,X=36307,Y=36308,Z=36311,$=(v(r={},s,function(r,n,t){return r.uniform1f(n,t)}),v(r,d,function(r,n,t){return r.uniform2fv(n,ir(t,2))}),v(r,y,function(r,n,t){return r.uniform3fv(n,ir(t,3))}),v(r,h,function(r,n,t){return r.uniform4fv(n,ir(t,4))}),v(r,x,function(r,n,t){return r.uniform1i(n,t)}),v(r,b,function(r,n,t){return r.uniform2iv(n,er(t,2))}),v(r,p,function(r,n,t){return r.uniform3iv(n,er(t,3))}),v(r,w,function(r,n,t){return r.uniform4iv(n,er(t,4))}),v(r,M,function(r,n,t){return r.uniform1i(n,t)}),v(r,g,function(r,n,t){return r.uniform2iv(n,er(t,2))}),v(r,A,function(r,n,t){return r.uniform3iv(n,er(t,3))}),v(r,O,function(r,n,t){return r.uniform4iv(n,er(t,4))}),v(r,S,function(r,n,t){return r.uniformMatrix2fv(n,!1,ir(t,4))}),v(r,U,function(r,n,t){return r.uniformMatrix3fv(n,!1,ir(t,9))}),v(r,N,function(r,n,t){return r.uniformMatrix4fv(n,!1,ir(t,16))}),v(r,q,function(r,n,t){return r.uniform1i(n,t)}),v(r,B,function(r,n,t){return r.uniform1i(n,t)}),v(r,E,function(r,n,t){return r.uniform1ui(n,t)}),v(r,T,function(r,n,t){return r.uniform2uiv(n,or(t,2))}),v(r,V,function(r,n,t){return r.uniform3uiv(n,or(t,3))}),v(r,_,function(r,n,t){return r.uniform4uiv(n,or(t,4))}),v(r,F,function(r,n,t){return r.uniformMatrix2x3fv(n,!1,ir(t,6))}),v(r,I,function(r,n,t){return r.uniformMatrix2x4fv(n,!1,ir(t,8))}),v(r,L,function(r,n,t){return r.uniformMatrix3x2fv(n,!1,ir(t,6))}),v(r,j,function(r,n,t){return r.uniformMatrix3x4fv(n,!1,ir(t,12))}),v(r,k,function(r,n,t){return r.uniformMatrix4x2fv(n,!1,ir(t,8))}),v(r,D,function(r,n,t){return r.uniformMatrix4x3fv(n,!1,ir(t,12))}),v(r,P,function(r,n,t){return r.uniform1i(n,t)}),v(r,G,function(r,n,t){return r.uniform1i(n,t)}),v(r,z,function(r,n,t){return r.uniform1i(n,t)}),v(r,C,function(r,n,t){return r.uniform1i(n,t)}),v(r,R,function(r,n,t){return r.uniform1i(n,t)}),v(r,H,function(r,n,t){return r.uniform1i(n,t)}),v(r,J,function(r,n,t){return r.uniform1i(n,t)}),v(r,K,function(r,n,t){return r.uniform1i(n,t)}),v(r,Q,function(r,n,t){return r.uniform1i(n,t)}),v(r,W,function(r,n,t){return r.uniform1i(n,t)}),v(r,X,function(r,n,t){return r.uniform1i(n,t)}),v(r,Y,function(r,n,t){return r.uniform1i(n,t)}),v(r,Z,function(r,n,t){return r.uniform1i(n,t)}),r),rr={},nr={},tr={};function ur(r,n,t,u){var i=r.length;if(i%n&&f.log.warn("Uniform size should be multiples of ".concat(n),r)(),l(r,t))return r;var e=u[i];e||(e=new t(i),u[i]=e);for(var o=0;o<i;o++)e[o]=r[o];return e}function ir(r,n){return ur(r,n,Float32Array,rr)}function er(r,n){return ur(r,n,Int32Array,nr)}function or(r,n){return ur(r,n,Uint32Array,tr)}function fr(r){var n=r.match(/([^\[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(r));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function ar(r,n,t){var u=$[t.type];if(!u)throw new Error("Unknown GLSL uniform type ".concat(t.type));return u.bind(null,r,n)}function cr(r,n){for(var t in r){var u=r[t];if(!mr(u))throw n=n?"".concat(n," "):"",console.error("".concat(n," Bad uniform ").concat(t),u),new Error("".concat(n," Bad uniform ").concat(t))}return!0}function mr(r){return Array.isArray(r)||ArrayBuffer.isView(r)?lr(r):!!isFinite(r)||(!0===r||!1===r||(!(!l(r,i.default)&&!l(r,o.default))||!!l(r,t.default)&&Boolean(r.texture)))}function lr(r){if(0===r.length)return!1;for(var n=Math.min(r.length,16),t=0;t<n;++t)if(!Number.isFinite(r[t]))return!1;return!0}function vr(r,n){if(Array.isArray(r)||ArrayBuffer.isView(r)){if(!n)return!1;var t=r.length;if(n.length!==t)return!1;for(var u=0;u<t;u++)if(r[u]!==n[u])return!1;return!0}return r===n}function sr(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.header,t=void 0===n?"Uniforms":n,u=r.program,i=r.uniforms,e=r.undefinedOnly,o=void 0!==e&&e;(0,c.default)(u);var a=u._uniformSetters,m={},l=Object.keys(a).sort(),s=0,d=!0,y=!1,h=void 0;try{for(var x,b=l[Symbol.iterator]();!(d=(x=b.next()).done);d=!0){var p=x.value;p.match(".*_.*")||p.match(".*Matrix")||dr({table:m,header:t,uniforms:i,uniformName:p,undefinedOnly:o})&&s++}}catch(r){y=!0,h=r}finally{try{d||null==b.return||b.return()}finally{if(y)throw h}}var w=!0,M=!1,g=void 0;try{for(var A,O=l[Symbol.iterator]();!(w=(A=O.next()).done);w=!0){var S=A.value;S.match(".*Matrix")&&dr({table:m,header:t,uniforms:i,uniformName:S,undefinedOnly:o})&&s++}}catch(r){M=!0,g=r}finally{try{w||null==O.return||O.return()}finally{if(M)throw g}}var U=!0,N=!1,q=void 0;try{for(var B,E=l[Symbol.iterator]();!(U=(B=E.next()).done);U=!0){var T=B.value;m[T]||dr({table:m,header:t,uniforms:i,uniformName:T,undefinedOnly:o})&&s++}}catch(r){N=!0,q=r}finally{try{U||null==E.return||E.return()}finally{if(N)throw q}}var V=0,_={};if(!o)for(var F in i){var I=i[F];m[F]||(V++,_[F]=v({Type:"NOT USED: ".concat(I)},t,(0,f.formatValue)(I)))}return{table:m,count:s,unusedTable:_,unusedCount:V}}function dr(r){var n,t=r.table,u=r.header,i=r.uniforms,e=r.uniformName,o=r.undefinedOnly,a=i[e],c=yr(a);return(!o||!c)&&(t[e]=(v(n={},u,c?(0,f.formatValue)(a):"N/A"),v(n,"Uniform Type",c?a:"NOT PROVIDED"),n),!0)}function yr(r){return void 0!==r&&null!==r}
},{"./framebuffer":402,"./texture":487,"./sampler":410,"../utils":706,"../utils/assert":479}],489:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveDrawMode=i,exports.getPrimitiveCount=f,exports.getVertexCount=l;var e=require("../utils/assert"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var u=0,a=1,s=2,n=3,c=4,o=5,d=6;function i(e){switch(e){case u:return u;case a:case n:case s:return a;case c:case o:case d:return c;default:return(0,r.default)(!1),0}}function f(e){var t=e.drawMode,i=e.vertexCount;switch(t){case u:case s:return i;case a:return i/2;case n:return i-1;case c:return i/3;case o:case d:return i-2;default:return(0,r.default)(!1),0}}function l(e){var t=e.drawMode,s=f({drawMode:t,vertexCount:e.vertexCount});switch(i(t)){case u:return s;case a:return 2*s;case c:return 3*s;default:return(0,r.default)(!1),0}}
},{"../utils/assert":479}],401:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getUniformDescriptors=C,exports.getVaryingMap=F;var t=require("../constants"),e=p(t),r=require("./vertex-array"),i=p(r),n=require("./resource"),a=p(n),o=require("./texture"),s=p(o),u=require("./framebuffer"),l=p(u),f=require("./uniforms"),c=require("./shader"),h=require("./buffer"),d=p(h),g=require("../webgl-context/context-state"),v=require("../webgl-utils"),y=require("../webgl-utils/attribute-utils"),b=require("../utils"),m=require("../utils/assert"),_=p(m);function p(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function k(t,e){if(!x(t,e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function L(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),t}function w(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?P(t):e}function U(t,e,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:U(n,e,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var T=3,I=35980,B=35981,R=function(t){function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k(this,r),(e=w(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n))).initialize(n),e.vertexAttributes=i.default.getDefaultArray(t),Object.seal(P(e)),e._setId(n.id),e}return S(r,a.default),L(r,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vs,r=t.fs,i=t.defaultUniforms,n=t.varyings,a=t.bufferMode,o=void 0===a?B:a;return this.vs="string"==typeof e?new c.VertexShader(this.gl,e):e,this.fs="string"==typeof r?new c.FragmentShader(this.gl,r):r,(0,_.default)(x(this.vs,c.VertexShader),"Program: bad vertex shader"),(0,_.default)(x(this.fs,c.FragmentShader),"Program: bad fragment shader"),this.defaultUniforms=i,n?((0,v.assertWebGL2Context)(this.gl),this.varyings=n,this.gl.transformFeedbackVaryings(this.handle,n,o),this.varyingMap=F(n,o)):this.varyingMap={},this._compileAndLink(),this._isCached=!1,this}},{key:"checkAttributeBindings",value:function(t){var e=t.vertexArray,r=e?e.filledLocations:this.vertexAttributes.filledLocations;for(var i in this._attributeToLocationMap){var n=this._attributeToLocationMap[i];r[n]||this._warnedLocations[n]||(b.log.warn("Program ".concat(this.id,": Attribute ").concat(n,":").concat(i," not supplied"))(),this._warnedLocations[n]=!0)}return this}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:U(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"delete",this).call(this,t)}},{key:"reset",value:function(){this.unsetBuffers()}},{key:"use",value:function(){return this.gl.useProgram(this.handle),this}},{key:"draw",value:function(t){var r=this,n=t.drawMode,a=void 0===n?e.default.TRIANGLES:n,o=t.vertexCount,s=t.offset,u=void 0===s?0:s,l=t.start,f=t.end,c=t.isIndexed,h=void 0!==c&&c,d=t.indexType,b=void 0===d?e.default.UNSIGNED_SHORT:d,m=t.isInstanced,_=void 0!==m&&m,p=t.instanceCount,A=void 0===p?0:p,x=t.vertexArray,k=void 0===x?null:x,E=t.transformFeedback,L=void 0===E?null:E,w=t.uniforms,U=void 0===w?{}:w,S=t.samplers,P=void 0===S?{}:S,T=t.parameters,I=void 0===T?{}:T;return(k=k||i.default.getDefaultArray(this.gl)).bind(function(){if(r.gl.useProgram(r.handle),L){var t=(0,y.getPrimitiveDrawMode)(a);L.begin(t)}r.setUniforms(U,P),(0,g.withParameters)(r.gl,I,function(){h&&_?r.ext.drawElementsInstanced(a,o,b,u,A):h&&(0,v.isWebGL2)(r.gl)&&!isNaN(l)&&!isNaN(f)?r.gl.drawElementsRange(a,l,f,o,b,u):h?r.gl.drawElements(a,o,b,u):_?r.ext.drawArraysInstanced(a,u,o,A):r.gl.drawArrays(a,u,o)}),L&&L.end()}),this}},{key:"setAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.clear,i=void 0===r||r,n=e.drawParams,a=void 0===n?{}:n;i&&this.vertexAttributes.clearBindings(),a.isInstanced=!1,a.isIndexed=!1,a.indexType=null;for(var o=this._sortBuffersByLocation(t),s=o.locations,u=o.elements,l=0;l<s.length;++l){var f=t[s[l]];f?f.isGeneric?this._setAttributeToGeneric({location:l,array:f.value}):(this._setAttributeToBuffer({location:l,buffer:f.getBuffer(),layout:f}),Object.assign(a,{isInstanced:f.instanced>0})):this.vertexAttributes.disable(l)}if(u){var c=t[u];c.getBuffer().bind(),a.isIndexed=!0,a.indexType=c.type}return this}},{key:"setBuffers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.clear,i=void 0===r||r,n=e.drawParams,a=void 0===n?{}:n;b.log.deprecated("Program: `setBuffers`","`setAttributes`"),i&&this.vertexAttributes.clearBindings(),a.isInstanced=!1,a.isIndexed=!1,a.indexType=null;for(var o=this._sortBuffersByLocation(t),s=o.locations,u=o.elements,l=0;l<s.length;++l){var f=t[s[l]];f?x(f,d.default)?(this._setAttributeToBuffer({location:l,buffer:f,layout:f.layout}),Object.assign(a,{isInstanced:f.layout.instanced>0})):this._setAttributeToGeneric({location:l,array:f}):this.vertexAttributes.disable(l)}if(u){var c=t[u];c.bind(),a.isIndexed=!0,a.indexType=c.layout.type}return this}},{key:"unsetBuffers",value:function(){for(var t=this._attributeCount,r=1;r<t;++r)this.vertexAttributes.disable(r);return this.gl.bindBuffer(e.default.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var r in t){var i=t[r],n=this._uniformSetters[r],a=e[r];if(n)if(x(i,l.default)&&(i=i.texture),x(i,s.default)){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var o=i,u=n.textureIndex;o.bind(u),a&&a.bind(u),n(u)}else n(i)}return this}},{key:"uniformBlockBinding",value:function(t,e){(0,v.assertWebGL2Context)(this.gl),this.gl.uniformBlockBinding(this.handle,t,e)}},{key:"getAttributeCount",value:function(){return this._getParameter(e.default.ACTIVE_ATTRIBUTES)}},{key:"getAttributeLocation",value:function(t){return this.gl.getAttribLocation(this.handle,t)}},{key:"getAttributeInfo",value:function(t){return this.gl.getActiveAttrib(this.handle,t)}},{key:"getUniformCount",value:function(){return this._getParameter(e.default.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(t){return this.gl.getActiveUniform(this.handle,t)}},{key:"getUniformLocation",value:function(t){return this.gl.getUniformLocation(this.handle,t)}},{key:"getUniformValue",value:function(t){return this.gl.getUniform(this.handle,t)}},{key:"getActiveUniforms",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:"getVarying",value:function(t,e){return this.gl.getTransformFeedbackVarying(t,e)}},{key:"getFragDataLocation",value:function(t){return(0,v.assertWebGL2Context)(this.gl),this.gl.getFragDataLocation(this.handle,t)}},{key:"getAttachedShaders",value:function(){return this.gl.getAttachedShaders(this.handle)}},{key:"getUniformBlockIndex",value:function(t){return(0,v.assertWebGL2Context)(this.gl),this.gl.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return(0,v.assertWebGL2Context)(this.gl),this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"_setAttributeToGeneric",value:function(t){var e=t.location,r=t.array;this.vertexAttributes.setGeneric({location:e,array:r}),this.vertexAttributes.disable(e,!0)}},{key:"_setAttributeToBuffer",value:function(t){var e=t.location,r=t.buffer,i=t.layout,n=i.instanced?1:0;this.vertexAttributes.setBuffer({location:e,buffer:r,layout:i}),this.vertexAttributes.setDivisor(e,n),this.vertexAttributes.enable(e)}},{key:"_compileAndLink",value:function(){var t=this.gl;if((t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),b.log.time(T,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),b.log.timeEnd(T,"linkProgram for ".concat(this._getName()))(),t.debug||b.log.priority>0)&&(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,t.LINK_STATUS)))throw new Error("Error linking ".concat(t.getProgramInfoLog(this.handle)));this._queryAttributeLocations(),this._queryUniformLocations()}},{key:"_sortBuffersByLocation",value:function(t){var r=null,i=[];if((0,b.isObjectEmpty)(t))return{locations:i,elements:r};for(var n in i=new Array(this._attributeCount),t){var a=t[n],o=this._attributeToLocationMap[n];if(void 0===o){if(a.target===e.default.ELEMENT_ARRAY_BUFFER&&r)throw new Error("".concat(this._print(n)," duplicate GL.ELEMENT_ARRAY_BUFFER"));a.target===e.default.ELEMENT_ARRAY_BUFFER?r=n:this._warnedLocations[o]||(b.log.log(2,"".concat(this._print(n)," not used"))(),this._warnedLocations[o]=!0)}else{if(a.target===e.default.ELEMENT_ARRAY_BUFFER)throw new Error("".concat(this._print(n),":").concat(o," ")+"has both location and type gl.ELEMENT_ARRAY_BUFFER");i[o]=n}}return{locations:i,elements:r}}},{key:"_areAllAttributesEnabled",value:function(){for(var t=this._attributeCount,e=0;e<t;++e)if(!this.vertexAttributes.isEnabled(e))return!1;return!0}},{key:"_print",value:function(t){return"Program ".concat(this.id,": Attribute ").concat(t)}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_getOptionsFromHandle",value:function(t){var r=this.gl.getAttachedShaders(t),i={},n=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value;switch(this.gl.getShaderParameter(this.handle,e.default.SHADER_TYPE)){case e.default.VERTEX_SHADER:i.vs=new c.VertexShader({handle:l});break;case e.default.FRAGMENT_SHADER:i.fs=new c.FragmentShader({handle:l})}}}catch(t){a=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return i}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_queryAttributeLocations",value:function(){this._attributeToLocationMap={},this._attributeCount=this.getAttributeCount();for(var t=0;t<this._attributeCount;t++){var e=this.getAttributeInfo(t).name;this._attributeToLocationMap[e]=this.getAttributeLocation(e)}this._warnedLocations={}}},{key:"_queryUniformLocations",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this.getUniformCount();for(var e=0;e<this._uniformCount;e++){var r=this.getUniformInfo(e),i=(0,f.parseUniformName)(r.name),n=this.getUniformLocation(i.name);this._uniformSetters[i.name]=(0,f.getUniformSetter)(t,n,r,i.isArray)}this._textureIndexCounter=0}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=(0,b.uid)(e)}}}]),r}();function C(t,e){for(var r={},i=e.getUniformCount(),n=0;n<i;n++){var a=e.getUniformInfo(n),o=e.getUniformLocation(a.name),s=(0,f.getUniformSetter)(t,o,a);r[s.name]=s}return r}function F(t,e){var r={},i=0;(0,_.default)(e===B||e===I);var n=e===B?1:0,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){r[u.value]=i,i+=n}}catch(t){o=!0,s=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}exports.default=R;
},{"../constants":387,"./vertex-array":414,"./resource":486,"./texture":487,"./framebuffer":402,"./uniforms":488,"./shader":400,"./buffer":399,"../webgl-context/context-state":394,"../webgl-utils":705,"../webgl-utils/attribute-utils":489,"../utils":706,"../utils/assert":479}],405:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=o(e),a=require("./texture"),i=o(a),r=require("../utils/assert"),n=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?E(e):t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=[t.default.TEXTURE_CUBE_MAP_POSITIVE_X,t.default.TEXTURE_CUBE_MAP_NEGATIVE_X,t.default.TEXTURE_CUBE_MAP_POSITIVE_Y,t.default.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.default.TEXTURE_CUBE_MAP_POSITIVE_Z,t.default.TEXTURE_CUBE_MAP_NEGATIVE_Z],p=function(e){function a(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,a),(i=c(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,Object.assign({},r,{target:t.default.TEXTURE_CUBE_MAP})))).initialize(r),Object.seal(E(i)),i}return _(a,i.default),s(a,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.format,i=void 0===a?t.default.RGBA:a,r=e.mipmaps,o=void 0===r||r,u=e.width,l=void 0===u?1:u,f=e.height,d=void 0===f?1:f,s=e.type,c=void 0===s?t.default.UNSIGNED_BYTE:s,_=e.dataFormat,E=this._deduceParameters({format:i,type:c,dataFormat:_});c=E.type,_=E.dataFormat;var h=this._deduceImageSize({data:e[t.default.TEXTURE_CUBE_MAP_POSITIVE_X],width:l,height:d});l=h.width,d=h.height,(0,n.default)(l===d),this.setCubeMapImageData(e),o&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.face,a=e.data,i=e.x,r=void 0===i?0:i,n=e.y,o=void 0===n?0:n,u=e.mipmapLevel,l=void 0===u?0:u;return this._subImage({target:t,data:a,x:r,y:o,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function(e){var a=e.width,i=e.height,r=e.pixels,n=e.data,o=e.border,u=void 0===o?0:o,l=e.format,f=void 0===l?t.default.RGBA:l,d=e.type,s=void 0===d?t.default.UNSIGNED_BYTE:d,c=(e.generateMipmap,this.gl);if(r=r||n,this.bind(),this.width||this.height)for(var _=0;_<h.length;_++){var E=h[_];c.texImage2D(E,0,f,a,i,u,f,s,r[E])}else for(var p=0;p<h.length;p++){var v=h[p];c.texImage2D(v,0,f,f,s,r[v])}}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==e&&this.gl.activeTexture(t.default.TEXTURE0+e),this.gl.bindTexture(t.default.TEXTURE_CUBE_MAP,this.handle),e}},{key:"unbind",value:function(){return this.gl.bindTexture(t.default.TEXTURE_CUBE_MAP,null),this}}]),a}();exports.default=p,p.FACES=h;
},{"../constants":387,"./texture":487,"../utils/assert":479}],406:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.draw=d;var e=require("../constants"),t=a(e),r=require("../webgl-utils"),s=require("../utils/assert"),n=a(s);function a(e){return e&&e.__esModule?e:{default:e}}function d(e,s){var n=s.drawMode,a=void 0===n?t.default.TRIANGLES:n,d=s.vertexCount,i=s.offset,o=void 0===i?0:i,u=s.isIndexed,l=void 0!==u&&u,c=s.indexType,v=void 0===c?t.default.UNSIGNED_SHORT:c,f=s.isInstanced,E=void 0!==f&&f,_=s.instanceCount,x=void 0===_?0:_;(0,r.assertWebGLContext)(e);e.getExtension("ANGLE_instanced_arrays");if(E){var w=isWebGL2(e),G=e.getExtension("ANGLE_instanced_arrays"),y=w?e:G,A=w?"":"ANGLE",I="drawArraysInstanced"+A;l?y["drawElementsInstanced"+A](a,d,v,o,x):y[I](a,o,d,x)}else l?e.drawElements(a,d,v,o):e.drawArrays(a,o,d)}
},{"../constants":387,"../webgl-utils":705,"../utils/assert":479}],437:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPixels=s,exports.readPixelsToBuffer=v,exports.blitFramebuffer=c;var e=require("../constants"),t=n(e),r=require("../webgl-context"),i=require("../webgl-utils"),u=require("../utils/assert"),a=n(u);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||f(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){var r=[],i=!0,u=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(i=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(u)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,r){var u=r.x,a=r.y,n=r.width,o=void 0===n?1:n,d=r.height,f=void 0===d?1:d,l=r.data,s=r.dataOffset,v=void 0===s?0:s,c=r.type,_=void 0===c?t.default.UNSIGNED_BYTE:c,x=r.sourceHeight,B=r.format,E=void 0===B?t.default.RGBA:B;return l=l||new Uint8Array(4*o*f),a=x?x-a:a,v?((0,i.assertWebGL2Context)(e),e.readPixels(u,a,o,f,E,_,l,v)):e.readPixels(u,a,o,f,E,_,l),l}function v(e,r){var u=r.x,a=r.y,n=r.width,o=void 0===n?1:n,d=r.height,f=void 0===d?1:d,l=r.buffer,s=r.dataOffset,v=void 0===s?0:s,c=r.type,_=void 0===c?t.default.UNSIGNED_BYTE:c,x=r.sourceHeight,B=r.format,E=void 0===B?t.default.RGBA:B;return(0,i.assertWebGL2Context)(e),a=x?x-a:a,e.bindBuffer(t.default.PIXEL_PACK_BUFFER,l.handle),e.readPixels(u,a,o,f,E,_,v),e.bindBuffer(t.default.PIXEL_PACK_BUFFER,null),l}function c(e,r){var i=o(r.source,4),u=(i[0],i[1],i[2],i[3],o(r.dest,4)),a=(u[0],u[1],u[2],u[3],r.mask),n=(void 0===a&&(t.default.COLOR_BUFFER_BIT,t.default.DEPTH_BUFFER_BIT,t.default.STENCIL_BUFFER_BIT),r.filter);void 0===n&&t.default.LINEAR}
},{"../constants":387,"../webgl-context":641,"../webgl-utils":705,"../utils/assert":479}],707:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../webgl-utils");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return e.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return e.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return e.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return e.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return e.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return e.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return e.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return e.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return e.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return e.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return e.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return e.WebGL2RenderingContext}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return e.webGLTypesAvailable}});var r=require("../webgl-context/context");Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return r.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return r.isWebGL2}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return r.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return r.destroyGLContext}});var t=require("../webgl-context/context-state");Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return t.withParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return t.resetParameters}});var n=require("../webgl-context/context-limits");Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return n.getContextInfo}});var u=require("./attribute");Object.defineProperty(exports,"Attribute",{enumerable:!0,get:function(){return g(u).default}});var o=require("./buffer");Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return g(o).default}});var i=require("./shader");Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return i.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return i.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return i.FragmentShader}});var a=require("./program");Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return g(a).default}});var f=require("./framebuffer");Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return g(f).default}});var b=require("./renderbuffer");Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return g(b).default}});var c=require("./texture-2d");Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return g(c).default}});var p=require("./texture-cube");Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return g(p).default}});var d=require("./draw");Object.defineProperty(exports,"draw",{enumerable:!0,get:function(){return d.draw}});var s=require("./clear");Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return s.clear}});var m=require("./functions");Object.defineProperty(exports,"readPixels",{enumerable:!0,get:function(){return m.readPixels}});var l=require("./uniforms");Object.defineProperty(exports,"parseUniformName",{enumerable:!0,get:function(){return l.parseUniformName}}),Object.defineProperty(exports,"getUniformSetter",{enumerable:!0,get:function(){return l.getUniformSetter}}),Object.defineProperty(exports,"checkUniformValues",{enumerable:!0,get:function(){return l.checkUniformValues}});var x=require("./vertex-array");function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return g(x).default}});
},{"../webgl-utils":705,"../webgl-context/context":393,"../webgl-context/context-state":394,"../webgl-context/context-limits":395,"./attribute":398,"./buffer":399,"./shader":400,"./program":401,"./framebuffer":402,"./renderbuffer":403,"./texture-2d":404,"./texture-cube":405,"./draw":406,"./clear":407,"./functions":437,"./uniforms":488,"./vertex-array":414}],398:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/assert"),t=r(e),i=require("../webgl"),s=require("../constants"),n=r(s);function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function l(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),e}var o=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e);var s=i.id,r=void 0===s?"unnamed-attribute":s,u=i.type,f=i.isIndexed,l=void 0!==f&&f;this.gl=t,this.id=r,this.isIndexed=l,this.target=l?n.default.ELEMENT_ARRAY_BUFFER:n.default.ARRAY_BUFFER,this.type=u,this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(i),Object.seal(this),this._validateAttributeDefinition()}return l(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,s=e.buffer,n=e.size,r=void 0===n?this.size:n,u=e.offset,a=void 0===u?this.offset||0:u,f=e.stride,l=void 0===f?this.stride||0:f,o=e.normalized,h=void 0===o?this.normalized||!1:o,d=e.integer,c=void 0===d?this.integer||!1:d,v=e.instanced,b=void 0===v?this.instanced||0:v,y=e.isGeneric,p=void 0===y?this.isGeneric||!1:y,g=e.isInstanced;this.size=r,this.offset=a,this.stride=l,this.normalized=h,this.integer=c,this.isGeneric=p,this.instanced=void 0!==g?g?1:0:b,s?(this.externalBuffer=s,this.type=s.type):t&&(this.externalBuffer=null,this.value=t,p||(this.buffer=this.buffer||new i.Buffer(this.gl,{target:this.target,type:this.type}),this.buffer.setData({data:t}),this.type=this.buffer.type))}},{key:"getBuffer",value:function(){return this.isGeneric?null:this.externalBuffer||this.buffer}},{key:"_validateAttributeDefinition",value:function(){(0,t.default)(this.size>=1&&this.size<=4,"Attribute definition for ".concat(this.id," invalid size"))}}]),e}();exports.default=o;
},{"../utils/assert":479,"../webgl":707,"../constants":387}],408:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=l(e),n=require("./resource"),r=l(n),u=require("../webgl-utils"),o=require("../webgl-utils/query-manager"),i=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?b(e):t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function n(e,t){var r;return s(this,n),(0,u.assertWebGL2Context)(e),(r=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))).promise=null,Object.seal(b(r)),r}return h(n,r.default),y(n,[{key:"wait",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.flags,r=void 0===n?0:n,u=e.timeout,o=void 0===u?t.default.TIMEOUT_IGNORED:u;return this.gl.waitSync(this.handle,r,o),this}},{key:"clientWait",value:function(e){var n=e.flags,r=void 0===n?t.default.SYNC_FLUSH_COMMANDS_BIT:n,u=e.timeout,o=this.gl.clientWaitSync(this.handle,r,u);switch(o){case t.default.ALREADY_SIGNALED:case t.default.TIMEOUT_EXPIRED:case t.default.CONDITION_SATISFIED:case t.default.WAIT_FAILED:}return o}},{key:"cancel",value:function(){i.default.cancelQuery(this)}},{key:"isSignaled",value:function(){return this.getParameter(t.default.SYNC_STATUS)===t.default.SIGNALED}},{key:"isResultAvailable",value:function(){return this.isSignaled()}},{key:"getResult",value:function(){return this.isSignaled()}},{key:"getParameter",value:function(e){return this.gl.getSyncParameter(this.handle,e)}},{key:"_createHandle",value:function(){return this.gl.fenceSync(t.default.SYNC_GPU_COMMANDS_COMPLETE,0)}},{key:"_deleteHandle",value:function(){i.default.deleteQuery(this),this.gl.deleteSync(this.handle)}}]),n}();exports.default=p;
},{"../constants":387,"./resource":486,"../webgl-utils":705,"../webgl-utils/query-manager":484}],409:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./resource"),t=l(e),r=require("../webgl-context/context-features"),n=require("../webgl-context"),i=require("../webgl-utils"),u=require("../webgl-utils/query-manager"),o=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){return e},v="Disjoint GPU operation invalidated timer queries",g='Timer queries require "EXT_disjoint_timer_query" extension',m=34916,Q=34918,_=34919,k=35007,q=36392,E=36795,j=35976,w=35887,S=36202,O=function(e){function u(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,u),t=f(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,r));var n=r.onComplete,i=void 0===n?b:n,o=r.onError,l=void 0===o?b:o;return t.target=null,t.onComplete=i,t.onError=l,t.promise=null,Object.seal(p(t)),t}return d(u,t.default),h(u,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=t.queries,o=void 0!==u&&u,l=t.timers,a=void 0!==l&&l,s=t.timestamps,c=void 0!==s&&s,f=(0,i.isWebGL2)(e),y=(0,r.hasFeatures)(e,r.FEATURES.TIMER_QUERY),h=f||y;if(o&&(h=h&&f),a&&(h=h&&y),c){(0,n.polyfillContext)(e);var d=e.getQuery(q,m);h=h&&d>0}return h}}]),h(u,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(k)}},{key:"beginOcclusionQuery",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?S:w)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(j)}},{key:"getTimestamp",value:function(){o.default.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,q)}catch(e){o.default.rejectQuery(this,g)}return this}},{key:"begin",value:function(e){o.default.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){o.default.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.ext.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),o.default.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,_)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,Q);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return u.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){o.default.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){o.default.poll(e)}}]),u}();exports.default=O,o.default.setInvalidator({queryType:O,errorMessage:v,checkInvalid:function(e){return e.getParameter(E)}});
},{"./resource":486,"../webgl-context/context-features":396,"../webgl-context":641,"../webgl-utils":705,"../webgl-utils/query-manager":484}],411:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=l(e),n=require("../webgl-utils"),r=require("../webgl-context/context-state"),o=require("../webgl/texture"),i=l(o),u=require("./buffer"),a=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function c(e,t){if(!f(e,t))throw new TypeError("Cannot call a class as a function")}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?y(e):t}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,o),(0,n.assertWebGL2Context)(e),(r=p(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,Object.assign({},i,{target:i.target||t.default.TEXTURE_3D})))).width=null,r.height=null,r.depth=null,Object.seal(y(r)),r.setImageData(i),i.generateMipmap&&r.generateMipmap(),r}return h(o,i.default),d(o,null,[{key:"isSupported",value:function(e){return(0,n.isWebGL2)(e)}}]),d(o,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var n=this.opts,o=n.pixels,i=n.settings;i&&((0,r.withParameters)(i,function(){o&&e.setImage3D(e.opts)}),this.setParameters(t))}},{key:"setImage3D",value:function(e){var n=e.level,r=void 0===n?0:n,o=e.internalformat,i=void 0===o?t.default.RGBA:o,u=e.width,l=e.height,s=e.depth,c=void 0===s?1:s,p=e.border,b=void 0===p?0:p,d=e.format,h=e.type,y=void 0===h?t.default.UNSIGNED_BYTE:h,g=e.offset,m=void 0===g?0:g,v=e.pixels;ArrayBuffer.isView(v)?this.gl.texImage3D(this.target,r,i,u,l,c,b,d,y,v):f(v,a.default)&&(this.gl.bindBuffer(t.default.PIXEL_UNPACK_BUFFER,v.handle),this.gl.texImage3D(this.target,r,i,u,l,c,b,d,y,m),this.gl.bindBuffer(t.default.PIXEL_UNPACK_BUFFER,v.handle))}}]),o}();exports.default=g;
},{"../constants":387,"../webgl-utils":705,"../webgl-context/context-state":394,"../webgl/texture":487,"./buffer":399}],412:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../webgl/texture"),t=o(e),n=require("../webgl-utils");function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};throw i(this,o),l(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t)),new Error("Texture2DArray not yet implemented")}return s(o,t.default),a(o,null,[{key:"isSupported",value:function(e){return(0,n.isWebGL2)(e)}}]),o}();exports.default=p;
},{"../webgl/texture":487,"../webgl-utils":705}],413:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./resource"),n=u(e),t=require("../webgl-utils"),r=require("../utils/assert"),i=u(r);function u(e){return e&&e.__esModule?e:{default:e}}function f(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){if(!f(e,n))throw new TypeError("Cannot call a class as a function")}function a(e,n){return!n||"object"!==s(n)&&"function"!=typeof n?c(e):n}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,n,t){return n&&l(e.prototype,n),t&&l(e,t),e}function d(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=35982,y=36386,v=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,r),(0,t.assertWebGL2Context)(e),(n=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,i))).buffers={},Object.seal(c(n)),n.initialize(i),n}return d(r,n.default),b(r,null,[{key:"isSupported",value:function(e){return(0,t.isWebGL2)(e)}},{key:"isHandle",value:function(e){return this.gl.isTransformFeedback(this.handle)}}]),b(r,[{key:"initialize",value:function(e){var n=e.buffers,t=void 0===n?{}:n,r=e.varyingMap,i=void 0===r?{}:r;this.bindBuffers(t,{clear:!0,varyingMap:i})}},{key:"bindBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.clear,r=void 0!==t&&t,u=n.varyingMap,f=void 0===u?{}:u;for(var s in r&&(this._unbindBuffers(),this.buffers={}),e){var o=e[s],a=Number.isFinite(Number(s))?Number(s):f[s];(0,i.default)(Number.isFinite(a)),this.buffers[a]=o}}},{key:"begin",value:function(e){return this._bindBuffers(),this.gl.bindTransformFeedback(y,this.handle),this.gl.beginTransformFeedback(e),this}},{key:"pause",value:function(){return this.gl.bindTransformFeedback(y,this.handle),this.gl.pauseTransformFeedback(),this.gl.bindTransformFeedback(y,null),this._unbindBuffers(),this}},{key:"resume",value:function(){return this._bindBuffers(),this.gl.bindTransformFeedback(y,this.handle),this.gl.resumeTransformFeedback(),this}},{key:"end",value:function(){return this.gl.bindTransformFeedback(y,this.handle),this.gl.endTransformFeedback(),this.gl.bindTransformFeedback(y,null),this._unbindBuffers(),this}},{key:"bindBuffer",value:function(e){var n=e.index,t=e.buffer,r=e.offset,i=void 0===r?0:r,u=e.size;return t.unbind(),this.gl.bindTransformFeedback(y,this.handle),void 0===u?this.gl.bindBufferBase(h,n,t.handle):this.gl.bindBufferRange(h,n,t.handle,i,u),this}},{key:"unbindBuffer",value:function(e){var n=e.index;return this.gl.bindTransformFeedback(y,this.handle),this.gl.bindBufferBase(h,n,null),this}},{key:"_bindBuffers",value:function(){for(var e in this.buffers)this.bindBuffer({buffer:this.buffers[e],index:Number(e)})}},{key:"_unbindBuffers",value:function(){for(var e in this.buffers)this.unbindBuffer({buffer:this.buffers[e],index:Number(e)})}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}}]),r}();exports.default=v;
},{"./resource":486,"../webgl-utils":705,"../utils/assert":479}],415:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=require("../utils/assert"),r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e,t){return s(e)||o(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}function s(e){if(Array.isArray(e))return e}function f(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h="UniformBufferLayout illegal argument",v=5124,d=35667,b=35668,p=35669,m=5126,g=35664,w=35665,z=35666,_=35670,k=35671,A=35672,S=35673,U=5125,x=36294,I=36295,T=36296,j=35674,O=35675,P=35676,B=35685,D=35686,E=35687,L=35688,M=35689,V=35690,q=(c(e={},m,[m,1]),c(e,g,[m,2]),c(e,w,[m,3]),c(e,z,[m,4]),c(e,v,[v,1]),c(e,d,[v,2]),c(e,b,[v,3]),c(e,p,[v,4]),c(e,U,[U,1]),c(e,x,[U,2]),c(e,I,[U,3]),c(e,T,[U,4]),c(e,_,[m,1]),c(e,k,[m,2]),c(e,A,[m,3]),c(e,S,[m,4]),c(e,j,[m,8]),c(e,B,[m,8]),c(e,D,[m,8]),c(e,O,[m,12]),c(e,E,[m,12]),c(e,L,[m,12]),c(e,P,[m,16]),c(e,M,[m,16]),c(e,V,[m,16]),e),C=function(){function e(t){var r;for(var n in f(this,e),this.layout={},this.size=0,t)this._addUniform(n,t[n]);var a=new Float32Array(this.size);this.typedArray=(c(r={},m,a),c(r,v,new Int32Array(a.buffer)),c(r,U,new Uint32Array(a.buffer)),r)}return y(e,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[m]}},{key:"getSubData",value:function(e){var t,r;if(void 0===e)t=this.data,r=0;else{var n=this.offsets[e],a=n+this.sizes[e];t=this.data.subarray(n,a),r=4*n}return{data:t,offset:r}}},{key:"setUniforms",value:function(e){for(var t in e)this._setValue(t,e[t]);return this}},{key:"_setValue",value:function(e,t){var n=this.layout[e];(0,r.default)(n,"UniformLayoutStd140 illegal argument");var a=this.typedArray[n.type];1===n.size?a[n.offset]=t:a.set(t,n.offset)}},{key:"_addUniform",value:function(e,t){var n=q[t];(0,r.default)(n,h);var a=i(n,2),u=a[0],o=a[1];this.size=this._alignTo(this.size,o);var s=this.size;this.size+=o,this.layout[e]={type:u,size:o,offset:s}}},{key:"_alignTo",value:function(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}}]),e}();exports.default=C;
},{"../utils/assert":479}],421:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DRAW_MODE=void 0,exports.getDrawMode=d;var e=require("../utils"),t=require("../utils/assert"),r=i(t);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=exports.DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function d(e){var t="string"==typeof e?o[e]||o.TRIANGLES:e;return(0,r.default)(t>=0&&t<=o.TRIANGLE_FAN,"Illegal drawMode"),t}var c=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var i=r.id,s=r.drawMode,n=void 0===s?o.TRIANGLES:s,u=r.vertexCount,c=void 0===u?void 0:u,l=r.attributes;this.id=i||(0,e.uid)(this.constructor.name),this.drawMode=d(n),this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),l&&this.setAttributes(l)}return u(t,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,r}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return(0,r.default)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return(0,r.default)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var i=e[t];i=ArrayBuffer.isView(i)?{value:i}:i,(0,r.default)(ArrayBuffer.isView(i.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,i),this.attributes[t]=Object.assign({},i,{instanced:i.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var i;switch(e){case"indices":i=i||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":i="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":i="vectors"}switch(i){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,(0,r.default)(s(t.value,Uint16Array)||s(t.value,Uint32Array),'attribute array for "indices" must be of integer type')}(0,r.default)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),t}();exports.default=c;
},{"../utils":706,"../utils/assert":479}],160:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=n,exports.checkNumber=t,exports.formatValue=o,exports.formatAngle=i,exports.isArray=u,exports.clone=a,exports.radians=c,exports.degrees=f,exports.sin=p,exports.cos=h,exports.tan=l,exports.asin=x,exports.acos=g,exports.atan=M,exports.clamp=d,exports.lerp=v,exports.equals=y;var r={};function n(n){"epsilon"in n&&(r.EPSILON=n.epsilon),"debug"in n&&(r.debug=n.debug)}function t(r){if(!Number.isFinite(r))throw new Error("Invalid number ".concat(r));return r}function e(n){return Math.round(n/r.EPSILON)*r.EPSILON}function o(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,o=void 0===t?r.precision||4:t;return n=e(n),parseFloat(n.toPrecision(o))}function i(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.precision,i=void 0===o?r.precision||4:o,u=t.printDegrees,a=void 0===u?r.printAngles:u;return n=e(n=a?f(n):n),"".concat(parseFloat(n.toPrecision(i))).concat(a?"°":"")}function u(r){return Array.isArray(r)||ArrayBuffer.isView(r)&&void 0!==r.length}function a(r){return r.clone?r.clone():new Array(r)}function s(r,n){if(u(r)){for(var t=a(r),e=0;e<t.length;++e)t[e]=n(t[e],e,t);return t}return n(r)}function c(r){return s(r,function(r){return r/180*Math.PI})}function f(r){return s(r,function(r){return 180*r/Math.PI})}function p(r){return s(r,function(r){return Math.sin(r)})}function h(r){return s(r,function(r){return Math.cos(r)})}function l(r){return s(r,function(r){return Math.tan(r)})}function x(r){return s(r,function(r){return Math.asin(r)})}function g(r){return s(r,function(r){return Math.acos(r)})}function M(r){return s(r,function(r){return Math.atan(r)})}function d(r,n,t){return s(r,function(r){return Math.max(n,Math.min(t,r))})}function v(r,n,t){return Array.isArray(r)?r.map(function(r,e){return v(r,n[e],t)}):t*n+(1-t)*r}function y(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n===t)return!0;if(n.length!==t.length)return!1;for(var e=0;e<n.length;++e)if(!y(n[e],t[e]))return!1;return!0}return Math.abs(n-t)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0,exports.config=r;
},{}],226:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common");function e(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,r){if(!e(t,r))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var h=function(e){function r(){return n(this,r),u(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return c(r,s(Array)),i(r,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}},{key:"toString",value:function(){return this.formatString(t.config)}},{key:"formatString",value:function(e){for(var r="",n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+(0,t.formatValue)(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(r,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var r=0;r<this.ELEMENTS;++r)if(!(0,t.equals)(this[r],e[r]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,r){void 0===r&&(r=e,e=t,t=this);for(var n=0;n<this.ELEMENTS;++n){var o=t[n];this[n]=o+r*(e[n]-o)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(t[r]);return e}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(t.config.debug&&!this.validate(e))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}}]),r}();exports.default=h;
},{"./common":160}],225:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./math-array"),e=n(t),r=require("./common");function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!o(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function s(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t,e){if(!t)throw new Error(e)},y=function(t){function n(){return i(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return l(n,e.default),c(n,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var o=this[n]-t[n];e+=o*o}return(0,r.checkNumber)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return(0,r.checkNumber)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],u=0;u<this.ELEMENTS;++u)this[u]+=o[u];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],u=0;u<this.ELEMENTS;++u)this[u]-=o[u];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],u=0;u<this.ELEMENTS;++u)this[u]*=o[u];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],u=0;u<this.ELEMENTS;++u)this[u]/=o[u];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=this[r]*e+t[r];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return h(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,r.checkNumber)(this[t])}},{key:"setComponent",value:function(t,e){return h(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),n}();exports.default=y;
},{"./math-array":226,"./common":160}],227:[function(require,module,exports) {
function r(r,e,n){var o=e[0]*n[1]-e[1]*n[0];return r[0]=r[1]=0,r[2]=o,r}module.exports=r;
},{}],150:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./lib/vector"),e=u(t),n=require("./lib/common"),r=require("gl-vec2/cross"),o=u(r);function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!i(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a(this,r),t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),Array.isArray(e)&&1===arguments.length?t.copy(e):t.set(e,n),t}return h(r,e.default),f(r,[{key:"cross",value:function(t){return(0,o.default)(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,n.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,n.checkNumber)(t)}}]),r}();exports.default=p;
},{"./lib/vector":225,"./lib/common":160,"gl-vec2/cross":227}],320:[function(require,module,exports) {
function r(r,e,n){var o=new Float32Array(3);return o[0]=r,o[1]=e,o[2]=n,o}module.exports=r;
},{}],321:[function(require,module,exports) {
function r(r,t){var e=t[0],n=t[1],o=t[2],u=e*e+n*n+o*o;return u>0&&(u=1/Math.sqrt(u),r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u),r}module.exports=r;
},{}],322:[function(require,module,exports) {
function e(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}module.exports=e;
},{}],241:[function(require,module,exports) {
module.exports=o;var r=require("./fromValues"),e=require("./normalize"),a=require("./dot");function o(o,u){var i=r(o[0],o[1],o[2]),t=r(u[0],u[1],u[2]);e(i,i),e(t,t);var n=a(i,t);return n>1?0:Math.acos(n)}
},{"./fromValues":320,"./normalize":321,"./dot":322}],242:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1],u=e[2],a=n[0],c=n[1],d=n[2];return r[0]=t*d-u*c,r[1]=u*a-o*d,r[2]=o*c-t*a,r}module.exports=r;
},{}],237:[function(require,module,exports) {
function t(t,n,o,r){var a=o[1],e=o[2],s=n[1]-a,u=n[2]-e,c=Math.sin(r),h=Math.cos(r);return t[0]=n[0],t[1]=a+s*h-u*c,t[2]=e+s*c+u*h,t}module.exports=t;
},{}],238:[function(require,module,exports) {
function t(t,n,o,r){var a=o[0],e=o[2],s=n[0]-a,u=n[2]-e,c=Math.sin(r),h=Math.cos(r);return t[0]=a+u*c+s*h,t[1]=n[1],t[2]=e+u*h-s*c,t}module.exports=t;
},{}],240:[function(require,module,exports) {
function t(t,n,o,r){var a=o[0],e=o[1],s=n[0]-a,u=n[1]-e,c=Math.sin(r),h=Math.cos(r);return t[0]=a+s*h-u*c,t[1]=e+s*c+u*h,t[2]=n[2],t}module.exports=t;
},{}],151:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./lib/vector"),t=y(e),r=require("./lib/common"),n=require("gl-vec3/angle"),o=y(n),i=require("gl-vec3/cross"),u=y(i),c=require("gl-vec3/rotateX"),a=y(c),l=require("gl-vec3/rotateY"),s=y(l),f=require("gl-vec3/rotateZ"),h=y(f);function y(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!p(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function k(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=[0,0,0],w=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return b(this,n),e=k(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,r,o),e}return _(n,t.default),g(n,[{key:"angle",value:function(e){return(0,o.default)(this,e)}},{key:"cross",value:function(e){return(0,u.default)(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?S:r;return(0,a.default)(this,this,n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?S:r;return(0,s.default)(this,this,n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?S:r;return(0,h.default)(this,this,n,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,r.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,r.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,r.checkNumber)(e)}}]),n}();exports.default=w;
},{"./lib/vector":225,"./lib/common":160,"gl-vec3/angle":241,"gl-vec3/cross":242,"gl-vec3/rotateX":237,"gl-vec3/rotateY":238,"gl-vec3/rotateZ":240}],152:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./lib/vector"),e=r(t),n=require("./lib/common");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!o(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var y=function(t){function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i(this,r),t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),Array.isArray(e)&&1===arguments.length?t.copy(e):t.set(e,n,o,u),t}return a(r,e.default),f(r,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,n.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,n.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,n.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=(0,n.checkNumber)(t)}}]),r}();exports.default=y;
},{"./lib/vector":225,"./lib/common":160}],228:[function(require,module,exports) {
function r(r){var e=r[0],n=r[1],o=r[2],t=r[3],u=r[4],a=r[5],c=r[6],d=r[7],f=r[8],i=r[9],l=r[10],m=r[11],p=r[12],s=r[13],v=r[14],x=r[15];return(e*a-n*u)*(l*x-m*v)-(e*c-o*u)*(i*x-m*s)+(e*d-t*u)*(i*v-l*s)+(n*c-o*a)*(f*x-m*p)-(n*d-t*a)*(f*v-l*p)+(o*d-t*c)*(f*s-i*p)}module.exports=r;
},{}],229:[function(require,module,exports) {
function r(r,e){var n=e[0],o=e[1],t=e[2],u=e[3],a=n+n,c=o+o,d=t+t,f=n*a,i=o*a,l=o*c,m=t*a,p=t*c,s=t*d,v=u*a,x=u*c,b=u*d;return r[0]=1-l-s,r[1]=i+b,r[2]=m-x,r[3]=0,r[4]=i-b,r[5]=1-f-s,r[6]=p+v,r[7]=0,r[8]=m+x,r[9]=p-v,r[10]=1-f-l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}module.exports=r;
},{}],230:[function(require,module,exports) {
function r(r,e,n,o,t,u,a){var c=1/(n-e),d=1/(t-o),f=1/(u-a);return r[0]=2*u*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*u*d,r[6]=0,r[7]=0,r[8]=(n+e)*c,r[9]=(t+o)*d,r[10]=(a+u)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=a*u*2*f,r[15]=0,r}module.exports=r;
},{}],315:[function(require,module,exports) {
function e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}module.exports=e;
},{}],231:[function(require,module,exports) {
var t=require("./identity");function a(a,r,e,s){var h,M,i,n,q,u,b,o,d,v,c=r[0],f=r[1],l=r[2],m=s[0],p=s[1],x=s[2],y=e[0],g=e[1],j=e[2];return Math.abs(c-y)<1e-6&&Math.abs(f-g)<1e-6&&Math.abs(l-j)<1e-6?t(a):(b=c-y,o=f-g,d=l-j,h=p*(d*=v=1/Math.sqrt(b*b+o*o+d*d))-x*(o*=v),M=x*(b*=v)-m*d,i=m*o-p*b,(v=Math.sqrt(h*h+M*M+i*i))?(h*=v=1/v,M*=v,i*=v):(h=0,M=0,i=0),n=o*i-d*M,q=d*h-b*i,u=b*M-o*h,(v=Math.sqrt(n*n+q*q+u*u))?(n*=v=1/v,q*=v,u*=v):(n=0,q=0,u=0),a[0]=h,a[1]=n,a[2]=b,a[3]=0,a[4]=M,a[5]=q,a[6]=o,a[7]=0,a[8]=i,a[9]=u,a[10]=d,a[11]=0,a[12]=-(h*c+M*f+i*l),a[13]=-(n*c+q*f+u*l),a[14]=-(b*c+o*f+d*l),a[15]=1,a)}module.exports=a;
},{"./identity":315}],232:[function(require,module,exports) {
function r(r,e,n,o,t,u,a){var c=1/(e-n),d=1/(o-t),f=1/(u-a);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*d,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(e+n)*c,r[13]=(t+o)*d,r[14]=(a+u)*f,r[15]=1,r}module.exports=r;
},{}],142:[function(require,module,exports) {
function t(t,n,r,a,e){var o=1/Math.tan(n/2),u=1/(a-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*a*u,t[15]=0,t}module.exports=t;
},{}],234:[function(require,module,exports) {
function e(e,r){if(e===r){var n=r[1],o=r[2],t=r[3],u=r[6],f=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=o,e[9]=u,e[11]=r[14],e[12]=t,e[13]=f,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}module.exports=e;
},{}],148:[function(require,module,exports) {
function n(n,r){var u=r[0],e=r[1],l=r[2],o=r[3],t=r[4],a=r[5],c=r[6],d=r[7],f=r[8],i=r[9],m=r[10],p=r[11],s=r[12],v=r[13],x=r[14],b=r[15],g=u*a-e*t,h=u*c-l*t,j=u*d-o*t,k=e*c-l*a,q=e*d-o*a,w=l*d-o*c,y=f*v-i*s,z=f*x-m*s,A=f*b-p*s,B=i*x-m*v,C=i*b-p*v,D=m*b-p*x,E=g*D-h*C+j*B+k*A-q*z+w*y;return E?(E=1/E,n[0]=(a*D-c*C+d*B)*E,n[1]=(l*C-e*D-o*B)*E,n[2]=(v*w-x*q+b*k)*E,n[3]=(m*q-i*w-p*k)*E,n[4]=(c*A-t*D-d*z)*E,n[5]=(u*D-l*A+o*z)*E,n[6]=(x*j-s*w-b*h)*E,n[7]=(f*w-m*j+p*h)*E,n[8]=(t*C-a*A+d*y)*E,n[9]=(e*A-u*C-o*y)*E,n[10]=(s*q-v*j+b*g)*E,n[11]=(i*j-f*q-p*g)*E,n[12]=(a*z-t*B-c*y)*E,n[13]=(u*B-e*z+l*y)*E,n[14]=(v*h-s*k-x*g)*E,n[15]=(f*k-i*h+m*g)*E,n):null}module.exports=n;
},{}],147:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1],u=e[2],a=e[3],c=e[4],d=e[5],f=e[6],i=e[7],l=e[8],m=e[9],p=e[10],s=e[11],v=e[12],x=e[13],b=e[14],g=e[15],h=n[0],j=n[1],k=n[2],q=n[3];return r[0]=h*o+j*c+k*l+q*v,r[1]=h*t+j*d+k*m+q*x,r[2]=h*u+j*f+k*p+q*b,r[3]=h*a+j*i+k*s+q*g,h=n[4],j=n[5],k=n[6],q=n[7],r[4]=h*o+j*c+k*l+q*v,r[5]=h*t+j*d+k*m+q*x,r[6]=h*u+j*f+k*p+q*b,r[7]=h*a+j*i+k*s+q*g,h=n[8],j=n[9],k=n[10],q=n[11],r[8]=h*o+j*c+k*l+q*v,r[9]=h*t+j*d+k*m+q*x,r[10]=h*u+j*f+k*p+q*b,r[11]=h*a+j*i+k*s+q*g,h=n[12],j=n[13],k=n[14],q=n[15],r[12]=h*o+j*c+k*l+q*v,r[13]=h*t+j*d+k*m+q*x,r[14]=h*u+j*f+k*p+q*b,r[15]=h*a+j*i+k*s+q*g,r}module.exports=r;
},{}],233:[function(require,module,exports) {
function t(t,a,n,r){var s,e,h,o,u,M,l,c,i,b,d,f,m,p,q,v,x,g,j,k,w,y,z,A,B=r[0],C=r[1],D=r[2],E=Math.sqrt(B*B+C*C+D*D);return Math.abs(E)<1e-6?null:(B*=E=1/E,C*=E,D*=E,s=Math.sin(n),h=1-(e=Math.cos(n)),o=a[0],u=a[1],M=a[2],l=a[3],c=a[4],i=a[5],b=a[6],d=a[7],f=a[8],m=a[9],p=a[10],q=a[11],v=B*B*h+e,x=C*B*h+D*s,g=D*B*h-C*s,j=B*C*h-D*s,k=C*C*h+e,w=D*C*h+B*s,y=B*D*h+C*s,z=C*D*h-B*s,A=D*D*h+e,t[0]=o*v+c*x+f*g,t[1]=u*v+i*x+m*g,t[2]=M*v+b*x+p*g,t[3]=l*v+d*x+q*g,t[4]=o*j+c*k+f*w,t[5]=u*j+i*k+m*w,t[6]=M*j+b*k+p*w,t[7]=l*j+d*k+q*w,t[8]=o*y+c*z+f*A,t[9]=u*y+i*z+m*A,t[10]=M*y+b*z+p*A,t[11]=l*y+d*z+q*A,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)}module.exports=t;
},{}],137:[function(require,module,exports) {
function r(r,e,n){var o=n[0],t=n[1],u=n[2];return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*u,r[9]=e[9]*u,r[10]=e[10]*u,r[11]=e[11]*u,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}module.exports=r;
},{}],138:[function(require,module,exports) {
function r(r,e,n){var o,t,u,a,c,d,f,i,l,m,p,s,v=n[0],x=n[1],b=n[2];return e===r?(r[12]=e[0]*v+e[4]*x+e[8]*b+e[12],r[13]=e[1]*v+e[5]*x+e[9]*b+e[13],r[14]=e[2]*v+e[6]*x+e[10]*b+e[14],r[15]=e[3]*v+e[7]*x+e[11]*b+e[15]):(o=e[0],t=e[1],u=e[2],a=e[3],c=e[4],d=e[5],f=e[6],i=e[7],l=e[8],m=e[9],p=e[10],s=e[11],r[0]=o,r[1]=t,r[2]=u,r[3]=a,r[4]=c,r[5]=d,r[6]=f,r[7]=i,r[8]=l,r[9]=m,r[10]=p,r[11]=s,r[12]=o*v+c*x+l*b+e[12],r[13]=t*v+d*x+m*b+e[13],r[14]=u*v+f*x+p*b+e[14],r[15]=a*v+i*x+s*b+e[15]),r}module.exports=r;
},{}],235:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1];return r[0]=n[0]*o+n[4]*t+n[12],r[1]=n[1]*o+n[5]*t+n[13],r}module.exports=r;
},{}],239:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1],u=e[2],a=n[3]*o+n[7]*t+n[11]*u+n[15];return a=a||1,r[0]=(n[0]*o+n[4]*t+n[8]*u+n[12])/a,r[1]=(n[1]*o+n[5]*t+n[9]*u+n[13])/a,r[2]=(n[2]*o+n[6]*t+n[10]*u+n[14])/a,r}module.exports=r;
},{}],158:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1],u=e[2],a=e[3];return r[0]=n[0]*o+n[4]*t+n[8]*u+n[12]*a,r[1]=n[1]*o+n[5]*t+n[9]*u+n[13]*a,r[2]=n[2]*o+n[6]*t+n[10]*u+n[14]*a,r[3]=n[3]*o+n[7]*t+n[11]*u+n[15]*a,r}module.exports=r;
},{}],140:[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[4],s=n[5],u=n[6],c=n[7],h=n[8],i=n[9],M=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=e*a+h*r,t[5]=s*a+i*r,t[6]=u*a+M*r,t[7]=c*a+d*r,t[8]=h*a-e*r,t[9]=i*a-s*r,t[10]=M*a-u*r,t[11]=d*a-c*r,t}module.exports=t;
},{}],236:[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[0],s=n[1],u=n[2],c=n[3],h=n[8],i=n[9],M=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*a-h*r,t[1]=s*a-i*r,t[2]=u*a-M*r,t[3]=c*a-d*r,t[8]=e*r+h*a,t[9]=s*r+i*a,t[10]=u*r+M*a,t[11]=c*r+d*a,t}module.exports=t;
},{}],139:[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[0],s=n[1],u=n[2],c=n[3],h=n[4],i=n[5],M=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*a+h*r,t[1]=s*a+i*r,t[2]=u*a+M*r,t[3]=c*a+d*r,t[4]=h*a-e*r,t[5]=i*a-s*r,t[6]=M*a-u*r,t[7]=d*a-c*r,t}module.exports=t;
},{}],153:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.validateMatrix4=st;var t=require("./lib/math-array"),e=Q(t),r=require("./lib/common"),i=require("./vector2"),n=Q(i),o=require("./vector3"),u=Q(o),a=require("./vector4"),l=Q(a),s=require("gl-mat4/determinant"),h=Q(s),c=require("gl-mat4/fromQuat"),f=Q(c),v=require("gl-mat4/frustum"),d=Q(v),y=require("gl-mat4/lookAt"),m=Q(y),g=require("gl-mat4/ortho"),p=Q(g),k=require("gl-mat4/perspective"),b=Q(k),w=require("gl-mat4/transpose"),q=Q(w),N=require("gl-mat4/invert"),F=Q(N),M=require("gl-mat4/multiply"),E=Q(M),_=require("gl-mat4/rotate"),j=Q(_),A=require("gl-mat4/scale"),S=Q(A),O=require("gl-mat4/translate"),P=Q(O),I=require("gl-vec2/transformMat4"),V=Q(I),x=require("gl-vec3/transformMat4"),T=Q(x),X=require("gl-vec4/transformMat4"),C=Q(X),R=require("gl-mat4/rotateX"),Y=Q(R),Z=require("gl-mat4/rotateY"),B=Q(Z),D=require("gl-mat4/rotateZ"),L=Q(D);function Q(t){return t&&t.__esModule?t:{default:t}}function z(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){return U(t)||K(t,e)||J()}function J(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function K(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(i=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}return r}function U(t){if(Array.isArray(t))return t}function W(t){return et(t)||tt(t)||$()}function $(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function tt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function et(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function rt(t,e){if(!z(t,e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e,r){return e&&it(t.prototype,e),r&&it(t,r),t}function ot(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?ut(t):e}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function st(t){return 16===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])&&Number.isFinite(t[4])&&Number.isFinite(t[5])&&Number.isFinite(t[6])&&Number.isFinite(t[7])&&Number.isFinite(t[8])&&Number.isFinite(t[9])&&Number.isFinite(t[10])&&Number.isFinite(t[11])&&Number.isFinite(t[12])&&Number.isFinite(t[13])&&Number.isFinite(t[14])&&Number.isFinite(t[15])}function ht(t,e){return t.length===e&&t.every(Number.isFinite)}var ct=function(t){function i(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return rt(this,i),t=ot(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return at(i,e.default),nt(i,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=n,this[2]=l,this[3]=f,this[4]=e,this[5]=o,this[6]=s,this[7]=v,this[8]=r,this[9]=u,this[10]=h,this[11]=d,this[12]=i,this[13]=a,this[14]=c,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=o,this[6]=u,this[7]=a,this[8]=l,this[9]=s,this[10]=h,this[11]=c,this[12]=f,this[13]=v,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,W(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this[e][t]=(0,r.checkNumber)(i),this}},{key:"determinant",value:function(){return(0,h.default)(this)}},{key:"identity",value:function(){return this.copy(lt)}},{key:"fromQuaternion",value:function(t){return(0,f.default)(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,o=t.near,u=t.far;return(0,d.default)(this,e,r,i,n,o,u),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,r=t.center,i=void 0===r?[0,0,0]:r,n=t.up,o=void 0===n?[0,1,0]:n;return(0,m.default)(this,e,i,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,o=t.near,u=void 0===o?.1:o,a=t.far,l=void 0===a?500:a;return(0,p.default)(this,e,r,i,n,u,l),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,n=t.aspect,o=void 0===n?1:n,u=t.focalDistance,a=void 0===u?1:u,l=t.near,s=void 0===l?.1:l,h=t.far,c=void 0===h?500:h;if(r>2*Math.PI)throw Error("radians");var f=r/2,v=a*Math.tan(f),d=v*o;return(new i).ortho({left:-d,right:d,bottom:-v,top:v,near:s,far:c})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,r=t.fov,i=void 0===r?45*Math.PI/180:r,n=t.aspect,o=void 0===n?1:n,u=t.near,a=void 0===u?.1:u,l=t.far,s=void 0===l?500:l;if((e=e||i)>2*Math.PI)throw Error("radians");return(0,b.default)(this,e,o,a,s),this.check()}},{key:"transpose",value:function(){return(0,q.default)(this,this),this.check()}},{key:"invert",value:function(){return(0,F.default)(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return(0,E.default)(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return(0,E.default)(this,this,t),this.check()}},{key:"rotateX",value:function(t){return(0,Y.default)(this,this,t),this.check()}},{key:"rotateY",value:function(t){return(0,B.default)(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return(0,L.default)(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=H(t,3),r=e[0],i=e[1],n=e[2];return this.rotateX(r).rotateY(i).rotateZ(n)}},{key:"rotateAxis",value:function(t,e){return(0,j.default)(this,this,t,e),this.check()}},{key:"scale",value:function(t){return(0,S.default)(this,this,t),this.check()}},{key:"translate",value:function(t){return(0,P.default)(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new n.default,(0,V.default)(e,t,this),ht(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new u.default,(0,T.default)(e,t,this),ht(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new l.default,(0,C.default)(e,t,this),ht(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,r){switch(t.length){case 2:e=e||new n.default,(0,C.default)(e,[t[0],t[1],0,r],this),e.length=2,ht(e,2);break;case 3:e=e||new u.default,(0,C.default)(e,[t[0],t[1],t[2],r],this),e.length=3,ht(e,3);break;case 4:if(Boolean(r)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new l.default,(0,C.default)(e,t,this),ht(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,r){return this.identity().translate([t,e,r])}},{key:"ELEMENTS",get:function(){return 16}}]),i}();exports.default=ct;
},{"./lib/math-array":226,"./lib/common":160,"./vector2":150,"./vector3":151,"./vector4":152,"gl-mat4/determinant":228,"gl-mat4/fromQuat":229,"gl-mat4/frustum":230,"gl-mat4/lookAt":231,"gl-mat4/ortho":232,"gl-mat4/perspective":142,"gl-mat4/transpose":234,"gl-mat4/invert":148,"gl-mat4/multiply":147,"gl-mat4/rotate":233,"gl-mat4/scale":137,"gl-mat4/translate":138,"gl-vec2/transformMat4":235,"gl-vec3/transformMat4":239,"gl-vec4/transformMat4":158,"gl-mat4/rotateX":140,"gl-mat4/rotateY":236,"gl-mat4/rotateZ":139}],245:[function(require,module,exports) {
function r(r,t){var a,e=t[0]+t[4]+t[8];if(e>0)a=Math.sqrt(e+1),r[3]=.5*a,a=.5/a,r[0]=(t[5]-t[7])*a,r[1]=(t[6]-t[2])*a,r[2]=(t[1]-t[3])*a;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var n=(s+1)%3,o=(s+2)%3;a=Math.sqrt(t[3*s+s]-t[3*n+n]-t[3*o+o]+1),r[s]=.5*a,a=.5/a,r[3]=(t[3*n+o]-t[3*o+n])*a,r[n]=(t[3*n+s]+t[3*s+n])*a,r[o]=(t[3*o+s]+t[3*s+o])*a}return r}module.exports=r;
},{}],243:[function(require,module,exports) {
function e(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}module.exports=e;
},{}],326:[function(require,module,exports) {
function r(r){var t=r[0],e=r[1],n=r[2],o=r[3];return Math.sqrt(t*t+e*e+n*n+o*o)}module.exports=r;
},{}],251:[function(require,module,exports) {
module.exports=require("gl-vec4/length");
},{"gl-vec4/length":326}],323:[function(require,module,exports) {
function r(r){var e=r[0],n=r[1],o=r[2],t=r[3];return e*e+n*n+o*o+t*t}module.exports=r;
},{}],244:[function(require,module,exports) {
module.exports=require("gl-vec4/squaredLength");
},{"gl-vec4/squaredLength":323}],325:[function(require,module,exports) {
function e(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}module.exports=e;
},{}],247:[function(require,module,exports) {
module.exports=require("gl-vec4/dot");
},{"gl-vec4/dot":325}],262:[function(require,module,exports) {
function r(r){var t=r[0],e=r[1],n=r[2];return Math.sqrt(t*t+e*e+n*n)}module.exports=r;
},{}],328:[function(require,module,exports) {
function r(r,t){var e=t[0],n=t[1],o=t[2],u=t[3],a=e*e+n*n+o*o+u*u;return a>0&&(a=1/Math.sqrt(a),r[0]=e*a,r[1]=n*a,r[2]=o*a,r[3]=u*a),r}module.exports=r;
},{}],255:[function(require,module,exports) {
module.exports=require("gl-vec4/normalize");
},{"gl-vec4/normalize":328}],261:[function(require,module,exports) {
function t(t,n,o){o*=.5;var r=Math.sin(o);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(o),t}module.exports=t;
},{}],253:[function(require,module,exports) {
var e=require("gl-vec3/dot"),r=require("gl-vec3/cross"),i=require("gl-vec3/length"),l=require("gl-vec3/normalize"),u=require("./normalize"),n=require("./setAxisAngle");module.exports=a;var o=[0,0,0],t=[1,0,0],v=[0,1,0];function a(a,c,g){var q=e(c,g);return q<-.999999?(r(o,t,c),i(o)<1e-6&&r(o,v,c),l(o,o),n(a,o,Math.PI),a):q>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(r(o,c,g),a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=1+q,u(a,a))}
},{"gl-vec3/dot":322,"gl-vec3/cross":242,"gl-vec3/length":262,"gl-vec3/normalize":321,"./normalize":255,"./setAxisAngle":261}],324:[function(require,module,exports) {
function e(e,n,o){return e[0]=n[0]+o[0],e[1]=n[1]+o[1],e[2]=n[2]+o[2],e[3]=n[3]+o[3],e}module.exports=e;
},{}],246:[function(require,module,exports) {
module.exports=require("gl-vec4/add");
},{"gl-vec4/add":324}],248:[function(require,module,exports) {
function t(t,r){var a=r[0],e=r[1],n=r[2];return t[0]=a,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-a*a-e*e-n*n)),t}module.exports=t;
},{}],249:[function(require,module,exports) {
function e(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e}module.exports=e;
},{}],250:[function(require,module,exports) {
function r(r,e){var n=e[0],o=e[1],t=e[2],u=e[3],a=n*n+o*o+t*t+u*u,c=a?1/a:0;return r[0]=-n*c,r[1]=-o*c,r[2]=-t*c,r[3]=u*c,r}module.exports=r;
},{}],327:[function(require,module,exports) {
function r(r,e,n,o){var t=e[0],u=e[1],a=e[2],c=e[3];return r[0]=t+o*(n[0]-t),r[1]=u+o*(n[1]-u),r[2]=a+o*(n[2]-a),r[3]=c+o*(n[3]-c),r}module.exports=r;
},{}],252:[function(require,module,exports) {
module.exports=require("gl-vec4/lerp");
},{"gl-vec4/lerp":327}],254:[function(require,module,exports) {
function r(r,e,n){var o=e[0],t=e[1],u=e[2],a=e[3],c=n[0],d=n[1],f=n[2],i=n[3];return r[0]=o*i+a*c+t*f-u*d,r[1]=t*i+a*d+u*c-o*f,r[2]=u*i+a*f+o*d-t*c,r[3]=a*i-o*c-t*d-u*f,r}module.exports=r;
},{}],256:[function(require,module,exports) {
function t(t,n,o){o*=.5;var r=n[0],a=n[1],e=n[2],s=n[3],u=Math.sin(o),c=Math.cos(o);return t[0]=r*c+s*u,t[1]=a*c+e*u,t[2]=e*c-a*u,t[3]=s*c-r*u,t}module.exports=t;
},{}],257:[function(require,module,exports) {
function t(t,n,o){o*=.5;var r=n[0],a=n[1],e=n[2],s=n[3],u=Math.sin(o),c=Math.cos(o);return t[0]=r*c-e*u,t[1]=a*c+s*u,t[2]=e*c+r*u,t[3]=s*c-a*u,t}module.exports=t;
},{}],258:[function(require,module,exports) {
function t(t,n,o){o*=.5;var r=n[0],a=n[1],e=n[2],s=n[3],u=Math.sin(o),c=Math.cos(o);return t[0]=r*c+a*u,t[1]=a*c-r*u,t[2]=e*c+s*u,t[3]=s*c-e*u,t}module.exports=t;
},{}],159:[function(require,module,exports) {
function e(e,n,o){return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=n[3]*o,e}module.exports=e;
},{}],259:[function(require,module,exports) {
module.exports=require("gl-vec4/scale");
},{"gl-vec4/scale":159}],329:[function(require,module,exports) {
function e(e,n,o,r,t){return e[0]=n,e[1]=o,e[2]=r,e[3]=t,e}module.exports=e;
},{}],260:[function(require,module,exports) {
module.exports=require("gl-vec4/set");
},{"gl-vec4/set":329}],263:[function(require,module,exports) {
function t(t,a,n,s){var e,h,i,o,r,M=a[0],u=a[1],c=a[2],d=a[3],f=n[0],l=n[1],m=n[2],p=n[3];return(h=M*f+u*l+c*m+d*p)<0&&(h=-h,f=-f,l=-l,m=-m,p=-p),1-h>1e-6?(e=Math.acos(h),i=Math.sin(e),o=Math.sin((1-s)*e)/i,r=Math.sin(s*e)/i):(o=1-s,r=s),t[0]=o*M+r*f,t[1]=o*u+r*l,t[2]=o*c+r*m,t[3]=o*d+r*p,t}module.exports=t;
},{}],154:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.validateQuaternion=$;var e=require("./lib/math-array"),t=C(e),r=require("./lib/common"),u=require("gl-quat/fromMat3"),n=C(u),i=require("gl-quat/identity"),o=C(i),a=require("gl-quat/length"),l=C(a),c=require("gl-quat/squaredLength"),s=C(c),h=require("gl-quat/dot"),f=C(h),y=require("gl-quat/rotationTo"),d=C(y),k=require("gl-quat/add"),g=C(k),q=require("gl-quat/calculateW"),v=C(q),p=require("gl-quat/conjugate"),b=C(p),m=require("gl-quat/invert"),w=C(m),_=require("gl-quat/lerp"),S=C(_),j=require("gl-quat/multiply"),x=C(j),E=require("gl-quat/normalize"),N=C(E),O=require("gl-quat/rotateX"),A=C(O),M=require("gl-quat/rotateY"),P=C(M),T=require("gl-quat/rotateZ"),F=C(T),Q=require("gl-quat/scale"),z=C(Q),L=require("gl-quat/set"),I=C(L),W=require("gl-quat/setAxisAngle"),X=C(W),Y=require("gl-quat/slerp"),Z=C(Y);function C(e){return e&&e.__esModule?e:{default:e}}function R(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!R(e,t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var u=t[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function G(e,t,r){return t&&D(e.prototype,t),r&&D(e,r),e}function H(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=[0,0,0,1];function $(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}var ee=function(e){function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return B(this,u),e=H(this,(u.__proto__||Object.getPrototypeOf(u)).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,r,n,i),e}return K(u,t.default),G(u,[{key:"fromMatrix3",value:function(e){return(0,n.default)(this,e),this.check()}},{key:"fromValues",value:function(e,t,r,u){return this.set(e,t,r,u)}},{key:"identity",value:function(){return(0,o.default)(this),this.check()}},{key:"length",value:function(){return(0,l.default)(this)}},{key:"squaredLength",value:function(e){return(0,s.default)(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return(0,f.default)(this,e)}},{key:"rotationTo",value:function(e,t){return(0,d.default)(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return(0,g.default)(this,e),this.check()}},{key:"calculateW",value:function(){return(0,v.default)(this,this),this.check()}},{key:"conjugate",value:function(){return(0,b.default)(this,this),this.check()}},{key:"invert",value:function(){return(0,w.default)(this,this),this.check()}},{key:"lerp",value:function(e,t,r){return(0,S.default)(this,e,t,r),this.check()}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return(0,x.default)(this,this,t),this.check()}},{key:"normalize",value:function(){return(0,N.default)(this,this),this.check()}},{key:"rotateX",value:function(e){return(0,A.default)(this,this,e),this.check()}},{key:"rotateY",value:function(e){return(0,P.default)(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return(0,F.default)(this,this,e),this.check()}},{key:"scale",value:function(e){return(0,z.default)(this,this,e),this.check()}},{key:"set",value:function(e,t,r,u){return(0,I.default)(this,e,t,r,u),this.check()}},{key:"setAxisAngle",value:function(e,t){return(0,X.default)(this,e,t),this.check()}},{key:"slerp",value:function(e){var t=e.start,r=void 0===t?U:t,u=e.target,n=e.ratio;return(0,Z.default)(this,r,u,n),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,r.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,r.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,r.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,r.checkNumber)(e)}}]),u}();exports.default=ee;
},{"./lib/math-array":226,"./lib/common":160,"gl-quat/fromMat3":245,"gl-quat/identity":243,"gl-quat/length":251,"gl-quat/squaredLength":244,"gl-quat/dot":247,"gl-quat/rotationTo":253,"gl-quat/add":246,"gl-quat/calculateW":248,"gl-quat/conjugate":249,"gl-quat/invert":250,"gl-quat/lerp":252,"gl-quat/multiply":254,"gl-quat/normalize":255,"gl-quat/rotateX":256,"gl-quat/rotateY":257,"gl-quat/rotateZ":258,"gl-quat/scale":259,"gl-quat/set":260,"gl-quat/setAxisAngle":261,"gl-quat/slerp":263}],155:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./lib/common"),e=require("./vector3"),i=a(e),r=require("gl-vec3/length"),n=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function h(t,e){return c(t)||o(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,h=t[Symbol.iterator]();!(r=(s=h.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{r||null==h.return||h.return()}finally{if(n)throw a}}return i}function c(t){if(Array.isArray(t))return t}function l(t,e){if(!s(t,e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}var p=1e-6,y=6371e3,v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.phi,r=t.theta,n=t.radius,a=t.bearing,s=t.pitch,h=(t.altitude,t.radiusScale),u=void 0===h?y:h;l(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(i)||Number.isFinite(r)?(this.phi=i||0,this.theta=r||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=n||1,this.radiusScale=u||1,this.check()}return d(e,[{key:"toString",value:function(){return this.formatString(t.config)}},{key:"formatString",value:function(e){var i=e.printTypes,r=(e.printDegrees,t.formatValue);return"".concat(i?"Spherical":"","[rho:").concat(r(this.radius),",theta:").concat(r(this.theta),",phi:").concat(r(this.phi),"]")}},{key:"equals",value:function(e){return(0,t.equals)(this.radius,e.radius)&&(0,t.equals)(this.theta,e.theta)&&(0,t.equals)(this.phi,e.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var i=h(e,3),r=i[0],n=i[1],a=i[2];this.radius=1+a/this.radiusScale,this.phi=(0,t.radians)(n),this.theta=(0,t.radians)(r)}},{key:"fromVector3",value:function(e){return this.radius=(0,n.default)(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos((0,t.clamp)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new i.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(p,Math.min(Math.PI-p,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-(0,t.degrees)(this.phi)},set:function(e){this.phi=Math.PI-(0,t.radians)(e)}},{key:"pitch",get:function(){return(0,t.degrees)(this.theta)},set:function(e){this.theta=(0,t.radians)(e)}},{key:"longitude",get:function(){return(0,t.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,t.degrees)(this.theta)}},{key:"lng",get:function(){return(0,t.degrees)(this.phi)}},{key:"lat",get:function(){return(0,t.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}();exports.default=v;
},{"./lib/common":160,"./vector3":151,"gl-vec3/length":262}],157:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./lib/math-array"),e=h(t),r=require("./lib/common"),n=require("./matrix4"),i=h(n),a=require("./quaternion"),o=h(a),s=require("./vector3"),u=h(s);function h(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!c(t,e))throw new TypeError("Cannot call a class as a function")}function y(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d="Unknown Euler angle order",g=.99999;function M(t){return t>=0&&t<6}function p(t){if(t<0&&t>=6)throw new Error(d);return t}var Y=function(t){function n(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.DefaultOrder;(l(this,n),t=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),arguments.length>0&&Array.isArray(arguments[0]))?(e=t).fromVector3.apply(e,arguments):t.set(r,i,a,o);return t}return m(n,e.default),v(n,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return n.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return n.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),v(n,[{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(n)?n:this[3],this.check()}},{key:"validate",value:function(){return M(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new u.default(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,e,r){return this.set(t,e,r,n.ZYX)}},{key:"fromQuaternion",value:function(t,e){return this._fromRotationMatrix(i.default.fromQuaternion(t),e),this.check()}},{key:"fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DefaultOrder;return this._fromRotationMatrix(t,e),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.default;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new o.default;switch(this[4]){case n.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case n.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case n.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case n.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case n.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case n.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DefaultOrder,i=t.elements,a=i[0],o=i[4],s=i[8],u=i[1],h=i[5],c=i[9],f=i[2],l=i[6],y=i[10];switch(e=e||this[3]){case n.XYZ:this[1]=Math.asin((0,r.clamp)(s,-1,1)),Math.abs(s)<g?(this[0]=Math.atan2(-c,y),this[2]=Math.atan2(-o,a)):(this[0]=Math.atan2(l,h),this[2]=0);break;case n.YXZ:this[0]=Math.asin(-(0,r.clamp)(c,-1,1)),Math.abs(c)<g?(this[1]=Math.atan2(s,y),this[2]=Math.atan2(u,h)):(this[1]=Math.atan2(-f,a),this[2]=0);break;case n.ZXY:this[0]=Math.asin((0,r.clamp)(l,-1,1)),Math.abs(l)<g?(this[1]=Math.atan2(-f,y),this[2]=Math.atan2(-o,h)):(this[1]=0,this[2]=Math.atan2(u,a));break;case n.ZYX:this[1]=Math.asin(-(0,r.clamp)(f,-1,1)),Math.abs(f)<g?(this[0]=Math.atan2(l,y),this[2]=Math.atan2(u,a)):(this[0]=0,this[2]=Math.atan2(-o,h));break;case n.YZX:this[2]=Math.asin((0,r.clamp)(u,-1,1)),Math.abs(u)<g?(this[0]=Math.atan2(-c,h),this[1]=Math.atan2(-f,a)):(this[0]=0,this[1]=Math.atan2(s,y));break;case n.XZY:this[2]=Math.asin(-(0,r.clamp)(o,-1,1)),Math.abs(o)<g?(this[0]=Math.atan2(l,h),this[1]=Math.atan2(s,a)):(this[0]=Math.atan2(-c,y),this[1]=0);break;default:throw new Error(d)}return this[3]=e,this}},{key:"_getRotationMatrix",value:function(){var t=new i.default,e=this.x,r=this.y,a=this.z,o=Math.cos(e),s=Math.cos(r),u=Math.cos(a),h=Math.sin(e),c=Math.sin(r),f=Math.sin(a);switch(this[3]){case n.XYZ:var l=o*u,y=o*f,k=h*u,b=h*f;t[0]=s*u,t[4]=-s*f,t[8]=c,t[1]=y+k*c,t[5]=l-b*c,t[9]=-h*s,t[2]=b-l*c,t[6]=k+y*c,t[10]=o*s;break;case n.YXZ:var v=s*u,m=s*f,g=c*u,M=c*f;t[0]=v+M*h,t[4]=g*h-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-h,t[2]=m*h-g,t[6]=M+v*h,t[10]=o*s;break;case n.ZXY:var p=s*u,Y=s*f,X=c*u,Z=c*f;t[0]=p-Z*h,t[4]=-o*f,t[8]=X+Y*h,t[1]=Y+X*h,t[5]=o*u,t[9]=Z-p*h,t[2]=-o*c,t[6]=h,t[10]=o*s;break;case n.ZYX:var w=o*u,N=o*f,_=h*u,O=h*f;t[0]=s*u,t[4]=_*c-N,t[8]=w*c+O,t[1]=s*f,t[5]=O*c+w,t[9]=N*c-_,t[2]=-c,t[6]=h*s,t[10]=o*s;break;case n.YZX:var x=o*s,R=o*c,E=h*s,S=h*c;t[0]=s*u,t[4]=S-x*f,t[8]=E*f+R,t[1]=f,t[5]=o*u,t[9]=-h*u,t[2]=-c*u,t[6]=R*f+E,t[10]=x-S*f;break;case n.XZY:var j=o*s,P=o*c,q=h*s,F=h*c;t[0]=s*u,t[4]=-f,t[8]=c*u,t[1]=j*f+F,t[5]=o*u,t[9]=P*f-q,t[2]=q*f-P,t[6]=h*u,t[10]=F*f+j;break;default:throw new Error(d)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,r.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,r.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,r.checkNumber)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=(0,r.checkNumber)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=(0,r.checkNumber)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=(0,r.checkNumber)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=(0,r.checkNumber)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=(0,r.checkNumber)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=(0,r.checkNumber)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=(0,r.checkNumber)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=(0,r.checkNumber)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=(0,r.checkNumber)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=p(t)}}]),n}();exports.default=Y;
},{"./lib/math-array":226,"./lib/common":160,"./matrix4":153,"./quaternion":154,"./vector3":151}],156:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./matrix4"),i=a(t),n=require("./vector3"),e=a(n),o=require("./euler"),r=a(o);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,i){return null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](t):t instanceof i}function s(t,i){if(!u(t,i))throw new TypeError("Cannot call a class as a function")}function l(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function f(t,i,n){return i&&l(t.prototype,i),n&&l(t,n),t}var h=function(){function t(i){var n=i.x,o=void 0===n?0:n,a=i.y,u=void 0===a?0:a,l=i.z,f=void 0===l?0:l,h=i.roll,c=void 0===h?0:h,y=i.pitch,p=void 0===y?0:y,v=i.yaw,d=void 0===v?0:v;s(this,t),this.position=new e.default(o,u,f),this.orientation=new r.default(c,p,d,r.default.RollPitchYaw)}return f(t,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),n=Math.sin(this.pitch),e=Math.sin(this.yaw),o=Math.cos(this.roll),r=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new i.default).setRowMajor(a*r,-e*o+a*n*t,e*t+a*n*o,this.x,e*r,a*o+e*n*t,-a*t+e*n*o,this.y,-n,r*t,r*o,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new i.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new i.default).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){return this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){return this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){return this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){return this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){return this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){return this.orientation.yaw=t}}]),t}();exports.default=h;
},{"./matrix4":153,"./vector3":151,"./euler":157}],161:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../lib/common");function t(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e,n){if(!t(e,n))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function t(i){n(this,t),this.points=i,this.isClosed=(0,e.equals)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return o(t,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment(function(t,n){e+=(t[0]+n[0])*(t[1]-n[1])}),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,n=0;n<t-1;n++)e(this.points[n],this.points[n+1],n,n+1);this.isPolygon&&!this.isClosed()&&e(this.points[t-1],this.points[0],t-1,0)}}]),t}();exports.default=s;
},{"../lib/common":160}],132:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.experimental=exports.equals=exports.lerp=exports.clamp=exports.atan=exports.acos=exports.asin=exports.tan=exports.cos=exports.sin=exports.degrees=exports.radians=exports.clone=exports.isArray=exports.formatValue=exports.configure=exports.checkNumber=exports.config=exports.Quaternion=exports.Matrix4=exports.Vector4=exports.Vector3=exports.Vector2=void 0;var e=require("./vector2");Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return b(e).default}});var r=require("./vector3");Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return b(r).default}});var t=require("./vector4");Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return b(t).default}});var n=require("./matrix4");Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return b(n).default}});var o=require("./quaternion");Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return b(o).default}});var u=require("./lib/common");Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return u.config}}),Object.defineProperty(exports,"checkNumber",{enumerable:!0,get:function(){return u.checkNumber}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return u.configure}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return u.formatValue}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return u.isArray}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return u.clone}}),Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return u.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return u.degrees}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return u.sin}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return u.cos}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return u.tan}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return u.asin}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return u.acos}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return u.atan}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return u.clamp}}),Object.defineProperty(exports,"lerp",{enumerable:!0,get:function(){return u.lerp}}),Object.defineProperty(exports,"equals",{enumerable:!0,get:function(){return u.equals}});var a=require("./spherical-coordinates"),i=b(a),c=require("./pose"),p=b(c),s=require("./euler"),f=b(s),l=require("./addons/polygon"),x=b(l);function b(e){return e&&e.__esModule?e:{default:e}}var d=exports.experimental={SphericalCoordinates:i.default,Euler:f.default,Pose:p.default,Polygon:x.default};
},{"./vector2":150,"./vector3":151,"./vector4":152,"./matrix4":153,"./quaternion":154,"./lib/common":160,"./spherical-coordinates":155,"./pose":156,"./euler":157,"./addons/polygon":161}],493:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../utils"),e=require("math.gl"),i=require("../utils/assert"),n=s(i);function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function a(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var l=function(){function i(n){var s=n.id;n.display;a(this,i),this.position=new e.Vector3,this.rotation=new e.Vector3,this.scale=new e.Vector3(1,1,1),this.matrix=new e.Matrix4,this.id=s||(0,t.uid)(this.constructor.name),this.display=!0,this.userData={}}return u(i,[{key:"setPosition",value:function(t){return(0,n.default)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return(0,n.default)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return(0,n.default)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrixComponents",value:function(t){var e=t.position,i=t.rotation,n=t.scale,s=t.update,r=void 0===s||s;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),r&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,i=t.rotation,n=t.scale;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,i){(0,n.default)(t),i=i||this.matrix;var s=new e.Matrix4(t).multiplyRight(i),r=s.invert();return{viewMatrix:t,modelMatrix:i,objectMatrix:i,worldMatrix:s,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var t=this.parent;this.endPosition.set(this.position.add(t.endPosition)),this.endRotation.set(this.rotation.add(t.endRotation)),this.endScale.set(this.scale.add(t.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var e=this.children,i=0;i<e.length;++i)e[i].transform();return this}}]),i}();exports.default=l;
},{"../utils":706,"math.gl":132,"../utils/assert":479}],894:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n";
},{}],895:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME luma-modular-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n";
},{}],743:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MODULAR_SHADERS=void 0;var e=require("./modular-vertex.glsl"),r=l(e),t=require("./modular-fragment.glsl"),u=l(t);function l(e){return e&&e.__esModule?e:{default:e}}var s=exports.MODULAR_SHADERS={vs:r.default,fs:u.default,defaultUniforms:{}};
},{"./modular-vertex.glsl":894,"./modular-fragment.glsl":895}],443:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerShaderModules=a,exports.setDefaultShaderModules=i,exports.getShaderModule=l,exports.resolveModules=u,exports.getShaderDependencies=s,exports.getDependencyGraph=d;var e=require("../../utils/assert"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var n={},o=[];function a(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,t=void 0!==r&&r,n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){f(i.value,{ignoreMultipleRegistrations:t})}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}function i(e){o=e}function l(e){if("string"!=typeof e){var t=e;return(0,r.default)("string"==typeof t.name),f(t,{ignoreMultipleRegistrations:!0}),t}var o=n[e];return o||(0,r.default)(!1,"Unknown shader module ".concat(e)),o}function u(e){return s(e.map(function(e){return"string"!=typeof e?(a([e],{ignoreMultipleRegistrations:!0}),e.name):e}))}function s(e){var r={};return d({modules:e=e.concat(o),level:0,result:r}),Object.keys(r).sort(function(e,t){return r[t]-r[e]})}function d(e){var r=e.modules,t=e.level,n=e.result;if(t>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,i=void 0;try{for(var u,s=r[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=l(u.value);(void 0===n[c.name]||n[c.name]<t)&&(n[c.name]=t)}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}var f=!0,p=!1,v=void 0;try{for(var g,y=r[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var h=l(g.value);h.dependencies&&d({modules:h.dependencies,level:t+1,result:n})}}catch(e){p=!0,v=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw v}}return n}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}function f(e,t){var o=t.ignoreMultipleRegistrations,a=void 0!==o&&o;if((0,r.default)(e.name,"shader module has no name"),!a&&n[e.name])throw new Error("shader module ".concat(e.name," already registered"));n[e.name]=e,e.dependencies=e.dependencies||[],e.deprecations=c(e.deprecations)}
},{"../../utils/assert":479}],515:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkRendererVendor=t,exports.getPlatformShaderDefines=i,exports.getVersionDefines=a;var e=require("../../webgl"),n=require("../../webgl-context/context-features");function t(e,n){var t,i=e.vendor,a=e.renderer;switch(n){case"nvidia":t=i.match(/NVIDIA/i)||a.match(/NVIDIA/i);break;case"intel":t=i.match(/INTEL/i)||a.match(/INTEL/i);break;case"amd":t=i.match(/AMD/i)||a.match(/AMD/i)||i.match(/ATI/i)||a.match(/ATI/i);break;default:t=!1}return t}function i(n){var i="",a=(0,e.getContextInfo)(n);return t(a,"nvidia")?i+="#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n":t(a,"intel")?i+="#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n":t(a,"amd")?i+="#define AMD_GPU\n":i+="#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n",i}function a(e){var t="// Defines for shader portability\n#if (__VERSION__ > 120)\n# define attribute in\n# define varying out\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n#else\n// # define in attribute\n// # define out varying\n#endif // __VERSION\n";return(0,n.hasFeature)(e,n.FEATURES.GLSL_FRAG_DEPTH)&&(t+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),(0,n.hasFeature)(e,n.FEATURES.GLSL_DERIVATIVES)&&(0,n.canCompileGLGSExtension)(e,n.FEATURES.GLSL_DERIVATIVES)&&(t+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),(0,n.hasFeature)(e,n.FEATURES.GLSL_FRAG_DATA)&&(t+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),(0,n.hasFeature)(e,n.FEATURES.GLSL_TEXTURE_LOD)&&(t+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),t}
},{"../../webgl":707,"../../webgl-context/context-features":396}],516:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=exports.MODULE_INJECTORS_VS="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",r=exports.MODULE_INJECTORS_FS="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n";
},{}],442:[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.assembleShaders=_;var r,n,t=require("./shader-modules"),o=require("./platform-defines"),a=require("../modules/module-injectors"),i=require("../../utils/assert"),u=c(i),s=require("../../utils");function c(e){return e&&e.__esModule?e:{default:e}}function l(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var d="vs",f="fs",v=(l(r={},d,"vertex"),l(r,f,"fragment"),r),g=(l(n={},d,a.MODULE_INJECTORS_VS),l(n,f,a.MODULE_INJECTORS_FS),n),y="#ifdef GL_ES\nprecision highp float;\n#endif\n\n";function p(e){var r=e.id,n=e.source,t=e.type;return r&&"string"==typeof r&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(r,"_").concat(v[t],"\n\n"):""}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,n="";for(var t in e)0===r&&(n+="\n// APPLICATION DEFINES\n"),r++,n+="#define ".concat(t.toUpperCase()," ").concat(e[t],"\n");return 0===r&&(n+="\n"),n}function m(e,r){(0,t.getShaderModule)(e).deprecations.forEach(function(e){e.regex.test(r)&&(e.deprecated?s.log.deprecated(e.old,e.new)():s.log.removed(e.old,e.new)())})}function S(e,r){var n,o=(0,t.getShaderModule)(e);switch(r){case d:n=o.vs||o.vertexShader;break;case f:n=o.fs||o.fragmentShader;break;default:(0,u.default)(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(e.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(e,"\n\n")}function b(e,r){var n=r.id,t=r.source,a=r.type,i=r.modules,s=void 0===i?[]:i,c=r.defines,l=void 0===c?{}:c;(0,u.default)("string"==typeof t,"shader source must be a string");var d=t.split("\n"),v="",b=t;0===d[0].indexOf("#version ")&&(v=d[0],b=d.slice(1).join("\n"));var E="".concat(p({id:n,source:t,type:a}),"\n").concat((0,o.getPlatformShaderDefines)(e),"\n").concat((0,o.getVersionDefines)(e),"\n").concat(h(l),"\n").concat(a===f?y:"","\n"),O=!1,_=!0,M=!1,x=void 0;try{for(var D,U=s[Symbol.iterator]();!(_=(D=U.next()).done);_=!0){var j=D.value;switch(j){case"inject":O=!0;break;default:m(j,b),E+=S(j,a)}}}catch(e){M=!0,x=e}finally{try{_||null==U.return||U.return()}finally{if(M)throw x}}return E=v+E+b,O&&E.replace("}s*$",g),E}function E(e){return function(r){var n={},o=!0,a=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value,l=(0,t.getShaderModule)(c),d=l.getUniforms?l.getUniforms(r,n):{};Object.assign(n,d)}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}}function O(e){var r={},n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value,c=(0,t.getShaderModule)(s);r[s]=c}}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}function _(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.vs,o=r.fs,a=(0,t.resolveModules)(r.modules||[]);return{gl:e,vs:b(e,Object.assign({},r,{source:n,type:d,modules:a})),fs:b(e,Object.assign({},r,{source:o,type:f,modules:a})),getUniforms:E(a),modules:O(a)}}
},{"./shader-modules":443,"./platform-defines":515,"../modules/module-injectors":516,"../../utils/assert":479,"../../utils":706}],441:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../webgl/shader"),t=require("../../webgl/program"),r=s(t),a=require("../../utils/assert"),n=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.gl,a=e._cachePrograms,s=void 0!==a&&a;i(this,t),(0,n.default)(r),this.gl=r,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=s}return l(t,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(t,r){(0,n.default)("string"==typeof r),(0,n.default)(this._compareContexts(t,this.gl));var a=this.vertexShaders[r];return a||(a=new e.VertexShader(t,r),this.vertexShaders[r]=a),a}},{key:"getFragmentShader",value:function(t,r){(0,n.default)("string"==typeof r),(0,n.default)(this._compareContexts(t,this.gl));var a=this.fragmentShaders[r];return a||(a=new e.FragmentShader(t,r),this.fragmentShaders[r]=a),a}},{key:"getProgram",value:function(e,t){(0,n.default)(this._compareContexts(e,this.gl)),(0,n.default)("string"==typeof t.vs),(0,n.default)("string"==typeof t.fs),(0,n.default)("string"==typeof t.id);var r=this._getProgramKey(t),a=this.programs[r];return a?(this._resetProgram(a),a):(a=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(a)&&(a._isCached=!0,this.programs[r]=a),a)}},{key:"_getProgramKey",value:function(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,t){var a=t.vs,n=t.fs,s=this.getVertexShader(e,a),o=this.getFragmentShader(e,n);return new r.default(this.gl,Object.assign({},t,{vs:s,fs:o}))}},{key:"_resetProgram",value:function(e,t){e.reset()}},{key:"_compareContexts",value:function(e,t){return(e.gl||e)===(t.gl||t)}}]),t}();exports.default=h;
},{"../../webgl/shader":400,"../../webgl/program":401,"../../utils/assert":479}],708:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./lib/shader-modules");Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return e.registerShaderModules}});var r=require("./lib/assemble-shaders");Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return r.assembleShaders}});var t=require("./lib/shader-cache");function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"ShaderCache",{enumerable:!0,get:function(){return s(t).default}});
},{"./lib/shader-modules":443,"./lib/assemble-shaders":442,"./lib/shader-cache":441}],517:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t="undefined"!=typeof window&&window.addEventListener,n=new Map,o=function(){return t&&window.__SEER_INITIALIZED__},r=function(e,t){var o=n.get(e),r=Date.now();return!!(o&&r-o<t)||(n.set(e,r),!1)},i=function(t){return function(n,o){if(!o||"object"!==(void 0===o?"undefined":e(o))||!t.has(o))return t.add(o),Object.prototype.toString.call(o).slice(8,-1).includes("Array")?Array.prototype.slice.call(o,0,20):o}},a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&o()){var a=new Set,u=JSON.stringify(n,i(a));try{window.postMessage({type:e,payload:u,source:"seer-agent"},"*")}catch(e){if(r("seer-log",2e3))return;console.log(e)}}},u=new Map,d=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,o=t.payload,r=u.get(n);r&&r.forEach(function(e){return e(o)})}},c=function(){t&&!window.__SEER_LISTENER__&&(window.addEventListener("message",d),window.__SEER_LISTENER__=!0)},s=function(){t&&window.__SEER_LISTENER__&&(window.removeEventListener("message",d),delete window.__SEER_LISTENER__)},f=function(e,n){if(t){if(!e||!n)throw new Error("Please provide a type and callback");u.has(e)||u.set(e,[]),window.__SEER_LISTENER__||c(),u.get(e).push(n)}},y=function(e){u.forEach(function(t,n){u.set(n,t.filter(function(t){return t!==e}))})},E=function(e,t){return a("LIST",{key:e,data:t})},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a("LIST_ITEM",{key:e,itemKey:t,data:n})},l=function(e,t,n,o){return a("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:o})},p=function(e,t,n){return a("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},w=function(e,t){return a("DELETE_ITEM",{key:e,itemKey:t})},m=function(e,t,n){return a("ADD_LOG",{key:e,itemKey:t,msg:n})};exports.default={send:a,throttle:r,isReady:o,list:E,listItem:_,updateItem:l,multiUpdate:p,deleteItem:w,addLog:m,listeners:u,listenFor:f,removeListener:y,init:c,clean:s};
},{}],494:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOverrides=exports.setOverride=exports.removeModel=exports.logModel=exports.addModel=void 0;var e=require("seer"),t=o(e),r=require("../utils/globals");function o(e){return e&&e.__esModule?e:{default:e}}var i={},a=exports.addModel=function(e){i[e.id]||(i[e.id]=e,t.default.listItem("luma.gl",e.id))},s=exports.logModel=function(e,r){if(t.default.isReady()&&!t.default.throttle("luma.gl:".concat(e.id),1e3)){var o=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,i=Object.assign({},e.uniforms,r);t.default.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:i},{path:"objects.attributes",data:o}])}},l=exports.removeModel=function(e){delete i[e],t.default.deleteItem("luma.gl",e)},u=function e(t,r,o){t&&(r.length>1?e(t[r[0]],r.slice(1),o):t[r[0]]=o)},d=new Map,n=exports.setOverride=function(e,t,o){r.window.__SEER_INITIALIZED__&&(d.has(e)||d.set(e,new Map),d.get(e).set(t,o))},f=exports.getOverrides=function(e,t){if(r.window.__SEER_INITIALIZED__&&e){var o=d.get(e);o&&o.forEach(function(e,r){u(t,r,e)})}};t.default.listenFor("luma.gl",function(e){var t=i[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var r=e.valuePath.slice(1);n(e.itemKey,r,e.value);var o=t.getUniforms();u(o,r,e.value),t.setUniforms(o)}});
},{"seer":517,"../utils/globals":475}],416:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=g(e),r=require("../webgl"),i=require("../webgl/query"),s=g(i),n=require("../webgl-utils"),a=require("../webgl/uniforms"),o=require("../geometry/geometry"),u=require("../core/object-3d"),d=g(u),l=require("../shadertools/shaders"),h=require("../shadertools"),f=require("../debug/seer-integration"),c=require("../utils"),m=require("../utils/assert"),v=g(m);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function w(e,t){if(!p(e,t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}function M(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R='Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.',S="Model needs drawMode and vertexCount",U=2,x=["renderPickingBuffer","pickingEnabled"],T=function(e){function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,i),t=M(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r)),(0,v.default)((0,n.isWebGL)(e)),t.gl=e,t.init(r),t}return A(i,d.default),k(i,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.vs,i=void 0===r?null:r,n=e.fs,a=void 0===n?null:n,u=e.modules,d=void 0===u?null:u,l=e.defines,h=void 0===l?{}:l,f=e.moduleSettings,c=void 0===f?{}:f,m=e.defaultUniforms,g=e.program,b=void 0===g?null:g,y=e.shaderCache,p=void 0===y?null:y,w=e.isInstanced,E=void 0!==w&&w,k=e.instanced,M=e.vertexCount,_=void 0===M?void 0:M,A=e.instanceCount,U=void 0===A?0:A,x=e.drawMode,T=e.uniforms,C=void 0===T?{}:T,O=e.attributes,P=void 0===O?{}:O,F=e.geometry,N=void 0===F?null:F,D=e.pickable,I=void 0===D||D,B=e.pick,Q=void 0===B?null:B,j=(e.render,e.onBeforeRender),q=void 0===j?function(){}:j,L=e.onAfterRender,V=void 0===L?function(){}:L,G=e.varyings,z=void 0===G?null:G,Y=e.bufferMode,H=void 0===Y?t.default.SEPARATE_ATTRIBS:Y,W=e.timerQueryEnabled,J=void 0!==W&&W;this._initializeProgram({vs:i,fs:a,modules:d,defines:h,moduleSettings:c,defaultUniforms:m,program:b,shaderCache:p,varyings:z,bufferMode:H}),this.uniforms={},C=Object.assign({},this.program.defaultUniforms,C),this.setUniforms(C),this.setUniforms(this.getModuleUniforms()),this.setUniforms(this.getModuleUniforms(c)),k&&(console.warn(R),E=E||k),this._attributes={},this.attributes={},this.samplers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,N&&this.setGeometry(N),this.setAttributes(P),void 0!==x&&(this.drawMode=(0,o.getDrawMode)(x)),void 0!==_&&(this.vertexCount=_),this.isInstanced=E,this.instanceCount=U,this.pickable=Boolean(I),this.pick=Q||function(){return!1},this.onBeforeRender=q,this.onAfterRender=V,(0,v.default)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),S),this.timerQueryEnabled=J&&s.default.isSupported(this.gl,{timer:!0}),this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0}}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this.program.delete(),(0,f.removeModel)(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,this.geometry&&(r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:t})),r}},{key:"setDrawMode",value:function(e){return this.drawMode=(0,o.getDrawMode)(e),this}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"setVertexCount",value:function(e){return(0,v.default)(Number.isFinite(e)),this.vertexCount=e,this}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"setInstanceCount",value:function(e){return(0,v.default)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"setGeometry",value:function(e){return this.geometry=e,this.vertexCount=e.getVertexCount(),this.drawMode=e.drawMode,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.isObjectEmpty)(e)?this:(Object.assign(this.attributes,e),this._createBuffersFromAttributeDescriptors(e),this.setNeedsRedraw(),this)}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var i in e)if(!(0,a.areUniformsEqual)(this.uniforms[i],e[i])){t=!0;break}return t&&((0,r.checkUniformValues)(e,this.id),Object.assign(this.uniforms,e),this.setNeedsRedraw()),this}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e);return this.setUniforms(t)}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,r=void 0===t?null:t,i=e.uniforms,s=void 0===i?{}:i,n=e.attributes,a=void 0===n?{}:n,o=e.samplers,u=void 0===o?{}:o,d=e.parameters,l=void 0===d?{}:d,h=e.settings,f=e.framebuffer,m=void 0===f?null:f,v=e.vertexArray,g=void 0===v?null:v,b=e.transformFeedback,y=void 0===b?null:b;return h&&(c.log.deprecated("settings","parameters")(),l=h),r&&this.updateModuleSettings(r),m&&(l=Object.assign(l,{framebuffer:m})),this.render(s,a,u,y,l,g),m&&m.log({priority:U,message:"Rendered to ".concat(m.id)}),this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,f.addModel)(this);var a=this.addViewUniforms(e);(0,f.getOverrides)(this.id,a),this.setUniforms(a),this.setAttributes(t),Object.assign(this.samplers,r),c.log.group(U,">>> RENDERING MODEL ".concat(this.id),{collapsed:c.log.priority<=2})(),this.setProgramState({vertexArray:n}),this._logAttributesAndUniforms(2,a),this.onBeforeRender();var o=this.drawParams;o.isInstanced&&!this.isInstanced&&c.log.warn("Found instanced attributes on non-instanced model")();var u=o.isIndexed,d=o.indexType,l=this.isInstanced,h=this.instanceCount;return this._timerQueryStart(),this.program.draw({parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:n,transformFeedback:i,isIndexed:u,indexType:d,isInstanced:l,instanceCount:h}),this._timerQueryEnd(),this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),c.log.groupEnd(U,">>> RENDERING MODEL ".concat(this.id))(),this}},{key:"setProgramState",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vertexArray,t=void 0===e?null:e,r=this.program;return r.use(),this.drawParams={},r.setAttributes(this._attributes,{drawParams:this.drawParams}),r.checkAttributeBindings({vertexArray:t}),r.setUniforms(this.uniforms,this.samplers),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"addViewUniforms",value:function(e){var t=e.camera,r=e.viewMatrix,i=e.modelMatrix,s=t?t.getUniforms():{},n=r?this.getCoordinateUniforms(r,i):{};return Object.assign({},e,s,n)}},{key:"_initializeProgram",value:function(e){var t=e.vs,i=e.fs,s=e.modules,n=e.defines,a=(e.moduleSettings,e.defaultUniforms,e.program),o=e.shaderCache,u=e.varyings,d=e.bufferMode;if(this.getModuleUniforms=function(e){},!a){t||(t=l.MODULAR_SHADERS.vs),i||(i=l.MODULAR_SHADERS.fs);var f=(0,h.assembleShaders)(this.gl,{vs:t,fs:i,modules:s,defines:n});t=f.vs,i=f.fs,a=o?o.getProgram(this.gl,{vs:t,fs:i,id:this.id}):new r.Program(this.gl,{vs:t,fs:i,varyings:u,bufferMode:d});var c=f.getUniforms;this.getModuleUniforms=c||function(e){}}this.program=a,(0,v.default)(p(this.program,r.Program),"Model needs a program")}},{key:"_checkForDeprecatedUniforms",value:function(e){x.forEach(function(t){t in e&&c.log.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new s.default(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,c.log.log(U,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl;for(var i in e){var s=e[i],n=this._attributes[i];p(s,r.Attribute)?n=s:p(s,r.Buffer)?(n=n||new r.Attribute(t,Object.assign({},s.layout,{id:i}))).update({isGeneric:!1,buffer:s}):n?n.update(s):n=new r.Attribute(t,s),this._attributes[i]=n}return this}},{key:"_logAttributesAndUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c.log.priority>=e){var r=this._getAttributesTable({header:"".concat(this.id," attributes"),program:this.program,attributes:this._attributes});c.log.table(e,r)();var i=(0,a.getUniformsTable)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.uniforms,t)}),s=i.table,n=i.unusedTable,o=i.unusedCount;c.log.table(e,s)(),c.log.log(e,"".concat(o||"No"," unused uniforms "),n)()}else{var u=(0,a.getUniformsTable)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.uniforms,t),undefinedOnly:!0}),d=u.table;u.count>0&&c.log.table(e,d)()}(0,f.logModel)(this,t)}},{key:"_getAttributesTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=e.header,i=void 0===r?"Attributes":r,s=(e.instanced,e.program);(0,v.default)(s);var n=s._attributeToLocationMap,a={};for(var o in t){var u=t[o];u.isIndexed&&this._createAttributeEntry(u,"ELEMENT_ARRAY_BUFFER",i)}for(var d in n){var l=t[d],h=n[d];a[d]=this._createAttributeEntry(l,h,i)}for(var f in t){var c=t[f];a[f]||(a[f]=this._createAttributeEntry(c,null,i))}return a}},{key:"_createAttributeEntry",value:function(e,t,r){var i,s,n="NOT PROVIDED",a=0,o="N/A",u="N/A",d="N/A",l="N/A";e&&null===t&&(t=e.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),e&&(n=e.type,a=e.instanced,o=e.size,e.externalBuffer?(l=e.externalBuffer.data,u=(d=e.externalBuffer.bytes)/l.BYTES_PER_ELEMENT):e.value&&(l=e.value,s=l.length/o,u=Math.round(10*s)/10,d=l.length*l.BYTES_PER_ELEMENT));var h=-1!==(n=String(n).replace("Array","")).indexOf("nt");return y(i={},r,(0,c.formatValue)(l,{size:o,isInteger:h})),y(i,"Memory Size and Layout","".concat(a?"I ":"P "," ").concat(u," (x").concat(o,"=").concat(d,"bytes ").concat(n,") loc=").concat(t)),i}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(e),this}},{key:"getGeometry",value:function(){return this.geometry}},{key:"varyingMap",get:function(){return this.program.varyingMap}}]),i}();exports.default=T;
},{"../constants":387,"../webgl":707,"../webgl/query":409,"../webgl-utils":705,"../webgl/uniforms":488,"../geometry/geometry":421,"../core/object-3d":493,"../shadertools/shaders":743,"../shadertools":708,"../debug/seer-integration":494,"../utils":706,"../utils/assert":479}],417:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../webgl-context"),t=require("../webgl-context/debug-context"),i=require("../webgl-utils"),a=require("../utils"),r=require("../utils/assert"),s=o(r),n=require("../webgl");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),e}var d={preserveDrawingBuffer:!0},p=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,r);var i=t.onCreateContext,s=void 0===i?function(t){return(0,e.createGLContext)(t)}:i,n=t.onInitialize,o=void 0===n?function(){}:n,u=t.onRender,l=void 0===u?function(){}:u,f=t.onFinalize,h=void 0===f?function(){}:f,d=t.offScreen,p=void 0!==d&&d,v=t.gl,b=void 0===v?null:v,g=t.glOptions,m=void 0===g?{}:g,_=t.debug,w=void 0!==_&&_,D=t.createFramebuffer,k=void 0!==D&&D,y=t.autoResizeViewport,z=void 0===y||y,R=t.autoResizeDrawingBuffer,x=void 0===R||R,F=t.useDevicePixels,P=void 0===F||F;return"useDevicePixelRatio"in t&&(a.log.deprecated("useDevicePixelRatio","useDevicePixels")(),P=t.useDevicePixelRatio),this.props={onCreateContext:s,onInitialize:o,onRender:l,onFinalize:h,gl:b,glOptions:m,debug:w,createFramebuffer:k},this.gl=b,this.offScreen=p,this.needsRedraw=null,this.setProps({autoResizeViewport:z,autoResizeDrawingBuffer:x,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this}return h(r,[{key:"setNeedsRedraw",value:function(e){return(0,s.default)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=e.pageLoadPromise.then(function(){return t._stopped?null:(t._createWebGLContext(a),t._createFramebuffer(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t.props.onInitialize(t._callbackData))}).then(function(e){t._stopped||(t._addCallbackData(e||{}),!1===e||t._animationFrameId||(t._animationFrameId=(0,i.requestAnimationFrame)(t._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),(0,i.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"setViewParameters",value:function(e){var t=e.autoResizeDrawingBuffer,i=void 0===t||t,r=e.autoResizeCanvas,s=void 0===r||r,n=e.autoResizeViewport,o=void 0===n||n,u=e.useDevicePixels,l=void 0===u||u,c=e.useDevicePixelRatio,f=void 0===c?null:c;return a.log.deprecated("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this.autoResizeViewport=o,this.autoResizeCanvas=s,this.autoResizeDrawingBuffer=i,this.useDevicePixels=l,null!==f&&(a.log.deprecated("useDevicePixelRatio","useDevicePixels")(),this.useDevicePixels=f),this}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this._callbackData):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._stopped||(this._setupFrame(),this._updateCallbackData(),this.props.onRender(this._callbackData),this.offScreen?this.gl.commit().then(this._renderFrame):this._animationFrameId=(0,i.requestAnimationFrame)(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this._callbackData={gl:this.gl,canvas:this.gl.canvas,framebuffer:this.framebuffer,stop:this.stop,useDevicePixels:this.useDevicePixels,needsRedraw:null,tick:0,tock:0}}},{key:"_updateCallbackData",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;e===this._callbackData.width&&t===this._callbackData.height||this.setNeedsRedraw("drawing buffer resized"),this._callbackData.width=e,this._callbackData.height=t,this._callbackData.aspect=e/t,this._callbackData.needsRedraw=this.needsRedraw,this._callbackData.offScreen=this.offScreen,this._callbackData.needsRedraw=this.needsRedraw,this.needsRedraw=null,this._callbackData.tick++}},{key:"_finalizeCallbackData",value:function(){this.props.onFinalize(this._callbackData)}},{key:"_addCallbackData",value:function(e){"object"===l(e)&&null!==e&&(this._callbackData=Object.assign({},this._callbackData,e))}},{key:"_createWebGLContext",value:function(a){if(a=Object.assign({},a,d,this.props.glOptions),this.gl=this.props.gl||this.props.onCreateContext(a),!(0,i.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=(0,t.makeDebugContext)(this.gl)),(0,e.resetParameters)(this.gl)}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&(0,e.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new n.Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}}]),r}();exports.default=p;
},{"../webgl-context":641,"../webgl-context/debug-context":397,"../webgl-utils":705,"../utils":706,"../utils/assert":479,"../webgl":707}],418:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./animation-loop"),t=n(e),a=require("../webgl-context"),i=require("../webgl-utils");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function r(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}var c=function(){function e(t){var a=t.worker,i=t.onInitialize,n=void 0===i?function(){}:i,s=t.onFinalize,o=void 0===s?function(){}:s,u=t.useDevicePixels,c=void 0===u||u,l=t.autoResizeDrawingBuffer,h=void 0===l||l;r(this,e),this.props={worker:a,onInitialize:n,onFinalize:o,autoResizeDrawingBuffer:h,useDevicePixels:c},this.canvas=null,this.width=null,this.height=null,this._stopped=!0,this._animationFrameId=null,this._startPromise=null,this._updateFrame=this._updateFrame.bind(this)}return u(e,null,[{key:"createWorker",value:function(e){return function(a){a.animationLoop=new t.default(Object.assign({},e,{offScreen:!0,useDevicePixels:!1,autoResizeDrawingBuffer:!1})),a.canvas=null,a.addEventListener("message",function(e){var t=a.animationLoop;switch(e.data.command){case"start":a.canvas=e.data.opts.canvas,t.start(e.data.opts);break;case"stop":t.stop();break;case"resize":a.canvas.width=e.data.width,a.canvas.height=e.data.height}})}}}]),u(e,[{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=(0,a.getPageLoadPromise)().then(function(){return e._createAndTransferCanvas(t),e.props.onInitialize(e)}).then(function(){e._stopped||(e._animationFrameId=(0,i.requestAnimationFrame)(e._updateFrame))})),this}},{key:"stop",value:function(){return this._animationFrameId&&((0,i.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0,this.props.onFinalize(this)),this.props.worker.postMessage({command:"stop"}),this}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._animationFrameId=(0,i.requestAnimationFrame)(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(e){var t=(0,a.createCanvas)(e);t.transferControlToOffscreen||onError("OffscreenCanvas is not available. Enable Experimental canvas features in chrome://flags");var i=t.transferControlToOffscreen();this.props.worker.postMessage({command:"start",opts:Object.assign({},e,{canvas:i})},[i]),this.canvas=t}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.props.autoResizeDrawingBuffer){var e=this.props.useDevicePixels&&window.devicePixelRatio||1,t=this.canvas.clientWidth*e,a=this.canvas.clientHeight*e;this.width===t&&this.height===a||(this.width=t,this.height=a,this.props.worker.postMessage({command:"resize",width:t,height:a}))}}}]),e}();exports.default=c;
},{"./animation-loop":417,"../webgl-context":641,"../webgl-utils":705}],492:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./object-3d"),t=i(e),r=require("math.gl"),n=require("../utils/assert"),o=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return c(e)||f(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function y(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,n);var i=r.children,l=void 0===i?[]:i;return l.every(function(e){return(0,o.default)(s(e,t.default))}),(e=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r))).children=l,e}return b(n,t.default),h(n,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++){var o=t[n];Array.isArray(o)?this.add.apply(this,u(o)):this.children.push(o)}return this}},{key:"remove",value:function(e){var t=this.children,r=t.indexOf(e);return r>-1&&t.splice(r,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).modelMatrix,o=void 0===t?new r.Matrix4:t,i=!0,l=!1,u=void 0;try{for(var a,f=this.children[Symbol.iterator]();!(i=(a=f.next()).done);i=!0){var c=a.value,y=c.matrix;o=o.multiplyRight(y);var v=void 0;if(v=s(c,n)?c.traverse(e,{modelMatrix:o}):e(c,{}))return v}}catch(e){l=!0,u=e}finally{try{i||null==f.return||f.return()}finally{if(l)throw u}}return null}},{key:"traverseReverse",value:function(e){for(var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).modelMatrix,o=void 0===t?new r.Matrix4:t,i=this.children.length-1;i>=0;--i){var l=this.children[i],u=l.matrix;o=o.multiplyRight(u);var a=void 0;if(a=s(l,n)?l.traverseReverse(e,{modelMatrix:o}):e(l,{}))return a}return null}}]),n}();exports.default=m;
},{"./object-3d":493,"math.gl":132,"../utils/assert":479}],419:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=v;var e=require("../webgl"),r=require("../utils"),t=require("./group"),i=a(t),n=require("../utils/assert"),u=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,r){return f(e)||s(e,r)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,r){var t=[],i=!0,n=!1,u=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(t.push(a.value),!r||t.length!==r);i=!0);}catch(e){n=!0,u=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw u}}return t}function f(e){if(Array.isArray(e))return e}var c="Illegal argument to pick";function d(){return"undefined"!=typeof window?window.devicePixelRatio:1}function v(t,n){var a=n.models,l=n.position,s=n.uniforms,f=void 0===s?{}:s,v=n.parameters,h=void 0===v?{}:v,p=n.settings,m=n.useDevicePixelRatio,g=void 0===m?null:m,w=n.useDevicePixels,y=void 0===w||w,x=n.framebuffer;(0,u.default)((0,e.isWebGL)(t),c),(0,u.default)(x,c),(0,u.default)(l,c),null!==g&&(r.log.deprecated("useDevicePixelRatio","useDevicePixels")(),y=g);var b=o(l,2),P=b[0],_=b[1];x.resize({width:t.canvas.width,height:t.canvas.height});var A=y?d():1,D=P*A,R=t.canvas.height-_*A;return new i.default({children:a}).traverseReverse(function(r){if(r.isPickable()){(0,e.clear)(t,{framebuffer:x,color:!0,depth:!0}),r.setUniforms({picking_uActive:1}),r.draw({uniforms:f,parameters:h,settings:p,framebuffer:x}),r.setUniforms({picking_uActive:0});var i=x.readPixels({x:D,y:R,width:1,height:1,format:t.RGBA,type:t.UNSIGNED_BYTE});if(0!==i[0]||0!==i[1]||0!==i[2])return{model:r,color:i,x:P,y:_,deviceX:D,deviceY:R}}return null})}
},{"../webgl":707,"../utils":706,"./group":492,"../utils/assert":479}],420:[function(require,module,exports) {
"use strict";function r(r,o){return e(r)||n(r,o)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(r,t){var n=[],e=!0,o=!1,i=void 0;try{for(var u,c=r[Symbol.iterator]();!(e=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);e=!0);}catch(r){o=!0,i=r}finally{try{e||null==c.return||c.return()}finally{if(o)throw i}}return n}function e(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodePickingColor=i,exports.decodePickingColor=u,exports.getNullPickingColor=c;var o=new Uint8Array([0,0,0]);function i(r){return[r+1&255,r+1>>8&255,r+1>>16&255]}function u(t){var n=r(t,3);return n[0]+256*n[1]+65536*n[2]-1}function c(){return o}
},{}],744:[function(require,module,exports) {
"use strict";function e(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function t(t,o){if(!e(t,o))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=c,exports.getWheel=r,exports.getKey=u,exports.isRightClick=l,exports.getPos=d,exports.addEvents=b,exports.removeEvents=k;var i={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46};function h(e){return!0!==e&&e}function a(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,bbox:t}}function c(e,t){return t=t||window,e||t.event}function r(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function u(e){var t=e.which||e.keyCode,o=g(t),n=t-111;return n>0&&n<13&&(o="f".concat(n)),{code:t,key:o=o||String.fromCharCode(t).toLowerCase(),shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function l(e){return 3===e.which||2===e.button}function d(e,t){t=t||window,e=e||t.event;var o=t.document;if(o=o.documentElement||o.body,e.touches&&e.touches.length){for(var n,s=[],i=e.touches.length,h=0;h<i;++h)n=e.touches[h],s.push({x:n.pageX||n.clientX+o.scrollLeft,y:n.pageY||n.clientY+o.scrollTop});return s}return[{x:e.pageX||e.clientX+o.scrollLeft,y:e.pageY||e.clientY+o.scrollTop}]}function v(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}exports.stop=v;var f=exports.EventsProxy=function(){function e(o,n){t(this,e),this.scene=n.scene,this.domElem=o,this.pos=a(o),this.opt=this.callbacks=n,this.size={width:o.width||o.offsetWidth,height:o.height||o.offsetHeight},this.attachEvents()}return n(e,[{key:"attachEvents",value:function(){var e=this,t=this.domElem,o=this.opt;if(o.disableContextMenu&&(t.oncontextmenu=function(){return!1}),o.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(o){t.addEventListener(o,function(t,n){e[o](e.eventInfo(o,t,n))},!1)});var n="";n=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",t.addEventListener(n,function(t,o){e.mousewheel(e.eventInfo("mousewheel",t,o))},!1)}o.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(o){t.addEventListener(o,function(t,n){e[o](e.eventInfo(o,t,n))},!1)}),o.enableKeyboard&&["keydown","keyup"].forEach(function(t){document.addEventListener(t,function(o,n){e[t](e.eventInfo(t,o,n))},!1)})}},{key:"eventInfo",value:function(e,t,o){for(var n,s,i,h=this.domElem,f=this.scene,p=this.opt,y=this.getSize(),g=p.relative,b=p.centerOrigin,k=p.cachePosition&&this.pos||a(h),m=c(t,o),w=d(t,o),x=w[0].x,M=w[0].y,E={},T=0,C=w.length;T<C;++T)n=w[T].x,s=w[T].y,g&&(n-=k.x,s-=k.y,b&&(n-=y.width/2,s-=y.height/2,s*=-1)),w[T].x=n,w[T].y=s;switch(e){case"mousewheel":E.wheel=r(m);break;case"keydown":case"keyup":Object.assign(E,u(m));break;case"mouseup":E.isRightClick=l(m)}return Object.assign(E,{x:w[0].x,y:w[0].y,posArray:w,cache:!1,stop:function(){v(m)},getTarget:function(){return i||(i=p.picking&&f.pick(x-k.x,M-k.y)||!0)}}),E.event=m,E}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var e=this.domElem;return{width:e.width||e.offsetWidth,height:e.height||e.offsetHeight}}},{key:"mouseup",value:function(e){this.moved||(e.isRightClick?this.callbacks.onRightClick(e,this.hovered):this.callbacks.onClick(e,h(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(e,h(this.pressed)):this.callbacks.onDragCancel(e,h(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(e){for(var t=e.relatedTarget,o=this.domElem;t&&t.parentNode;){if(o===t.parentNode)return;t=t.parentNode}this.hovered&&(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(e),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(e){}},{key:"mousemove",value:function(e){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(e,h(this.pressed));if(this.hovered){var t=h(e.getTarget());t&&t.hash===this.hash?this.callbacks.onMouseMove(e,this.hovered):(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=t,this.hash=t,t&&(this.hash=t.hash,this.callbacks.onMouseEnter(e,this.hovered)))}else this.hovered=h(e.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(e,this.hovered));this.opt.picking||this.callbacks.onMouseMove(e)}},{key:"mousewheel",value:function(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function(e){this.pressed=e.getTarget(),this.callbacks.onDragStart(e,h(this.pressed))}},{key:"touchstart",value:function(e){this.touched=e.getTarget(),this.touchedLastPosition={x:e.x,y:e.y},this.callbacks.onTouchStart(e,h(this.touched))}},{key:"touchmove",value:function(e){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(e,h(this.touched)))}},{key:"touchend",value:function(e){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(e,h(this.touched)):(e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x,e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y,this.callbacks.onTap(e,h(this.touched)),this.callbacks.onTouchCancel(e,h(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function(e){this.callbacks.onKeyUp(e)}}]),e}();Object.assign(f.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var p={cachePosition:!0,cacheSize:!0,relative:!0,centerOrigin:!0,disableContextMenu:!0,bind:!1,picking:!1,enableTouch:!0,enableMouse:!0,enableKeyboard:!0,onClick:s,onRightClick:s,onDragStart:s,onDragMove:s,onDragEnd:s,onDragCancel:s,onTouchStart:s,onTouchMove:s,onTouchEnd:s,onTouchCancel:s,onTap:s,onMouseMove:s,onMouseEnter:s,onMouseLeave:s,onMouseWheel:s,onKeyDown:s,onKeyUp:s},y=exports.Keys=i;function g(e){var t=y;for(var o in t)if(t[o]===e)return o;return null}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(t=Object.assign({},p,t)).bind;if(o)for(var n in t)n.match(/^on[a-zA-Z0-9]+$/)&&function(e,n){t[e]=function(){n.apply(o,Array.prototype.slice.call(arguments))}}(n,t[n]);return new f(e,t)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(t=Object.assign({},p,t)).bind;if(o)for(var n in t)n.match(/^on[a-zA-Z0-9]+$/)&&function(e,n){t[e]=function(){n.apply(o,Array.prototype.slice.call(arguments))}}(n,t[n]);return new f(e,t)}
},{}],645:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./add-events");Object.defineProperty(exports,"addEvents",{enumerable:!0,get:function(){return e.addEvents}});
},{"./add-events":744}],428:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./geometry"),o=e(t);function e(t){return t&&t.__esModule?t:{default:t}}function r(t,o){return null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](t):t instanceof o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,o){if(!r(t,o))throw new TypeError("Cannot call a class as a function")}function a(t,o){return!o||"object"!==n(o)&&"function"!=typeof o?u(t):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var f={x:[2,0,1],y:[0,1,2],z:[1,2,0]},c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);for(var o=t.bottomRadius,r=void 0===o?0:o,n=t.topRadius,u=void 0===n?0:n,s=t.height,c=void 0===s?1:s,l=t.nradial,y=void 0===l?10:l,p=t.nvertical,d=void 0===p?10:p,b=t.verticalAxis,v=void 0===b?"y":b,h=t.topCap,m=void 0!==h&&h,_=t.bottomCap,w=void 0!==_&&_,O=(m?2:0)+(w?2:0),S=(y+1)*(d+1+O),j=Math.atan2(r-u,c),x=Math.sin,g=Math.cos,M=Math.PI,A=g(j),P=x(j),C=m?-2:0,E=d+(w?2:0),F=y+1,I=new Float32Array(3*S),R=new Float32Array(3*S),T=new Float32Array(2*S),q=new Uint16Array(y*(d+O)*6),z=f[v],U=0,k=0,B=C;B<=E;B++){var D=B/d,G=c*D,H=void 0;B<0?(G=0,D=1,H=r):B>d?(G=c,D=1,H=u):H=r+B/d*(u-r),-2!==B&&B!==d+2||(H=0,D=0),G-=c/2;for(var J=0;J<F;J++){var K=x(J*M*2/y),L=g(J*M*2/y);I[U+z[0]]=K*H,I[U+z[1]]=G,I[U+z[2]]=L*H,R[U+z[0]]=B<0||B>d?0:K*A,R[U+z[1]]=B<0?-1:B>d?1:P,R[U+z[2]]=B<0||B>d?0:L*A,T[k+0]=J/y,T[k+1]=D,k+=2,U+=3}}for(var N=0;N<d+O;N++)for(var Q=0;Q<y;Q++){var V=6*(N*y+Q);q[V+0]=F*(N+0)+0+Q,q[V+1]=F*(N+0)+1+Q,q[V+2]=F*(N+1)+1+Q,q[V+3]=F*(N+0)+0+Q,q[V+4]=F*(N+1)+1+Q,q[V+5]=F*(N+1)+0+Q}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},t,{attributes:{positions:I,normals:R,texCoords:T,indices:q}})))}return s(e,o.default),e}();exports.default=c;
},{"./geometry":421}],422:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./truncated-cone-geometry"),e=o(t);function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,o);var e=t.radius,n=void 0===e?1:e,r=t.cap,a=void 0===r||r;return i(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign({},t,{topRadius:0,topCap:Boolean(a),bottomCap:Boolean(a),bottomRadius:n})))}return c(o,e.default),o}();exports.default=f;
},{"./truncated-cone-geometry":428}],423:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./geometry"),e=r(t),o=require("../utils");function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,r);var e=t.id,n=void 0===e?(0,o.uid)("cube-geometry"):e;return a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,Object.assign({},t,{id:n,attributes:d()})))}return c(r,e.default),r}();exports.default=f;var s=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),y=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),p=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),b=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);function d(){return{indices:new Uint16Array(s),positions:new Float32Array(y),normals:new Float32Array(p),texCoords:new Float32Array(b)}}
},{"./geometry":421,"../utils":706}],424:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./truncated-cone-geometry"),e=o(t);function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,o);var e=t.radius,n=void 0===e?1:e;return i(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign({},t,{bottomRadius:n,topRadius:n})))}return f(o,e.default),o}();exports.default=a;
},{"./truncated-cone-geometry":428}],425:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./geometry"),e=r(t),n=require("math.gl");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!o(t,e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],f=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],h=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,r);var e=t.iterations,o=void 0===e?0:e,a=Math.PI,i=2*a,c=l.concat(),h=f.concat();c.push(),h.push();for(var p,y=(p={},function(t,e){var n=(t*=3)>(e*=3)?t:e,r="".concat(t<e?t:e,"|").concat(n);if(r in p)return p[r];var o=c[t],a=c[t+1],u=c[t+2],s=(o+c[e])/2,i=(a+c[e+1])/2,l=(u+c[e+2])/2,f=Math.sqrt(s*s+i*i+l*l);return s/=f,i/=f,l/=f,c.push(s,i,l),p[r]=c.length/3-1}),b=0;b<o;b++){for(var d=[],v=0;v<h.length;v+=3){var m=y(h[v+0],h[v+1]),g=y(h[v+1],h[v+2]),w=y(h[v+2],h[v+0]);d.push(w,h[v+0],m,m,h[v+1],g,g,h[v+2],w,m,g,w)}h=d}for(var M=new Array(3*h.length),_=new Array(2*h.length),x=h.length-3;x>=0;x-=3){var O=h[x+0],S=h[x+1],j=h[x+2],q=3*O,A=3*S,z=3*j,P=2*O,E=2*S,F=2*j,I=c[q+0],C=c[q+1],T=c[q+2],R=Math.acos(T/Math.sqrt(I*I+C*C+T*T))/a,U=1-(Math.atan2(C,I)+a)/i,V=c[A+0],k=c[A+1],B=c[A+2],D=Math.acos(B/Math.sqrt(V*V+k*k+B*B))/a,G=1-(Math.atan2(k,V)+a)/i,H=c[z+0],J=c[z+1],K=c[z+2],L=Math.acos(K/Math.sqrt(H*H+J*J+K*K))/a,N=1-(Math.atan2(J,H)+a)/i,Q=[H-V,J-k,K-B],W=[I-V,C-k,T-B],X=new n.Vector3(Q).cross(W).normalize(),Y=void 0;(0===U||0===G||0===N)&&(0===U||U>.5)&&(0===G||G>.5)&&(0===N||N>.5)&&(c.push(c[q+0],c[q+1],c[q+2]),Y=c.length/3-1,h.push(Y),_[2*Y+0]=1,_[2*Y+1]=R,M[3*Y+0]=X.x,M[3*Y+1]=X.y,M[3*Y+2]=X.z,c.push(c[A+0],c[A+1],c[A+2]),Y=c.length/3-1,h.push(Y),_[2*Y+0]=1,_[2*Y+1]=D,M[3*Y+0]=X.x,M[3*Y+1]=X.y,M[3*Y+2]=X.z,c.push(c[z+0],c[z+1],c[z+2]),Y=c.length/3-1,h.push(Y),_[2*Y+0]=1,_[2*Y+1]=L,M[3*Y+0]=X.x,M[3*Y+1]=X.y,M[3*Y+2]=X.z),M[q+0]=M[A+0]=M[z+0]=X.x,M[q+1]=M[A+1]=M[z+1]=X.y,M[q+2]=M[A+2]=M[z+2]=X.z,_[P+0]=U,_[P+1]=R,_[E+0]=G,_[E+1]=D,_[F+0]=N,_[F+1]=L}return s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,Object.assign({},t,{attributes:{positions:new Float32Array(c),normals:new Float32Array(M),texCoords:new Float32Array(_),indices:new Uint16Array(h)}})))}return c(r,e.default),r}();exports.default=h;
},{"./geometry":421,"math.gl":132}],426:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./geometry"),e=r(t),o=require("../utils");function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,r);var e=t.type,n=void 0===e?"x,y":e,a=t.offset,c=void 0===a?0:a,u=t.flipCull,f=void 0!==u&&u,s=t.unpack,y=void 0!==s&&s,p=t.id,b=void 0===p?(0,o.uid)("plane-geometry"):p,d=n.split(","),v=t["".concat(d[0],"len")],h=t["".concat(d[1],"len")],m=t["n".concat(d[0])]||1,w=t["n".concat(d[1])]||1,_=(m+1)*(w+1),g=new Float32Array(3*_),O=new Float32Array(3*_),S=new Float32Array(2*_);f&&(v=-v);for(var x=0,j=0,A=0;A<=w;A++)for(var F=0;F<=m;F++){var P=F/m,k=A/w;switch(S[x+0]=f?1-P:P,S[x+1]=k,n){case"x,y":g[j+0]=v*P-.5*v,g[j+1]=h*k-.5*h,g[j+2]=c,O[j+0]=0,O[j+1]=0,O[j+2]=f?1:-1;break;case"x,z":g[j+0]=v*P-.5*v,g[j+1]=c,g[j+2]=h*k-.5*h,O[j+0]=0,O[j+1]=f?1:-1,O[j+2]=0;break;case"y,z":g[j+0]=c,g[j+1]=v*P-.5*v,g[j+2]=h*k-.5*h,O[j+0]=f?1:-1,O[j+1]=0,O[j+2]=0}x+=2,j+=3}for(var C=m+1,E=new Uint16Array(m*w*6),q=0;q<w;q++)for(var z=0;z<m;z++){var I=6*(q*m+z);E[I+0]=(q+0)*C+z,E[I+1]=(q+1)*C+z,E[I+2]=(q+0)*C+z+1,E[I+3]=(q+1)*C+z,E[I+4]=(q+1)*C+z+1,E[I+5]=(q+0)*C+z+1}if(y){for(var M=new Float32Array(3*E.length),T=new Float32Array(3*E.length),R=new Float32Array(2*E.length),U=0;U<E.length;++U){var B=E[U];M[3*U+0]=g[3*B+0],M[3*U+1]=g[3*B+1],M[3*U+2]=g[3*B+2],T[3*U+0]=O[3*B+0],T[3*U+1]=O[3*B+1],T[3*U+2]=O[3*B+2],R[2*U+0]=S[2*B+0],R[2*U+1]=S[2*B+1]}g=M,O=T,S=R,E=void 0}var D={positions:g,normals:O,texCoords:S};return E&&(D.indices=E),l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,Object.assign({},t,{attributes:D,id:b})))}return u(r,e.default),r}();exports.default=f;
},{"./geometry":421,"../utils":706}],427:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./geometry"),e=r(t),o=require("../utils");function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,r);var e=t.nlat,n=void 0===e?10:e,i=t.nlong,f=void 0===i?10:i,s=t.radius,c=void 0===s?1:s,y=t.id,p=void 0===y?(0,o.uid)("sphere-geometry"):y;return u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,Object.assign({},t,{id:p,attributes:l(n,f,c)})))}return s(r,e.default),r}();function l(t,e,o){var r=Math.PI-0,n=2*Math.PI-0,i=(t+1)*(e+1);if("number"==typeof o){var a=o;o=function(t,e,o,r,n){return a}}for(var u=new Float32Array(3*i),f=new Float32Array(3*i),s=new Float32Array(2*i),c=new Uint16Array(t*e*6),l=0;l<=t;l++)for(var y=0;y<=e;y++){var p=y/e,b=l/t,d=y+l*(e+1),v=2*d,h=3*d,m=n*p,_=r*b,w=Math.sin(m),O=Math.cos(m),S=Math.sin(_),M=O*S,g=Math.cos(_),j=w*S,P=o(M,g,j,p,b);u[h+0]=P*M,u[h+1]=P*g,u[h+2]=P*j,f[h+0]=M,f[h+1]=g,f[h+2]=j,s[v+0]=p,s[v+1]=b}for(var x=t+1,A=0;A<t;A++)for(var I=0;I<e;I++){var E=6*(A*e+I);c[E+0]=I*x+A,c[E+1]=I*x+A+1,c[E+2]=(I+1)*x+A,c[E+3]=(I+1)*x+A,c[E+4]=I*x+A+1,c[E+5]=(I+1)*x+A+1}return{positions:u,indices:c,normals:f,texCoords:s}}exports.default=c;
},{"./geometry":421,"../utils":706}],709:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./geometry");Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return c(e).default}});var r=require("./cone-geometry");Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return c(r).default}});var t=require("./cube-geometry");Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return c(t).default}});var n=require("./cylinder-geometry");Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return c(n).default}});var o=require("./ico-sphere-geometry");Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return c(o).default}});var u=require("./plane-geometry");Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return c(u).default}});var a=require("./sphere-geometry");Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return c(a).default}});var i=require("./truncated-cone-geometry");function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return c(i).default}});
},{"./geometry":421,"./cone-geometry":422,"./cube-geometry":423,"./cylinder-geometry":424,"./ico-sphere-geometry":425,"./plane-geometry":426,"./sphere-geometry":427,"./truncated-cone-geometry":428}],710:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./animation-loop");Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return o(e).default}});var r=require("./animation-loop-proxy");Object.defineProperty(exports,"AnimationLoopProxy",{enumerable:!0,get:function(){return o(r).default}});var t=require("./model");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return o(t).default}});
},{"./animation-loop":417,"./animation-loop-proxy":418,"./model":416}],440:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../geometry"),t=require("../core");function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(o){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,Object.assign({},o,{geometry:new e.ConeGeometry(o)})))}return c(n,t.Model),n}();exports.default=f;
},{"../geometry":709,"../core":710}],429:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../geometry"),t=require("../core"),o=require("../utils");function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(r){function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,n);var c=r.id,f=void 0===c?(0,o.uid)("cube"):c;return u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,Object.assign({},r,{id:f,geometry:new e.CubeGeometry(r)})))}return f(n,t.Model),n}();exports.default=l;
},{"../geometry":709,"../core":710,"../utils":706}],430:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../geometry"),t=require("../core/model"),o=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(t){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,n),c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,Object.assign({},o,{geometry:new e.CylinderGeometry(o)})))}return l(n,o.default),n}();exports.default=s;
},{"../geometry":709,"../core/model":416}],431:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../core"),t=require("../geometry");function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(o){function n(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,Object.assign({},o,{geometry:new t.IcoSphereGeometry(o)})))}return c(n,e.Model),n}();exports.default=f;
},{"../core":710,"../geometry":709}],432:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../geometry"),t=require("../core/model"),o=r(t),n=require("../utils");function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(t){function r(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,r);var u=o.id,i=void 0===u?(0,n.uid)("plane"):u;return f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,Object.assign({},o,{id:i,geometry:new e.PlaneGeometry(o)})))}return a(r,o.default),r}();exports.default=s;
},{"../geometry":709,"../core/model":416,"../utils":706}],433:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../core"),t=require("../geometry"),o=require("../utils");function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(r){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,n);var c=r.id,f=void 0===c?(0,o.uid)("sphere"):c;return u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,Object.assign({},r,{id:f,geometry:new t.SphereGeometry(r)})))}return f(n,e.Model),n}();exports.default=l;
},{"../core":710,"../geometry":709,"../utils":706}],434:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../geometry"),t=require("../core");function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!o(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(o){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,Object.assign({},o,{geometry:new e.TruncatedConeGeometry(o)})))}return c(n,t.Model),n}();exports.default=f;
},{"../geometry":709,"../core":710}],435:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../constants"),t=r(e),o=require("../core"),n=require("../geometry");function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",p=[-1,-1,1,-1,-1,1,1,1],y=function(e){function r(e,o){var i;u(this,r);var a=p.map(function(e){return-1===e?0:e});return(i=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,Object.assign({},o,{vs:f,geometry:new n.Geometry({drawMode:t.default.TRIANGLE_STRIP,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(p)},aTexCoord:{size:2,value:new Float32Array(a)},aCoordinate:{size:2,value:new Float32Array(a)}}})})))).setVertexCount(4),i}return l(r,o.Model),r}();exports.default=y;
},{"../constants":387,"../core":710,"../geometry":709}],881:[function(require,module,exports) {
"use strict";function e(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n}function n(n,t){if(!e(n,t))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function r(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestFile=i;var s={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},a=function(){function e(t){var o=t.url,s=t.path,a=void 0===s?null:s,i=t.method,u=void 0===i?"GET":i,c=t.asynchronous,d=void 0===c||c,l=t.noCache,h=void 0!==l&&l,y=t.sendAsBinary,p=void 0!==y&&y,f=t.responseType,v=void 0!==f&&f,T=t.onProgress,b=void 0===T?r:T,E=t.onError,m=void 0===E?r:E,q=t.onAbort,A=void 0===q?r:q,w=t.onComplete,C=void 0===w?r:w;n(this,e),this.url=a?a.join(a,o):o,this.method=u,this.async=d,this.noCache=h,this.sendAsBinary=p,this.responseType=v,this.req=new XMLHttpRequest,this.req.onload=function(e){return C(e)},this.req.onerror=function(e){return m(e)},this.req.onabort=function(e){return A(e)},this.req.onprogress=function(e){e.lengthComputable?b(e,Math.round(e.loaded/e.total*100)):b(e,-1)}}return o(e,[{key:"setRequestHeader",value:function(e,n){return this.req.setRequestHeader(e,n),this}},{key:"sendAsync",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(t,o){try{var r=e.req,a=e.method,i=e.noCache,u=e.sendAsBinary,c=e.responseType,d=i?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;r.open(a,d,e.async),c&&(r.responseType=c),e.async&&(r.onreadystatechange=function(e){r.readyState===s.COMPLETED&&(200===r.status?t(r.responseType?r.response:r.responseText):o(new Error("".concat(r.status,": ").concat(d))))}),u?r.sendAsBinary(n):r.send(n),e.async||(200===r.status?t(r.responseType?r.response:r.responseText):o(new Error("".concat(r.status,": ").concat(d))))}catch(e){o(e)}})}}]),e}();function i(e){return new a(e).sendAsync()}
},{}],711:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=o,exports.loadFile=n,exports.loadImage=t;var r=require("./browser-request-file"),e="";function o(r){e=r}function n(o,n){return"string"==typeof o||n||(o=(n=o).url),n.url=e?e+o:o,(0,r.requestFile)(n)}function t(r,o){return r=e?e+r:r,new Promise(function(e,n){try{var t=new Image;t.onload=function(){return e(t)},t.onerror=function(){return n(new Error("Could not load image ".concat(r,".")))},t.crossOrigin=o&&o.crossOrigin||"anonymous",t.src=r}catch(r){n(r)}})}
},{"./browser-request-file":881}],712:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadTexture=f,exports.loadFiles=d,exports.loadImages=v,exports.loadTextures=p,exports.loadProgram=y,exports.loadModel=m,exports.parseModel=h;var r=require("../utils/assert"),e=a(r),t=require("./browser-load"),n=require("../webgl"),o=require("../core"),s=require("../geometry");function a(r){return r&&r.__esModule?r:{default:r}}function u(r,e){return g(r)||l(r,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(r,e){var t=[],n=!0,o=!1,s=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,s=r}finally{try{n||null==u.return||u.return()}finally{if(o)throw s}}return t}function g(r){if(Array.isArray(r))return r}function c(){}function f(r,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o.urls,a=o.onProgress,u=void 0===a?c:a;return(0,e.default)("string"==typeof t,"loadTexture: url must be string"),v(Object.assign({urls:s,onProgress:u},o)).then(function(e){return e.map(function(e,t){return new n.Texture2D(r,Object.assign({id:s[t]},o,{data:e}))})})}function d(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.urls,o=r.onProgress,s=void 0===o?c:o;(0,e.default)(n.every(function(r){return"string"==typeof r}),"loadImages: {urls} must be array of strings");var a=0;return Promise.all(n.map(function(e){var o=(0,t.loadFile)(Object.assign({url:e},r));return o.then(function(r){return s({progress:++a/n.length,count:a,total:n.length,url:e})}),o}))}function v(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.urls,o=r.onProgress,s=void 0===o?c:o;(0,e.default)(n.every(function(r){return"string"==typeof r}),"loadImages: {urls} must be array of strings");var a=0;return Promise.all(n.map(function(e){var o=(0,t.loadImage)(e,r);return o.then(function(r){return s({progress:++a/n.length,count:a,total:n.length,url:e})}),o}))}function p(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.urls,s=t.onProgress,a=void 0===s?c:s;return(0,e.default)(o.every(function(r){return"string"==typeof r}),"loadTextures: {urls} must be array of strings"),v(Object.assign({urls:o,onProgress:a},t)).then(function(e){return e.map(function(e,s){var a=Array.isArray(t.parameters)?t.parameters[s]:t.parameters;return a=void 0===a?{}:a,new n.Texture2D(r,Object.assign({id:o[s]},a,{data:e}))})})}function y(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.vs,o=e.fs,s=e.onProgress,a=void 0===s?c:s;return d(Object.assign({urls:[t,o],onProgress:a},e)).then(function(t){var o=u(t,2),s=o[0],a=o[1];return new n.Program(r,Object.assign({vs:s,fs:a},e))})}function m(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.url,n=e.onProgress,o=void 0===n?c:n;return d(Object.assign({urls:[t],onProgress:o},e)).then(function(t){var n=u(t,1)[0];return h(r,Object.assign({file:n},e))})}function h(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.file,a=e.program,u=void 0===a?new n.Program(r):a,i="string"==typeof t?b(t):t,l={},g={};for(var c in i){var f=i[c];Array.isArray(f)?l[c]="indices"===c?new Uint16Array(f):new Float32Array(f):g[c]=f}return new o.Model(r,Object.assign({program:u,geometry:new s.Geometry({attributes:l})},g,e))}function b(r){try{return JSON.parse(r)}catch(r){throw new Error("Failed to parse JSON: ".concat(r))}}
},{"../utils/assert":479,"./browser-load":711,"../webgl":707,"../core":710,"../geometry":709}],642:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./browser-load");Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return e.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return e.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return e.loadImage}});var r=require("./load-files");Object.defineProperty(exports,"loadFiles",{enumerable:!0,get:function(){return r.loadFiles}}),Object.defineProperty(exports,"loadImages",{enumerable:!0,get:function(){return r.loadImages}}),Object.defineProperty(exports,"loadTextures",{enumerable:!0,get:function(){return r.loadTextures}}),Object.defineProperty(exports,"loadProgram",{enumerable:!0,get:function(){return r.loadProgram}}),Object.defineProperty(exports,"loadModel",{enumerable:!0,get:function(){return r.loadModel}}),Object.defineProperty(exports,"parseModel",{enumerable:!0,get:function(){return r.parseModel}});
},{"./browser-load":711,"./load-files":712}],445:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n="#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n";exports.default={name:"fp32",vs:n,fs:null};
},{}],518:[function(require,module,exports) {
"use strict";function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.fround(r),n=r-o;return t[e]=o,t[e+1]=n,t}function t(r){return r-Math.fround(r)}function e(t){for(var e=new Float32Array(32),o=0;o<4;++o)for(var n=0;n<4;++n){var f=4*o+n;r(t[4*n+o],e,2*f)}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=r,exports.fp64LowPart=t,exports.fp64ifyMatrix4=e;
},{}],519:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";
},{}],520:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n";
},{}],446:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64fs=exports.fp64arithmetic=exports.fp64ifyMatrix4=exports.fp64LowPart=exports.fp64ify=void 0;var f=require("./fp64-utils"),t=require("./fp64-arithmetic.glsl"),e=i(t),r=require("./fp64-functions.glsl"),p=i(r);function i(f){return f&&f.__esModule?f:{default:f}}var a="".concat(e.default,"\n").concat(p.default);exports.fp64ify=f.fp64ify,exports.fp64LowPart=f.fp64LowPart,exports.fp64ifyMatrix4=f.fp64ifyMatrix4,exports.default={name:"fp64",vs:a,fs:null,fp64ify:f.fp64ify,fp64LowPart:f.fp64LowPart,fp64ifyMatrix4:f.fp64ifyMatrix4};var s=exports.fp64arithmetic={name:"fp64-arithmetic",vs:"".concat(e.default),fs:null},o=exports.fp64fs={name:"fp64-fs",vs:null,fs:a};
},{"./fp64-utils":518,"./fp64-arithmetic.glsl":519,"./fp64-functions.glsl":520}],447:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=require("math.gl"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==i.modelMatrix&&(r.modelMatrix=i.modelMatrix),void 0!==i.viewMatrix&&(r.viewMatrix=i.viewMatrix),void 0!==i.projectionMatrix&&(r.projectionMatrix=i.projectionMatrix),void 0!==i.cameraPositionWorld&&(r.cameraPositionWorld=i.cameraPositionWorld),void 0===i.projectionMatrix&&void 0===i.viewMatrix||(r.viewProjectionMatrix=new o.Matrix4(i.projectionMatrix).multiplyRight(i.viewMatrix)),r}var t="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",e="".concat(t,"\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),c="\n".concat(t);exports.default={name:"project",getUniforms:r,vs:e,fs:c};
},{"math.gl":132}],521:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="  // empty\n";
},{}],522:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n";
},{}],523:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n";
},{}],448:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=exports.name=exports.fragmentShader=exports.vertexShader=void 0,exports.getUniforms=h;var e=require("math.gl"),t=require("./lighting-common.glsl"),n=a(t),r=require("./lighting-vertex.glsl"),o=a(r),i=require("./lighting-fragment.glsl"),l=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var u=exports.vertexShader="".concat(n.default,"\n").concat(o.default,"\n"),s=exports.fragmentShader="".concat(n.default,"\n").concat(l.default,"\n"),c=exports.name="lighting",f=exports.config={MAX_POINT_LIGHTS:4};function h(e){var t=e.lightingEnable,n=void 0!==t&&t,r=e.lightingAmbientColor,o=void 0===r?[.2,.2,.2]:r,i=e.lightingDirection,l=void 0===i?[1,1,1]:i,a=(e.lightingDirectionalColor,e.lightingPointLights),g=void 0===a?[]:a;return Object.assign({lightingEnable:n,lightingAmbientColor:o},d(l),p(g))}function d(t){var n=t.color,r=t.direction,o=new e.Vector3(r.x,r.y,r.z).normalize().scale(-1,-1,-1);return{directionalColor:[n.r,n.g,n.b],lightingDirection:[o.x,o.y,o.z]}}function p(e){var t=(e=g(e,Array)?e:[e]).length,n=[],r=[],o=[],i=[],l=!0,a=!1,u=void 0;try{for(var s,c=e[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var f=s.value,h=f.position,d=f.color,p=f.diffuse,m=f.specular,v=d||p;n.push(h.x,h.y,h.z),r.push(v.r,v.g,v.b),o.push(Number(Boolean(m))),m?i.push(m.r,m.g,m.b):i.push(0,0,0)}}catch(e){a=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(a)throw u}}return{numberPoints:t,pointLocation:n,pointColor:r,enableSpecular:o,pointSpecularColor:i}}exports.default={name:c,vs:u,fs:s,getUniforms:h};
},{"math.gl":132,"./lighting-common.glsl":521,"./lighting-vertex.glsl":522,"./lighting-fragment.glsl":523}],449:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../project/project"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var i=new Float32Array([1,1,2]),o={lightDirection:i};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,r={};return e.lightDirection&&(r.dirlight_uLightDirection=e.lightDirection),r}var l=null,c="uniform vec3 dirlight_uLightDirection;\n\n/*\n * Returns color attenuated by angle from light source\n */\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n";exports.default={name:"dirlight",vs:l,fs:c,getUniforms:n,dependencies:[r.default]};
},{"../project/project":447}],450:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=new Uint8Array([0,255,255,255]),e={pickingSelectedColor:null,pickingHighlightColor:i,pickingThreshold:1,pickingActive:!1};function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n={};if(void 0!==i.pickingSelectedColor)if(null===i.pickingSelectedColor)n.picking_uSelectedColorValid=0;else{var o=[i.pickingSelectedColor[0],i.pickingSelectedColor[1],i.pickingSelectedColor[2]];n.picking_uSelectedColorValid=1,n.picking_uSelectedColor=o}return void 0!==i.pickingHighlightColor&&(n.picking_uHighlightColor=i.pickingHighlightColor),void 0!==i.pickingThreshold&&(n.picking_uThreshold=i.pickingThreshold),void 0!==i.pickingActive&&(n.picking_uActive=i.pickingActive?1:0),n}var o="uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",c="uniform bool picking_uActive; // true during rendering to offscreen picking buffer\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n  return selected ? (picking_uHighlightColor * COLOR_SCALE) : color;\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n";exports.default={name:"picking",vs:o,fs:c,getUniforms:n};
},{}],451:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={diffuseTexture:null,diffuseColor:[.5,.5,.5,1]};function f(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,u={};return void 0!==f.diffuseTexture&&(u.diffuse_uHasTexture=Boolean(f.diffuseTexture),u.diffuse_uTexture=f.diffuseTexture),void 0!==f.diffuseColor&&(u.diffuse_uColor=f.diffuseColor),u}var u="varying vec2 diffuse_vTexCoord;\n\n/* Set the UV coordinate from attributes */\nvoid diffuse_setTextureCoordinate(vec2 uv) {\n  diffuse_vTexCoord = uv;\n}\n",r="uniform vec4 diffuse_uColor;\nuniform bool diffuse_uHasTexture;\nuniform sampler2D diffuse_uTexture;\n\nvarying vec2 diffuse_vTexCoord;\n\n// Gets diffuse color of material from uniform\n// If we have a standard (diffuse) texture, set color to texture\n// return (vec4) - rgba\n//\nvec4 diffuse_getColor() {\n  vec2 texCoord = diffuse_vTexCoord;\n  return diffuse_uHasTexture ?\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\n    diffuse_uColor;\n}\n\nvec4 diffuse_filterColor(vec4 color) {\n  return diffuse_getColor();\n}\n";exports.default={name:"diffuse",getUniforms:f,vs:u,fs:r};
},{}],444:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../constants"),t=h(e),i=require("../../webgl/buffer"),s=h(i),r=require("../../webgl/transform-feedback"),n=h(r),u=require("../model"),a=h(u),f=require("../../webgl-utils"),o=require("../../utils/assert"),l=h(o),d=require("../../utils");function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function b(e,t){if(!c(e,t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function B(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}var p="void main()\n{\n}\n",g=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,e),(0,f.assertWebGL2Context)(t),this.gl=t,this.model=null,this._buffersSwapable=!1,this.currentIndex=0,this.sourceBuffers=new Array(2),this.destinationBuffers=new Array(2),this.transformFeedbacks=new Array(2),this._buffersToDelete=[],this.initialize(i),Object.seal(this)}return B(e,null,[{key:"isSupported",value:function(e){return(0,f.isWebGL2)(e)}}]),B(e,[{key:"delete",value:function(){var e=!0,t=!1,i=void 0;try{for(var s,r=this._buffersToDelete[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){s.value.delete()}}catch(e){t=!0,i=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}this.model.delete()}},{key:"initialize",value:function(e){var i=e.sourceBuffers,s=void 0===i?null:i,r=e.destinationBuffers,n=void 0===r?null:r,u=e.vs,a=void 0===u?null:u,f=e.sourceDestinationMap,o=void 0===f?null:f,d=e.varyings,h=void 0===d?null:d,v=e.drawMode,c=void 0===v?t.default.POINTS:v,b=e.elementCount,y=void 0===b?null:b;(0,l.default)(s&&a&&h&&y),(0,l.default)(n||o),o&&(this.sourceDestinationMap=o,this._buffersSwapable=!0);var B=0;this.varyings=[],this.varyingMap={};var p=!0,g=!1,m=void 0;try{for(var w,M=h[Symbol.iterator]();!(p=(w=M.next()).done);p=!0){var k=w.value;this.varyings[B]=k,this.varyingMap[k]=B,B++}}catch(e){g=!0,m=e}finally{try{p||null==M.return||M.return()}finally{if(g)throw m}}this._bindBuffers({sourceBuffers:s,destinationBuffers:n}),this._buildModel({vs:a,drawMode:c,elementCount:y})}},{key:"update",value:function(e){var t=e.sourceBuffers,i=void 0===t?null:t,r=e.destinationBuffers,n=void 0===r?null:r,u=e.elementCount,a=void 0===u?this.elementCount:u;if(!i&&!n)return d.log.warn("Transform : no buffers updated")(),this;this.model.setVertexCount(a);var f=this.currentIndex,o=this.varyingMap,h=this._buffersSwapable,v=this.transformFeedbacks;for(var b in n)(0,l.default)(c(n[b],s.default));if(Object.assign(this.sourceBuffers[f],i),Object.assign(this.destinationBuffers[f],n),v[f].bindBuffers(this.destinationBuffers[f],{varyingMap:o}),h){var y=(f+1)%2;for(var B in this.sourceDestinationMap){var p=this.sourceDestinationMap[B];this.sourceBuffers[y][B]=this.destinationBuffers[f][p],this.destinationBuffers[y][p]=this.sourceBuffers[f][B],(0,l.default)(c(this.destinationBuffers[y][p],s.default))}v[y].bindBuffers(this.destinationBuffers[y],{varyingMap:o})}return this}},{key:"run",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).uniforms,i=void 0===e?{}:e,s=this.model,r=this.transformFeedbacks,n=this.sourceBuffers,u=this.currentIndex;s.setAttributes(n[u]),s.draw({transformFeedback:r[u],uniforms:i,parameters:v({},t.default.RASTERIZER_DISCARD,!0)})}},{key:"swapBuffers",value:function(){(0,l.default)(this._buffersSwapable),this.currentIndex=(this.currentIndex+1)%2}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.destinationBuffers,i=this.currentIndex;return(0,l.default)(e&&t[i][e]),t[i][e]}},{key:"_bindBuffers",value:function(e){var t=e.sourceBuffers,i=void 0===t?null:t,r=e.destinationBuffers,n=void 0===r?null:r,u=this._buffersSwapable;for(var a in n)(0,l.default)(c(n[a],s.default));if(this.sourceBuffers[0]=Object.assign({},i),this.destinationBuffers[0]=Object.assign({},n),u)for(var f in this.sourceBuffers[1]={},this.destinationBuffers[1]={},this.sourceDestinationMap){var o=this.sourceDestinationMap[f];if(!this.destinationBuffers[0][o]){var d=this.sourceBuffers[0][f],h=d.bytes,v=d.type,b=d.usage,y=d.layout;this.destinationBuffers[0][o]=new s.default(this.gl,{bytes:h,type:v,usage:b,layout:y}),this._buffersToDelete.push(this.destinationBuffers[0][o])}this.sourceBuffers[1][f]=this.destinationBuffers[0][o],this.destinationBuffers[1][o]=this.sourceBuffers[0][f],(0,l.default)(c(this.destinationBuffers[1][o],s.default))}}},{key:"_buildModel",value:function(e){var t=e.vs,i=e.drawMode,s=e.elementCount,r=this.varyings,u=this.varyingMap,f=this._buffersSwapable,o=p,l=t.split("\n");0===l[0].indexOf("#version ")&&(o="".concat(l[0],"\n").concat(p,"\n")),this.model=new a.default(this.gl,{vs:t,fs:o,varyings:r,drawMode:i,vertexCount:s}),this.transformFeedbacks[0]=new n.default(this.gl,{buffers:this.destinationBuffers[0],varyingMap:u}),f&&(this.transformFeedbacks[1]=new n.default(this.gl,{buffers:this.destinationBuffers[1],varyingMap:this.varyingMap}))}},{key:"elementCount",get:function(){return this.model.getVertexCount()}}]),e}();exports.default=g;
},{"../../constants":387,"../../webgl/buffer":399,"../../webgl/transform-feedback":413,"../model":416,"../../webgl-utils":705,"../../utils/assert":479,"../../utils":706}],436:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL=void 0,exports.glGet=o,exports.glKey=n,exports.glKeyType=s;var e=require("../constants"),t=u(e),r=require("../webgl-utils/constants-to-keys");function u(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,r.getKeyValue)(t.default,e)}function n(e){return(0,r.getKey)(t.default,e)}function s(e){return(0,r.getKeyType)(t.default,e)}exports.GL=t.default,exports.default=t.default;
},{"../constants":387,"../webgl-utils/constants-to-keys":392}],317:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FramebufferObject=exports.readPixels=exports.Quaternion=exports.Matrix4=exports.Vector4=exports.Vector3=exports.Vector2=void 0,exports.degrees=exports.radians=exports.pollContext=exports.deleteGLContext=exports.glKey=exports.glGet=exports.GL=exports.experimental=exports.diffuse=exports.picking=exports.dirlight=exports.lighting=exports.project=exports.fp64=exports.fp32=exports.setDefaultShaderModules=exports.registerShaderModules=exports.assembleShaders=exports.ShaderCache=exports.parseModel=exports.loadModel=exports.loadProgram=exports.loadTextures=exports.loadImages=exports.loadFiles=exports.loadImage=exports.loadFile=exports.setPathPrefix=exports.ClipSpaceQuad=exports.TruncatedCone=exports.Sphere=exports.Plane=exports.IcoSphere=exports.Cylinder=exports.Cube=exports.Cone=exports.TruncatedConeGeometry=exports.SphereGeometry=exports.PlaneGeometry=exports.IcoSphereGeometry=exports.CylinderGeometry=exports.CubeGeometry=exports.ConeGeometry=exports.Geometry=exports.addEvents=exports.getNullPickingColor=exports.decodePickingColor=exports.encodePickingColor=exports.pickModels=exports.AnimationLoopProxy=exports.AnimationLoop=exports.Model=exports.UniformBufferLayout=exports.VertexArray=exports.TransformFeedback=exports.Texture2DArray=exports.Texture3D=exports.Sampler=exports.Query=exports.FenceSync=exports.clearBuffer=exports.clear=exports.draw=exports.TextureCube=exports.Texture2D=exports.Renderbuffer=exports.Framebuffer=exports.Program=exports.FragmentShader=exports.VertexShader=exports.Shader=exports.Buffer=exports.makeDebugContext=exports.canCompileGLGSExtension=exports.getFeatures=exports.hasFeatures=exports.hasFeature=exports.FEATURES=exports.glGetDebugInfo=exports.getContextLimits=exports.getGLContextInfo=exports.getContextInfo=exports.getModifiedParameters=exports.withParameters=exports.setParameters=exports.setParameter=exports.getParameters=exports.getParameter=exports.resetParameters=exports.trackContextState=exports.trackContextCreation=exports.setContextDefaults=exports.pollGLContext=exports.resizeGLContext=exports.destroyGLContext=exports.createGLContext=exports.getKey=exports.getKeyValue=exports.isWebGL2=exports.isWebGL=void 0;var e=require("./webgl-utils/webgl-checks");Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return e.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return e.isWebGL2}});var r=require("./webgl-utils/constants-to-keys");Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return r.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return r.getKey}});var t=require("./webgl-context/context");Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return t.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return t.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return t.resizeGLContext}}),Object.defineProperty(exports,"pollGLContext",{enumerable:!0,get:function(){return t.pollGLContext}}),Object.defineProperty(exports,"setContextDefaults",{enumerable:!0,get:function(){return t.setContextDefaults}});var o=require("./webgl-context");Object.defineProperty(exports,"trackContextCreation",{enumerable:!0,get:function(){return o.trackContextCreation}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return o.trackContextState}});var n=require("./webgl-context/context-state");Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return n.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return n.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return n.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return n.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return n.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return n.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return n.getModifiedParameters}});var u=require("./webgl-context/context-limits");Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return u.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return u.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return u.getContextLimits}}),Object.defineProperty(exports,"glGetDebugInfo",{enumerable:!0,get:function(){return u.glGetDebugInfo}});var a=require("./webgl-context/context-features");Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return a.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return a.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return a.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return a.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return a.canCompileGLGSExtension}});var i=require("./webgl-context/debug-context");Object.defineProperty(exports,"makeDebugContext",{enumerable:!0,get:function(){return i.makeDebugContext}});var s=require("./webgl/buffer");Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return ce(s).default}});var p=require("./webgl/shader");Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return p.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return p.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return p.FragmentShader}});var l=require("./webgl/program");Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return ce(l).default}});var f=require("./webgl/framebuffer");Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return ce(f).default}});var c=require("./webgl/renderbuffer");Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return ce(c).default}});var d=require("./webgl/texture-2d");Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return ce(d).default}});var x=require("./webgl/texture-cube");Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return ce(x).default}});var b=require("./webgl/draw");Object.defineProperty(exports,"draw",{enumerable:!0,get:function(){return b.draw}});var g=require("./webgl/clear");Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return g.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return g.clearBuffer}});var m=require("./webgl/fence-sync");Object.defineProperty(exports,"FenceSync",{enumerable:!0,get:function(){return ce(m).default}});var y=require("./webgl/query");Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return ce(y).default}});var P=require("./webgl/sampler");Object.defineProperty(exports,"Sampler",{enumerable:!0,get:function(){return ce(P).default}});var j=require("./webgl/texture-3d");Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return ce(j).default}});var O=require("./webgl/texture-2d-array");Object.defineProperty(exports,"Texture2DArray",{enumerable:!0,get:function(){return ce(O).default}});var C=require("./webgl/transform-feedback");Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return ce(C).default}});var v=require("./webgl/vertex-array");Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return ce(v).default}});var h=require("./webgl/uniform-buffer-layout");Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return ce(h).default}});var q=require("./core/model");Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return ce(q).default}});var G=require("./core/animation-loop");Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return ce(G).default}});var S=require("./core/animation-loop-proxy");Object.defineProperty(exports,"AnimationLoopProxy",{enumerable:!0,get:function(){return ce(S).default}});var L=require("./core/pick-models");Object.defineProperty(exports,"pickModels",{enumerable:!0,get:function(){return ce(L).default}});var w=require("./core/picking-colors");Object.defineProperty(exports,"encodePickingColor",{enumerable:!0,get:function(){return w.encodePickingColor}}),Object.defineProperty(exports,"decodePickingColor",{enumerable:!0,get:function(){return w.decodePickingColor}}),Object.defineProperty(exports,"getNullPickingColor",{enumerable:!0,get:function(){return w.getNullPickingColor}});var k=require("./packages/events");Object.defineProperty(exports,"addEvents",{enumerable:!0,get:function(){return k.addEvents}});var F=require("./geometry/geometry");Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return ce(F).default}});var M=require("./geometry/cone-geometry");Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return ce(M).default}});var T=require("./geometry/cube-geometry");Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return ce(T).default}});var I=require("./geometry/cylinder-geometry");Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return ce(I).default}});var D=require("./geometry/ico-sphere-geometry");Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return ce(D).default}});var V=require("./geometry/plane-geometry");Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return ce(V).default}});var A=require("./geometry/sphere-geometry");Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return ce(A).default}});var E=require("./geometry/truncated-cone-geometry");Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return ce(E).default}});var B=require("./models/cone");Object.defineProperty(exports,"Cone",{enumerable:!0,get:function(){return ce(B).default}});var K=require("./models/cube");Object.defineProperty(exports,"Cube",{enumerable:!0,get:function(){return ce(K).default}});var Q=require("./models/cylinder");Object.defineProperty(exports,"Cylinder",{enumerable:!0,get:function(){return ce(Q).default}});var W=require("./models/ico-sphere");Object.defineProperty(exports,"IcoSphere",{enumerable:!0,get:function(){return ce(W).default}});var R=require("./models/plane");Object.defineProperty(exports,"Plane",{enumerable:!0,get:function(){return ce(R).default}});var U=require("./models/sphere");Object.defineProperty(exports,"Sphere",{enumerable:!0,get:function(){return ce(U).default}});var _=require("./models/truncated-cone");Object.defineProperty(exports,"TruncatedCone",{enumerable:!0,get:function(){return ce(_).default}});var z=require("./models/clip-space-quad");Object.defineProperty(exports,"ClipSpaceQuad",{enumerable:!0,get:function(){return ce(z).default}});var N=require("./io");Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return N.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return N.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return N.loadImage}}),Object.defineProperty(exports,"loadFiles",{enumerable:!0,get:function(){return N.loadFiles}}),Object.defineProperty(exports,"loadImages",{enumerable:!0,get:function(){return N.loadImages}}),Object.defineProperty(exports,"loadTextures",{enumerable:!0,get:function(){return N.loadTextures}}),Object.defineProperty(exports,"loadProgram",{enumerable:!0,get:function(){return N.loadProgram}}),Object.defineProperty(exports,"loadModel",{enumerable:!0,get:function(){return N.loadModel}}),Object.defineProperty(exports,"parseModel",{enumerable:!0,get:function(){return N.parseModel}});var H=require("./shadertools/lib/shader-cache");Object.defineProperty(exports,"ShaderCache",{enumerable:!0,get:function(){return ce(H).default}});var J=require("./shadertools/lib/assemble-shaders");Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return J.assembleShaders}});var X=require("./shadertools/lib/shader-modules");Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return X.registerShaderModules}}),Object.defineProperty(exports,"setDefaultShaderModules",{enumerable:!0,get:function(){return X.setDefaultShaderModules}});var Y=require("./shadertools/modules/fp32/fp32");Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return ce(Y).default}});var Z=require("./shadertools/modules/fp64/fp64");Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return ce(Z).default}});var $=require("./shadertools/modules/project/project");Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return ce($).default}});var ee=require("./shadertools/modules/lighting/lighting");Object.defineProperty(exports,"lighting",{enumerable:!0,get:function(){return ce(ee).default}});var re=require("./shadertools/modules/dirlight/dirlight");Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return ce(re).default}});var te=require("./shadertools/modules/picking/picking");Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return ce(te).default}});var oe=require("./shadertools/modules/diffuse/diffuse");Object.defineProperty(exports,"diffuse",{enumerable:!0,get:function(){return ce(oe).default}});var ne=require("./constants");Object.defineProperty(exports,"GL",{enumerable:!0,get:function(){return ce(ne).default}});var ue=require("./deprecated/gl-constants");Object.defineProperty(exports,"glGet",{enumerable:!0,get:function(){return ue.glGet}}),Object.defineProperty(exports,"glKey",{enumerable:!0,get:function(){return ue.glKey}}),Object.defineProperty(exports,"deleteGLContext",{enumerable:!0,get:function(){return t.destroyGLContext}}),Object.defineProperty(exports,"pollContext",{enumerable:!0,get:function(){return t.pollGLContext}});var ae=require("math.gl");Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return ae.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return ae.degrees}}),Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return ae.Vector2}}),Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return ae.Vector3}}),Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return ae.Vector4}}),Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return ae.Matrix4}}),Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return ae.Quaternion}});var ie=require("./webgl/functions");Object.defineProperty(exports,"readPixels",{enumerable:!0,get:function(){return ie.readPixels}}),Object.defineProperty(exports,"FramebufferObject",{enumerable:!0,get:function(){return ce(f).default}});var se=require("./webgl/attribute"),pe=ce(se),le=require("./core/experimental/transform"),fe=ce(le);function ce(e){return e&&e.__esModule?e:{default:e}}require("./init");var de=exports.experimental={clearBuffer:g.clearBuffer,Transform:fe.default,Attribute:pe.default};
},{"./init":386,"./webgl-utils/webgl-checks":391,"./webgl-utils/constants-to-keys":392,"./webgl-context/context":393,"./webgl-context":641,"./webgl-context/context-state":394,"./webgl-context/context-limits":395,"./webgl-context/context-features":396,"./webgl-context/debug-context":397,"./webgl/attribute":398,"./webgl/buffer":399,"./webgl/shader":400,"./webgl/program":401,"./webgl/framebuffer":402,"./webgl/renderbuffer":403,"./webgl/texture-2d":404,"./webgl/texture-cube":405,"./webgl/draw":406,"./webgl/clear":407,"./webgl/fence-sync":408,"./webgl/query":409,"./webgl/sampler":410,"./webgl/texture-3d":411,"./webgl/texture-2d-array":412,"./webgl/transform-feedback":413,"./webgl/vertex-array":414,"./webgl/uniform-buffer-layout":415,"./core/model":416,"./core/animation-loop":417,"./core/animation-loop-proxy":418,"./core/pick-models":419,"./core/picking-colors":420,"./packages/events":645,"./geometry/geometry":421,"./geometry/cone-geometry":422,"./geometry/cube-geometry":423,"./geometry/cylinder-geometry":424,"./geometry/ico-sphere-geometry":425,"./geometry/plane-geometry":426,"./geometry/sphere-geometry":427,"./geometry/truncated-cone-geometry":428,"./models/cone":440,"./models/cube":429,"./models/cylinder":430,"./models/ico-sphere":431,"./models/plane":432,"./models/sphere":433,"./models/truncated-cone":434,"./models/clip-space-quad":435,"./io":642,"./shadertools/lib/shader-cache":441,"./shadertools/lib/assemble-shaders":442,"./shadertools/lib/shader-modules":443,"./shadertools/modules/fp32/fp32":445,"./shadertools/modules/fp64/fp64":446,"./shadertools/modules/project/project":447,"./shadertools/modules/lighting/lighting":448,"./shadertools/modules/dirlight/dirlight":449,"./shadertools/modules/picking/picking":450,"./shadertools/modules/diffuse/diffuse":451,"./core/experimental/transform":444,"./constants":387,"./deprecated/gl-constants":436,"math.gl":132,"./webgl/functions":437}],312:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default='// EXTERNAL CONSTANTS: these must match JavaScript constants in "src/core/lib/constants.js"\nconst float COORDINATE_SYSTEM_IDENTITY = 0.;\nconst float COORDINATE_SYSTEM_LNG_LAT = 1.;\nconst float COORDINATE_SYSTEM_METER_OFFSETS = 2.;\nconst float COORDINATE_SYSTEM_LNGLAT_OFFSETS = 3.;\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * offset.y;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  return vec2(\n    radians(lnglat.x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0));\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0));\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n';
},{}],316:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="float scale(float position) {\n  return project_scale(position);\n}\n\nvec2 scale(vec2 position) {\n  return project_scale(position);\n}\n\nvec3 scale(vec3 position) {\n  return project_scale(position);\n}\n\nvec4 scale(vec4 position) {\n  return project_scale(position);\n}\n\nvec2 preproject(vec2 position) {\n  return project_position(position);\n}\n\nvec3 preproject(vec3 position) {\n  return project_position(position);\n}\n\nvec4 preproject(vec4 position) {\n  return project_position(position);\n}\n\nvec4 project(vec4 position) {\n  return project_to_clipspace(position);\n}\n";
},{}],178:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.COORDINATE_SYSTEM={LNGLAT:1,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0};
},{}],307:[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return!0;if(Array.isArray(r)){var t=r.length;if(!e||e.length!==t)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}return!1}function e(e){var t,n={};return function(u){for(var f in u)if(!r(u[f],n[f])){t=e(u),n=u;break}return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],292:[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"deck.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],128:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=o,exports.transformVector=a,exports.mod=c,exports.lerp=s;var e=require("gl-vec4/scale"),r=n(e),t=require("gl-vec4/transformMat4"),u=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a(e,t){var n=(0,u.default)([],t,e);return(0,r.default)(n,n,1/n[3]),n}function c(e,r){var t=e%r;return 0>t?r+t:t}function s(e,r,t){return t*r+(1-t)*e}
},{"gl-vec4/scale":159,"gl-vec4/transformMat4":158}],141:[function(require,module,exports) {
function r(r,e,n,o){var t=e[0],u=e[1];return r[0]=t+o*(n[0]-t),r[1]=u+o*(n[1]-u),r}module.exports=r;
},{}],126:[function(require,module,exports) {
"use strict";function e(e){if(!e)throw new Error("viewport-mercator-project: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],112:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=D,exports.scaleToZoom=F,exports.lngLatToWorld=N,exports.worldToLngLat=S,exports.getMeterZoom=_,exports.getDistanceScales=j,exports.getWorldPosition=z,exports.getViewMatrix=I,exports.getProjectionParameters=L,exports.getProjectionMatrix=W,exports.worldToPixels=A,exports.pixelsToWorld=O;var e=require("math.gl"),t=require("./math-utils"),r=require("gl-mat4/perspective"),a=g(r),i=require("gl-mat4/scale"),o=g(i),n=require("gl-mat4/translate"),l=g(n),u=require("gl-mat4/rotateX"),s=g(u),c=require("gl-mat4/rotateZ"),d=g(c),f=require("gl-vec2/lerp"),h=g(f),v=require("./assert"),p=g(v);function g(e){return e&&e.__esModule?e:{default:e}}function x(e,t){return P(e)||m(e,t)||M()}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function m(e,t){var r=[],a=!0,i=!1,o=void 0;try{for(var n,l=e[Symbol.iterator]();!(a=(n=l.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return r}function P(e){if(Array.isArray(e))return e}var w=Math.PI,q=w/4,y=w/180,b=180/w,V=512,T=4003e4,Z=1.5;function D(e){return Math.pow(2,e)}function F(e){return Math.log2(e)}function N(e,t){var r=x(e,2),a=r[0],i=r[1];return[(t*=V)*(a*y+w)/(2*w),t*(w-Math.log(Math.tan(q+i*y*.5)))/(2*w)]}function S(e,t){var r=x(e,2),a=r[0],i=r[1],o=a/(t*=V)*(2*w)-w,n=2*(Math.atan(Math.exp(w-i/t*(2*w)))-q);return[o*b,n*b]}function _(e){var t=e.latitude;(0,p.default)(Number.isFinite(t));var r=Math.cos(t*y);return F(T*r)-9}function j(e){var t=Number.isFinite,r=e.latitude,a=e.longitude,i=e.zoom,o=e.scale,n=e.highPrecision;o=void 0===o?D(i):o,(0,p.default)(t(r)&&t(a)&&t(o));var l={},u=V*o,s=Math.cos(r*y),c=u/360,d=c/s,f=u/T/s;if(l.pixelsPerMeter=[f,f,f],l.metersPerPixel=[1/f,1/f,1/f],l.pixelsPerDegree=[c,d,f],l.degreesPerPixel=[1/c,1/d,1/f],void 0!==n&&n){var h=y*Math.tan(r*y)/s,v=u/T*h,g=v/d*f;l.pixelsPerDegree2=[0,c*h/2,v],l.pixelsPerMeter2=[g,0,g]}return l}function z(t){var r=t.longitude,a=t.latitude,i=t.zoom,o=t.scale,n=t.meterOffset,l=t.distanceScales,u=void 0===l?null:l,s=N([r,a],o=void 0===o?D(i):o),c=new e.Vector3(s[0],s[1],0);if(n){u=u||j({latitude:a,longitude:r,scale:o});var d=new e.Vector3(n).scale(u.pixelsPerMeter).scale([1,-1,1]);c.add(d)}return c}function I(r){var a=r.height,i=r.pitch,n=r.bearing,u=r.altitude,c=r.center,f=void 0===c?null:c,h=r.flipY,v=(0,t.createMat4)();return(0,l.default)(v,v,[0,0,-u]),(0,o.default)(v,v,[1,1,1/a]),(0,s.default)(v,v,-i*y),(0,d.default)(v,v,n*y),void 0!==h&&h&&(0,o.default)(v,v,[1,-1,1]),f&&(0,l.default)(v,v,new e.Vector3(f).negate()),v}function L(e){var t=Math.PI,r=Math.sin,a=Math.atan,i=e.width,o=e.height,n=e.altitude,l=void 0===n?Z:n,u=e.pitch,s=void 0===u?0:u,c=e.farZMultiplier,d=void 0===c?1:c,f=s*y,h=a(.5/l),v=r(h)*l/r(t/2-f-h),p=Math.cos(t/2-f)*v+l;return{fov:2*a(o/2/l),aspect:i/o,focalDistance:l,near:.1,far:p*d}}function W(e){var t=e.width,r=e.height,i=e.pitch,o=e.altitude,n=e.farZMultiplier,l=L({width:t,height:r,altitude:o,pitch:i,farZMultiplier:void 0===n?10:n}),u=l.fov,s=l.aspect,c=l.near,d=l.far;return(0,a.default)([],u,s,c,d)}function A(e,r){var a=Number.isFinite,i=x(e,3),o=i[0],n=i[1],l=i[2],u=void 0===l?0:l;return(0,p.default)(a(o)&&a(n)&&a(u)),(0,t.transformVector)(r,[o,n,u,1])}function O(e,r){var a=Number.isFinite,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=x(e,3),n=o[0],l=o[1],u=o[2];if((0,p.default)(a(n)&&a(l)),a(u))return(0,t.transformVector)(r,[n,l,u,1]);var s=(0,t.transformVector)(r,[n,l,0,1]),c=(0,t.transformVector)(r,[n,l,1,1]),d=s[2],f=c[2],v=d===f?0:((i||0)-d)/(f-d);return(0,h.default)([],s,c,v)}
},{"math.gl":132,"./math-utils":128,"gl-mat4/perspective":142,"gl-mat4/scale":137,"gl-mat4/translate":138,"gl-mat4/rotateX":140,"gl-mat4/rotateZ":139,"gl-vec2/lerp":141,"./assert":126}],127:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("math.gl"),e=require("./math-utils"),i=require("./web-mercator-utils"),r=require("gl-mat4/scale"),n=c(r),a=require("gl-mat4/translate"),o=c(a),l=require("gl-mat4/multiply"),u=c(l),h=require("gl-mat4/invert"),s=c(h);function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return v(t)||d(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}return i}function v(t){if(Array.isArray(t))return t}function j(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function x(t,e){if(!j(t,e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i,r=0;r<e.length;r++)(i=e[r]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function g(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),t}var w=(0,e.createMat4)(),M=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.width,a=t.height,l=t.viewMatrix,h=void 0===l?w:l,c=t.projectionMatrix,f=void 0===c?w:c;x(this,r),this.width=i||1,this.height=a||1,this.scale=1,this.viewMatrix=h,this.projectionMatrix=f;var p=(0,e.createMat4)();(0,u.default)(p,p,this.projectionMatrix),(0,u.default)(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var d=(0,e.createMat4)();(0,n.default)(d,d,[this.width/2,-this.height/2,1]),(0,o.default)(d,d,[1,-1,0]),(0,u.default)(d,d,this.viewProjectionMatrix);var v=(0,s.default)((0,e.createMat4)(),d);if(!v)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=v,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return g(r,[{key:"equals",value:function(e){return!!j(e,r)&&e.width===this.width&&e.height===this.height&&(0,t.equals)(e.projectionMatrix,this.projectionMatrix)&&(0,t.equals)(e.viewMatrix,this.viewMatrix)}},{key:"project",value:function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=f(t,3),n=r[0],a=r[1],o=r[2],l=f(this.projectFlat([n,a]),2),u=l[0],h=l[1],s=(0,i.worldToPixels)([u,h,o],this.pixelProjectionMatrix),c=f(s,2),p=c[0],d=c[1],v=void 0===e||e?d:this.height-d;return 2===t.length?[p,v]:[p,v,s[2]]}},{key:"unproject",value:function(t){var e=Number.isFinite,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.topLeft,a=r.targetZ,o=f(t,3),l=o[0],u=o[1],h=o[2],s=void 0===n||n?u:this.height-u,c=(0,i.pixelsToWorld)([l,s,h],this.pixelUnprojectionMatrix,a),p=f(this.unprojectFlat(c),2),d=p[0],v=p[1];return e(h)?[d,v,c[2]]:e(a)?[d,v,a]:[d,v]}},{key:"projectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}},{key:"unprojectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}}]),r}();exports.default=M;
},{"math.gl":132,"./math-utils":128,"./web-mercator-utils":112,"gl-mat4/scale":137,"gl-mat4/translate":138,"gl-mat4/multiply":147,"gl-mat4/invert":148}],109:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("./web-mercator-viewport"),e=i(t),r=require("./assert"),o=i(r);function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return l(t)||a(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var r=[],o=!0,i=!1,n=void 0;try{for(var u,a=t[Symbol.iterator]();!(o=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);o=!0);}catch(t){i=!0,n=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw n}}return r}function l(t){if(Array.isArray(t))return t}function f(t){var r=Math.abs,i=Number.isFinite,u=t.width,a=t.height,l=t.bounds,f=t.padding,d=void 0===f?0:f,h=t.offset,s=void 0===h?[0,0]:h,c=n(l,2),p=n(c[0],2),v=p[0],m=p[1],b=n(c[1],2),g=b[0],y=b[1];if(i(d)){d={top:d,bottom:d,left:d,right:d}}else(0,o.default)(i(d.top)&&i(d.bottom)&&i(d.left)&&i(d.right));var w=new e.default({width:u,height:a,longitude:0,latitude:0,zoom:0}),M=w.project([v,y]),j=w.project([g,m]),_=[r(j[0]-M[0]),r(j[1]-M[1])],x=[u-d.left-d.right-2*r(s[0]),a-d.top-d.bottom-2*r(s[1])];(0,o.default)(0<x[0]&&0<x[1]);var z=x[0]/_[0],q=x[1]/_[1],A=(d.right-d.left)/2/z,E=(d.bottom-d.top)/2/q,F=[(j[0]+M[0])/2+A,(j[1]+M[1])/2+E],I=w.unproject(F),N=w.zoom+Math.log2(r(Math.min(z,q)));return{longitude:I[0],latitude:I[1],zoom:N}}
},{"./web-mercator-viewport":108,"./assert":126}],135:[function(require,module,exports) {
function e(e,n,o){return e[0]=n[0]+o[0],e[1]=n[1]+o[1],e}module.exports=e;
},{}],136:[function(require,module,exports) {
function e(e,n){return e[0]=-n[0],e[1]=-n[1],e}module.exports=e;
},{}],108:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./viewport"),e=c(t),o=require("./web-mercator-utils"),i=require("./fit-bounds"),n=c(i),r=require("gl-vec2/add"),a=c(r),l=require("gl-vec2/negate"),u=c(l);function c(t){return t&&t.__esModule?t:{default:t}}function d(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!d(t,e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var o,i=0;i<e.length;i++)(o=e[i]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}function p(t,e,o){return e&&h(t.prototype,e),o&&h(t,o),t}function g(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?b(t):e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var v=function(t){function i(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,a=e.latitude,l=void 0===a?0:a,u=e.longitude,c=void 0===u?0:u,d=e.zoom,f=void 0===d?0:d,h=e.pitch,p=void 0===h?0:h,y=e.bearing,v=void 0===y?0:y,m=e.altitude,w=void 0===m?1.5:m,j=e.farZMultiplier,L=void 0===j?10:j;s(this,i),n=n||1,r=r||1;var x=(0,o.zoomToScale)(f);w=Math.max(.75,w);var M=(0,o.getWorldPosition)({longitude:c,latitude:l,scale:x}),_=(0,o.getProjectionMatrix)({width:n,height:r,pitch:p,bearing:v,altitude:w,farZMultiplier:L}),O=(0,o.getViewMatrix)({height:r,center:M,pitch:p,bearing:v,altitude:w,flipY:!0});return(t=g(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,{width:n,height:r,viewMatrix:O,projectionMatrix:_}))).latitude=l,t.longitude=c,t.zoom=f,t.pitch=p,t.bearing=v,t.altitude=w,t.scale=x,t.center=M,Object.freeze(b(t)),t}return y(i,e.default),p(i,[{key:"projectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,o.lngLatToWorld)(t,e)}},{key:"unprojectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,o.worldToLngLat)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,i=t.pos,n=(0,o.pixelsToWorld)(i,this.pixelUnprojectionMatrix),r=(0,o.lngLatToWorld)(e,this.scale),l=(0,a.default)([],r,(0,u.default)([],n)),c=(0,a.default)([],this.center,l);return(0,o.worldToLngLat)(c,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,o=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:o})}},{key:"fitBounds",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this.width,r=this.height,a=(0,n.default)(Object.assign({width:o,height:r,bounds:t},e));return new i({width:o,height:r,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}}]),i}();exports.default=v;
},{"./viewport":127,"./web-mercator-utils":112,"./fit-bounds":109,"gl-vec2/add":135,"gl-vec2/negate":136}],110:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("./web-mercator-viewport"),t=i(e),o=require("./math-utils");function i(e){return e&&e.__esModule?e:{default:e}}var r=85.05113,u=-85.05113;function d(e){var i=e.width,d=e.height,a=e.longitude,l=e.latitude,h=e.zoom,n=e.pitch,c=void 0===n?0:n,g=e.bearing,p=void 0===g?0:g;(-180>a||180<a)&&(a=(0,o.mod)(a+180,360)-180),(-180>p||180<p)&&(p=(0,o.mod)(p+180,360)-180);var m=new t.default({width:i,height:d,longitude:a,latitude:l,zoom:h}),v=m.project([a,r])[1],w=m.project([a,u])[1],f=0;return w-v<d&&(h+=Math.log2(d/(w-v)),v=(m=new t.default({width:i,height:d,longitude:a,latitude:l,zoom:h})).project([a,r])[1],w=m.project([a,u])[1]),0<v?f=v:w<d&&(f=w-d),f&&(l=m.unproject([i/2,d/2+f])[1]),{width:i,height:d,longitude:a,latitude:l,zoom:h,pitch:c,bearing:p}}
},{"./web-mercator-viewport":108,"./math-utils":128}],111:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("math.gl"),e=require("./math-utils"),o=require("./web-mercator-utils"),a=.01,r=["longitude","latitude","zoom"];function l(l,u,i){var d=Math.cosh,n=Math.log,h=Math.sqrt,s={},c=l.zoom,m=[l.longitude,l.latitude],g=(0,o.zoomToScale)(c),M=u.zoom,z=[u.longitude,u.latitude],T=(0,o.zoomToScale)(M-c),v=new t.Vector2((0,o.lngLatToWorld)(m,g)),f=new t.Vector2((0,o.lngLatToWorld)(z,g)).subtract(v),w=Math.max(l.width,l.height),x=w/T,b=h(f.x*f.x+f.y*f.y);if(Math.abs(b)<a){for(var p=0;p<r.length;p++){var q=r[p],L=l[q],y=u[q];s[q]=(0,e.lerp)(L,y,i)}return s}var S=1.414*1.414,V=(x*x-w*w+S*S*b*b)/(2*w*S*b),W=(x*x-w*w-S*S*b*b)/(2*x*S*b),_=n(h(V*V+1)-V),j=i*((n(h(W*W+1)-W)-_)/1.414),O=d(_)/d(_+1.414*j),P=w*((d(_)*Math.tanh(_+1.414*j)-Math.sinh(_))/S)/b,Z=1/O,k=c+(0,o.scaleToZoom)(Z),A=(0,o.worldToLngLat)(v.add(f.scale(P)).scale(Z),(0,o.zoomToScale)(k));return s.longitude=A[0],s.latitude=A[1],s.zoom=k,s}
},{"math.gl":132,"./math-utils":128,"./web-mercator-utils":112}],97:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./web-mercator-viewport");Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return i(e).default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return i(e).default}});var t=require("./fit-bounds");Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return i(t).default}});var r=require("./normalize-viewport-props");Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return i(r).default}});var o=require("./fly-to-viewport");Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return i(o).default}});var n=require("./web-mercator-utils");function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return n.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return n.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return n.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return n.pixelsToWorld}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return n.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return n.getDistanceScales}}),Object.defineProperty(exports,"getWorldPosition",{enumerable:!0,get:function(){return n.getWorldPosition}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return n.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return n.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return n.getProjectionParameters}}),Object.defineProperty(exports,"PerspectiveMercatorViewport",{enumerable:!0,get:function(){return i(e).default}}),Object.defineProperty(exports,"getUncenteredViewMatrix",{enumerable:!0,get:function(){return n.getViewMatrix}}),Object.defineProperty(exports,"projectFlat",{enumerable:!0,get:function(){return n.lngLatToWorld}}),Object.defineProperty(exports,"unprojectFlat",{enumerable:!0,get:function(){return n.worldToLngLat}});
},{"./web-mercator-viewport":108,"./fit-bounds":109,"./normalize-viewport-props":110,"./fly-to-viewport":111,"./web-mercator-utils":112}],313:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformsFromViewport=m;var e=require("gl-mat4/multiply"),r=p(e),i=require("gl-vec4/transformMat4"),t=p(i),o=require("../../lib/constants"),a=require("../../utils/memoize"),n=p(a),c=require("../../utils/log"),s=p(c),l=require("../../utils/assert"),u=p(l),d=require("viewport-mercator-project");function p(e){return e&&e.__esModule?e:{default:e}}var v=[0,0,0,0],P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[0,0,0],M=[0,0,0],_=(0,n.default)(O);function j(e){var i,a=e.viewport,n=e.coordinateSystem,c=e.coordinateOrigin,s=e.coordinateZoom,l=a.viewMatrixUncentered,u=a.viewMatrix,p=a.projectionMatrix,S=a.viewProjectionMatrix;switch(n){case o.COORDINATE_SYSTEM.IDENTITY:case o.COORDINATE_SYSTEM.LNGLAT:i=v;break;case o.COORDINATE_SYSTEM.LNGLAT_OFFSETS:case o.COORDINATE_SYSTEM.METER_OFFSETS:var x=(0,d.lngLatToWorld)(c,Math.pow(2,s));i=(0,t.default)([],[x[0],x[1],0,1],S),u=l||u,S=(0,r.default)([],p,u),S=(0,r.default)([],S,P);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:u,viewProjectionMatrix:S,projectionCenter:i,cameraPos:a.cameraPosition}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.viewport,i=e.devicePixelRatio,t=void 0===i?1:i,a=e.modelMatrix,n=void 0===a?null:a,c=e.coordinateSystem,l=void 0===c?o.COORDINATE_SYSTEM.LNGLAT:c,d=e.coordinateOrigin,p=void 0===d?M:d,v=e.projectionMode,P=e.positionOrigin;return(0,u.default)(r),void 0!==v&&s.default.removed("projectionMode","coordinateSystem"),void 0!==P&&s.default.removed("positionOrigin","coordinateOrigin"),Object.assign({project_uModelMatrix:n||S},_({viewport:r,devicePixelRatio:t,coordinateSystem:l,coordinateOrigin:p}))}function O(e){var r=e.viewport,i=e.devicePixelRatio,t=e.coordinateSystem,a=e.coordinateOrigin,n=r.zoom;(0,u.default)(n>=0);var c=j({coordinateSystem:t,coordinateOrigin:a,coordinateZoom:n,viewport:r}),s=c.projectionCenter,l=c.viewProjectionMatrix,d=c.cameraPos;(0,u.default)(l,"Viewport missing modelViewProjectionMatrix");var p=r.getDistanceScales(),v={project_uCoordinateSystem:t,project_uCenter:s,project_uViewportSize:[r.width*i,r.height*i],project_uDevicePixelRatio:i,project_uFocalDistance:r.focalDistance||1,project_uPixelsPerMeter:p.pixelsPerMeter,project_uPixelsPerDegree:p.pixelsPerDegree,project_uPixelsPerUnit:p.pixelsPerMeter,project_uPixelsPerUnit2:x,project_uScale:r.scale,project_uViewProjectionMatrix:l,project_uCameraPosition:d};if(t===o.COORDINATE_SYSTEM.METER_OFFSETS){var P=r.getDistanceScales(a);v.project_uPixelsPerUnit=P.pixelsPerMeter,v.project_uPixelsPerUnit2=P.pixelsPerMeter2}if(t===o.COORDINATE_SYSTEM.LNGLAT_OFFSETS){var S=r.getDistanceScales(a);v.project_uPixelsPerUnit=S.pixelsPerDegree,v.project_uPixelsPerUnit2=S.pixelsPerDegree2}return v}
},{"gl-mat4/multiply":147,"gl-vec4/transformMat4":158,"../../lib/constants":178,"../../utils/memoize":307,"../../utils/log":209,"../../utils/assert":292,"viewport-mercator-project":97}],219:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("luma.gl"),o=require("./project.glsl"),t=c(o),r=require("../../deprecated/shaderlib/project/project-deprecated.glsl"),i=c(r),n=require("./viewport-uniforms");function c(e){return e&&e.__esModule?e:{default:e}}var p={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return e.viewport?(0,n.getUniformsFromViewport)(e):{}}exports.default={name:"project",dependencies:[e.fp32],vs:"".concat(t.default).concat(i.default),getUniforms:l,deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale",deprecated:1},{type:"function",old:"preproject",new:"project_position",deprecated:1},{type:"function",old:"project",new:"project_to_clipspace",deprecated:1}]};
},{"luma.gl":317,"./project.glsl":312,"../../deprecated/shaderlib/project/project-deprecated.glsl":316,"./viewport-uniforms":313}],468:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../project/project"),e=t(o);function t(o){return o&&o.__esModule?o:{default:o}}var i="\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  vec3 projectedPosition = project_position(position);\n  worldPosition = vec4(projectedPosition + offset, 1.0);\n  return project_to_clipspace(worldPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, worldPosition);\n}\n";exports.default={name:"project32",dependencies:[e.default],vs:i};
},{"../project/project":219}],216:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=o,exports.fp64ifyMatrix4=i,exports.fp64LowPart=u,exports.enable64bitSupport=f;var t=require("./log"),e=n(t),r=require("../lib/constants");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.fround(t),o=t-Math.fround(t);return e[r]=n,e[r+1]=o,e}function i(t){for(var e=new Float32Array(32),r=0;r<4;++r)for(var n=0;n<4;++n){var i=4*r+n;o(t[4*n+r],e,2*i)}return e}function u(t){return t-Math.fround(t)}function f(t){if(t.fp64){if(t.coordinateSystem===r.COORDINATE_SYSTEM.LNGLAT)return!0;e.default.once(0,"64-bit mode only works with coordinateSystem set to\n      COORDINATE_SYSTEM.LNGLAT. Rendering in 32-bit mode instead")}return!1}
},{"./log":209,"../lib/constants":178}],314:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  // This is the local offset to the instance position\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_scale(position.z);\n\n  // Apply web mercator projection (depends on coordinate system imn use)\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 worldPosition64[4];\n  worldPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  worldPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  worldPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  worldPosition64[3] = vec2(1.0, 0.0);\n\n  worldPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_to_clipspace_fp64(worldPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, worldPosition\n  );\n}\n";
},{}],220:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("luma.gl"),r=require("../project/project"),t=p(r),o=require("../../utils/fp64"),i=require("../../utils/memoize"),c=p(i),u=require("./project64.glsl"),n=p(u);function p(e){return e&&e.__esModule?e:{default:e}}exports.default={name:"project64",dependencies:[t.default,e.fp64],vs:n.default,getUniforms:l,deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]};var a={},j=(0,c.default)(f);function l(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.project_uViewProjectionMatrix,t=e.project_uScale;return r&&t?j({project_uViewProjectionMatrix:r,project_uScale:t}):{}}function f(e){var r=e.project_uViewProjectionMatrix,t=e.project_uScale,i=(0,o.fp64ifyMatrix4)(r);return{project_uViewProjectionMatrixFP64:i,project64_uViewProjectionMatrix:i,project64_uScale:(0,o.fp64ify)(t)}}
},{"luma.gl":317,"../project/project":219,"../../utils/fp64":216,"../../utils/memoize":307,"./project64.glsl":314}],310:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define MAX_NUM_OF_LIGHTS 5\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform vec2 lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n    if (i >= lighting_numberOfLights) {\n      break;\n    }\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n";
},{}],454:[function(require,module,exports) {
function e(e,n,o){return e[0]=n[0]-o[0],e[1]=n[1]-o[1],e[2]=n[2]-o[2],e}module.exports=e;
},{}],311:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.projectPosition=S;var r=require("../../lib/constants"),e=require("gl-vec4/transformMat4"),t=o(e),n=require("gl-vec3/subtract"),a=o(n);function o(r){return r&&r.__esModule?r:{default:r}}function i(r,e){return s(r)||c(r,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(r,e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){a=!0,o=r}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return t}function s(r){if(Array.isArray(r))return r}function l(r,e){var t=i(e.projectFlat(r),2);return[t[0],t[1],(r[2]||0)*e.distanceScales.pixelsPerMeter[2]]}function S(e,n){var o,u=n.viewport,c=n.coordinateSystem,s=n.coordinateOrigin,S=n.modelMatrix,d=n.fromCoordinateSystem,f=n.fromCoordinateOrigin,T=i(e,3),E=T[0],O=T[1],v=T[2];if(S){var M=i((0,t.default)([],[E,O,v,1],S),3);E=M[0],O=M[1],v=M[2]}switch(void 0===d&&(d=c),void 0===f&&(f=s),d){case r.COORDINATE_SYSTEM.LNGLAT:o=l([E,O,v],u);break;case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:o=l([E+f[0],O+f[1],v+(f[2]||0)],u);break;case r.COORDINATE_SYSTEM.METER_OFFSETS:o=l(u.addMetersToLngLat(f,[E,O,v]),u);break;default:o=[E,O,v]}switch(c){case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:case r.COORDINATE_SYSTEM.METER_OFFSETS:var _=l(s,u);(0,a.default)(o,o,_),o[1]=-o[1]}return o}
},{"../../lib/constants":178,"gl-vec4/transformMat4":158,"gl-vec3/subtract":454}],221:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./lighting.glsl"),t=d(i),e=require("../project/project"),o=d(e),r=require("../../lib/constants"),n=require("../project/project-functions"),g=require("../../utils/memoize"),a=d(g);function d(i){return i&&i.__esModule?i:{default:i}}exports.default={name:"lighting",dependencies:[o.default],vs:t.default,getUniforms:p,deprecations:[{type:"function",old:"getLightWeight",new:"lighting_getLightWeight",deprecated:!0}]};var s={},l=[-122.45,37.75,8e3],u=[2,0],c=.4,f=.6,h=.8,m=[0,0,0],v=(0,a.default)(O);function p(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!i.lightSettings)return{};var t=i.lightSettings,e=t.numberOfLights,o=void 0===e?1:e,n=t.lightsPosition,g=void 0===n?l:n,a=t.lightsStrength,d=void 0===a?u:a,p=t.coordinateSystem,O=void 0===p?r.COORDINATE_SYSTEM.LNGLAT:p,S=t.coordinateOrigin,_=void 0===S?m:S,y=t.modelMatrix,b=void 0===y?null:y,L=t.ambientRatio,C=void 0===L?c:L,M=t.diffuseRatio,R=void 0===M?f:M,j=t.specularRatio,x=void 0===j?h:j;return{lighting_lightPositions:v({lightsPosition:g,numberOfLights:o,viewport:i.viewport,modelMatrix:b,coordinateSystem:i.coordinateSystem,coordinateOrigin:i.coordinateOrigin,fromCoordinateSystem:O,fromCoordinateOrigin:_}),lighting_lightStrengths:d,lighting_ambientRatio:C,lighting_diffuseRatio:R,lighting_specularRatio:x,lighting_numberOfLights:o}}function O(i){for(var t=i.lightsPosition,e=i.numberOfLights,o={viewport:i.viewport,modelMatrix:i.modelMatrix,coordinateSystem:i.coordinateSystem,coordinateOrigin:i.coordinateOrigin,fromCoordinateSystem:i.fromCoordinateSystem,fromCoordinateOrigin:i.fromCoordinateOrigin},r=[],g=0;g<e;g++){var a=(0,n.projectPosition)(t.slice(3*g,3*g+3),o);r[3*g]=a[0],r[3*g+1]=a[1],r[3*g+2]=a[2]}return r}
},{"./lighting.glsl":310,"../project/project":219,"../../lib/constants":178,"../project/project-functions":311,"../../utils/memoize":307}],330:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lighting=exports.project64=exports.project=exports.picking=exports.fp64=exports.fp32=void 0,exports.initializeShaderModules=a;var e=require("luma.gl"),r=require("../shaderlib/project/project"),t=d(r),p=require("../shaderlib/project32/project32"),i=d(p),o=require("../shaderlib/project64/project64"),l=d(o),s=require("../shaderlib/lighting/lighting"),u=d(s);function d(e){return e&&e.__esModule?e:{default:e}}function a(){(0,e.registerShaderModules)([e.fp32,e.fp64,t.default,i.default,l.default,u.default,e.picking]),(0,e.setDefaultShaderModules)([t.default])}a(),exports.fp32=e.fp32,exports.fp64=e.fp64,exports.picking=e.picking,exports.project=t.default,exports.project64=l.default,exports.lighting=u.default;
},{"luma.gl":317,"../shaderlib/project/project":219,"../shaderlib/project32/project32":468,"../shaderlib/project64/project64":220,"../shaderlib/lighting/lighting":221}],177:[function(require,module,exports) {

"use strict";var e=require("../utils/globals"),l=require("../utils/log"),o=t(l);function t(e){return e&&e.__esModule?e:{default:e}}var c="5.2.5",r="set deck.log.priority=1 (or higher) to trace attribute updates";if(e.global.deck&&e.global.deck.VERSION!==c)throw new Error("deck.gl - multiple versions detected: ".concat(e.global.deck.VERSION," vs ").concat(c));e.global.deck||(o.default.log(0,"deck.gl ".concat(c," - ").concat(r))(),e.global.deck=e.global.deck||{VERSION:c,version:c,log:o.default}),console.table||(console.table=function(){}),require("../shaderlib");
},{"../utils/globals":291,"../utils/log":209,"../shaderlib":330}],118:[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],125:[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],102:[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":118,"inherits":125,"process":50}],88:[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];function e(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var n=require("util/"),i=Object.prototype.hasOwnProperty,o=Array.prototype.slice,u="foo"===function(){}.name;function a(t){return Object.prototype.toString.call(t)}function f(e){return!r(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var c=module.exports=y,s=/\s*function\s+([^\(\s]*)\s*/;function l(t){if(n.isFunction(t)){if(u)return t.name;var e=t.toString().match(s);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(u||!n.isFunction(t))return n.inspect(t);var e=l(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return p(g(t.actual),128)+" "+t.operator+" "+p(g(t.expected),128)}function E(t,e,r,n,i){throw new c.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function y(t,e){t||E(t,!0,e,"==",c.ok)}function d(t,i,o,u){if(t===i)return!0;if(r(t)&&r(i))return 0===e(t,i);if(n.isDate(t)&&n.isDate(i))return t.getTime()===i.getTime();if(n.isRegExp(t)&&n.isRegExp(i))return t.source===i.source&&t.global===i.global&&t.multiline===i.multiline&&t.lastIndex===i.lastIndex&&t.ignoreCase===i.ignoreCase;if(null!==t&&"object"==typeof t||null!==i&&"object"==typeof i){if(f(t)&&f(i)&&a(t)===a(i)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(i.buffer));if(r(t)!==r(i))return!1;var c=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==c&&c===u.expected.indexOf(i)||(u.actual.push(t),u.expected.push(i),v(t,i,o,u))}return o?t===i:t==i}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,r,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(n.isPrimitive(t)||n.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var u=m(t),a=m(e);if(u&&!a||!u&&a)return!1;if(u)return d(t=o.call(t),e=o.call(e),r);var f,c,s=O(t),l=O(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),c=s.length-1;c>=0;c--)if(s[c]!==l[c])return!1;for(c=s.length-1;c>=0;c--)if(!d(t[f=s[c]],e[f],r,i))return!1;return!0}function b(t,e,r){d(t,e,!0)&&E(t,e,r,"notDeepStrictEqual",b)}function q(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t){var e;try{t()}catch(t){e=t}return e}function w(t,e,r,i){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),o=x(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!o&&E(o,r,"Missing expected exception"+i);var u="string"==typeof i,a=!t&&n.isError(o),f=!t&&o&&!r;if((a&&u&&q(o,r)||f)&&E(o,r,"Got unwanted exception"+i),t&&o&&r&&!q(o,r)||!t&&o)throw o}c.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||E;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=l(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},n.inherits(c.AssertionError,Error),c.fail=E,c.ok=y,c.equal=function(t,e,r){t!=e&&E(t,e,r,"==",c.equal)},c.notEqual=function(t,e,r){t==e&&E(t,e,r,"!=",c.notEqual)},c.deepEqual=function(t,e,r){d(t,e,!1)||E(t,e,r,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(t,e,r){d(t,e,!0)||E(t,e,r,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(t,e,r){d(t,e,!1)&&E(t,e,r,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=b,c.strictEqual=function(t,e,r){t!==e&&E(t,e,r,"===",c.strictEqual)},c.notStrictEqual=function(t,e,r){t===e&&E(t,e,r,"!==",c.notStrictEqual)},c.throws=function(t,e,r){w(!0,t,e,r)},c.doesNotThrow=function(t,e,r){w(!1,t,e,r)},c.ifError=function(t){if(t)throw t};var O=Object.keys||function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};
},{"util/":102}],301:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.glArrayFromType=d;var e=require("assert"),t=r(e),a=require("luma.gl");function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e,t){if(!n(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.id,r=void 0===a?"unnamed-attribute":a,n=t.attribute,s=t.size,u=t.value,o=t.isGeneric,d=void 0!==o&&o,l=t.isIndexed,c=void 0!==l&&l,f=t.instanced,v=void 0===f?0:f,h=t.transition,y=void 0!==h&&h,p=t.noAlloc,b=void 0!==p&&p,A=t.updater,m=void 0===A?null:A,_=t.accessor,w=void 0===_?null:_;i(this,e),this.id=r,this.userData={},this.state=Object.assign({target:void 0,buffer:null,userData:{}},{transition:y,noAlloc:b,updater:m,accessor:w},n,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,needsRedraw:!1,isGeneric:d,isIndexed:c,instanced:v,size:s,value:u}),this.allocedInstances=-1,Object.seal(this),Object.seal(this.state),this._validateAttributeDefinition(),this._validateAttributeUpdaters()}return u(e,[{key:"finalize",value:function(){}},{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,t=void 0!==e&&e,a=this.state.needsRedraw;return this.state.needsRedraw=this.state.needsRedraw&&!t,a}},{key:"getInstanceCount",value:function(){var e=this.state;return null!==e.value?e.value.length/e.size:0}},{key:"getBuffer",value:function(){var e=this.state;return e.buffer||e}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsUpdate=this.state.needsUpdate||e}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"setNumInstances",value:function(e){var t=this.state;if(!t.isExternalBuffer){var a=this.getInstanceCount();(0===a||a<e)&&(t.update||t.accessor)&&(t.needsAlloc=!0,this.setNeedsUpdate(this.id))}}},{key:"allocate",value:function(e){this.setNumInstances(e);var t=this.state;if(t.needsAlloc){var r=Math.max(e,1),n=d(t.type||a.GL.FLOAT);return t.value=new n(t.size*r),t.needsAlloc=!1,t.needsUpdate=!0,this.allocedInstances=r,!0}return!1}},{key:"update",value:function(e){var t=e.numInstances,a=e.data,r=e.props,n=e.context;if(!this.needsUpdate())return!1;var i=this.state,s=i.update,u=i.accessor,o=!0;return s?(s.call(n,i,{data:a,props:r,numInstances:t}),this._checkAttributeArray()):u?(this._updateBufferViaStandardAccessor(a,r),this._checkAttributeArray()):o=!1,i.needsUpdate=!1,i.needsRedraw=!0,o}},{key:"setExternalBuffer",value:function(e,t){var r=this.state;if(e)if(r.isExternalBuffer=!0,r.needsUpdate=!1,n(e,a.Buffer))r.value=null,r.buffer!==e&&(r.buffer=e,r.needsRedraw=!0);else{var i=d(r.type||a.GL.FLOAT);if(!n(e,i))throw new Error("Attribute ".concat(this.id," must be of type ").concat(i.name));if(r.auto&&e.length<=t*r.size)throw new Error("Attribute prop array must match length and size");r.buffer=null,r.value!==e&&(r.value=e,r.needsRedraw=!0)}else r.isExternalBuffer=!1}},{key:"_updateBufferViaStandardAccessor",value:function(e,a){var r=this.state,n=r.accessor,i=r.value,s=r.size,u=a[n];(0,t.default)("function"==typeof u,'accessor "'.concat(n,'" is not a function'));var o=r.defaultValue,d=void 0===o?[0,0,0,0]:o;d=Array.isArray(d)?d:[d];var l=0,c=!0,f=!1,v=void 0;try{for(var h,y=e[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var p=u(h.value);switch(p=Array.isArray(p)?p:[p],s){case 4:i[l+3]=Number.isFinite(p[3])?p[3]:d[3];case 3:i[l+2]=Number.isFinite(p[2])?p[2]:d[2];case 2:i[l+1]=Number.isFinite(p[1])?p[1]:d[1];case 1:i[l+0]=Number.isFinite(p[0])?p[0]:d[0]}l+=s}}catch(e){f=!0,v=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw v}}}},{key:"_validateAttributeDefinition",value:function(){var e=this.state;(0,t.default)(e.size>=1&&e.size<=4,"Attribute definition for ".concat(this.id," invalid size"))}},{key:"_validateAttributeUpdaters",value:function(){var e=this.state;if(!(e.noAlloc||"function"==typeof e.update||"string"==typeof e.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.state.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"value",get:function(){return this.state.value}}]),e}();function d(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,r=void 0===t||t;switch(e){case a.GL.FLOAT:return Float32Array;case a.GL.UNSIGNED_SHORT:case a.GL.UNSIGNED_SHORT_5_6_5:case a.GL.UNSIGNED_SHORT_4_4_4_4:case a.GL.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case a.GL.UNSIGNED_INT:return Uint32Array;case a.GL.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case a.GL.BYTE:return Int8Array;case a.GL.SHORT:return Int16Array;case a.GL.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}exports.default=o;
},{"assert":88,"luma.gl":317}],336:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShaders=t,exports.getBuffers=e;var n={1:"float",2:"vec2",3:"vec3",4:"vec4"};function t(t){var e=[],o=[],c=[],a=[],r=[];for(var i in t){var f=t[i],u=n[f.attribute.size];u&&(f.bufferIndex=e.length,e.push(i),o.push("attribute ".concat(u," ").concat(i,"From;")),o.push("attribute ".concat(u," ").concat(i,"To;")),c.push("uniform float ".concat(i,"Time;")),a.push("varying ".concat(u," ").concat(i,";")),r.push("".concat(i," = mix(").concat(i,"From, ").concat(i,"To,\n        ").concat(i,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(o.join("\n"),"\n").concat(c.join("\n"),"\n").concat(a.join("\n"),"\n\nvoid main(void) {\n  ").concat(r.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n".concat(a.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:e}}function e(n){var t={},e={},o=null;for(var c in n){var a=n[c],r=a.fromState,i=a.toState,f=a.buffer,u=a.attribute,s=u.value.length/u.size;t["".concat(c,"From")]=r,t["".concat(c,"To")]=i,e["".concat(c)]=f,o=null===o?s:Math.min(o,s)}return{sourceBuffers:t,destinationBuffers:e,elementCount:o}}
},{}],302:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("luma.gl"),e=require("./attribute-transition-utils"),r=require("../utils/log"),n=s(r),i=require("../utils/assert"),a=s(i);function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function o(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}var d=t.experimental.Transform,h={NONE:0,PENDING:1,STARTED:2,ENDED:3},c=function(){},b=function(){function r(t,e){var i=e.id;o(this,r),this.id=i,this.gl=t,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,d.isSupported(t)?this.isSupported=!0:n.default.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return l(r,[{key:"update",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.opts=r,this.isSupported){var n=!1,i=this.attributeTransitions,a={};for(var s in t){var u=this._updateAttribute(s,t[s].state);u&&(i[s]||(i[s]=u,n=!0),a[s]=u)}for(var o in i){var f=t[o];f&&f.state.transition||(delete i[o],n=!0)}if(n)this._createModel();else if(this.transform){var l=(0,e.getBuffers)(a),d=l.sourceBuffers,h=l.destinationBuffers,c=l.elementCount;this.transform.elementCount=Math.min(this.transform.elementCount,c),this.transform.update({sourceBuffers:d,destinationBuffers:h})}}}},{key:"hasAttribute",value:function(t){return t in this.attributeTransitions}},{key:"getAttributes",value:function(){var t={};for(var e in this.attributeTransitions){var r=this.attributeTransitions[e];r.buffer&&(t[e]=r.buffer)}return t}},{key:"setCurrentTime",value:function(t){if(!this.transform)return!1;var e={},r=this.needsRedraw;for(var n in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[n],a=1;i.state===h.PENDING&&(i.startTime=t,i.state=h.STARTED,i.onStart(i)),i.state===h.STARTED&&((a=(t-i.startTime)/i.duration)>=1&&(a=1,i.state=h.ENDED,i.onEnd(i)),r=!0),e["".concat(i.name,"Time")]=i.easing(a)}return r&&this.transform.run({uniforms:e}),r}},{key:"_updateAttribute",value:function(t,e){var r=this._getTransitionSettings(e);if(r){var n,i=this.attributeTransitions[t];if(i?n=e.needsRedraw:(i={name:t,attribute:e},n=!0),n)return this._triggerTransition(i,r),i}return null}},{key:"_createModel",value:function(){this.transform&&this.transform.delete(),this.transform=new d(this.gl,Object.assign({},(0,e.getBuffers)(this.attributeTransitions),(0,e.getShaders)(this.attributeTransitions)))}},{key:"_getCurrentAttributeState",value:function(t){var e=t.attribute,r=t.buffer,n=e.value,i=e.type,a=e.size;if(r){var s=new Float32Array(n);return r.getData({dstData:s}),u(n,Float32Array)||(s=new n.constructor(s)),{size:a,type:i,value:s}}return{size:a,type:i,value:n}}},{key:"_getTransitionSettings",value:function(t){var e=this.opts,r=t.transition,n=t.accessor;return r?Array.isArray(n)?n.map(function(t){return e[t]}).find(Boolean):e[n]:null}},{key:"_normalizeTransitionSettings",value:function(t){return Number.isFinite(t)&&(t={duration:t}),(0,a.default)(t&&t.duration>0),{duration:t.duration,easing:t.easing||function(t){return t},onStart:t.onStart||c,onEnd:t.onEnd||c,onInterrupt:t.onInterrupt||c}}},{key:"_triggerTransition",value:function(e,r){this.needsRedraw=!0;var n=e.attribute,i=e.buffer,a=n.value,s=n.size,u=this._normalizeTransitionSettings(r),o=!i||e.bufferSize<a.length,f=this._getCurrentAttributeState(e),l=new t.Buffer(this.gl,{size:s,data:a});o&&(i&&i.delete(),e.buffer=new t.Buffer(this.gl,{size:s,instanced:n.instanced,data:new Float32Array(a.length),usage:t.GL.DYNAMIC_COPY}),e.bufferSize=a.length),Object.assign(e,u),e.fromState&&e.fromState.delete(),e.fromState=new t.Buffer(this.gl,Object.assign({},f,{data:f.value})),e.toState&&e.toState.delete(),e.toState=l,e.state===h.STARTED&&e.onInterrupt(e),e.state=h.PENDING}}]),r}();exports.default=b;
},{"luma.gl":317,"./attribute-transition-utils":336,"../utils/log":209,"../utils/assert":292}],181:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./attribute"),e=o(t),a=require("../utils/log"),n=o(a),i=require("../utils/assert"),s=o(i),r=require("./attribute-transition-manager"),u=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function d(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t,e){if(!d(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,a){return e&&l(t.prototype,e),a&&l(t,a),t}var f=2,h=3;function g(){}var p={savedMessages:null,timeStart:null,onLog:function(t){var e=t.level,a=t.message;n.default.log(e,a)()},onUpdateStart:function(t){t.level,t.numInstances;p.savedMessages=[],p.timeStart=new Date},onUpdate:function(t){t.level;var e=t.message;p.savedMessages&&p.savedMessages.push(e)},onUpdateEnd:function(t){var e=t.level,a=t.id,i=t.numInstances,s=Math.round(new Date-p.timeStart),r="".concat(s,"ms");n.default.group(e,"Updated attributes for ".concat(i," instances in ").concat(a," in ").concat(r),{collapsed:!0})();var u=!0,o=!1,d=void 0;try{for(var c,l=p.savedMessages[Symbol.iterator]();!(u=(c=l.next()).done);u=!0){var v=c.value;n.default.log(e,v)()}}catch(t){o=!0,d=t}finally{try{u||null==l.return||l.return()}finally{if(o)throw d}}n.default.groupEnd(e,"Updated attributes for ".concat(i," instances in ").concat(a," in ").concat(r))(),p.savedMessages=null}},b=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.id,i=void 0===n?"attribute-manager":n,s=a.stats;c(this,t),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=s,this.attributeTransitionManager=new u.default(e,{id:"".concat(i,"-transitions")}),Object.seal(this)}return v(t,null,[{key:"setDefaultLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,a=t.onUpdateStart,n=t.onUpdate,i=t.onUpdateEnd;void 0!==e&&(p.onLog=e||g),void 0!==a&&(p.onUpdateStart=a||g),void 0!==n&&(p.onUpdate=n||g),void 0!==i&&(p.onUpdateEnd=i||g)}}]),v(t,[{key:"finalize",value:function(){}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,a=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e,a&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e)}},{key:"addInstanced",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var a=t[e];void 0!==this.attributes[a]&&delete this.attributes[a]}}},{key:"invalidate",value:function(t){var e=this._invalidateTrigger(t);p.onLog({level:h,message:"invalidated attributes ".concat(e," (").concat(t,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(){for(var t in this.attributes)this.attributes[t].setNeedsUpdate();p.onLog({level:h,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,a=t.numInstances,n=t.transitions,i=t.props,s=void 0===i?{}:i,r=t.buffers,u=void 0===r?{}:r,o=t.context,d=void 0===o?{}:o,c=t.ignoreUnknownAttributes,l=void 0!==c&&c;this._checkExternalBuffers({buffers:u,ignoreUnknownAttributes:l}),this._setExternalBuffers(u),this._checkIfBuffersNeedUpdating({numInstances:a})&&(p.onUpdateStart({level:f,id:this.id,numInstances:a}),this.stats&&this.stats.timeStart("attribute updates",this.id),this._allocateBuffers({numInstances:a,data:e,props:s,context:d}),this._updateBuffers({numInstances:a,data:e,props:s,context:d}),this.stats&&this.stats.timeEnd("attribute updates",this.id),p.onUpdateEnd({level:f,id:this.id,numInstances:a})),this.attributeTransitionManager.update(this.attributes,n)}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){var t={};for(var e in this.attributes){var a=this.attributes[e];t[e]=a.getBuffer()}return t}},{key:"getChangedAttributes",value:function(t){var e=t.transition,a=void 0!==e&&e,n=(t.clearChangedFlags,this.attributes),i=this.attributeTransitionManager;if(a)return i.getAttributes();var s={};for(var r in n){var u=n[r];u.needsRedraw({clearChangedFlags:!0})&&(i.hasAttribute(r)||(s[r]=u.getBuffer()))}return s}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&n.default.removed("AttributeManager.add({updaters}) - updater map no longer supported");var s={};for(var r in t){var u=t[r];s[r]=new e.default({id:r,attribute:u,isGeneric:u.isGeneric||!1,isIndexed:u.isIndexed||u.elements,size:u.elements?1:u.size,value:u.value||null,instanced:u.instanced||i.instanced})}Object.assign(this.attributes,s),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},a=function(a){var n=t.attributes[a].state.accessor;e[a]=[a],"string"==typeof n&&(n=[n]),Array.isArray(n)&&n.forEach(function(t){e[t]||(e[t]=[]),e[t].push(a)})};for(var n in this.attributes)a(n);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t){var e=this.attributes,a=this.updateTriggers[t];if(a)a.forEach(function(t){var a=e[t];a&&a.setNeedsUpdate()});else{var i="invalidating non-existent trigger ".concat(t," for ").concat(this.id,"\n");i+="Valid triggers: ".concat(Object.keys(e).join(", ")),n.default.warn(i,a)()}return a}},{key:"_setExternalBuffers",value:function(t){for(var e in this.attributes){var a=this.attributes[e],n=t[e];a.setExternalBuffer(n,this.numInstances),this.needsRedraw|=a.needsRedraw()}}},{key:"_checkExternalBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.buffers,a=void 0===e?{}:e,n=t.ignoreUnknownAttributes,i=void 0!==n&&n,s=this.attributes;for(var r in a){if(!s[r]&&!i)throw new Error("Unknown attribute prop ".concat(r))}}},{key:"_checkIfBuffersNeedUpdating",value:function(t){var e=t.numInstances;(0,s.default)(void 0!==e,"numInstances not defined");var a=!1;for(var n in this.attributes){var i=this.attributes[n];i.setNumInstances(e),a=a||i.needsUpdate()}return a}},{key:"_allocateBuffers",value:function(t){var e=t.numInstances,a=(t.data,t.props,t.context,this.attributes);for(var n in a){a[n].allocate(e)&&p.onUpdate({level:h,message:"".concat(n," allocated ").concat(e),id:this.id})}}},{key:"_updateBuffers",value:function(t){var e=t.numInstances,a=t.data,n=t.props,i=t.context;for(var s in this.attributes){var r=this.attributes[s],u=Date.now();if(r.update({numInstances:e,data:a,props:n,context:i})){this.needsRedraw=!0;var o=Math.round(Date.now()-u);p.onUpdate({level:h,message:"".concat(s," updated ").concat(e," in ").concat(o,"ms")})}}}}]),t}();exports.default=b;
},{"./attribute":301,"../utils/log":209,"../utils/assert":292,"./attribute-transition-manager":302}],297:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeLayerInSeer=exports.updateLayerInSeer=exports.initLayerInSeer=exports.seerInitListener=exports.layerEditListener=exports.applyPropOverrides=exports.setPropOverrides=void 0;var e=require("seer"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return s(e)||n(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var o=function e(t,r,a){t&&(r.length>1?e(t[r[0]],r.slice(1),a):t[r[0]]=a)},d=new Map,u=exports.setPropOverrides=function(e,r,a){t.default.isReady()&&(d.has(e)||d.set(e,new Map),d.get(e).set(r,a))},l=exports.applyPropOverrides=function(e){if(t.default.isReady()&&e.id){var r=d.get(e.id);r&&r.forEach(function(t,r){o(e,r,t),"data"===r[0]&&(e.data=a(e.data))})}},p=exports.layerEditListener=function(e){t.default.isReady()&&t.default.listenFor("deck.gl",e)},c=exports.seerInitListener=function(e){t.default.isReady()&&t.default.listenFor("init",e)},f=exports.initLayerInSeer=function(e){if(t.default.isReady()&&e){var r=[e.constructor.layerName];t.default.listItem("deck.gl",e.id,{badges:r,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parentLayer?e.parentLayer.id:void 0})}},y=exports.updateLayerInSeer=function(e){if(t.default.isReady()&&!t.default.throttle("deck.gl:".concat(e.id),1e3)){var r=m(e);t.default.multiUpdate("deck.gl",e.id,r)}},g=exports.removeLayerInSeer=function(e){t.default.isReady()&&e&&t.default.deleteItem("deck.gl",e)};function m(e){var t=[{path:"objects.props",data:e.props}],r=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var a=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:a}),r.push(e.getAttributeManager().stats.getTimeString())}if(e.state.model){e.state.model.timerQueryEnabled=!0;var i=e.state.model.stats.lastFrameTime;i&&r.push("".concat((1e3*i).toFixed(0),"μs"))}}return t.push({path:"badges",data:r}),t}
},{"seer":517}],295:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};
},{}],334:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=c;var e=require("../utils/assert"),t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return o(e)||i(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var n=[],r=!0,a=!1,u=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,u=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw u}}return n}function o(e){if(Array.isArray(e))return e}var l={boolean:{validate:function(e,t){return!0}},number:{validateType:function(e,t){return"value"in t&&(!("max"in t)||Number.isFinite(t.max))&&(!("min"in t)||Number.isFinite(t.min))},validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}}};function c(e){for(var t={},n={},r=Object.entries(e),u=0;u<r.length;u++){var i=a(r[u],2),o=i[0],l=s(o,i[1]);t[o]=l,n[o]=l.value}return{propTypes:t,defaultProps:n}}function s(e,t){switch(v(t)){case"object":return m(t=f(e,t));case"array":return y(e,t);case"boolean":return{name:e,type:"boolean",value:t};case"number":return p(e,t);case"function":return{name:e,type:"function",value:t};default:return{name:e,type:"unknown",value:t}}}function y(e,t){return!/color/i.test(e)||3!==t.length&&4!==t.length?{name:e,type:"array",value:t}:{name:e,type:"color",value:t}}function f(e,t){return"type"in t?Object.assign({name:e},t):"value"in t?Object.assign({name:e,type:v(t.value)},t):{name:e,type:"object",value:t}}function m(e){var n=e.type,r=(l[n]||{}).typeValidator;return r&&(0,t.default)(r(e),"Illegal prop type"),e}function p(e,t){var n=/radius|scale|width|height|pixel|size|miter/i.test(e)&&/^((?!scale).)*$/.test(e)?100:1;return{name:e,type:"number",max:Math.max(t,n),min:Math.min(t,0),value:t}}function v(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":null===e?"null":r(e)}
},{"../utils/assert":292}],298:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EMPTY_ARRAY=void 0,exports.createProps=s;var e=require("../lib/seer-integration"),r=require("../utils/log"),t=o(r),a=require("./prop-types");function o(e){return e&&e.__esModule?e:{default:e}}var p=exports.EMPTY_ARRAY=Object.freeze([]);function s(){for(var r=l(this.constructor).defaultProps,t=Object.create(r,{_layer:{enumerable:!1,value:this},_asyncProps:{enumerable:!1,value:{}}}),a=0;a<arguments.length;++a)Object.assign(t,arguments[a]);return t.data=t.data||p,(0,e.applyPropOverrides)(t),Object.freeze(t),t}function n(e,r){return Object.prototype.hasOwnProperty.call(e,r)&&e[r]}function u(e){var r=n(e,"layerName");return r||t.default.once(0,"".concat(e.name,".layerName not specified")),r||e.name}function l(e){var r=n(e,"_mergedDefaultProps");return r?{defaultProps:r,propTypes:n(e,"_propTypes")}:i(e)}function i(e){var r=e.prototype;if(!r)return{defaultProps:{}};var t=Object.getPrototypeOf(e),o=r&&l(t)||null,p=n(e,"defaultProps")||{},s=(0,a.parsePropTypes)(p),u=Object.assign({},o&&o.propTypes,s.propTypes),i=c(s.defaultProps,o&&o.defaultProps,u,e);return e._mergedDefaultProps=i,e._propTypes=u,{propTypes:u,defaultProps:i}}function c(e,r,t,a){var o=Object.create(null);Object.assign(o,r,e);var p={},s=u(a);return delete e.id,Object.assign(p,{id:{configurable:!1,writable:!0,value:s}}),Object.defineProperties(o,p),o}
},{"../lib/seer-integration":297,"../utils/log":209,"./prop-types":334}],299:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diffProps=e,exports.compareProps=a;var r=require("../utils/assert"),n=o(r);function o(r){return r&&r.__esModule?r:{default:r}}function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function e(r,n){var o=a({newProps:r,oldProps:n,ignoreProps:{data:null,updateTriggers:null}}),t=i(r,n),e=!1;return t||(e=l(r,n)),{dataChanged:t,propsChanged:o,updateTriggersChanged:e}}function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.newProps,e=r.oldProps,a=r.ignoreProps,i=void 0===a?{}:a,l=r.shallowCompareProps,u=void 0===l?{}:l,c=r.triggerName,d=void 0===c?"props":c;if((0,n.default)(void 0!==e&&void 0!==o,"compareProps args"),e===o)return null;if("object"!==t(o)||null===o)return"".concat(d," changed shallowly");if("object"!==t(e)||null===e)return"".concat(d," changed shallowly");for(var f in e)if(!(f in i)){if(!(f in o))return"".concat(d,".").concat(f," dropped: ").concat(e[f]," -> undefined");var p=o[f]&&e[f]&&o[f].equals;if(p&&!p.call(o[f],e[f]))return"".concat(d,".").concat(f," changed deeply: ").concat(e[f]," -> ").concat(o[f]);if(f in u)"function"===t(o[f])&&"function"==typeof e[f]&&(p=!0);if(!p&&e[f]!==o[f])return"".concat(d,".").concat(f," changed shallowly: ").concat(e[f]," -> ").concat(o[f])}for(var s in o)if(!(s in i||s in e))return"".concat(d,".").concat(s," added: undefined -> ").concat(o[s]);return null}function i(r,n){if(null===n)return"oldProps is null, initial diff";var o=r.dataComparator;if(o){if(!o(r.data,n.data))return"Data comparator detected a change"}else if(r.data!==n.data)return"A new data container was supplied";return null}function l(r,n){if(null===n)return"oldProps is null, initial diff";if("all"in r.updateTriggers&&u(n,r,"all"))return{all:!0};var o={},t=!1;for(var e in r.updateTriggers){if("all"!==e)u(n,r,e)&&(o[e]=!0,t=o)}return t}function u(r,n,o){var t=r.updateTriggers[o]||{};return a({oldProps:n.updateTriggers[o]||{},newProps:t,triggerName:o})}
},{"../utils/assert":292}],211:[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.count=e;var n="count(): argument not an object",o="count(): argument not a container";function e(t){if(!u(t))throw new Error(n);if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(r(t))return Object.keys(t).length;throw new Error(o)}function r(n){return null!==n&&"object"===t(n)&&n.constructor===Object}function u(n){return null!==n&&"object"===t(n)}
},{}],300:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/assert"),t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function r(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}var s=function e(n){var a=n.attributeManager;r(this,e),(0,t.default)(a),this.attributeManager=a,this.model=null,this.needsRedraw=!0,this.subLayers=null};exports.default=s;
},{"../utils/assert":292}],182:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./constants"),e=require("./attribute-manager"),a=f(e),r=require("./seer-integration"),n=require("../lifecycle/constants"),i=require("../lifecycle/create-props"),s=require("../lifecycle/props"),o=require("../utils/count"),l=require("../utils/log"),u=f(l),d=require("luma.gl"),c=require("../utils/assert"),h=f(c),g=require("./layer-state"),p=f(g);function f(t){return t&&t.__esModule?t:{default:t}}function v(t,e){return m(t)||C(t,e)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function C(t,e){var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!e||a.length!==e);r=!0);}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}function m(t){if(Array.isArray(t))return t}function k(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function S(t,e){if(!k(t,e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,a){return e&&w(t.prototype,e),a&&w(t,a),t}var x=1,A=Object.freeze({}),P=function(){},T={dataComparator:null,updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:P,onClick:P,coordinateSystem:t.COORDINATE_SYSTEM.LNGLAT,coordinateOrigin:[0,0,0],parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:function(t){return[0,100*-t.layerIndex]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:[0,0,128,128]},M=0,_=function(){function t(){S(this,t),this.props=i.createProps.apply(this,arguments),this.id=this.props.id,this.count=M++,this.lifecycle=n.LIFECYCLE.NO_STATE,this.parentLayer=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return b(t,[{key:"clone",value:function(t){return new this.constructor(Object.assign({},this.props,t))}},{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t;return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var t=this.props.data,e=!0,a=!1,r=void 0;try{for(var n,i=t[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){return n.value}}catch(t){a=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}return null}},{key:"project",value:function(t){var e=this.context.viewport;return(0,h.default)(Array.isArray(t)),e.project(t)}},{key:"unproject",value:function(t){var e=this.context.viewport;return(0,h.default)(Array.isArray(t)),e.unproject(t)}},{key:"projectFlat",value:function(t){var e=this.context.viewport;return(0,h.default)(Array.isArray(t)),e.projectFlat(t)}},{key:"unprojectFlat",value:function(t){var e=this.context.viewport;return(0,h.default)(Array.isArray(t)),e.unprojectFlat(t)}},{key:"screenToDevicePixels",value:function(t){return u.default.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),t*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){return(0,h.default)(0==(t+1>>24&255),"index out of picking color range"),[t+1&255,t+1>>8&255,t+1>>8>>8&255]}},{key:"decodePickingColor",value:function(t){(0,h.default)(k(t,Uint8Array));var e=v(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,a=this.getAttributeManager();e.dataChanged&&a&&a.invalidateAll()}},{key:"finalizeState",value:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=this.getModels()[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,a=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}}},{key:"draw",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.draw(t)}}catch(t){a=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,a=(t.mode,e.index);return a>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[a]),e}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.getAttributeManager();a&&("all"===t?(u.default.log(x,"updateTriggers invalidating all attributes: ".concat(e))(),a.invalidateAll()):(u.default.log(x,"updateTriggers invalidating attribute ".concat(t,": ").concat(e))(),a.invalidate(t)))}},{key:"updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var a=this.getNumInstances(t);e.update({data:t.data,numInstances:a,props:t,transitions:t.transitions,buffers:t,context:this,ignoreUnknownAttributes:!0});var r=this.getSingleModel();if(r){var n=e.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(n)}}}},{key:"updateTransition",value:function(){var t=this.getSingleModel(),e=this.getAttributeManager(),a=e&&e.updateTransition();t&&a&&t.setAttributes(e.getChangedAttributes({transition:!0}))}},{key:"calculateInstancePickingColors",value:function(t,e){for(var a=e.numInstances,r=t.value,n=t.size,i=0;i<a;i++){var s=this.encodePickingColor(i);r[i*n+0]=s[0],r[i*n+1]=s[1],r[i*n+2]=s[2]}}},{key:"getNumInstances",value:function(t){if(t=t||this.props,this.state&&void 0!==this.state.numInstances)return this.state.numInstances;if(void 0!==t.numInstances)return t.numInstances;var e=this.props.data;return(0,o.count)(e)}},{key:"_initialize",value:function(){(0,h.default)(this.context.gl),this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this.internalState.oldProps=A,this._updateState();var t=this.getSingleModel();t&&(t.id=this.props.id,t.program.id="".concat(this.props.id,"-program"),t.geometry.id="".concat(this.props.id,"-geometry"),t.setAttributes(this.getAttributeManager().getAttributes())),this.clearChangeFlags(),this.internalState.oldProps=null}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState(),this.clearChangeFlags(),this.internalState.oldProps=null}},{key:"_updateState",value:function(){var t=this._getUpdateParams();this.updateState(t),this.isComposite&&this._renderLayers(),this.updateAttributes(this.props),this._updateBaseUniforms(),this._updateModuleSettings(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())}},{key:"_finalize",value:function(){(0,h.default)(this.internalState&&this.state),this.finalizeState(this.context),(0,r.removeLayerInSeer)(this.id)}},{key:"drawLayer",value:function(t){var e=this,a=t.moduleParameters,r=void 0===a?null:a,n=t.uniforms,i=void 0===n?{}:n,s=t.parameters,o=void 0===s?{}:s;if(i.picking_uActive||this.updateTransition(),r){var l=!0,u=!1,c=void 0;try{for(var h,g=this.getModels()[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){h.value.updateModuleSettings(r)}}catch(t){u=!0,c=t}finally{try{l||null==g.return||g.return()}finally{if(u)throw c}}}var p=this.props.getPolygonOffset,f=p&&p(i)||[0,0];o.polygonOffset=f,(0,d.withParameters)(this.context.gl,o,function(){e.draw({moduleParameters:r,uniforms:i,parameters:o,context:e.context})})}},{key:"pickLayer",value:function(t){return this.getPickingInfo(t)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var a=this.internalState.changeFlags;t.dataChanged&&!a.dataChanged&&(a.dataChanged=t.dataChanged,u.default.log(x+1,function(){return"dataChanged: ".concat(t.dataChanged," in ").concat(e.id)})()),t.updateTriggersChanged&&!a.updateTriggersChanged&&(a.updateTriggersChanged=a.updateTriggersChanged&&t.updateTriggersChanged?Object.assign({},t.updateTriggersChanged,a.updateTriggersChanged):t.updateTriggersChanged||a.updateTriggersChanged,u.default.log(x+1,function(){return"updateTriggersChanged: "+"".concat(Object.keys(t.updateTriggersChanged).join(", ")," in ").concat(e.id)})()),t.propsChanged&&!a.propsChanged&&(a.propsChanged=t.propsChanged,u.default.log(x+1,function(){return"propsChanged: ".concat(t.propsChanged," in ").concat(e.id)})()),t.viewportChanged&&!a.viewportChanged&&(a.viewportChanged=t.viewportChanged,u.default.log(x+2,function(){return"viewportChanged: ".concat(t.viewportChanged," in ").concat(e.id)})());var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged;a.propsOrDataChanged=a.propsOrDataChanged||r,a.somethingChanged=a.somethingChanged||r||t.viewportChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var t=this.internalState.changeFlags;return"".concat(t.dataChanged?"data ":"").concat(t.propsChanged?"props ":"").concat(t.updateTriggersChanged?"triggers ":"").concat(t.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(t,e){var a=(0,s.diffProps)(t,e);if(a.updateTriggersChanged)for(var r in a.updateTriggersChanged)a.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(a)}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.oldProps||this.props,context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t;var a=this.getAttributeManager(),r=a&&a.getNeedsRedraw({clearRedrawFlags:t});e=e||r;var n=!0,i=!1,s=void 0;try{for(var o,l=this.getModels()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,d=u.getNeedsRedraw({clearRedrawFlags:t});d&&"string"!=typeof d&&(d="model ".concat(u.id)),e=e||d}}catch(t){i=!0,s=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}return e}},{key:"_initState",value:function(){(0,h.default)(!this.internalState&&!this.state);var t=new a.default(this.context.gl,{id:this.props.id,stats:this.context.stats});t.addInstanced({instancePickingColors:{type:d.GL.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new p.default({attributeManager:t}),this.state={},this.state.attributeManager=this.getAttributeManager()}},{key:"_transferState",value:function(t){var e=t.state,a=t.internalState,r=t.props;if((0,h.default)(e&&a),a.oldProps=r,this!==t){e.layer=this,this.state=e,this.internalState=a;var n=!0,i=!1,s=void 0;try{for(var o,l=this.getModels()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){o.value.userData.layer=this}}catch(t){i=!0,s=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}this.diffProps(this.props,r)}}},{key:"_activeUpdateTrigger",value:function(t){this.invalidateAttribute(t)}},{key:"_checkRequiredProp",value:function(t,e){var a=this.props[t];if(void 0===a)throw new Error("Property ".concat(t," undefined in layer ").concat(this));if(e&&!e(a))throw new Error("Bad property ".concat(t," in layer ").concat(this))}},{key:"_updateBaseUniforms",value:function(){var t={opacity:Math.pow(this.props.opacity,1/2.2),ONE:1},e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.setUniforms(t)}}catch(t){a=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}this.setNeedsRedraw()}},{key:"_updateModuleSettings",value:function(){var t={pickingHighlightColor:this.props.highlightColor},e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.updateModuleSettings(t)}}catch(t){a=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"setUniforms",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.setUniforms(t)}}catch(t){a=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}this.setNeedsRedraw(),u.default.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"stats",get:function(){return this.internalState.stats}}]),t}();exports.default=_,_.layerName="Layer",_.defaultProps=T;
},{"./constants":178,"./attribute-manager":181,"./seer-integration":297,"../lifecycle/constants":295,"../lifecycle/create-props":298,"../lifecycle/props":299,"../utils/count":211,"../utils/log":209,"luma.gl":317,"../utils/assert":292,"./layer-state":300}],293:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPixelRatio=void 0,exports.drawLayers=d,exports.drawPickingBuffer=u;var e=require("luma.gl"),i=require("../utils/log"),r=a(i),t=require("../utils/assert"),o=a(t);function a(e){return e&&e.__esModule?e:{default:e}}var s=2,n=0,l=exports.getPixelRatio=function(e){var i=e.useDevicePixels;return(0,o.default)("boolean"==typeof i,"Invalid useDevicePixels"),i&&"undefined"!=typeof window?window.devicePixelRatio:1},c=function(e,i){var r=i.viewport,t=i.pixelRatio,o=e.canvas?e.canvas.clientHeight:100,a=r;return[a.x*t,(o-a.y-a.height)*t,a.width*t,a.height*t]};function p(i,r){r.useDevicePixels;var t=i.drawingBufferWidth,o=i.drawingBufferHeight;(0,e.withParameters)(i,{viewport:[0,0,t,o]},function(){i.clear(e.GL.COLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT)})}function d(e,i){var r=i.layers,t=i.viewports,o=i.onViewportActive,a=i.useDevicePixels,s=i.drawPickingColors,n=void 0!==s&&s,l=i.deviceRect,c=void 0===l?null:l,d=i.parameters,u=void 0===d?{}:d,w=i.layerFilter,g=void 0===w?null:w,x=i.pass,b=void 0===x?"draw":x,P=i.redrawReason,y=void 0===P?"":P,C=i.stats;p(e,{useDevicePixels:a}),t.forEach(function(i,t){var s=f(i);o(s),v(e,{layers:r,viewport:s,useDevicePixels:a,drawPickingColors:n,deviceRect:c,parameters:u,layerFilter:g,pass:b,redrawReason:y,stats:C})})}function u(i,r){var t=r.layers,o=r.viewports,a=r.onViewportActive,s=r.useDevicePixels,n=r.pickingFBO,l=r.deviceRect,c=l.x,p=l.y,u=l.width,v=l.height,w=r.layerFilter,g=void 0===w?null:w,f=r.redrawReason,x=void 0===f?"":f;return(0,e.withParameters)(i,{framebuffer:n,scissorTest:!0,scissor:[c,p,u,v],clearColor:[0,0,0,0]},function(){d(i,{layers:t,viewports:o,onViewportActive:a,useDevicePixels:s,drawPickingColors:!0,layerFilter:g,pass:"picking",redrawReason:x,parameters:{blend:!0,blendFunc:[i.ONE,i.ZERO,i.CONSTANT_ALPHA,i.ZERO],blendEquation:i.FUNC_ADD,blendColor:[0,0,0,0]}})})}function v(i,r){var t=r.layers,o=r.viewport,a=r.useDevicePixels,s=r.drawPickingColors,p=void 0!==s&&s,d=(r.deviceRect,r.parameters),u=void 0===d?{}:d,v=r.layerFilter,f=r.pass,x=void 0===f?"draw":f,b=r.redrawReason,P=void 0===b?"":b,y=r.stats,C=l({useDevicePixels:a}),h=c(i,{viewport:o,pixelRatio:C}),R={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,e.setParameters)(i,u||{}),t.forEach(function(e,r){var t=e.props.visible;p&&(t=t&&e.props.pickable),t&&v&&(t=v({layer:e,viewport:o,isPicking:p})),t&&e.props.pickable&&R.pickableCount++,e.isComposite&&R.compositeCount++,t&&(e.isComposite||R.visibleCount++,w({gl:i,layer:e,layerIndex:r,drawPickingColors:p,pixelRatio:C,glViewport:h,parameters:u}))}),n++,g({renderStats:R,pass:x,redrawReason:P,stats:y})}function w(e){e.gl;var i=e.layer,r=e.layerIndex,t=e.drawPickingColors,o=e.pixelRatio,a=e.glViewport,s=e.parameters,n=Object.assign(Object.create(i.props),{viewport:i.context.viewport,pickingActive:t?1:0,devicePixelRatio:o}),l=Object.assign({},i.context.uniforms,{layerIndex:r}),c=Object.assign({},i.props.parameters||{},s);Object.assign(c,{viewport:a}),t?Object.assign(c,{blendColor:[0,0,0,(r+1)/255]}):Object.assign(n,x(i)),i.drawLayer({moduleParameters:n,uniforms:l,parameters:c})}function g(e){var i=e.renderStats,t=e.pass,o=e.redrawReason,a=e.stats;if(r.default.priority>=s){var l=i.totalCount,c=i.visibleCount,p=i.compositeCount,d=i.pickableCount,u=l-p-c,v="";v+="RENDER #".concat(n," ").concat(c," (of ").concat(l," layers) to ").concat(t," because ").concat(o," "),r.default.priority>s&&(v+="(".concat(u," hidden, ").concat(p," composite ").concat(d," pickable)")),r.default.log(s,v)(),a&&a.increment("redraw layers",c)}}function f(e){return e.viewport?e.viewport:e}function x(e){return Number.isInteger(e.props.highlightedObjectIndex)?{pickingSelectedColor:e.props.highlightedObjectIndex>=0?e.encodePickingColor(e.props.highlightedObjectIndex):null}:null}
},{"luma.gl":317,"../utils/log":209,"../utils/assert":292}],294:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pickObject=n,exports.pickVisibleObjects=d,exports.getClosestFromPickingBuffer=h;var e=require("./draw-layers"),i=require("../utils/log"),r=o(i),t=require("../utils/assert"),a=o(t);function o(e){return e&&e.__esModule?e:{default:e}}var c={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function n(i,r){var t=r.layers,a=r.viewports,o=r.x,n=r.y,d=r.radius,s=r.layerFilter,p=r.mode,f=r.onViewportActive,y=r.pickingFBO,k=r.lastPickedInfo,x=r.useDevicePixels,w=(0,e.getPixelRatio)({useDevicePixels:x}),g=Math.round(o*w),b=Math.round(i.canvas.height-n*w),P=Math.round(d*w),m=u({deviceX:g,deviceY:b,deviceRadius:P,deviceWidth:y.width,deviceHeight:y.height}),R=m&&l(i,{layers:t,viewports:a,onViewportActive:f,useDevicePixels:x,pickingFBO:y,deviceRect:m,layerFilter:s,redrawReason:p});return v({pickInfo:R&&h(i,{pickedColors:R,layers:t,deviceX:g,deviceY:b,deviceRadius:P,deviceRect:m})||c,lastPickedInfo:k,mode:p,layers:t,viewports:a,x:o,y:n,deviceX:g,deviceY:b,pixelRatio:w})}function d(i,r){var t=r.layers,a=r.viewports,o=r.x,c=r.y,n=r.width,d=r.height,s=r.mode,u=r.layerFilter,v=r.onViewportActive,p=r.pickingFBO,h=r.useDevicePixels,k=(0,e.getPixelRatio)({useDevicePixels:h}),x=Math.round(o*k),w=Math.round(i.canvas.height-c*k),g=Math.round((o+n)*k),b=Math.round(i.canvas.height-(c+d)*k),P=f(i,{pickedColors:l(i,{layers:t,viewports:a,onViewportActive:v,pickingFBO:p,useDevicePixels:h,deviceRect:{x:x,y:b,width:g-x,height:w-b},layerFilter:u,redrawReason:s}),layers:t}),m=new Map;return P.forEach(function(e){var i={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:o,y:c,width:n,height:d,pixelRatio:k};i=y({layer:e.pickedLayer,info:i,mode:s}),m.has(i.object)||m.set(i.object,i)}),Array.from(m.values())}function l(i,r){var t=r.layers,o=r.viewports,c=r.onViewportActive,n=r.useDevicePixels,d=r.pickingFBO,l=r.deviceRect,s=r.layerFilter,u=r.redrawReason;if((0,a.default)(l),(0,a.default)(Number.isFinite(l.width)&&l.width>0,"`width` must be > 0"),(0,a.default)(Number.isFinite(l.height)&&l.height>0,"`height` must be > 0"),t.filter(function(e){return e.isPickable()}).length<1)return null;(0,e.drawPickingBuffer)(i,{layers:t,viewports:o,onViewportActive:c,useDevicePixels:n,pickingFBO:d,deviceRect:l,layerFilter:s,redrawReason:u});var v=l.x,p=l.y,h=l.width,f=l.height,y=new Uint8Array(h*f*4);return d.readPixels({x:v,y:p,width:h,height:f,pixelArray:y}),y}function s(e){return e.viewports[0]}function u(e){var i=e.deviceX,r=e.deviceY,t=e.deviceRadius,a=e.deviceWidth,o=e.deviceHeight;if(!(i>=0&&r>=0&&i<a&&r<o))return null;var c=Math.max(0,i-t),n=Math.max(0,r-t);return{x:c,y:n,width:Math.min(a,i+t)-c+1,height:Math.min(o,r+t)-n+1}}function v(e){var i=e.pickInfo,r=e.lastPickedInfo,t=e.mode,a=e.layers,o=e.viewports,c=e.x,n=e.y,d=e.deviceX,l=e.deviceY,u=e.pixelRatio,v=i.pickedColor,h=i.pickedLayer,f=i.pickedObjectIndex,k=h?[h]:[];if("hover"===t){var x=r.index,w=r.layerId,g=h&&h.props.id;if(g!==w||f!==x){if(g!==w){var b=a.find(function(e){return e.props.id===w});b&&k.unshift(b)}r.layerId=g,r.index=f}}var P={color:null,layer:null,index:-1,picked:!1,x:c,y:n,pixel:[c,n],lngLat:s({viewports:o}).unproject([c,n]),devicePixel:[d,l],pixelRatio:u},m=new Map;return k.forEach(function(e){var i=Object.assign({},P);e===h&&(i.color=v,i.index=f,i.picked=!0),(i=y({layer:e,info:i,mode:t}))&&m.set(i.layer.id,i);var r={pickingSelectedColor:e.props.autoHighlight&&h===e?v:null},a=!0,o=!1,c=void 0;try{for(var n,d=e.getModels()[Symbol.iterator]();!(a=(n=d.next()).done);a=!0){n.value.updateModuleSettings(r)}}catch(e){o=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(o)throw c}}}),p(m,t)}function p(e,i){var r=[];return e.forEach(function(e){var t=!1;switch(i){case"click":t=e.layer.props.onClick(e);break;case"hover":t=e.layer.props.onHover(e);break;case"query":break;default:throw new Error("unknown pick type")}t||r.push(e)}),r}function h(e,i){var t=i.pickedColors,o=i.layers,n=i.deviceX,d=i.deviceY,l=i.deviceRadius,s=i.deviceRect;(0,a.default)(t);for(var u=s.x,v=s.y,p=s.width,h=s.height,f=l*l,y=-1,k=0,x=0;x<h;x++){var w=x+v-d,g=w*w;if(g>f)k+=4*p;else for(var b=0;b<p;b++){if(t[k+3]-1>=0){var P=b+u-n,m=P*P+g;m<=f&&(f=m,y=k)}k+=4}}if(y>=0){var R=t[y+3]-1,M=t.slice(y,y+4),F=o[R];if(F)return{pickedColor:M,pickedLayer:F,pickedObjectIndex:F.decodePickingColor(M)};r.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}return c}function f(e,i){var t=i.pickedColors,a=i.layers,o=new Map;if(t)for(var c=0;c<t.length;c+=4){var n=t[c+3]-1;if(n>=0){var d=t.slice(c,c+4),l=d.join(",");if(!o.has(l)){var s=a[n];s?o.set(l,{pickedColor:d,pickedLayer:s,pickedObjectIndex:s.decodePickingColor(d)}):r.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}function y(e){for(var i=e.layer,r=e.info,t=e.mode;i&&r;){var a=r.layer||i;r.layer=i,r=i.pickLayer({info:r,mode:t,sourceLayer:a}),i=i.parentLayer}return r}
},{"./draw-layers":293,"../utils/log":209,"../utils/assert":292}],296:[function(require,module,exports) {
"use strict";function e(r,t){return Object.keys(r).some(function(s){return Array.isArray(r[s])&&Array.isArray(t[s])?e(r[s],t[s]):r[s]===t[s]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=e;
},{}],438:[function(require,module,exports) {
function e(e,n,o){return e[0]=n[0]*o[0],e[1]=n[1]*o[1],e[2]=n[2]*o[2],e[3]=n[3]*o[3],e}module.exports=e;
},{}],275:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformVector=s,exports.createMat4=c,exports.extractCameraVectors=f,exports.mod=l,exports.lerp=p,exports.createOrthographicMatrix=h,exports.getProjectionParameters=v;var t=require("gl-vec4/multiply"),r=u(t),e=require("gl-vec4/transformMat4"),a=u(e),i=require("../utils/assert"),n=u(i),o=require("math.gl");function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)return null;var i=(0,a.default)([0,0,0,0],e,t),n=1/i[3];return(0,r.default)(i,i,[n,n,n,n]),i}function c(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function f(t){var r=t.viewMatrix,e=t.viewMatrixInverse;return{eye:[e[12],e[13],e[14]],direction:[r[2],r[6],r[10]],up:[r[1],r[5],r[9]]}}function l(t,r){(0,n.default)(Number.isFinite(t)&&Number.isFinite(r));var e=t%r;return e<0?r+e:e}function p(t,r,e){return Array.isArray(t)?t.map(function(t,a){return p(t,r[a],e)}):e*r+(1-e)*t}function h(t){var r=t.fovY,e=t.aspect,a=t.focalDistance,i=t.near,n=t.far,u=r/2,s=a*Math.tan(u),c=s*e;return(new o.Matrix4).ortho({left:-c,right:c,bottom:-s,top:s,near:i,far:n})}function v(t){var r=t.width,e=t.height,a=t.altitude,i=void 0===a?1.5:a,n=t.pitch,u=void 0===n?0:n,s=t.farZMultiplier,c=void 0===s?1:s,f=(0,o.radians)(u),l=Math.atan(.5/i),p=Math.sin(l)*i/Math.sin(Math.PI/2-f-l),h=Math.cos(Math.PI/2-f)*p+i;return{fov:2*Math.atan(e/2/i),aspect:r/e,focalDistance:i,near:.1,far:h*c}}
},{"gl-vec4/multiply":438,"gl-vec4/transformMat4":158,"../utils/assert":292,"math.gl":132}],184:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../utils/log"),e=f(t),i=require("../utils/math-utils"),r=require("math.gl"),a=require("gl-mat4/scale"),n=f(a),s=require("gl-mat4/translate"),o=f(s),l=require("gl-mat4/multiply"),c=f(l),h=require("gl-mat4/invert"),u=f(h),d=require("viewport-mercator-project"),v=require("../utils/assert"),p=f(v);function f(t){return t&&t.__esModule?t:{default:t}}function x(t,e){return m(t)||g(t,e)||M()}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){a=!0,n=t}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return i}function m(t){if(Array.isArray(t))return t}function w(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function y(t,e){if(!w(t,e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,i){return e&&j(t.prototype,e),i&&j(t,i),t}var b=Math.PI/180,F=(0,i.createMat4)(),k=[0,0,0],S={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},_=0,q="Illegal argument to Viewport",D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var i=e.id,a=void 0===i?null:i,n=e.x,s=void 0===n?0:n,o=e.y,l=void 0===o?0:o,c=e.width,h=void 0===c?1:c,u=e.height,v=void 0===u?1:u,p=e.viewMatrix,f=void 0===p?F:p,x=e.projectionMatrix,M=void 0===x?null:x,g=e.orthographic,m=void 0!==g&&g,w=e.fovyRadians,j=void 0===w?75*b:w,P=e.fovy,q=e.near,D=void 0===q?.1:q,N=e.far,L=void 0===N?1e3:N,U=e.focalDistance,I=void 0===U?1:U,O=e.longitude,T=void 0===O?null:O,V=e.latitude,z=void 0===V?null:V,C=e.zoom,G=void 0===C?null:C,R=e.position,A=void 0===R?null:R,E=e.modelMatrix,W=void 0===E?null:E,Z=e.distanceScales,B=void 0===Z?null:Z;this.id=a||this.constructor.displayName||"viewport",this.isGeospatial=Number.isFinite(z)&&Number.isFinite(T),this.x=s,this.y=l,this.width=h||1,this.height=v||1,this.zoom=G,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?(0,d.getMeterZoom)({latitude:z})+Math.log2(I):_),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?(0,d.getDistanceScales)({latitude:z,longitude:T,scale:this.scale}):B||S,this.focalDistance=I,this.distanceScales.metersPerPixel=new r.Vector3(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new r.Vector3(this.distanceScales.pixelsPerMeter),this.position=k,this.meterOffset=k,A&&(this.position=A,this.modelMatrix=W,this.meterOffset=W?W.transformVector(A):A),this.viewMatrixUncentered=f,this.isGeospatial?(this.center=(0,d.getWorldPosition)({longitude:T,latitude:z,scale:this.scale,distanceScales:this.distanceScales,meterOffset:this.meterOffset}),this.viewMatrix=(new r.Matrix4).multiplyRight(this.viewMatrixUncentered).scale([1,-1,1]).translate(new r.Vector3(this.center||k).negate())):(this.center=A,this.viewMatrix=f),this.projectionMatrix=M||this._createProjectionMatrix({orthographic:m,fovyRadians:j||P*b,aspect:this.width/this.height,focalDistance:I,near:D,far:L}),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return P(t,[{key:"equals",value:function(e){return!!w(e,t)&&(e.width===this.width&&e.height===this.height&&(0,r.equals)(e.projectionMatrix,this.projectionMatrix)&&(0,r.equals)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,i=void 0===e||e,r=x(t,3),a=r[0],n=r[1],s=r[2],o=void 0===s?0:s,l=x(this.projectFlat([a,n]),2),c=l[0],h=l[1],u=(0,d.worldToPixels)([c,h,o],this.pixelProjectionMatrix),v=x(u,2),p=v[0],f=v[1],M=i?f:this.height-f;return 2===t.length?[p,M]:[p,M,u[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.topLeft,r=void 0===i||i,a=e.targetZ,n=x(t,3),s=n[0],o=n[1],l=n[2],c=r?o:this.height-o,h=(0,d.pixelsToWorld)([s,c,l],this.pixelUnprojectionMatrix,a),u=x(this.unprojectFlat(h),2),v=u[0],p=u[1];return Number.isFinite(l)?[v,p,h[2]]:Number.isFinite(a)?[v,p,a]:[v,p]}},{key:"projectFlat",value:function(t){var e=x(t,2);e[0],e[1],arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._projectFlat.apply(this,arguments)}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._unprojectFlat.apply(this,arguments)}},{key:"_projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"_unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"getMercatorParams",value:function(){var t=this._addMetersToLngLat([this.longitude||0,this.latitude||0],this.meterOffset);return{longitude:t[0],latitude:t[1]}}},{key:"isMapSynched",value:function(){return!1}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(0,d.getDistanceScales)({longitude:t[0],latitude:t[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,e=void 0===t?null:t,i=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,a=this.pixelUnprojectionMatrix;return e&&(i=(0,c.default)([],this.viewProjectionMatrix,e),r=(0,c.default)([],this.pixelProjectionMatrix,e),a=(0,u.default)([],r)),Object.assign({modelViewProjectionMatrix:i,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:a,width:this.width,height:this.height,scale:this.scale})}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(t,e){var i=x(t,3),r=i[0],a=i[1],n=i[2],s=void 0===n?0:n,o=x(this._metersToLngLatDelta(e),3),l=o[0],c=o[1],h=o[2],u=void 0===h?0:h;return 2===t.length?[r+l,a+c]:[r+l,a+c,s+u]}},{key:"_metersToLngLatDelta",value:function(t){var e=x(t,3),i=e[0],r=e[1],a=e[2],n=void 0===a?0:a;(0,p.default)(Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(n),q);var s=this.distanceScales,o=s.pixelsPerMeter,l=s.degreesPerPixel,c=i*o[0]*l[0],h=r*o[1]*l[1];return 2===t.length?[c,h]:[c,h,n]}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,i=t.fovyRadians,a=t.aspect,n=t.focalDistance,s=t.near,o=t.far;return(0,p.default)(Number.isFinite(i)),e?(new r.Matrix4).orthographic({fovy:i,aspect:a,focalDistance:n,near:s,far:o}):(new r.Matrix4).perspective({fovy:i,aspect:a,near:s,far:o})}},{key:"_initPixelMatrices",value:function(){var t=(0,i.createMat4)();(0,c.default)(t,t,this.projectionMatrix),(0,c.default)(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=(0,u.default)([],this.viewMatrix)||this.viewMatrix;var r=(0,i.extractCameraVectors)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),a=r.eye,s=r.direction,l=r.up;this.cameraPosition=a,this.cameraDirection=s,this.cameraUp=l;var h=(0,i.createMat4)();(0,n.default)(h,h,[this.width/2,-this.height/2,1]),(0,o.default)(h,h,[1,-1,0]),(0,c.default)(h,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=(0,u.default)((0,i.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||e.default.warn("Pixel project matrix not invertible")()}}]),t}();exports.default=D,D.displayName="Viewport";
},{"../utils/log":209,"../utils/math-utils":275,"math.gl":132,"gl-mat4/scale":137,"gl-mat4/translate":138,"gl-mat4/multiply":147,"gl-mat4/invert":148,"viewport-mercator-project":97,"../utils/assert":292}],303:[function(require,module,exports) {
"use strict";function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePosition=e,exports.getPosition=r;var o=/([0-9]+\.?[0-9]*)(%|px)/;function e(e){switch(t(e)){case"number":return{position:e,relative:!1};case"string":var r=e.match(o);if(r&&r.length>=3){var n="%"===r[2],i=parseFloat(r[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function r(t,o){return t.relative?Math.round(t.position*o):t.position}
},{}],188:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../viewports/viewport"),e=r(t),i=require("../utils/positions"),n=require("../utils/deep-equal"),s=require("../utils/assert"),o=r(s);function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function h(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}var v=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,t);var n=i.id,s=void 0===n?null:n,r=i.x,u=void 0===r?0:r,l=i.y,v=void 0===l?0:l,d=i.width,p=void 0===d?"100%":d,c=i.height,f=void 0===c?"100%":c,w=i.projectionMatrix,y=void 0===w?null:w,g=i.fovy,_=void 0===g?75:g,b=i.near,m=void 0===b?.1:b,x=i.far,q=void 0===x?1e3:x,I=i.modelMatrix,P=void 0===I?null:I,j=i.viewportInstance,k=void 0===j?null:j,M=i.type,O=void 0===M?e.default:M;(0,o.default)(!k||a(k,e.default)),this.viewportInstance=k,this.id=s||this.constructor.displayName||"view",this.type=O,this.props=Object.assign({},i,{projectionMatrix:y,fovy:_,near:m,far:q,modelMatrix:P}),this._parseDimensions({x:u,y:v,width:p,height:f}),this.equals=this.equals.bind(this),Object.seal(this)}return l(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):(0,n.deepEqual)(this,t))}},{key:"makeViewport",value:function(t){var e=t.width,i=t.height,n=t.viewState;if(this.viewportInstance)return this.viewportInstance;var s=this.getDimensions({width:e,height:i}),o=Object.assign({viewState:n},n,this.props,s);return this._getViewport(o)}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:(0,i.getPosition)(this._x,e),y:(0,i.getPosition)(this._y,n),width:(0,i.getPosition)(this._width,e),height:(0,i.getPosition)(this._height,n)}}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,s=t.width,o=t.height;this._x=(0,i.parsePosition)(e),this._y=(0,i.parsePosition)(n),this._width=(0,i.parsePosition)(s),this._height=(0,i.parsePosition)(o)}}]),t}();exports.default=v;
},{"../viewports/viewport":184,"../utils/positions":303,"../utils/deep-equal":296,"../utils/assert":292}],185:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./viewport"),t=s(e),r=require("viewport-mercator-project"),i=require("gl-vec2/add"),n=s(i),o=require("gl-vec2/negate"),a=s(o),l=require("../utils/assert"),u=s(l);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return g(e)||p(e,t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}return r}function g(e){if(Array.isArray(e))return e}function v(e,t){if(!c(e,t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M="Illegal argument to WebMercatorViewport",T=function(e){function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,i);var n=t.latitude,o=void 0===n?0:n,a=t.longitude,l=void 0===a?0:a,u=t.zoom,s=void 0===u?11:u,c=t.pitch,d=void 0===c?0:c,f=t.bearing,h=void 0===f?0:f,p=t.farZMultiplier,g=void 0===p?10:p,y=t.width,b=t.height,L=t.altitude,M=void 0===L?1.5:L;y=y||1,b=b||1,M=Math.max(.75,M);var T=(0,r.getProjectionMatrix)({width:y,height:b,pitch:d,altitude:M,farZMultiplier:g}),x=(0,r.getViewMatrix)({height:b,pitch:d,bearing:h,altitude:M});return(e=m(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,Object.assign({},t,{position:t.position&&[t.position[0],t.position[1],0],width:y,height:b,viewMatrix:x,longitude:l,latitude:o,zoom:s,projectionMatrix:T,focalDistance:1})))).latitude=o,e.longitude=l,e.zoom=s,e.pitch=d,e.bearing=h,e.altitude=M,e.metersToLngLatDelta=e.metersToLngLatDelta.bind(w(e)),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind(w(e)),e.addMetersToLngLat=e.addMetersToLngLat.bind(w(e)),Object.freeze(w(e)),e}return L(i,t.default),b(i,[{key:"metersToLngLatDelta",value:function(e){var t=f(e,3),r=t[0],i=t[1],n=t[2],o=void 0===n?0:n;(0,u.default)(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o),M);var a=this.distanceScales,l=a.pixelsPerMeter,s=a.degreesPerPixel,c=r*l[0]*s[0],d=i*l[1]*s[1];return 2===e.length?[c,d]:[c,d,o]}},{key:"lngLatDeltaToMeters",value:function(e){var t=f(e,3),r=t[0],i=t[1],n=t[2],o=void 0===n?0:n;(0,u.default)(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o),M);var a=this.distanceScales,l=a.pixelsPerDegree,s=a.metersPerPixel,c=r*l[0]*s[0],d=i*l[1]*s[1];return 2===e.length?[c,d]:[c,d,o]}},{key:"addMetersToLngLat",value:function(e,t){var r=f(e,3),i=r[0],n=r[1],o=r[2],a=void 0===o?0:o,l=f(this.metersToLngLatDelta(t),3),u=l[0],s=l[1],c=l[2],d=void 0===c?0:c;return 2===e.length?[i+u,n+s]:[i+u,n+s,a+d]}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,i=e.pos,o=(0,r.pixelsToWorld)(i,this.pixelUnprojectionMatrix),l=(0,r.lngLatToWorld)(t,this.scale),u=(0,n.default)([],l,(0,a.default)([],o)),s=(0,n.default)([],this.center,u);return(0,r.worldToLngLat)(s,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,o=this.height,a=(0,r.fitBounds)(Object.assign({width:n,height:o,bounds:e},t));return new i({width:n,height:o,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}},{key:"isMapSynched",value:function(){var e=60,t=40,r=this.pitch,i=this.zoom;return r<=e+1e-6&&i<=t+1e-6}},{key:"_projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,r.lngLatToWorld)(e,t)}},{key:"_unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,r.worldToLngLat)(e,t)}}]),i}();exports.default=T,T.displayName="WebMercatorViewport";
},{"./viewport":184,"viewport-mercator-project":97,"gl-vec2/add":135,"gl-vec2/negate":136,"../utils/assert":292}],189:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=r(e),o=require("../viewports/web-mercator-viewport"),n=r(o);function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function o(e){return f(this,o),c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign({},e,{type:n.default})))}return a(o,t.default),o}();exports.default=s,s.displayName="MapView";
},{"./view":188,"../viewports/web-mercator-viewport":185}],215:[function(require,module,exports) {
"use strict";function r(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.filter,n=void 0===i?function(){return!0}:i,o=e.map,s=void 0===o?function(r){return r}:o,u=e.result,a=void 0===u?[]:u;return Array.isArray(r)?t(r,n,s,a):n(r)?[s(r)]:[]}function t(r,e,i,n){for(var o=-1;++o<r.length;){var s=r[o];Array.isArray(s)?t(s,e,i,n):e(s)&&n.push(i(s))}return n}function e(r){for(var t=0,i=-1;++i<r.length;){var n=r[i];Array.isArray(n)||ArrayBuffer.isView(n)?t+=e(n):t++}return t}function i(r){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.result,n=void 0===e?[]:e,o=t.dimensions,s=void 0===o?3:o,u=-1,a=0;++u<r.length;){var f=r[u];Array.isArray(f)||ArrayBuffer.isView(f)?i(f,{result:n,dimensions:s}):a<s&&(n.push(f),a++)}return a>0&&a<s&&n.push(0),n}function n(r){for(var t=r.target,e=r.source,i=r.start,n=void 0===i?0:i,o=r.count,s=void 0===o?1:o,u=e.length,a=s*u,f=0,v=n;f<u;f++)t[v++]=e[f];for(;f<a;)f<a-f?(t.copyWithin(n+f,n,n+f),f*=2):(t.copyWithin(n+f,n,n+a-f),f=a);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=r,exports.countVertices=e,exports.flattenVertices=i,exports.fillArray=n;
},{}],180:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/assert"),t=b(e),i=require("luma.gl"),r=require("seer"),a=b(r),n=require("./layer"),s=b(n),l=require("./draw-layers"),o=require("./pick-layers"),u=require("../lifecycle/constants"),c=require("../utils/deep-equal"),d=require("../views/view"),h=b(d),v=require("../views/map-view"),y=b(v),f=require("../viewports/viewport"),w=b(f),g=require("../utils/log"),p=b(g),k=require("../utils/flatten"),_=require("probe.gl"),L=require("./seer-integration");function b(e){return e&&e.__esModule?e:{default:e}}function C(e){return S(e)||m(e)||x()}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function S(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function I(e,t){if(!V(e,t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,i){return t&&P(e.prototype,t),i&&P(e,i),e}function V(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var R=2,E=4,O={latitude:0,longitude:0,zoom:1},A=Object.seal({layerManager:null,gl:null,useDevicePixels:!0,stats:null,viewport:null,shaderCache:null,pickingFBO:null,lastPickedInfo:{index:-1,layerId:null},userData:{}}),M=function(e){return V(e,s.default)?"".concat(e):e?"invalid":"null"},N=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.eventManager,n=r.stats;I(this,e),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},A,{layerManager:this,gl:t,shaderCache:new i.ShaderCache({gl:t,_cachePrograms:!0}),stats:n||new _.Stats({id:"deck.gl"})}),this.width=100,this.height=100,this.views=[],this.viewState=O,this.viewsChanged=!0,this.viewports=[],this.layerFilter=null,this.drawPickingColors=!1,this._needsRedraw="Initial render",this._needsUpdate=!1,this._pickingRadius=0,this._eventManager=null,this._onLayerClick=null,this._onLayerHover=null,this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),(0,L.seerInitListener)(this._initSeer),(0,L.layerEditListener)(this._editSeer),a&&this._initEventHandling(a),this.setViews()}return F(e,[{key:"finalize",value:function(){a.default.removeListener(this._initSeer),a.default.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e;return this._checkIfNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,t=void 0===e?null:e;return t?this.layers.filter(function(e){return t.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"getViews",value:function(){return this.views}},{key:"getViewports",value:function(){return this._rebuildViewportsFromViews(),this.context.viewport=this.viewports[0],this.viewports}},{key:"setParameters",value:function(e){"eventManager"in e&&this._initEventHandling(e.eventManager),("pickingRadius"in e||"onLayerClick"in e||"onLayerHover"in e)&&this._setEventHandlingParameters(e),("width"in e||"height"in e)&&this.setSize(e.width,e.height),"views"in e&&this.setViews(e.views),"viewState"in e&&this.setViewState(e.viewState),"layers"in e&&this.setLayers(e.layers),"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in e&&e.drawPickingColors!==this.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this.setNeedsRedraw("drawPickingColors changed")),"userData"in e&&(this.context.userData=e.userData),"useDevicePixels"in e&&(this.context.useDevicePixels=e.useDevicePixels)}},{key:"setSize",value:function(e,i){(0,t.default)(Number.isFinite(e)&&Number.isFinite(i)),e===this.width&&i===this.height||(this.width=e,this.height=i,this.viewsChanged=!0,this.setNeedsRedraw("Size changed"))}},{key:"setViews",value:function(e){e&&0!==e.length||(e=[new y.default({id:"default-view"})]),e=(0,k.flatten)(e,{filter:Boolean}).map(function(e){return V(e,w.default)?new h.default({viewportInstance:e}):e});var t=this._diffViews(e,this.views);this.views=e,this.viewsChanged=this.viewsChanged||t}},{key:"setViewState",value:function(e){if(e){(0,c.deepEqual)(e,this.viewState);this.viewState=e,this.viewsChanged=!0}else p.default.warn("viewState is not valid")()}},{key:"setLayers",value:function(e){if(this.getViewports(),(0,t.default)(this.context.viewport,"LayerManager.updateLayers: viewport not set"),e===this.lastRenderedLayers)return p.default.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=(0,k.flatten)(e,{filter:Boolean});var i=!0,r=!1,a=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){n.value.context=this.context}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var l=this._updateLayers({oldLayers:this.layers,newLayers:e}),o=l.error,u=l.generatedLayers;if(this.layers=u,o)throw o;return this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(C(this.lastRenderedLayers)))}},{key:"drawLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pass,i=void 0===t?"render to screen":t,r=e.redrawReason,a=void 0===r?"unknown reason":r,n=this.drawPickingColors,s=this.context,o=s.gl,u=s.useDevicePixels;(0,l.drawLayers)(o,{layers:this.layers,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),useDevicePixels:u,drawPickingColors:n,pass:i,layerFilter:this.layerFilter,redrawReason:a})}},{key:"pickObject",value:function(e){var t=e.x,i=e.y,r=e.mode,a=e.radius,n=void 0===a?0:a,s=e.layerIds,l=e.layerFilter,u=this.context,c=u.gl,d=u.useDevicePixels,h=this.getLayers({layerIds:s});return(0,o.pickObject)(c,{x:t,y:i,radius:n,layers:h,mode:r,layerFilter:l,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:d})}},{key:"pickObjects",value:function(e){var t=e.x,i=e.y,r=e.width,a=e.height,n=e.layerIds,s=e.layerFilter,l=this.context,u=l.gl,c=l.useDevicePixels,d=this.getLayers({layerIds:n});return(0,o.pickVisibleObjects)(u,{x:t,y:i,width:r,height:a,layers:d,layerFilter:s,mode:"pickObjects",viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),useDevicePixels:c})}},{key:"setViewports",value:function(e){return p.default.deprecated("setViewport","setViews")(),this.setViews(e),this}},{key:"setViewport",value:function(e){return p.default.deprecated("setViewport","setViews")(),this.setViews([e]),this}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e&&(this._needsRedraw=!1);var i=!0,r=!1,a=void 0;try{for(var n,s=this.layers[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var l=n.value.getNeedsRedraw({clearRedrawFlags:e});t=t||l}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return t}},{key:"_rebuildViewportsFromViews",value:function(){if(this.viewsChanged){var e=this.width,i=this.height,r=this.views,a=this.viewState,n=r.map(function(t){return t.makeViewport({width:e,height:i,viewState:a})});this.setNeedsRedraw("Viewport(s) changed");var s=n[0];(0,t.default)(V(s,w.default),"Invalid viewport"),this.context.viewports=n,this._activateViewport(s),this.viewports=n,this.viewsChanged=!1}}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some(function(i,r){return!e[r].equals(t[r])})}},{key:"_initEventHandling",value:function(e){this._eventManager=e,this._eventManager.on({click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave})}},{key:"_setEventHandlingParameters",value:function(e){var t=e.pickingRadius,i=e.onLayerClick,r=e.onLayerHover;isNaN(t)||(this._pickingRadius=t),void 0!==i&&(this._onLayerClick=i),void 0!==r&&(this._onLayerHover=r),this._validateEventHandling()}},{key:"_activateViewport",value:function(e){var i=this.context.viewport;if(!i||!e.equals(i)){p.default.log(4,"Viewport",e)(),this.context.viewport=e;var r=!0,a=!1,n=void 0;try{for(var s,l=this.layers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var o=s.value;o.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(o)}}catch(e){a=!0,n=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw n}}}return(0,t.default)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function(){var e=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new i.Framebuffer(e),this.context.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,i=e.newLayers,r={},a=!0,n=!1,s=void 0;try{for(var l,o=t[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var u=l.value;r[u.id]?p.default.warn("Multiple old layers with same id ".concat(M(u)))():r[u.id]=u}}catch(e){n=!0,s=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}var c=[],d=this._updateSublayersRecursively({newLayers:i,oldLayerMap:r,generatedLayers:c}),h=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:d||h,generatedLayers:c}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,i=e.oldLayerMap,r=e.generatedLayers,a=null,n=!0,s=!1,l=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;c.context=this.context;var d=i[c.id];null===d&&p.default.warn("Multiple new layers with same id ".concat(M(c)))(),i[c.id]=null;var h=null;try{d?(this._transferLayerState(d,c),this._updateLayer(c),(0,L.updateLayerInSeer)(c)):(this._initializeLayer(c),(0,L.initLayerInSeer)(c)),r.push(c),h=c.isComposite&&c.getSubLayers()}catch(e){p.default.warn("error during matching of ".concat(M(c)),e),a=a||e}h&&this._updateSublayersRecursively({newLayers:h,oldLayerMap:i,generatedLayers:r})}}catch(e){s=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(s)throw l}}return a}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var i in e){var r=e[i];r&&(t=t||this._finalizeLayer(r))}return t}},{key:"_initializeLayer",value:function(e){p.default.log(R,"initializing ".concat(M(e)))();var t=null;try{e._initialize(),e.lifecycle=u.LIFECYCLE.INITIALIZED}catch(i){p.default.warn("error while initializing ".concat(M(e),"\n"),i)(),t=t||i}e.internalState.layer=e;var i=!0,r=!1,a=void 0;try{for(var n,s=e.getModels()[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){n.value.userData.layer=e}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return t}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=u.LIFECYCLE.MATCHED,t!==e?(p.default.log(E,"matched ".concat(M(t)),e,"->",t)(),e.lifecycle=u.LIFECYCLE.AWAITING_GC):p.default.log(E,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function(e){p.default.log(E,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(i){p.default.warn("error during update of ".concat(M(e)),i)(),t=i}return t}},{key:"_finalizeLayer",value:function(e){(0,t.default)(e.lifecycle!==u.LIFECYCLE.AWAITING_FINALIZATION),e.lifecycle=u.LIFECYCLE.AWAITING_FINALIZATION;var i=null;this.setNeedsRedraw("finalized ".concat(M(e)));try{e._finalize()}catch(t){p.default.warn("error during finalization of ".concat(M(e)),t)(),i=t}return e.lifecycle=u.LIFECYCLE.FINALIZED,p.default.log(R,"finalizing ".concat(M(e))),i}},{key:"_validateEventHandling",value:function(){(this.onLayerClick||this.onLayerHover)&&this.layers.length&&!this.layers.some(function(e){return e.props.pickable})&&p.default.warn("You have supplied a top-level input event handler (e.g. `onLayerClick`), but none of your layers have set the `pickable` flag.")()}},{key:"_onClick",value:function(e){e.offsetCenter&&this._pickAndCallback({callback:this._onLayerClick,event:e,mode:"click"})}},{key:"_onPointerMove",value:function(e){e.leftButton||e.rightButton||this._pickAndCallback({callback:this._onLayerHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function(e){this.pickObject({x:-1,y:-1,radius:this._pickingRadius,mode:"hover"})}},{key:"_pickAndCallback",value:function(e){var t=e.event.offsetCenter,i=this._pickingRadius,r=this.pickObject({x:t.x,y:t.y,radius:i,mode:e.mode});if(e.callback){var a=r.find(function(e){return e.index>=0})||null;e.callback(a,r,e.event.srcEvent)}}},{key:"_initSeer",value:function(){this.layers.forEach(function(e){(0,L.initLayerInSeer)(e),(0,L.updateLayerInSeer)(e)})}},{key:"_editSeer",value:function(e){if("edit"===e.type&&"props"===e.valuePath[0]){(0,L.setPropOverrides)(e.itemKey,e.valuePath.slice(1),e.value);var t=this.layers.map(function(e){return new e.constructor(e.props)});this.updateLayers({newLayers:t})}}}]),e}();exports.default=N;
},{"../utils/assert":292,"luma.gl":317,"seer":517,"./layer":182,"./draw-layers":293,"./pick-layers":294,"../lifecycle/constants":295,"../utils/deep-equal":296,"../views/view":188,"../views/map-view":189,"../viewports/viewport":184,"../utils/log":209,"../utils/flatten":215,"probe.gl":318,"./seer-integration":297}],222:[function(require,module,exports) {
"use strict";function e(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function r(r,t){if(!e(r,t))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(t){var a=t.gl,n=t.layerManager;r(this,e),this.gl=a,this.layerManager=n,this._effects=[]}return a(e,[{key:"addEffect",value:function(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(e){var r=this._effects.indexOf(e);return r>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(r,1),!0)}},{key:"preDraw",value:function(){var e=!0,r=!1,t=void 0;try{for(var a,n=this._effects[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.needsRedraw&&i.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){r=!0,t=e}finally{try{e||null==n.return||n.return()}finally{if(r)throw t}}}},{key:"draw",value:function(){var e=!0,r=!1,t=void 0;try{for(var a,n=this._effects[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.needsRedraw&&i.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){r=!0,t=e}finally{try{e||null==n.return||n.return()}finally{if(r)throw t}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(e,r){return e.priority>r.priority?-1:e.priority<r.priority?1:e.count-r.count})}}]),e}();exports.default=n;
},{}],223:[function(require,module,exports) {
"use strict";function e(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n}function n(n,t){if(!e(n,t))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0});var r=0,i=function(){function e(){n(this,e),this.id="effect",this.count=r++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return a(e,[{key:"initialize",value:function(e){e.gl,e.layerManager}},{key:"finalize",value:function(e){e.gl,e.layerManager}},{key:"preDraw",value:function(e){e.gl,e.layerManager}},{key:"draw",value:function(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}]),e}();exports.default=i;
},{}],145:[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var o=require("process"),e=arguments[3],t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n="object"!==(void 0===o?"undefined":t(o))||"[object process]"!==String(o)||o.browser,r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";module.exports={window:"undefined"!=typeof window?window:e,global:void 0!==e?e:window,document:"undefined"!=typeof document?document:{},isBrowser:n,userAgent:r};
},{"process":50}],146:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enhancePointerEventInput=s,exports.enhanceMouseInput=i;var e=1,t=2,n=4,r={mousedown:e,mousemove:t,mouseup:n};function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function s(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(o(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function i(o){o.prototype.handler=function(o){var s=r[o.type];s&e&&o.button>=0&&(this.pressed=!0),s&t&&0===o.which&&(s=n),this.pressed&&(s&n&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:"mouse",srcEvent:o}))}}
},{}],149:[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],120:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Manager=void 0;var e=require("./globals"),r=require("./hammer-overrides"),n=void 0;function t(e){var r={},n=function(){return r};return r.get=function(){return null},r.set=n,r.on=n,r.off=n,r.destroy=n,r.emit=n,r}e.isBrowser&&(n=require("hammerjs")),n&&((0,r.enhancePointerEventInput)(n.PointerEventInput),(0,r.enhanceMouseInput)(n.MouseInput));var o=exports.Manager=n?n.Manager:t;exports.default=n;
},{"./globals":145,"./hammer-overrides":146,"hammerjs":149}],119:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GESTURE_EVENT_ALIASES=exports.EVENT_RECOGNIZER_MAP=exports.INPUT_EVENT_TYPES=exports.BASIC_EVENT_ALIASES=exports.RECOGNIZER_FALLBACK_MAP=exports.RECOGNIZER_COMPATIBLE_MAP=exports.RECOGNIZERS=void 0;var e=require("./utils/hammer"),p=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var o=exports.RECOGNIZERS=p.default?[[p.default.Rotate,{enable:!1}],[p.default.Pinch,{enable:!1}],[p.default.Swipe,{enable:!1}],[p.default.Pan,{threshold:0,enable:!1}],[p.default.Press,{enable:!1}],[p.default.Tap,{event:"doubletap",taps:2,enable:!1}],[p.default.Tap,{enable:!1}]]:null,n=exports.RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"]},a=exports.RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},r=exports.BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},s=exports.INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]},i=exports.EVENT_RECOGNIZER_MAP={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},E=exports.GESTURE_EVENT_ALIASES={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"};
},{"./utils/hammer":120}],121:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants"),t=require("../utils/globals"),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=-1!==t.userAgent.indexOf("firefox"),a=e.INPUT_EVENT_TYPES.WHEEL_EVENTS,r="wheel",l=4.000244140625,s=40,c=.25,u=function(){function e(t,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.events=a.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,o.handleEvent)})}return n(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===r&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){this.options.legacyBlockScroll&&e.preventDefault();var n=e.deltaY;t.window.WheelEvent&&(o&&e.deltaMode===t.window.WheelEvent.DOM_DELTA_PIXEL&&(n/=t.window.devicePixelRatio),e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE&&(n*=s));var i={x:e.clientX,y:e.clientY};0!==n&&n%l==0&&(n=Math.floor(n/l)),e.shiftKey&&n&&(n*=c),this._onWheel(e,-n,i)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:r,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}();exports.default=u;
},{"../constants":119,"../utils/globals":145}],122:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants"),t=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=e.INPUT_EVENT_TYPES.MOUSE_EVENTS,a="pointermove",i="pointerleave",r=function(){function e(t,a){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.element=t,this.callback=a,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=s.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return t(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===a&&(this.enableMoveEvent=t),e===i&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){if(this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:i,srcEvent:e,pointerType:"mouse",target:e.target}),this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:a,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}();exports.default=r;
},{"../constants":119}],123:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants"),t=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e.INPUT_EVENT_TYPES.KEY_EVENTS,i="keydown",r="keyup",s=function(){function e(t,i){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.element=t,this.callback=i,this.options=Object.assign({enable:!0},s),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=a.concat(s.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=1,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,r.handleEvent)})}return t(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableDownEvent=t),e===r&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:i,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:r,srcEvent:e,key:e.key,target:e.target}))}}]),e}();exports.default=s;
},{"../constants":119}],124:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whichButtons=h,exports.getOffsetPosition=a;var e=1,t=2,n=4,o={pointerdown:e,pointermove:t,pointerup:n,mousedown:e,mousemove:t,mouseup:n},i=1,r=2,u=3,s=0,c=1,l=2,f=1,p=2,v=4;function h(h){var a=o[h.srcEvent.type];if(!a)return null;var d=h.srcEvent,m=d.buttons,B=d.button,g=d.which,x=!1,b=!1,w=!1;return a===n||a===t&&!Number.isFinite(m)?(x=g===i,b=g===r,w=g===u):a===t?(x=Boolean(m&f),b=Boolean(m&v),w=Boolean(m&p)):a===e&&(x=B===s,b=B===c,w=B===l),{leftButton:x,middleButton:b,rightButton:w}}function a(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var o=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),r=i.width/t.offsetWidth,u=i.height/t.offsetHeight;return{center:o,offsetCenter:{x:(o.x-i.left-t.clientLeft)/r,y:(o.y-i.top-t.clientTop)/u}}}
},{}],103:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils/hammer"),n=require("./inputs/wheel-input"),t=u(n),r=require("./inputs/move-input"),i=u(r),a=require("./inputs/key-input"),o=u(a),l=require("./constants"),s=require("./utils/event-utils");function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function v(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var c={events:null,recognizers:null,Manager:e.Manager,rightButton:!1,legacyBlockScroll:!0};function E(e){e.preventDefault()}var f=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e),this.options=Object.assign({},c,t),this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(n);var r=t.events;r&&this.on(r)}return h(e,[{key:"setElement",value:function(e){var n=this;if(this.element&&this.destroy(),this.element=e,e){var r=this.options,a=r.Manager;this.manager=new a(e,{recognizers:r.recognizers||l.RECOGNIZERS}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(l.RECOGNIZER_COMPATIBLE_MAP).forEach(function(e){var t=n.manager.get(e);t&&l.RECOGNIZER_COMPATIBLE_MAP[e].forEach(function(e){t.recognizeWith(e)})}),this.wheelInput=new t.default(e,this._onOtherEvent,{enable:!1,legacyBlockScroll:r.legacyBlockScroll}),this.moveInput=new i.default(e,this._onOtherEvent,{enable:!1}),this.keyInput=new o.default(e,this._onOtherEvent,{enable:!1}),r.rightButton&&e.addEventListener("contextmenu",E),this.eventHandlers.forEach(function(e){var t=e.recognizerName,r=e.eventAlias,i=e.wrappedHandler;n._toggleRecognizer(t,!0),n.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.element.removeEventListener("contextmenu",E),this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,n,t){if("string"==typeof e)this._addEventHandler(e,n,t);else for(var r in t=n,e)this._addEventHandler(r,e[r],t)}},{key:"off",value:function(e,n){if("string"==typeof e)this._removeEventHandler(e,n);else for(var t in e)this._removeEventHandler(t,e[t])}},{key:"_toggleRecognizer",value:function(e,n){var t=this.manager;if(t){var r=t.get(e);if(r){r.set({enable:n});var i=l.RECOGNIZER_FALLBACK_MAP[e];i&&!this.options.recognizers&&i.forEach(function(r){var i=t.get(r);n?i.requireFailure(e):i.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n)}}},{key:"_addEventHandler",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,a=this._wrapEventHandler(e,n,t),o=l.GESTURE_EVENT_ALIASES[e]||e,s=l.EVENT_RECOGNIZER_MAP[o]||o;this._toggleRecognizer(s,!0);var u=i.filter(function(e){return e.eventAlias===o&&e.srcElement!==t&&(!e.srcElement||e.srcElement.contains(t))});i.push({event:e,eventAlias:o,recognizerName:s,srcElement:t,handler:n,wrappedHandler:a}),u.forEach(function(e){return r.off(o,e.wrappedHandler)}),r&&r.on(o,a),u.forEach(function(e){return r.on(o,e.wrappedHandler)})}},{key:"_removeEventHandler",value:function(e,n){for(var t=this.manager,r=this.eventHandlers,i=!1,a=r.length;a--;){var o=r[a];o.event===e&&o.handler===n&&(t&&t.off(o.eventAlias,o.wrappedHandler),r.splice(a,1),i=!0)}if(i){var s=l.GESTURE_EVENT_ALIASES[e]||e,u=l.EVENT_RECOGNIZER_MAP[s]||s;r.find(function(e){return e.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(e,n,t){var r=this;return function(i){var a=i.mjolnirEvent;(a||(a=r._normalizeEvent(i),i.mjolnirEvent=a),a.handled&&a.handled!==t)||(!t||t.contains(i.srcEvent.target))&&n(Object.assign({},a,{type:e,stopPropagation:function(){a.handled||(a.handled=t)}}))}}},{key:"_normalizeEvent",value:function(e){var n=this.element;return Object.assign({},e,(0,s.whichButtons)(e),(0,s.getOffsetPosition)(e,n),{handled:!1,rootElement:n})}},{key:"_onBasicInput",value:function(e){var n=e.srcEvent,t=l.BASIC_EVENT_ALIASES[n.type];t&&this.manager.emit(t,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();exports.default=f;
},{"./utils/hammer":120,"./inputs/wheel-input":121,"./inputs/move-input":122,"./inputs/key-input":123,"./constants":119,"./utils/event-utils":124}],98:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./event-manager");function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"EventManager",{enumerable:!0,get:function(){return r(e).default}});
},{"./event-manager":103}],179:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../lib/layer-manager"),t=f(e),i=require("../experimental/lib/effect-manager"),n=f(i),r=require("../experimental/lib/effect"),a=f(r),s=require("../utils/log"),o=f(s),l=require("mjolnir.js"),h=require("luma.gl"),c=require("probe.gl"),u=require("../utils/assert"),d=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function p(e,t){if(!g(e,t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}function b(){}function w(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,controller:e.func,effects:e.arrayOf(e.instanceOf(a.default)),glOptions:e.object,gl:e.object,pickingRadius:e.number,onWebGLInitialized:e.func,onResize:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLayerClick:e.func,onLayerHover:e.func,useDevicePixels:e.bool,debug:e.bool,drawPickingColors:e.bool}}var m={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,onWebGLInitialized:b,onBeforeRender:b,onAfterRender:b,onLayerClick:null,onLayerHover:null,useDevicePixels:!0,debug:!1,drawPickingColors:!1},k=function(){function e(t){p(this,e),t=Object.assign({},m,t),this.width=0,this.height=0,this.needsRedraw=!0,this.layerManager=null,this.effectManager=null,this.controller=null,this.stats=new c.Stats({id:"deck.gl"}),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this.canvas=this._createCanvas(t),this.controller=this._createController(t),this.animationLoop=this._createAnimationLoop(t),this.setProps(t),this.animationLoop.start()}return v(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.controller&&(this.controller.finalize(),this.controller=null)}},{key:"setProps",value:function(e){this.stats.timeStart("deck.setProps"),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{viewState:this._getViewState(e),width:this.width,height:this.height});this.layerManager&&this.layerManager.setParameters(t),this.animationLoop.setProps(t),this.controller&&this.controller.setProps(t),this.stats.timeEnd("deck.setProps")}},{key:"pickObject",value:function(e){var t=e.x,i=e.y,n=e.radius,r=void 0===n?0:n,a=e.layerIds,s=void 0===a?null:a;this.stats.timeStart("deck.pickObject");var o=this.layerManager.pickObject({x:t,y:i,radius:r,layerIds:s,mode:"query"});return this.stats.timeEnd("deck.pickObject"),o.length?o[0]:null}},{key:"pickObjects",value:function(e){var t=e.x,i=e.y,n=e.width,r=void 0===n?1:n,a=e.height,s=void 0===a?1:a,o=e.layerIds,l=void 0===o?null:o;this.stats.timeStart("deck.pickObjects");var h=this.layerManager.pickObjects({x:t,y:i,width:r,height:s,layerIds:l});return this.stats.timeEnd("deck.pickObjects"),h}},{key:"getViewports",value:function(){return this.layerManager?this.layerManager.getViewports():[]}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&(t=document.getElementById(t),(0,d.default)(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var i=e.id,n=e.style;return t.id=i,Object.assign(t.style,n),t}},{key:"_setCanvasSize",value:function(e){var t=this.canvas,i=e.width,n=e.height;(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,t.style.width=i),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,t.style.height=n)}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.layerManager.setParameters({width:e,height:t}),this.controller&&this.controller.setProps({viewState:this._getViewState(this.props),width:this.width,height:this.height}),this.props.onResize&&this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;return!(!e||this.width===e.clientWidth&&this.height===e.clientHeight)&&(this.width=e.clientWidth,this.height=e.clientHeight,!0)}},{key:"_createController",value:function(e){var t=e.controller;return t?new t(Object.assign({},this._getViewState(e),e,{canvas:this.canvas})):null}},{key:"_createAnimationLoop",value:function(e){var t=this,i=e.width,n=e.height,r=e.gl,a=e.glOptions,s=e.debug,o=e.useDevicePixels,l=e.autoResizeDrawingBuffer;return new h.AnimationLoop({width:i,height:n,useDevicePixels:o,autoResizeDrawingBuffer:l,onCreateContext:function(e){return r||(0,h.createGLContext)(Object.assign({},a,{canvas:t.canvas,debug:s}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(e){return Object.assign({},e.viewState||{},{width:this.width,height:this.height})}},{key:"_onRendererInitialized",value:function(e){var i=e.gl,r=e.canvas;(0,h.setParameters)(i,{blend:!0,blendFunc:[h.GL.SRC_ALPHA,h.GL.ONE_MINUS_SRC_ALPHA,h.GL.ONE,h.GL.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:h.GL.LEQUAL}),this.props.onWebGLInitialized(i),this.layerManager=new t.default(i,{eventManager:new l.EventManager(r),stats:this.stats}),this.effectManager=new n.default({gl:i,layerManager:this.layerManager});var a=!0,s=!1,o=void 0;try{for(var c,u=this.props.effects[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;this.effectManager.addEffect(d)}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}this.setProps(this.props),this._updateCanvasSize()}},{key:"_onRenderFrame",value:function(e){var t=e.gl;if(this.stats.oneSecondPassed()){var i=this.stats.getStatsTable();this.stats.reset(),o.default.table(1,i)()}this._updateCanvasSize(),this.layerManager.updateLayers(),this.stats.bump("fps");var n=this.layerManager.needsRedraw({clearRedrawFlags:!0});n&&(this.stats.bump("render-fps"),this.props.onBeforeRender&&this.props.onBeforeRender({gl:t}),this.layerManager.drawLayers({pass:"screen",redrawReason:n,drawPickingColors:this.props.drawPickingColors}),this.props.onAfterRender&&this.props.onAfterRender({gl:t}))}}]),e}();exports.default=k,k.displayName="Deck",k.getPropTypes=w,k.defaultProps=m;
},{"../lib/layer-manager":180,"../experimental/lib/effect-manager":222,"../experimental/lib/effect":223,"../utils/log":209,"mjolnir.js":98,"luma.gl":317,"probe.gl":318,"../utils/assert":292}],183:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./layer"),t=i(e),r=require("../utils/log"),n=i(r),o=require("../utils/flatten");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function r(e){return u(this,r),f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return p(r,t.default),c(r,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"getPickingInfo",value:function(e){return e.info}},{key:"renderLayers",value:function(){return null}},{key:"getSubLayerProps",value:function(e){var t=this.props,r={opacity:t.opacity,pickable:t.pickable,visible:t.visible,parameters:t.parameters,getPolygonOffset:t.getPolygonOffset,highlightedObjectIndex:t.highlightedObjectIndex,autoHighlight:t.autoHighlight,highlightColor:t.highlightColor,coordinateSystem:t.coordinateSystem,coordinateOrigin:t.coordinateOrigin,modelMatrix:t.modelMatrix};return e&&Object.assign(r,e,{id:"".concat(this.props.id,"-").concat(e.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers)}),r}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?n.default.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(e=this.renderLayers(),e=(0,o.flatten)(e,{filter:Boolean}),this.internalState.subLayers=e,n.default.log(2,"Composite layer rendered new subLayers ".concat(this),e)());var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){a.value.parentLayer=this}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}},{key:"isComposite",get:function(){return!0}}]),r}();exports.default=b,b.layerName="CompositeLayer";
},{"./layer":182,"../utils/log":209,"../utils/flatten":215}],186:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./viewport"),t=f(e),o=require("../utils/log"),r=f(o),n=require("gl-mat4/lookAt"),i=f(n),u=require("gl-mat4/perspective"),l=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=Math.PI/180,v=function(e){function o(e){var t=e.width,n=e.height,u=e.eye,f=e.lookAt,a=void 0===f?[0,0,0]:f,c=e.up,y=void 0===c?[0,1,0]:c,d=e.fovy,v=void 0===d?75:d,h=e.near,m=void 0===h?1:h,w=e.far,_=void 0===w?100:w,S=e.aspect,O=void 0===S?null:S;p(this,o),r.default.deprecated("PerspectiveViewport","PerspectiveView")();var g=v*b;return O=Number.isFinite(O)?O:t/n,s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,{viewMatrix:(0,i.default)([],u,a,y),projectionMatrix:(0,l.default)([],g,O,m,_),width:t,height:n}))}return d(o,t.default),o}();exports.default=v;
},{"./viewport":184,"../utils/log":209,"gl-mat4/lookAt":231,"gl-mat4/perspective":142}],187:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./viewport"),e=f(t),o=require("../utils/log"),r=f(o),n=require("gl-mat4/lookAt"),i=f(n),u=require("gl-mat4/ortho"),l=f(u);function f(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=function(t){function o(t){var e=t.width,n=t.height,u=t.eye,f=void 0===u?[0,0,1]:u,a=t.lookAt,c=void 0===a?[0,0,0]:a,y=t.up,d=void 0===y?[0,1,0]:y,b=t.near,h=void 0===b?1:b,m=t.far,v=void 0===m?100:m,w=t.left,_=t.top,g=t.right,O=void 0===g?null:g,S=t.bottom,j=void 0===S?null:S;return p(this,o),r.default.deprecated("OrthographicViewport","OrthographicView")(),O=Number.isFinite(O)?O:w+e,j=Number.isFinite(j)?j:_+n,s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,{viewMatrix:(0,i.default)([],f,c,d),projectionMatrix:(0,l.default)([],w,O,j,_,h,v),width:e,height:n}))}return d(o,e.default),o}();exports.default=b;
},{"./viewport":184,"../utils/log":209,"gl-mat4/lookAt":231,"gl-mat4/ortho":232}],190:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=i(e),r=require("../viewports/viewport"),n=i(r),o=require("math.gl");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=o.experimental.SphericalCoordinates;function m(e){var t=e.bearing,r=e.pitch;return new b({bearing:t,pitch:r}).toVector3().normalize()}var d=function(e){function r(){return l(this,r),p(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return y(r,t.default),f(r,[{key:"_getViewport",value:function(e){var t=e.viewState,r=t.modelMatrix,i=void 0===r?null:r,u=t.bearing,a=t.up,l=void 0===a?[0,0,1]:a,c=m({bearing:u,pitch:89}),f=i?i.transformDirection(c):c,p=(new o.Matrix4).lookAt({eye:[0,0,0],center:f,up:l});return new n.default(Object.assign({},e,{zoom:null,viewMatrix:p}))}}]),r}();exports.default=d,d.displayName="FirstPersonView";
},{"./view":188,"../viewports/viewport":184,"math.gl":132}],191:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=i(e),r=require("../viewports/viewport"),n=i(r),o=require("math.gl");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=o.experimental.SphericalCoordinates;function m(e){var t=e.bearing,r=e.pitch;return new b({bearing:t,pitch:r}).toVector3().normalize()}var h=function(e){function r(){return l(this,r),p(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return y(r,t.default),f(r,[{key:"_getViewport",value:function(e){var t=e.viewState,r=t.bearing,i=t.pitch,u=t.position,a=t.up,l=50*t.zoom,c=m({bearing:r,pitch:i}).scale(-l).multiply(new o.Vector3(1,1,-1)),f=(new o.Matrix4).multiplyRight((new o.Matrix4).lookAt({eye:c,center:u,up:a}));return new n.default(Object.assign({},e,{zoom:null,viewMatrix:f}))}}]),r}();exports.default=h,h.displayName="ThirdPersonView";
},{"./view":188,"../viewports/viewport":184,"math.gl":132}],204:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./viewport"),e=g(t),r=require("../utils/math-utils"),o=require("gl-mat4/multiply"),i=g(o),n=require("gl-mat4/lookAt"),a=g(n),u=require("gl-mat4/scale"),l=g(u),f=require("gl-mat4/perspective"),c=g(f),s=require("gl-mat4/translate"),h=g(s),p=require("gl-mat4/rotateX"),d=g(p),v=require("gl-mat4/rotateY"),y=g(v),b=require("gl-mat4/rotateZ"),m=g(b);function g(t){return t&&t.__esModule?t:{default:t}}function w(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){return M(t)||j(t,e)||O()}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function j(t,e){var r=[],o=!0,i=!1,n=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){i=!0,n=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw n}}return r}function M(t){if(Array.isArray(t))return t}function S(t){return k(t)||P(t)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function P(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function k(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function q(t,e){if(!w(t,e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,e,r){return e&&I(t.prototype,e),r&&I(t,r),t}function X(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var B=Math.PI/180,V=function(t){function o(t){var e,n=t.id,u=void 0===n?"orbit-viewport":n,f=t.width,s=t.height,p=t.distance,v=t.rotationX,b=void 0===v?0:v,g=t.rotationOrbit,w=void 0===g?0:g,x=t.orbitAxis,A=void 0===x?"Z":x,O=t.lookAt,j=void 0===O?[0,0,0]:O,M=t.up,S=void 0===M?[0,1,0]:M,_=t.fov,P=void 0===_?75:_,k=t.near,I=void 0===k?1:k,E=t.far,z=void 0===E?100:E,T=t.zoom,V=void 0===T?1:T;q(this,o);var Z=(0,d.default)([],(0,r.createMat4)(),-b/180*Math.PI);"Z"===A?(0,m.default)(Z,Z,-w/180*Math.PI):(0,y.default)(Z,Z,-w/180*Math.PI);var D=(0,r.createMat4)();(0,l.default)(D,D,[V,V,V]),(0,h.default)(D,D,[-j[0],-j[1],-j[2]]);var L=(0,a.default)([],[0,0,p],[0,0,0],S),C=P*B,N=f/s,R=(0,c.default)([],C,N,I,z);return(e=X(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,{id:u,viewMatrix:(0,i.default)(L,L,(0,i.default)(Z,Z,D)),projectionMatrix:R,width:f,height:s}))).width=f,e.height=s,e.distance=p,e.rotationX=b,e.rotationOrbit=w,e.orbitAxis=A,e.lookAt=j,e.up=S,e.fov=P,e.near=I,e.far=z,e.zoom=V,e}return T(o,e.default),E(o,[{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,o=void 0!==e&&e,i=A((0,r.transformVector)(this.pixelProjectionMatrix,S(t).concat([1])),3),n=i[0],a=i[1],u=i[2];return[n,o?this.height-a:a,u]}},{key:"unproject",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,o=void 0!==e&&e,i=A(t,3),n=i[0],a=i[1],u=i[2],l=o?this.height-a:a;return(0,r.transformVector)(this.pixelUnprojectionMatrix,[n,l,u,1])}},{key:"getDistance",value:function(t){var e=t.boundingBox,r=t.fov;return Math.max(e[0],e[1],e[2])/2/Math.tan(r/180*Math.PI/2)}},{key:"fitBounds",value:function(t){var e=this.width,r=this.height,i=this.rotationX,n=this.rotationOrbit,a=this.orbitAxis,u=this.lookAt,l=this.up,f=this.fov;return new o({width:e,height:r,rotationX:i,rotationOrbit:n,orbitAxis:a,up:l,fov:f,near:this.near,far:this.far,zoom:this.zoom,lookAt:u,distance:this.getDistance({boundingBox:t,fov:f})})}}]),o}();exports.default=V,V.displayName="OrbitViewport";
},{"./viewport":184,"../utils/math-utils":275,"gl-mat4/multiply":147,"gl-mat4/lookAt":231,"gl-mat4/scale":137,"gl-mat4/perspective":142,"gl-mat4/translate":138,"gl-mat4/rotateX":140,"gl-mat4/rotateY":236,"gl-mat4/rotateZ":139}],192:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=r(e),n=require("../viewports/orbit-viewport"),o=r(n);function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function n(e){return a(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,Object.assign({},e,{type:o.default})))}return p(n,t.default),s(n,null,[{key:"getDistance",value:function(e){var t=e.boundingBox,n=e.fov;return Math.max(t[0],t[1],t[2])/2/Math.tan(n/180*Math.PI/2)}}]),n}();exports.default=y,y.displayName="OrbitView";
},{"./view":188,"../viewports/orbit-viewport":204}],193:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=f(e),r=require("../viewports/viewport"),o=f(r),n=require("gl-mat4/lookAt"),i=f(n),u=require("gl-mat4/perspective"),a=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!l(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function b(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=Math.PI/180,m=function(e){function r(){return p(this,r),b(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return v(r,t.default),y(r,[{key:"_getViewport",value:function(e){var t=e.x,r=e.y,n=e.width,u=e.height,f=e.viewState,l=f.eye,c=f.lookAt,p=void 0===c?[0,0,0]:c,s=f.up,y=void 0===s?[0,1,0]:s,b=e.fovy||f.fovy||75,d=e.near||f.near||1,v=e.far||f.far||100,m=Number.isFinite(f.aspect)?f.aspect:n/u,w=b*h;return new o.default({x:t,y:r,width:n,height:u,viewMatrix:(0,i.default)([],l,p,y),projectionMatrix:(0,a.default)([],w,m,d,v)})}}]),r}();exports.default=m,m.displayName="PerspectiveView";
},{"./view":188,"../viewports/viewport":184,"gl-mat4/lookAt":231,"gl-mat4/perspective":142}],194:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./view"),t=i(e),o=require("../viewports/viewport"),r=i(o),n=require("math.gl");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,o){return t&&f(e.prototype,t),o&&f(e,o),e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function o(){return l(this,o),c(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return y(o,t.default),p(o,[{key:"_getViewport",value:function(e){var t=e.x,o=e.y,i=e.width,u=e.height,a=e.viewState,l=a.eye,f=void 0===l?[0,0,1]:l,p=a.lookAt,c=void 0===p?[0,0,0]:p,s=a.up,y=void 0===s?[0,1,0]:s;i=i||1,u=u||1;var b=this.props,d=b.left,h=void 0===d?-i/2:d,v=b.top,m=void 0===v?-u/2:v,w=b.near,_=void 0===w?1:w,g=b.far,x=void 0===g?100:g,O=this.props,S=O.right,j=void 0===S?null:S,M=O.bottom,k=void 0===M?null:M;return j=Number.isFinite(j)?j:h+i,k=Number.isFinite(k)?k:m+u,new r.default({x:t,y:o,width:i,height:u,viewMatrix:(new n.Matrix4).lookAt({eye:f,lookAt:c,up:y}),projectionMatrix:(new n.Matrix4).ortho({left:h,right:j,bottom:k,top:m,near:_,far:x})})}}]),o}();exports.default=b,b.displayName="OrthographicView";
},{"./view":188,"../viewports/viewport":184,"math.gl":132}],304:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("math.gl"),t=require("../utils/assert"),i=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function o(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}var s=e.experimental.SphericalCoordinates,l={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},p=function(){function t(n){o(this,t);var r=n.width,a=n.height,u=n.position,s=void 0===u?l.position:u;(0,i.default)(Number.isFinite(r),"`width` must be supplied"),(0,i.default)(Number.isFinite(a),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},n,{position:new e.Vector3(s)}))}return u(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new s({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new s({bearing:e,pitch:90}).toVector3().normalize()}},{key:"_applyConstraints",value:function(e){return e}}]),t}();exports.default=p;
},{"math.gl":132,"../utils/assert":292}],199:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MAPBOX_LIMITS=void 0;var t=require("./view-state"),e=a(t),r=require("viewport-mercator-project"),o=a(r),n=require("../utils/assert"),i=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return h(t)||p(t,e)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{o||null==u.return||u.return()}finally{if(n)throw i}}return r}function h(t){if(Array.isArray(t))return t}function m(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),t}function f(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var y=exports.MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},P={pitch:0,bearing:0,altitude:1.5};function b(t,e,r){return t<e?e:t>r?r:t}var w=function(t){function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,o=e.height,a=e.latitude,u=e.longitude,s=e.zoom,c=e.bearing,l=void 0===c?P.bearing:c,p=e.pitch,h=void 0===p?P.pitch:p,v=e.altitude,d=void 0===v?P.altitude:v,g=e.maxZoom,_=void 0===g?y.maxZoom:g,b=e.minZoom,w=void 0===b?y.minZoom:b,S=e.maxPitch,L=void 0===S?y.maxPitch:S,k=e.minPitch,Z=void 0===k?y.minPitch:k,z=e.startPanLngLat,x=e.startZoomLngLat,j=e.startBearing,U=e.startPitch,O=e.startZoom;return m(this,n),(0,i.default)(Number.isFinite(u),"`longitude` must be supplied"),(0,i.default)(Number.isFinite(a),"`latitude` must be supplied"),(0,i.default)(Number.isFinite(s),"`zoom` must be supplied"),(t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,{width:r,height:o,latitude:a,longitude:u,zoom:s,bearing:l,pitch:h,altitude:d,maxZoom:_,minZoom:w,maxPitch:L,minPitch:Z})))._interactiveState={startPanLngLat:z,startZoomLngLat:x,startBearing:j,startPitch:U,startZoom:O},t}return _(n,e.default),d(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,r=t.startPos,o=this._interactiveState.startPanLngLat||this._unproject(r);if(!o)return this;var n=c(this._calculateNewLngLat({startPanLngLat:o,pos:e}),2),i=n[0],a=n[1];return this._getUpdatedState({longitude:i,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=void 0===e?0:e,o=t.deltaScaleY,n=void 0===o?0:o,i=this._interactiveState,a=i.startBearing,u=i.startPitch;if(!Number.isFinite(a)||!Number.isFinite(u))return this;var s=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:n,startBearing:a,startPitch:u}),c=s.pitch,l=s.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,n=t.scale;(0,i.default)(n>0,"`scale` must be a positive number");var a=this._interactiveState,u=a.startZoom,s=a.startZoomLngLat;Number.isFinite(u)||(u=this._viewportProps.zoom,s=this._unproject(r)||this._unproject(e)),(0,i.default)(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var l=this._calculateNewZoom({scale:n,startZoom:u}),p=c(new o.default(Object.assign({},this._viewportProps,{zoom:l})).getLocationAtPoint({lngLat:s,pos:e}),2),h=p[0],m=p[1];return this._getUpdatedState({zoom:l,longitude:h,latitude:m})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,r=e.width,o=e.height;return this.zoom({pos:[r/2,o/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,r=e.width,o=e.height;return this.pan({startPos:[r/2,o/2],pos:[r/2+t[0],o/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new n(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,o=t.minZoom,n=t.zoom;t.zoom=b(n,o,e);var i=t.maxPitch,a=t.minPitch,u=t.pitch;return t.pitch=b(u,a,i),Object.assign(t,(0,r.normalizeViewportProps)(t)),t}},{key:"_unproject",value:function(t){var e=new o.default(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,r=t.pos;return new o.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:r})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,o=this._viewportProps,n=o.maxZoom,i=o.minZoom;return b(r+Math.log2(e),i,n)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,o=t.startBearing,n=t.startPitch;r=b(r,-1,1);var i=this._viewportProps,a=i.minPitch,u=i.maxPitch,s=n;return r>0?s=n+r*(u-n):r<0&&(s=n-r*(a-n)),{pitch:s,bearing:o+180*e}}}]),n}();exports.default=w;
},{"./view-state":304,"viewport-mercator-project":97,"../utils/assert":292}],305:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("math.gl"),t=require("../utils/assert"),r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function o(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var l=function(){function t(){o(this,t)}return i(t,[{key:"arePropsEqual",value:function(t,r){var n=!0,a=!1,o=void 0;try{for(var u,i=(this.propNames||[])[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var l=u.value;if(!(0,e.equals)(t[l],r[l]))return!1}}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){(0,r.default)(!1,"interpolateProps is not implemented")}}]),t}();exports.default=l;
},{"math.gl":132,"../utils/assert":292}],208:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValid=i,exports.getEndValueByShortestPath=o,exports.extractViewState=u;var t=require("../utils/math-utils"),e=["width","height","longitude","latitude","zoom","bearing","pitch","position"],r={longitude:1,bearing:1};function i(t){return Number.isFinite(t)||Array.isArray(t)}function n(t){return r[t]}function o(t,e,r){return n(t)&&Math.abs(r-e)>180&&(r=r<0?r+360:r-360),r}function u(r){var o={};return e.forEach(function(e){var u=r[e];i(u)&&(o[e]=u,n(e)&&(o[e]=(0,t.mod)(u+180,360)-180))}),o}
},{"../utils/math-utils":275}],206:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./transition-interpolator"),e=u(t),r=require("./transition-utils"),n=require("./../utils/math-utils"),o=require("../utils/assert"),i=u(o);function u(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=["longitude","latitude","zoom","bearing","pitch"],h=function(t){function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return f(this,o),(t=p(this,(o.__proto__||Object.getPrototypeOf(o)).call(this))).propNames=e,t}return b(o,e.default),c(o,[{key:"initializeProps",value:function(t,e){var n={},o={},u=!0,a=!1,l=void 0;try{for(var f,s=this.propNames[Symbol.iterator]();!(u=(f=s.next()).done);u=!0){var c=f.value,p=t[c],y=e[c];(0,i.default)((0,r.isValid)(p)&&(0,r.isValid)(y),"".concat(c," must be supplied for transition")),n[c]=p,o[c]=(0,r.getEndValueByShortestPath)(c,p,y)}}catch(t){a=!0,l=t}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}return{start:n,end:o}}},{key:"interpolateProps",value:function(t,e,r){var o={},i=!0,u=!1,a=void 0;try{for(var l,f=this.propNames[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var s=l.value;o[s]=(0,n.lerp)(t[s],e[s],r)}}catch(t){u=!0,a=t}finally{try{i||null==f.return||f.return()}finally{if(u)throw a}}return o}}]),o}();exports.default=h;
},{"./transition-interpolator":305,"./transition-utils":208,"./../utils/math-utils":275,"../utils/assert":292}],205:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_EVENTS=void 0;var t=require("../transitions/linear-interpolator"),n=e(t),i=require("../transitions/transition-utils"),r=require("../utils/assert"),s=e(r);function e(t){return t&&t.__esModule?t:{default:t}}function o(t,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n}function a(t,n){if(!o(t,n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,n,i){return n&&u(t.prototype,n),i&&u(t,i),t}var l=function(){},h=exports.TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},T={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new n.default,transitionInterruption:h.BREAK,onTransitionStart:l,onTransitionInterrupt:l,onTransitionEnd:l},c={animation:null,propsInTransition:null,startProps:null,endProps:null},d=function(){function t(n){a(this,t),this.props=n,this.state=c,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return p(t,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(t){var n=!1,i=this.props;if(this.props=t,this._shouldIgnoreViewportChange(i,t))return n;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(t)){var s=Object.assign({},i,this.state.interruption===h.SNAP_TO_END?this.state.endProps:this.state.propsInTransition||i);r&&i.onTransitionInterrupt(),t.onTransitionStart(),this._triggerTransition(s,t),n=!0}else r&&(i.onTransitionInterrupt(),this._endTransition());return n}},{key:"_isTransitionInProgress",value:function(){return this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(t){return t.transitionDuration>0&&t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,n){return this._isTransitionInProgress()?this.state.interruption===h.IGNORE||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(t,n)}},{key:"_triggerTransition",value:function(t,n){(0,s.default)(this._isTransitionEnabled(n),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var i=n.transitionInterpolator.initializeProps(t,n);this.state={duration:n.transitionDuration,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startTime:Date.now(),startProps:i.start,endProps:i.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=c}},{key:"_updateViewport",value:function(){var t=Date.now(),n=this.state,r=n.startTime,s=n.duration,e=n.easing,o=n.interpolator,a=n.startProps,u=n.endProps,p=!1,l=(t-r)/s;l>=1&&(l=1,p=!0),l=e(l);var h=o.interpolateProps(a,u,l);this.state.propsInTransition=(0,i.extractViewState)(Object.assign({},this.props,h)),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition,{inTransition:!0}),p&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();exports.default=d,d.defaultProps=T;
},{"../transitions/linear-interpolator":206,"../transitions/transition-utils":208,"../utils/assert":292}],200:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./map-state"),e=s(t),n=require("../transitions/linear-interpolator"),a=s(n),i=require("../lib/transition-manager"),o=require("../utils/assert"),r=s(o);function s(t){return t&&t.__esModule?t:{default:t}}function h(t,e){return v(t)||l(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}function v(t){if(Array.isArray(t))return t}function c(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function p(t,e){if(!c(t,e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}var w={transitionDuration:0},f={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new a.default,transitionInterruption:i.TRANSITION_EVENTS.BREAK},S=5,y=1.2,_=.01,P={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t),(0,r.default)(e),this.ViewportState=e,this.viewportState=null,this.viewportStateProps=null,this.eventManager=null,this._events=null,this._state={isDragging:!1},this.events=[],this.onViewportChange=null,this.onViewStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setOptions(n),this.constructor===t&&Object.seal(this)}return d(t,[{key:"handleEvent",value:function(t){var e=this.ViewportState;switch(this.viewportState=new e(Object.assign({},this.viewportStateProps,this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setOptions",value:function(t){var e=t.onStateChange,n=void 0===e?this.onStateChange:e,a=t.eventManager,i=void 0===a?this.eventManager:a,o=t.scrollZoom,r=void 0===o||o,s=t.dragPan,h=void 0===s||s,u=t.dragRotate,l=void 0===u||u,v=t.doubleClickZoom,c=void 0===v||v,p=t.touchZoom,g=void 0===p||p,d=t.touchRotate,w=void 0!==d&&d,f=t.keyboard,S=void 0===f||f;"onViewportChange"in t&&(this.onViewportChange=t.onViewportChange),"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),this.onStateChange=n,this.viewportStateProps=t.viewState?Object.assign({},t,t.viewState):t,this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0));var y=Boolean(this.onViewportChange||this.onViewStateChange);this.toggleEvents(P.WHEEL,y&&r),this.toggleEvents(P.PAN,y&&(h||l)),this.toggleEvents(P.PINCH,y&&(g||w)),this.toggleEvents(P.DOUBLE_TAP,y&&c),this.toggleEvents(P.KEYBOARD,y&&S),this.scrollZoom=r,this.dragPan=h,this.dragRotate=l,this.doubleClickZoom=c,this.touchZoom=g,this.touchRotate=w,this.keyboard=S}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},t.getViewportProps(),e);if(this.onViewportChange){var i=this.viewportState.getViewport?this.viewportState.getViewport():null;this.onViewportChange(a,n,i)}this.onViewStateChange&&this.onViewStateChange({viewState:a,interactionState:n}),Object.assign(this._state,Object.assign({},t.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t),n=this.viewportState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,w,{isDragging:!0})}},{key:"_onPan",value:function(t){return this.isFunctionKeyPressed(t)||t.rightButton?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.viewportState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.viewportState.pan({pos:e});return this.updateViewport(n,w,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){return!!this.dragRotate&&(c(this.viewportState,e.default)?this._onPanRotateMap(t):this._onPanRotateStandard(t))}},{key:"_onPanRotateStandard",value:function(t){var e=t.deltaX,n=t.deltaY,a=this.viewportState.getViewportProps(),i=e/a.width,o=n/a.height,r=this.viewportState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(r,w,{isDragging:!0})}},{key:"_onPanRotateMap",value:function(t){var e=t.deltaX,n=t.deltaY,a=h(this.getCenter(t),2)[1],i=a-n,o=this.viewportState.getViewportProps(),r=o.width,s=o.height,u=e/r,l=0;n>0?Math.abs(s-i)>S&&(l=n/(i-s)*y):n<0&&i>S&&(l=1-a/i),l=Math.min(1,Math.max(-1,l));var v=this.viewportState.rotate({deltaScaleX:u,deltaScaleY:l});return this.updateViewport(v,w,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.getCenter(t),n=t.delta,a=2/(1+Math.exp(-Math.abs(n*_)));n<0&&0!==a&&(a=1/a);var i=this.viewportState.zoom({pos:e,scale:a});return this.updateViewport(i,w)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.viewportState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,w,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.viewportState;if(this.touchZoom){var n=t.scale,a=this.getCenter(t);e=e.zoom({pos:a,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,w,{isDragging:!0})}},{key:"_onPinchEnd",value:function(t){var e=this.viewportState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),a=this.viewportState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(a,f)}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),a=this.viewportState;switch(t.srcEvent.keyCode){case 189:e=n?a.zoomOut().zoomOut():a.zoomOut();break;case 187:e=n?a.zoomIn().zoomIn():a.zoomIn();break;case 37:e=n?a.rotateLeft():a.moveLeft();break;case 39:e=n?a.rotateRight():a.moveRight();break;case 38:e=n?a.rotateUp():a.moveUp();break;case 40:e=n?a.rotateDown():a.moveDown();break;default:return!1}return this.updateViewport(e,f)}}]),t}();exports.default=m;
},{"./map-state":199,"../transitions/linear-interpolator":206,"../lib/transition-manager":205,"../utils/assert":292}],201:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./viewport-controls"),t=r(e),n=require("./map-state"),o=r(n);function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function n(e){return f(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o.default,e))}return p(n,t.default),c(n,[{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)||e.rightButton?this._onPanRotate(e):this._onPanMove(e)}}]),n}();exports.default=y;
},{"./viewport-controls":200,"./map-state":199}],195:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../controllers/map-controls"),t=r(e),n=require("../controllers/map-state"),o=require("mjolnir.js");function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function i(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c="-webkit-",l={GRABBING:"".concat(c,"grabbing"),GRAB:"".concat(c,"grab"),POINTER:"pointer"},g=function(e){return e.isDragging?l.GRABBING:l.GRAB};function h(e){return{width:e.number.isRequired,height:e.number.isRequired,longitude:e.number.isRequired,latitude:e.number.isRequired,zoom:e.number.isRequired,bearing:e.number,pitch:e.number,altitude:e.number,maxZoom:e.number,minZoom:e.number,maxPitch:e.number,minPitch:e.number,onViewportChange:e.func,onViewStateChange:e.func,scrollZoom:e.bool,dragPan:e.bool,dragRotate:e.bool,doubleClickZoom:e.bool,touchZoomRotate:e.bool,getCursor:e.func,controls:e.shape({events:e.arrayOf(e.string),handleEvent:e.func})}}var b=Object.assign({},n.MAPBOX_LIMITS,{scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:g}),p=function(){function e(n){i(this,e),n=Object.assign({},b,n),this.props=n,this.state={isDragging:!1},this.canvas=n.canvas;var r=new o.EventManager(this.canvas);this._eventManager=r,this._controls=this.props.controls||new t.default,this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:r}))}return u(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._controls.setOptions(e)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==this.state.isDragging){this.state.isDragging=n;var o=this.props.getCursor;this.canvas.style.cursor=o(this.state)}}}]),e}();exports.default=p,p.displayName="MapController",p.defaultProps=b,p.getPropTypes=h;
},{"../controllers/map-controls":201,"../controllers/map-state":199,"mjolnir.js":98}],198:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../viewports/orbit-viewport"),e=a(t),o=require("../utils/assert"),r=a(o);function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function n(t,e){if(!i(t,e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),t}var p={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},l={minZoom:0,maxZoom:1/0};function d(t,e,o){return t<e?e:t>o?o:t}function v(t,e){return Number.isFinite(t)?t:e}var m=function(){function t(e){var o=e.width,a=e.height,i=e.distance,s=e.rotationX,u=e.rotationOrbit,d=e.orbitAxis,m=e.bounds,c=e.lookAt,f=e.fov,h=e.near,P=e.far,b=e.translationX,w=e.translationY,_=e.zoom,g=e.minZoom,S=e.maxZoom,y=e.startPanViewport,k=e.startPanPos,O=e.isPanning,Z=e.startRotateViewport,V=e.isRotating,z=e.startZoomViewport,U=e.startZoomPos;n(this,t),(0,r.default)(Number.isFinite(o),"`width` must be supplied"),(0,r.default)(Number.isFinite(a),"`height` must be supplied"),(0,r.default)(Number.isFinite(i),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:o,height:a,distance:i,rotationX:v(s,p.rotationX),rotationOrbit:v(u,p.rotationOrbit),orbitAxis:d,bounds:m,lookAt:c||p.lookAt,fov:v(f,p.fov),near:v(h,p.near),far:v(P,p.far),translationX:v(b,p.translationX),translationY:v(w,p.translationY),zoom:v(_,p.zoom),minZoom:v(g,l.minZoom),maxZoom:v(S,l.maxZoom)}),this._interactiveState={startPanViewport:y,startPanPos:k,isPanning:O,startRotateViewport:Z,isRotating:V,startZoomViewport:z,startZoomPos:U}}return u(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var o=t.pos,r=new e.default(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:o,startPanViewport:r})}},{key:"pan",value:function(t){var o=t.pos,a=t.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var i=this._interactiveState.startPanPos||a;(0,r.default)(i,"`startPanPos` props is required");var n=this._interactiveState.startPanViewport||new e.default(this._viewportProps),s=o[0]-i[0],u=o[1]-i[1],p=n.project(n.lookAt),l=n.unproject([p[0]-s,p[1]-u,p[2]]);return this._getUpdatedOrbitState({lookAt:l,isPanning:!0})}},{key:"panEnd",value:function(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function(t){t.pos;var o=new e.default(this._viewportProps);return this._getUpdatedOrbitState({startRotateViewport:o})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,o=t.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport||{},a=r.rotationX,i=r.rotationOrbit;a=v(a,this._viewportProps.rotationX),i=v(i,this._viewportProps.rotationOrbit);var n=d(a-180*o,-89.999,89.999),s=(i-180*e)%360;return this._getUpdatedOrbitState({rotationX:n,rotationOrbit:s,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"zoomStart",value:function(t){var o=t.pos,r=new e.default(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:r,startZoomPos:o})}},{key:"zoom",value:function(t){var o=t.pos,r=t.startPos,a=t.scale,i=this._viewportProps,n=i.zoom,s=i.minZoom,u=i.maxZoom,p=i.width,l=i.height,v=this._interactiveState.startZoomPos||r||o,m=this._interactiveState.startZoomViewport||new e.default(this._viewportProps),c=d(n*a,s,u),f=o[0]-v[0],h=o[1]-v[1],P=v[0]-p/2,b=l/2-v[1],w=m.project(m.lookAt),_=w[0]-P+P*c/n+f,g=w[1]+b-b*c/n-h,S=m.unproject([_,g,w[2]]);return this._getUpdatedOrbitState({lookAt:S,zoom:c})}},{key:"zoomEnd",value:function(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,o=t.minZoom,r=t.zoom;return t.zoom=r>e?e:r,t.zoom=r<o?o:r,t}}]),t}();exports.default=m;
},{"../viewports/orbit-viewport":204,"../utils/assert":292}],196:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../viewports/orbit-viewport"),e=s(t),n=require("../controllers/orbit-state"),r=s(n),o=require("../controllers/viewport-controls"),i=s(o),a=require("mjolnir.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function l(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f="-webkit-",g={GRABBING:"".concat(f,"grabbing"),GRAB:"".concat(f,"grab"),POINTER:"pointer"},p=function(t){return t.isDragging?g.GRABBING:g.GRAB};function h(t){return{lookAt:t.arrayOf(t.number),distance:t.number,rotationX:t.number,rotationY:t.number,translationX:t.number,translationY:t.number,zoom:t.number,minZoom:t.number,maxZoom:t.number,fov:t.number,near:t.number,far:t.number,width:t.number.isRequired,height:t.number.isRequired,bounds:t.object,onViewportChange:t.func.isRequired,getCursor:t.func,orbitControls:t.object}}var m={lookAt:[0,0,0],rotationX:0,rotationY:0,translationX:0,translationY:0,distance:10,zoom:1,minZoom:0,maxZoom:1/0,fov:50,near:1,far:1e3,getCursor:p},v=function(){function t(e){l(this,t),e=Object.assign({},m,e),this.props=e,this.state={isDragging:!1},this.canvas=e.canvas;var n=new a.EventManager(this.canvas);this._eventManager=n,this._controls=e.orbitControls||new i.default(r.default),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:n}))}return b(t,null,[{key:"getViewport",value:function(t){return new e.default(t)}}]),b(t,[{key:"setProps",value:function(t){t=Object.assign({},this.props,t),this.props=t,this._controls.setOptions(t)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;if(n!==this.state.isDragging){this.state.isDragging=n;var r=this.props.getCursor;this.canvas.style.cursor=r(this.state)}}}]),t}();exports.default=v,v.displayName="OrbitController",v.defaultProps=m,v.getPropTypes=h;
},{"../viewports/orbit-viewport":204,"../controllers/orbit-state":198,"../controllers/viewport-controls":200,"mjolnir.js":98}],197:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./view-state"),e=i(t),o=require("math.gl"),r=require("../utils/assert"),n=i(r);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return c(t)||l(t,e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var o=[],r=!0,n=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);r=!0);}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return o}function c(t){if(Array.isArray(t))return t}function v(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,o){return e&&d(t.prototype,e),o&&d(t,o),t}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _=1,P=2;function w(t,e,o){return t<e?e:t>o?o:t}function g(t,e){return Number.isFinite(t)?t:e}var b=function(t){function r(t){var e,o=t.width,n=t.height,i=t.position,a=t.bearing,s=t.pitch,u=t.longitude,p=t.latitude,l=t.zoom,c=(t.syncBearing,t.bounds,t.startPanEventPosition),d=t.startPanPosition,f=t.startRotateCenter,y=t.startRotateViewport,m=t.startZoomPos,_=t.startZoom;return v(this,r),(e=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,{width:o,height:n,position:i,bearing:a,pitch:s,longitude:u,latitude:p,zoom:l})))._interactiveState={startPanEventPosition:c,startPanPosition:d,startRotateCenter:f,startRotateViewport:y,startZoomPos:m,startZoom:_},e}return m(r,e.default),f(r,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,o=this._viewportProps,r=o.translationX,n=o.translationY;return this._getUpdatedState({startPanPosition:[r,n],startPanEventPosition:e})}},{key:"pan",value:function(t){var e=t.pos,o=t.startPos,r=this._interactiveState.startPanEventPosition||o;(0,n.default)(r,"`startPanEventPosition` props is required");var i=u(this._interactiveState.startPanPosition||[],2),a=i[0],s=i[1];a=g(a,this._viewportProps.translationX),s=g(s,this._viewportProps.translationY);var p=e[0]-r[0],l=e[1]-r[1];return this._getUpdatedState({translationX:a+p,translationY:s-l})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,o=t.deltaScaleY,r=this._viewportProps,n=r.bearing,i=r.pitch;return this._getUpdatedState({bearing:n+10*e,pitch:i-10*o})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPos:e,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,o=t.startPos,r=t.scale,n=this._viewportProps,i=n.zoom,a=n.minZoom,s=n.maxZoom,u=n.width,p=n.height,l=(n.translationX,n.translationY,this._interactiveState.startZoomPos||o||e),c=w(i*r,a,s);e[0],l[0],e[1],l[1],l[0],l[1];return c/i<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=this._viewportProps.bearing-P;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var t=this._viewportProps.bearing+P;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),r=new o.Vector3(e).normalize().scale(_);return this._getUpdatedState({position:new o.Vector3(t).add(r)})}},{key:"moveBackward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),r=new o.Vector3(e).normalize().scale(-_);return this._getUpdatedState({position:new o.Vector3(t).add(r)})}},{key:"moveUp",value:function(){var t=this._viewportProps.position;return this._getUpdatedState({position:new o.Vector3(t).add([0,0,1])})}},{key:"moveDown",value:function(){var t=this._viewportProps.position,e=t[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new o.Vector3(t).add(e)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(t){return new r(Object.assign({},this._viewportProps,this._interactiveState,t))}}]),r}();exports.default=b;
},{"./view-state":304,"math.gl":132,"../utils/assert":292}],202:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./viewport"),t=i(e),o=require("../utils/log"),r=i(o),n=require("math.gl");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=n.experimental.SphericalCoordinates;function y(e){var t=e.bearing,o=e.pitch;return new p({bearing:t,pitch:o}).toVector3().normalize()}var b=function(e){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,o),r.default.deprecated("FirstPersonViewport","FirstPersonView")();var t=e.modelMatrix,i=void 0===t?null:t,u=e.bearing,a=e.up,f=void 0===a?[0,0,1]:a,s=y({bearing:u,pitch:89}),p=i?i.transformDirection(s):s,b=(new n.Matrix4).lookAt({eye:[0,0,0],center:p,up:f});return c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign({},e,{zoom:null,viewMatrix:b})))}return s(o,t.default),o}();exports.default=b;
},{"./viewport":184,"../utils/log":209,"math.gl":132}],203:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./viewport"),t=i(e),o=require("../utils/log"),r=i(o),n=require("math.gl");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n.experimental.SphericalCoordinates;function y(e){var t=e.bearing,o=e.pitch;return new s({bearing:t,pitch:o}).toVector3().normalize()}var b=function(e){function o(e){l(this,o),r.default.deprecated("ThirdPersonViewport","ThirdPersonView")();var t=e.bearing,i=e.pitch,u=e.position,c=e.up,f=50*e.zoom,p=y({bearing:t,pitch:i}).scale(-f).multiply(new n.Vector3(1,1,-1)),s=(new n.Matrix4).multiplyRight((new n.Matrix4).lookAt({eye:p,center:u,up:c}));return a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign({},e,{zoom:null,viewMatrix:s})))}return p(o,t.default),o}();exports.default=b;
},{"./viewport":184,"../utils/log":209,"math.gl":132}],207:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./transition-interpolator"),e=a(t),r=require("./transition-utils"),o=require("./../utils/math-utils"),n=require("viewport-mercator-project"),i=require("../utils/assert"),u=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!l(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function y(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=["longitude","latitude","zoom","bearing","pitch"],m=["latitude","longitude","zoom","width","height"],v=["bearing","pitch"],g=function(t){function i(){var t;return s(this,i),(t=y(this,(i.__proto__||Object.getPrototypeOf(i)).call(this))).propNames=h,t}return d(i,e.default),p(i,[{key:"initializeProps",value:function(t,e){for(var o={},n={},i=0;i<m.length;i++){var a=m[i],l=t[a],f=e[a];(0,u.default)((0,r.isValid)(l)&&(0,r.isValid)(f),"".concat(a," must be supplied for transition")),o[a]=l,n[a]=(0,r.getEndValueByShortestPath)(a,l,f)}for(var s=0;s<v.length;s++){var c=v[s],p=t[c]||0,y=e[c]||0;o[c]=p,n[c]=(0,r.getEndValueByShortestPath)(c,p,y)}return{start:o,end:n}}},{key:"interpolateProps",value:function(t,e,r){for(var i=(0,n.flyToViewport)(t,e,r),u=0;u<v.length;u++){var a=v[u];i[a]=(0,o.lerp)(t[a],e[a],r)}return i}}]),i}();exports.default=g;
},{"./transition-interpolator":305,"./transition-utils":208,"./../utils/math-utils":275,"viewport-mercator-project":97,"../utils/assert":292}],210:[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){var e=i(r),o=t,u=!0,y=!1,l=void 0;try{for(var c,a=e[Symbol.iterator]();!(u=(c=a.next()).done);u=!0){var p=c.value;if(!n(o))return;o=f(o)(o,p)}}catch(t){y=!0,l=t}finally{try{u||null==a.return||a.return()}finally{if(y)throw l}}return o}function n(r){return null!==r&&"object"===t(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=r;var e=function(t,r){return t[r]},o=function(t,r){return t.get(r)},u={};function f(t){return Object.getPrototypeOf(t).get?o:e}function i(t){if("string"==typeof t){var r=u[t];return r||(r=t.split("."),u[t]=r),r}return Array.isArray(t)?t:[t]}
},{}],212:[function(require,module,exports) {
"use strict";function n(n,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](n):n instanceof t}function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){return u(n)||i(n,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(n,t){var e=[],r=!0,i=!1,u=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!t||e.length!==t);r=!0);}catch(n){i=!0,u=n}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return e}function u(n){if(Array.isArray(n))return n}function o(t,e){if(!n(t,e))throw new TypeError("Cannot call a class as a function")}function a(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function s(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}Object.defineProperty(exports,"__esModule",{value:!0});var l=function(n){return n.length},c=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;o(this,n),this.sortedBins=this.getSortedBins(t,e),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return s(n,[{key:"getSortedBins",value:function(n,t){return n.reduce(function(n,e,r){var i=t(e.points);return null!==i&&void 0!==i&&n.push({i:Number.isFinite(e.index)?e.index:r,value:i,counts:e.points.length}),n},[]).sort(function(n,t){return n.value-t.value})}},{key:"getValueRange",value:function(n){var t=e(n,2),r=t[0],i=t[1],u=this.sortedBins.length;if(!u)return[0,0];var o=Math.ceil(r/100*(u-1)),a=Math.floor(i/100*(u-1));return[this.sortedBins[o].value,this.sortedBins[a].value]}},{key:"getMaxCount",value:function(){var n=0;return this.sortedBins.forEach(function(t){return n=n>t.counts?n:t.counts}),n}},{key:"getBinMap",value:function(){return this.sortedBins.reduce(function(n,e){return Object.assign(n,t({},e.i,e))},{})}}]),n}();exports.default=c;
},{}],213:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.defaultColorRange=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];
},{}],214:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearScale=o,exports.quantizeScale=l,exports.getQuantizeScale=c,exports.getLinearScale=f,exports.clamp=s;var r=require("./log"),t=n(r);function n(r){return r&&r.__esModule?r:{default:r}}function e(r,t){return i(r)||u(r,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(r,t){var n=[],e=!0,a=!1,u=void 0;try{for(var i,o=r[Symbol.iterator]();!(e=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(r){a=!0,u=r}finally{try{e||null==o.return||o.return()}finally{if(a)throw u}}return n}function i(r){if(Array.isArray(r))return r}function o(r,t,n){return(n-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]}function l(r,n,e){var a=r[1]-r[0];if(a<=0)return t.default.warn("quantizeScale: invalid domain, returning range[0]"),n[0];var u=a/n.length,i=Math.floor((e-r[0])/u);return n[Math.max(Math.min(i,n.length-1),0)]}function c(r,t){return function(n){return l(r,t,n)}}function f(r,t){return function(n){return(n-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]}}function s(r,t){var n=e(r,2),a=n[0],u=n[1];return Math.min(u,Math.max(a,t))}
},{"./log":209}],308:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n";
},{}],309:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default='#define SHADER_NAME reflection-effect-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D reflectionTexture;\nuniform int reflectionTextureWidth;\nuniform int reflectionTextureHeight;\n\nuniform float reflectivity;\nuniform float blur;\n\n\nvarying vec2 uv;\n\n#define KERNEL_SIZE 7\n\n/*\n * Samples from tex with a gaussian-shaped patch, centered at uv and\n * with standard deviation sigma.  The size of the texture in\n * pixels must be specified by dim\n */\nvec4 sample_gaussian(sampler2D tex, vec2 dim, vec2 uv, float sigma) {\n  if (sigma == 0.0) {\n    return texture2D(tex, uv);\n  }\n\n  vec2 delta = 1.0 / dim;\n  vec2 top_left = uv - delta * float(KERNEL_SIZE+1) / 2.0;\n\n  vec4 color = vec4(0);\n  float sum = 0.0;\n  for (int i = 0; i <  KERNEL_SIZE; ++i) {\n    for (int j = 0; j < KERNEL_SIZE; ++j) {\n      vec2 uv2 = top_left + vec2(i, j) * delta;\n      float d = length((uv2 - uv) * dim);\n      float f = exp(-(d*d) / (2.0*sigma * sigma));\n      color += f * texture2D(tex, uv2);\n      sum += f;\n    }\n  }\n  return color / sum;\n}\n\nvoid main(void) {\n  //map blur in [0, 1] to sigma in [0, inf]\n  //alpha will determine the "steepness" of our curve.\n  //this was picked just to make the scale feel "natural"\n  //if our image is 1000 pixels wide, a blur of 0.5 should correspond\n  //to a sigma of 1 pixels\n  float alpha = 1000.0;\n  float sigma = blur / (alpha * (1.0 - blur));\n  //let this be our standard deviation in terms of screen-widths.\n  //rewrite this in terms of pixels.\n  sigma *= float(reflectionTextureWidth);\n\n\n  gl_FragColor = sample_gaussian(reflectionTexture, vec2(reflectionTextureWidth,\n    reflectionTextureHeight), vec2(uv.x, 1. - uv.y), sigma);\n  //because our canvas expects alphas to be pre-multiplied, we multiply by whole\n  //color vector by reflectivity, not just the alpha channel\n  gl_FragColor *= reflectivity;\n}\n';
},{}],224:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("luma.gl"),t=require("../../../core/experimental/lib/effect"),r=l(t),n=require("../../../core/viewports/web-mercator-viewport"),i=l(n),o=require("./reflection-effect-vertex.glsl"),f=l(o),a=require("./reflection-effect-fragment.glsl"),u=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!c(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(t){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return h(this,n),(e=b(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))).reflectivity=t,e.blur=r,e.framebuffer=null,e.setNeedsRedraw(),e}return w(n,r.default),y(n,[{key:"getShaders",value:function(){return{vs:f.default,fs:u.default,modules:[],shaderCache:this.context.shaderCache}}},{key:"initialize",value:function(t){var r=t.gl;t.layerManager;this.unitQuad=new e.Model(r,Object.assign({},this.getShaders(),{id:"reflection-effect",geometry:new e.Geometry({drawMode:e.GL.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new e.Framebuffer(r,{depth:!0})}},{key:"preDraw",value:function(t){var r=t.gl,n=t.layerManager,o=n.context.viewport,f="undefined"!=typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:f*o.width,height:f*o.height});var a=o.pitch;this.framebuffer.bind(),n.setViewport(new i.default(Object.assign({},o,{pitch:-180-a}))),r.clear(e.GL.COLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT),n.drawLayers({pass:"reflection"}),n.setViewport(o),this.framebuffer.unbind()}},{key:"draw",value:function(e){e.gl,e.layerManager;this.unitQuad.render({reflectionTexture:this.framebuffer.texture,reflectionTextureWidth:this.framebuffer.width,reflectionTextureHeight:this.framebuffer.height,reflectivity:this.reflectivity,blur:this.blur})}},{key:"finalize",value:function(e){e.gl,e.layerManager}}]),n}();exports.default=m;
},{"luma.gl":317,"../../../core/experimental/lib/effect":223,"../../../core/viewports/web-mercator-viewport":185,"./reflection-effect-vertex.glsl":308,"./reflection-effect-fragment.glsl":309}],144:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.experimental=exports.MapController=exports.OrthographicView=exports.PerspectiveView=exports.OrbitView=exports.ThirdPersonView=exports.FirstPersonView=exports.MapView=exports.View=exports.lighting=exports.project64=exports.project=exports.OrthographicViewport=exports.PerspectiveViewport=exports.WebMercatorViewport=exports.Viewport=exports.CompositeLayer=exports.Layer=exports.AttributeManager=exports.LayerManager=exports.Deck=exports.COORDINATE_SYSTEM=void 0;var e=require("./lib/constants");Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}});var r=require("./lib/deck");Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return le(r).default}});var t=require("./lib/layer-manager");Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return le(t).default}});var i=require("./lib/attribute-manager");Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return le(i).default}});var o=require("./lib/layer");Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return le(o).default}});var n=require("./lib/composite-layer");Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return le(n).default}});var a=require("./viewports/viewport");Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return le(a).default}});var u=require("./viewports/web-mercator-viewport");Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return le(u).default}});var l=require("./viewports/perspective-viewport");Object.defineProperty(exports,"PerspectiveViewport",{enumerable:!0,get:function(){return le(l).default}});var p=require("./viewports/orthographic-viewport");Object.defineProperty(exports,"OrthographicViewport",{enumerable:!0,get:function(){return le(p).default}});var s=require("./shaderlib/project/project");Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return le(s).default}});var f=require("./shaderlib/project64/project64");Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return le(f).default}});var c=require("./shaderlib/lighting/lighting");Object.defineProperty(exports,"lighting",{enumerable:!0,get:function(){return le(c).default}});var b=require("./views/view");Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return le(b).default}});var d=require("./views/map-view");Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return le(d).default}});var w=require("./views/first-person-view");Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return le(w).default}});var v=require("./views/third-person-view");Object.defineProperty(exports,"ThirdPersonView",{enumerable:!0,get:function(){return le(v).default}});var g=require("./views/orbit-view");Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return le(g).default}});var x=require("./views/perspective-view");Object.defineProperty(exports,"PerspectiveView",{enumerable:!0,get:function(){return le(x).default}});var q=require("./views/orthographic-view");Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return le(q).default}});var m=require("./controllers/map-controller");Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return le(m).default}}),require("./lib/init"),require("./shaderlib");var O=require("./controllers/orbit-controller"),y=le(O),P=require("./controllers/first-person-state"),V=le(P),j=require("./controllers/orbit-state"),S=le(j),h=require("./controllers/map-state"),M=le(h),T=require("./controllers/viewport-controls"),E=le(T),C=require("./controllers/map-controls"),L=le(C),A=require("./viewports/first-person-viewport"),I=le(A),N=require("./viewports/third-person-viewport"),_=le(N),R=require("./viewports/orbit-viewport"),D=le(R),F=require("./experimental/lib/effect-manager"),z=le(F),k=require("./experimental/lib/effect"),Y=le(k),Q=require("./lib/transition-manager"),W=le(Q),B=require("./transitions/linear-interpolator"),G=le(B),H=require("./transitions/viewport-fly-to-interpolator"),J=le(H),K=require("./transitions/transition-utils"),U=require("./utils/log"),X=le(U),Z=require("./utils/get"),$=require("./utils/count"),ee=require("./utils/bin-sorter"),re=le(ee),te=require("./utils/color-utils"),ie=require("./utils/scale-utils"),oe=require("./utils/flatten"),ne=require("./utils/fp64"),ae=require("./experimental/reflection-effect/reflection-effect"),ue=le(ae);function le(e){return e&&e.__esModule?e:{default:e}}var pe=exports.experimental={OrbitController:y.default,ViewportControls:E.default,MapControls:L.default,FirstPersonState:V.default,OrbitState:S.default,MapState:M.default,FirstPersonViewport:I.default,ThirdPersonViewport:_.default,OrbitViewport:D.default,EffectManager:z.default,Effect:Y.default,TRANSITION_EVENTS:Q.TRANSITION_EVENTS,LinearInterpolator:G.default,ViewportFlyToInterpolator:J.default,TransitionManager:W.default,extractViewState:K.extractViewState,BinSorter:re.default,linearScale:ie.linearScale,getLinearScale:ie.getLinearScale,quantizeScale:ie.quantizeScale,getQuantizeScale:ie.getQuantizeScale,clamp:ie.clamp,defaultColorRange:te.defaultColorRange,log:X.default,get:Z.get,count:$.count,flatten:oe.flatten,countVertices:oe.countVertices,flattenVertices:oe.flattenVertices,fillArray:oe.fillArray,enable64bitSupport:ne.enable64bitSupport,fp64ify:ne.fp64ify,fp64LowPart:ne.fp64LowPart,ReflectionEffect:ue.default};
},{"./lib/init":177,"./shaderlib":330,"./lib/constants":178,"./lib/deck":179,"./lib/layer-manager":180,"./lib/attribute-manager":181,"./lib/layer":182,"./lib/composite-layer":183,"./viewports/viewport":184,"./viewports/web-mercator-viewport":185,"./viewports/perspective-viewport":186,"./viewports/orthographic-viewport":187,"./shaderlib/project/project":219,"./shaderlib/project64/project64":220,"./shaderlib/lighting/lighting":221,"./views/view":188,"./views/map-view":189,"./views/first-person-view":190,"./views/third-person-view":191,"./views/orbit-view":192,"./views/perspective-view":193,"./views/orthographic-view":194,"./controllers/map-controller":195,"./controllers/orbit-controller":196,"./controllers/first-person-state":197,"./controllers/orbit-state":198,"./controllers/map-state":199,"./controllers/viewport-controls":200,"./controllers/map-controls":201,"./viewports/first-person-viewport":202,"./viewports/third-person-viewport":203,"./viewports/orbit-viewport":204,"./experimental/lib/effect-manager":222,"./experimental/lib/effect":223,"./lib/transition-manager":205,"./transitions/linear-interpolator":206,"./transitions/viewport-fly-to-interpolator":207,"./transitions/transition-utils":208,"./utils/log":209,"./utils/get":210,"./utils/count":211,"./utils/bin-sorter":212,"./utils/color-utils":213,"./utils/scale-utils":214,"./utils/flatten":215,"./utils/fp64":216,"./experimental/reflection-effect/reflection-effect":224}],264:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(instancePositions.xy);\n  vec2 target = project_position(instancePositions.zw);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],265:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instancePositions.xy, instancePositions64Low.xy, projected_source_coord);\n  project_position_fp64(instancePositions.zw, instancePositions64Low.zw, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],266:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],163:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),o=require("./arc-layer-vertex.glsl"),r=l(o),n=require("./arc-layer-vertex-64.glsl"),a=l(n),i=require("./arc-layer-fragment.glsl"),s=l(i);function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,o){return e&&p(t.prototype,e),o&&p(t,o),t}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:g(n,e,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=t.experimental.fp64LowPart,S=t.experimental.enable64bitSupport,m=[0,0,0,255],P={strokeWidth:1,fp64:!1,getSourcePosition:function(t){return t.sourcePosition},getTargetPosition:function(t){return t.targetPosition},getSourceColor:function(t){return t.color||m},getTargetColor:function(t){return t.color||m}},w=function(o){function n(){return f(this,n),d(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return h(n,t.Layer),y(n,[{key:"getShaders",value:function(){return S(this.props)?{vs:a.default,fs:s.default,modules:["project64","picking"]}:{vs:r.default,fs:s.default,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instanceSourceColors:{size:4,type:e.GL.UNSIGNED_BYTE,transition:!0,accessor:"getSourceColor",update:this.calculateInstanceSourceColors},instanceTargetColors:{size:4,type:e.GL.UNSIGNED_BYTE,transition:!0,accessor:"getTargetColor",update:this.calculateInstanceTargetColors}})}},{key:"updateAttribute",value:function(e){var o=e.props,r=e.oldProps;e.changeFlags;if(o.fp64!==r.fp64){var n=this.getAttributeManager();n.invalidateAll(),o.fp64&&o.coordinateSystem===t.COORDINATE_SYSTEM.LNGLAT?n.addInstanced({instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low}}):n.remove(["instancePositions64Low"])}}},{key:"updateState",value:function(t){var e=t.props,o=t.oldProps,r=t.changeFlags;if(g(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateState",this).call(this,{props:e,oldProps:o,changeFlags:r}),e.fp64!==o.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)})}this.updateAttribute({props:e,oldProps:o,changeFlags:r})}},{key:"draw",value:function(t){var e=t.uniforms,o=this.props.strokeWidth;this.state.model.render(Object.assign({},e,{strokeWidth:o}))}},{key:"_getModel",value:function(t){for(var o=[],r=0;r<50;r++)o=o.concat([r,-1,0,r,1,0]);var n=new e.Model(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLE_STRIP,attributes:{positions:new Float32Array(o)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return n.setUniforms({numSegments:50}),n}},{key:"calculateInstancePositions",value:function(t){var e=this.props,o=e.data,r=e.getSourcePosition,n=e.getTargetPosition,a=t.value,i=t.size,s=0,l=!0,u=!1,c=void 0;try{for(var f,p=o[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var y=f.value,d=r(y),v=n(y);a[s+0]=d[0],a[s+1]=d[1],a[s+2]=v[0],a[s+3]=v[1],s+=i}}catch(t){u=!0,c=t}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}},{key:"calculateInstancePositions64Low",value:function(t){var e=this.props,o=e.data,r=e.getSourcePosition,n=e.getTargetPosition,a=t.value,i=t.size,s=0,l=!0,u=!1,c=void 0;try{for(var f,p=o[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var y=f.value,d=r(y),v=n(y);a[s+0]=b(d[0]),a[s+1]=b(d[1]),a[s+2]=b(v[0]),a[s+3]=b(v[1]),s+=i}}catch(t){u=!0,c=t}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}},{key:"calculateInstanceSourceColors",value:function(t){var e=this.props,o=e.data,r=e.getSourceColor,n=t.value,a=t.size,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r(c.value);n[i+0]=p[0],n[i+1]=p[1],n[i+2]=p[2],n[i+3]=isNaN(p[3])?255:p[3],i+=a}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}},{key:"calculateInstanceTargetColors",value:function(t){var e=this.props,o=e.data,r=e.getTargetColor,n=t.value,a=t.size,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r(c.value);n[i+0]=p[0],n[i+1]=p[1],n[i+2]=p[2],n[i+3]=isNaN(p[3])?255:p[3],i+=a}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}}]),n}();exports.default=w,w.layerName="ArcLayer",w.defaultProps=P;
},{"../../core":144,"luma.gl":317,"./arc-layer-vertex.glsl":264,"./arc-layer-vertex-64.glsl":265,"./arc-layer-fragment.glsl":266}],269:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default='#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n';
},{}],270:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME icon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * mix(1.0, vColor.a, vColorMode);\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],164:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),n=require("./icon-layer-vertex.glsl"),r=i(n),a=require("./icon-layer-fragment.glsl"),o=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return f(t)||u(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}function f(t){if(Array.isArray(t))return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function v(t,e){if(!y(t,e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function g(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:m(a,e,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var S=t.experimental.fp64LowPart,w=t.experimental.enable64bitSupport,_=[0,0,0,255],x=e.GL.LINEAR_MIPMAP_LINEAR,P=e.GL.LINEAR,M={iconAtlas:null,iconMapping:{},sizeScale:1,fp64:!1,getPosition:function(t){return t.position},getIcon:function(t){return t.icon},getColor:function(t){return t.color||_},getSize:function(t){return t.size||1},getAngle:function(t){return t.angle||0}},T=function(n){function a(){return v(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return I(a,t.Layer),h(a,[{key:"getShaders",value:function(){var t=w(this.props)?"project64":"project32";return{vs:r.default,fs:o.default,modules:[t,"picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",update:this.calculateInstanceSizes},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:e.GL.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:e.GL.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors},instanceAngles:{size:1,transition:!0,accessor:"getAngle",update:this.calculateInstanceAngles}})}},{key:"updateState",value:function(t){var n=this,r=t.oldProps,o=t.props,i=t.changeFlags;m(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateState",this).call(this,{props:o,oldProps:r,changeFlags:i});var l,c=o.iconAtlas,u=o.iconMapping;if(r.iconMapping!==u){var f=this.getAttributeManager();f.invalidate("instanceOffsets"),f.invalidate("instanceIconFrames"),f.invalidate("instanceColorModes")}r.iconAtlas!==c&&(y(c,e.Texture2D)?(c.setParameters((p(l={},e.GL.TEXTURE_MIN_FILTER,x),p(l,e.GL.TEXTURE_MAG_FILTER,P),l)),this.setState({iconsTexture:c})):"string"==typeof c&&(0,e.loadTextures)(this.context.gl,{urls:[c]}).then(function(t){var r,a=s(t,1)[0];a.setParameters((p(r={},e.GL.TEXTURE_MIN_FILTER,x),p(r,e.GL.TEXTURE_MAG_FILTER,P),r)),n.setState({iconsTexture:a})}));if(o.fp64!==r.fp64){var v=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(v)}),this.state.attributeManager.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.sizeScale,r=this.state.iconsTexture;r&&this.state.model.render(Object.assign({},e,{iconsTexture:r,iconsTextureDim:[r.width,r.height],sizeScale:n}))}},{key:"_getModel",value:function(t){return new e.Model(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,n=e.data,r=e.getPosition,a=t.value,o=0,i=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=r(c.value);a[o++]=f[0],a[o++]=f[1],a[o++]=f[2]||0}}catch(t){l=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=w(this.props);if(t.isGeneric=!e,e){var n=this.props,r=n.data,a=n.getPosition,o=t.value,i=0,l=!0,s=!1,c=void 0;try{for(var u,f=r[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=a(u.value);o[i++]=S(p[0]),o[i++]=S(p[1])}}catch(t){s=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}}else t.value=new Float32Array(2)}},{key:"calculateInstanceSizes",value:function(t){var e=this.props,n=e.data,r=e.getSize,a=t.value,o=0,i=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;a[o++]=r(f)}}catch(t){l=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}}},{key:"calculateInstanceAngles",value:function(t){var e=this.props,n=e.data,r=e.getAngle,a=t.value,o=0,i=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;a[o++]=r(f)}}catch(t){l=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,n=e.data,r=e.getColor,a=t.value,o=0,i=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=r(c.value);a[o++]=f[0],a[o++]=f[1],a[o++]=f[2],a[o++]=isNaN(f[3])?255:f[3]}}catch(t){l=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(l)throw s}}}},{key:"calculateInstanceOffsets",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,a=e.getIcon,o=t.value,i=0,l=!0,s=!1,c=void 0;try{for(var u,f=n[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=r[a(u.value)]||{};o[i++]=p.width/2-p.anchorX||0,o[i++]=p.height/2-p.anchorY||0}}catch(t){s=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}}},{key:"calculateInstanceColorMode",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,a=e.getIcon,o=t.value,i=0,l=!0,s=!1,c=void 0;try{for(var u,f=n[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=a(u.value),y=r[p]&&r[p].mask;o[i++]=y?1:0}}catch(t){s=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}}},{key:"calculateInstanceIconFrames",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,a=e.getIcon,o=t.value,i=0,l=!0,s=!1,c=void 0;try{for(var u,f=n[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=r[a(u.value)]||{};o[i++]=p.x||0,o[i++]=p.y||0,o[i++]=p.width||0,o[i++]=p.height||0}}catch(t){s=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}}}]),a}();exports.default=T,T.layerName="IconLayer",T.defaultProps=M;
},{"../../core":144,"luma.gl":317,"./icon-layer-vertex.glsl":269,"./icon-layer-fragment.glsl":270}],267:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],268:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],165:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),o=require("./line-layer-vertex.glsl"),r=i(o),n=require("./line-layer-fragment.glsl"),a=i(n);function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!s(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),t}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:d(n,e,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=t.experimental.fp64LowPart,g=t.experimental.enable64bitSupport,b=[0,0,0,255],P={strokeWidth:1,fp64:!1,getSourcePosition:function(t){return t.sourcePosition},getTargetPosition:function(t){return t.targetPosition},getColor:function(t){return t.color||b}},S=function(o){function n(){return u(this,n),p(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return v(n,t.Layer),f(n,[{key:"getShaders",value:function(){var t=g(this.props)?"project64":"project32";return{vs:r.default,fs:a.default,modules:[t,"picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition",update:this.calculateInstanceSourcePositions},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition",update:this.calculateInstanceTargetPositions},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:e.GL.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateState",value:function(t){var e=t.props,o=t.oldProps,r=t.changeFlags;if(d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateState",this).call(this,{props:e,oldProps:o,changeFlags:r}),e.fp64!==o.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.state.attributeManager.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,o=this.props.strokeWidth;this.state.model.render(Object.assign({},e,{strokeWidth:o}))}},{key:"_getModel",value:function(t){return new e.Model(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLE_STRIP,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourcePositions",value:function(t){var e=this.props,o=e.data,r=e.getSourcePosition,n=t.value,a=t.size,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r(c.value);n[i+0]=p[0],n[i+1]=p[1],n[i+2]=isNaN(p[2])?0:p[2],i+=a}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}},{key:"calculateInstanceTargetPositions",value:function(t){var e=this.props,o=e.data,r=e.getTargetPosition,n=t.value,a=t.size,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r(c.value);n[i+0]=p[0],n[i+1]=p[1],n[i+2]=isNaN(p[2])?0:p[2],i+=a}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(t){var e=g(this.props);if(t.isGeneric=!e,e){var o=this.props,r=o.data,n=o.getSourcePosition,a=o.getTargetPosition,i=t.value,s=t.size,l=0,u=!0,c=!1,f=void 0;try{for(var p,y=r[Symbol.iterator]();!(u=(p=y.next()).done);u=!0){var d=p.value,v=n(d),b=a(d);i[l+0]=h(v[0]),i[l+1]=h(v[1]),i[l+2]=h(b[0]),i[l+3]=h(b[1]),l+=s}}catch(t){c=!0,f=t}finally{try{u||null==y.return||y.return()}finally{if(c)throw f}}}else t.value=new Float32Array(4)}},{key:"calculateInstanceColors",value:function(t){var e=this.props,o=e.data,r=e.getColor,n=t.value,a=t.size,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r(c.value);n[i+0]=p[0],n[i+1]=p[1],n[i+2]=p[2],n[i+3]=isNaN(p[3])?255:p[3],i+=a}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}}]),n}();exports.default=S,S.layerName="LineLayer",S.defaultProps=P;
},{"../../core":144,"luma.gl":317,"./line-layer-vertex.glsl":267,"./line-layer-fragment.glsl":268}],278:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.), position_worldspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = lighting_getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],279:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME point-cloud-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],166:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),r=require("./point-cloud-layer-vertex.glsl"),o=i(r),n=require("./point-cloud-layer-fragment.glsl"),a=i(n);function i(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!l(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var n=Object.getPrototypeOf(t);return null===n?void 0:d(n,e,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=t.experimental.fp64LowPart,g=t.experimental.enable64bitSupport,b=[0,0,0,255],m={radiusPixels:10,fp64:!1,getPosition:function(t){return t.position},getNormal:function(t){return t.normal},getColor:function(t){return t.color||b},lightSettings:{}},P=function(r){function n(){return u(this,n),p(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return v(n,t.Layer),f(n,[{key:"getShaders",value:function(t){var e=g(this.props)?"project64":"project32";return{vs:o.default,fs:a.default,modules:[e,"lighting","picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:1,update:this.calculateInstanceNormals},instanceColors:{size:4,type:e.GL.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,o=t.changeFlags;if(d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:o}),e.fp64!==r.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.state.attributeManager.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,r=this.props.radiusPixels;this.state.model.render(Object.assign({},e,{radiusPixels:r}))}},{key:"_getModel",value:function(t){for(var r=[],o=0;o<3;o++){var n=o/3*Math.PI*2;r.push(2*Math.cos(n),2*Math.sin(n),0)}return new e.Model(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLES,attributes:{positions:new Float32Array(r)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,r=e.data,o=e.getPosition,n=t.value,a=0,i=!0,l=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value);n[a++]=f[0],n[a++]=f[1],n[a++]=f[2]||0}}catch(t){l=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=g(this.props);if(t.isGeneric=!e,e){var r=this.props,o=r.data,n=r.getPosition,a=t.value,i=0,l=!0,s=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=n(c.value);a[i++]=h(p[0]),a[i++]=h(p[1])}}catch(t){s=!0,u=t}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}else t.value=new Float32Array(2)}},{key:"calculateInstanceNormals",value:function(t){var e=this.props,r=e.data,o=e.getNormal,n=t.value,a=0,i=!0,l=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value);n[a++]=f[0],n[a++]=f[1],n[a++]=f[2]}}catch(t){l=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,r=e.data,o=e.getColor,n=t.value,a=0,i=!0,l=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value);n[a++]=f[0],n[a++]=f[1],n[a++]=f[2],n[a++]=isNaN(f[3])?255:f[3]}}catch(t){l=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}}]),n}();exports.default=P,P.layerName="PointCloudLayer",P.defaultProps=m;
},{"../../core":144,"luma.gl":317,"./point-cloud-layer-vertex.glsl":278,"./point-cloud-layer-fragment.glsl":279}],273:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  vec3 offset = positions * outerRadiusPixels;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],274:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 || distToCenter < innerUnitRadius) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],167:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),r=require("./scatterplot-layer-vertex.glsl"),o=i(r),a=require("./scatterplot-layer-fragment.glsl"),n=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!s(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:y(a,e,r)}if("value"in o)return o.value;var n=o.get;return void 0!==n?n.call(r):void 0}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=t.experimental.fp64LowPart,b=t.experimental.enable64bitSupport,g=[0,0,0,255],m={radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1,fp64:!1,getPosition:function(t){return t.position},getRadius:function(t){return t.radius||1},getColor:function(t){return t.color||g}},P=function(r){function a(){return u(this,a),p(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return v(a,t.Layer),f(a,[{key:"getShaders",value:function(t){var e=b(this.props)?"project64":"project32";return{vs:o.default,fs:n.default,modules:[e,"picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition",update:this.calculateInstancePositions},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1,update:this.calculateInstanceRadius},instanceColors:{size:4,transition:!0,type:e.GL.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,o=t.changeFlags;if(y(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:o}),e.fp64!==r.fp64){var n=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(n)}),this.state.attributeManager.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,r=this.props,o=r.radiusScale,a=r.radiusMinPixels,n=r.radiusMaxPixels,i=r.outline,s=r.strokeWidth;this.state.model.render(Object.assign({},e,{outline:i?1:0,strokeWidth:s,radiusScale:o,radiusMinPixels:a,radiusMaxPixels:n}))}},{key:"_getModel",value:function(t){return new e.Model(t,Object.assign(this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,r=e.data,o=e.getPosition,a=t.value,n=0,i=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value);a[n++]=f[0],a[n++]=f[1],a[n++]=f[2]||0}}catch(t){s=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=b(this.props);if(t.isGeneric=!e,e){var r=this.props,o=r.data,a=r.getPosition,n=t.value,i=0,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=a(c.value);n[i++]=h(p[0]),n[i++]=h(p[1])}}catch(t){l=!0,u=t}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}else t.value=new Float32Array(2)}},{key:"calculateInstanceRadius",value:function(t){var e=this.props,r=e.data,o=e.getRadius,a=t.value,n=0,i=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value);a[n++]=isNaN(f)?1:f}}catch(t){s=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,r=e.data,o=e.getColor,a=t.value,n=0,i=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value)||g;a[n++]=f[0],a[n++]=f[1],a[n++]=f[2],a[n++]=isNaN(f[3])?255:f[3]}}catch(t){s=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}}}]),a}();exports.default=P,P.layerName="ScatterplotLayer",P.defaultProps=m;
},{"../../core":144,"luma.gl":317,"./scatterplot-layer-vertex.glsl":273,"./scatterplot-layer-fragment.glsl":274}],276:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME screen-grid-layer-vertex-shader\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform vec3 cellScale;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 color = instanceColors / 255.;\n\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n";
},{}],277:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME screen-grid-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],168:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("luma.gl"),r=require("./../../core/utils/math-utils"),o=require("./screen-grid-layer-vertex.glsl"),n=l(o),i=require("./screen-grid-layer-fragment.glsl"),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:y(n,t,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=e.experimental.defaultColorRange,m=e.experimental.quantizeScale,b=[0,0,0,255],S=[0,255,0,255],w={cellSizePixels:100,colorDomain:null,colorRange:g,getPosition:function(e){return e.position},getWeight:function(e){return 1}},_=function(o){function i(){return c(this,i),h(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return v(i,e.Layer),f(i,[{key:"getShaders",value:function(){return{vs:n.default,fs:a.default,modules:["picking"]}}},{key:"initializeState",value:function(){var e=this.getAttributeManager(),r=this.context.gl;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceColors:{size:4,type:t.GL.UNSIGNED_BYTE,transition:!0,accessor:["getPosition","getWeight"],update:this.calculateInstanceColors}}),this.setState({model:this._getModel(r)})}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,o=e.changeFlags;y(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"updateState",this).call(this,{props:r,oldProps:t,changeFlags:o}),(r.cellSizePixels!==t.cellSizePixels||o.viewportChanged)&&this.updateCell()}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props.parameters,o=void 0===r?{}:r,n=this.state,i=n.model,a=n.cellScale;t=Object.assign({},t,{cellScale:a}),i.draw({uniforms:t,parameters:Object.assign({depthTest:!1,depthMask:!1},o)})}},{key:"_getModel",value:function(e){return new t.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new t.Geometry({drawMode:t.GL.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"updateCell",value:function(){var e=this.context.viewport,t=e.width,r=e.height,o=this.props.cellSizePixels,n=new Float32Array([(o-2)/t*2,-(o-2)/r*2,1]),i=Math.ceil(t/o),a=Math.ceil(r/o);this.setState({cellScale:n,numCol:i,numRow:a,numInstances:i*a}),this.getAttributeManager().invalidateAll()}},{key:"calculateInstancePositions",value:function(e,t){for(var r=t.numInstances,o=this.context.viewport,n=o.width,i=o.height,a=this.props.cellSizePixels,l=this.state.numCol,s=e.value,u=e.size,c=0;c<r;c++){var p=c%l,f=Math.floor(c/l);s[c*u+0]=p*a/n*2-1,s[c*u+1]=1-f*a/i*2,s[c*u+2]=0}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,o=t.cellSizePixels,n=t.getPosition,i=t.getWeight,a=this.state,l=a.numCol,s=a.numRow,u=a.numInstances,c=e.value,p=e.size,f=new Array(u),h=0;f.fill(0);var d=!0,y=!1,v=void 0;try{for(var g,m=r[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var b=g.value,S=this.project(n(b)),w=Math.floor(S[0]/o),_=Math.floor(S[1]/o);if(w>=0&&w<l&&_>=0&&_<s){var x=w+_*l;f[x]+=i(b),f[x]>h&&(h=f[x])}}}catch(e){y=!0,v=e}finally{try{d||null==m.return||m.return()}finally{if(y)throw v}}this.setState({maxCount:h});for(var P=0;P<u;P++){var C=this._getColor(f[P],h),M=P*p;c[M+0]=C[0],c[M+1]=C[1],c[M+2]=C[2],c[M+3]=C[3]}}},{key:"_getColor",value:function(e,t){var o,n=this.props,i=n.minColor,a=n.maxColor,l=n.colorRange;if(this._shouldUseMinMax()){var s=e/t;return o=(0,r.lerp)(i||b,a||S,s)}var u=this.props.colorDomain||[1,t];return e<u[0]||e>u[1]?[0,0,0,0]:((o=m(u,l,e))[3]=Number.isFinite(o[3])?o[3]:255,o)}},{key:"_shouldUseMinMax",value:function(){var e=this.props,t=e.minColor,r=e.maxColor,o=e.colorDomain,n=e.colorRange;return!(!t&&!r)||!o&&!n}}]),i}();exports.default=_,_.layerName="ScreenGridLayer",_.defaultProps=w;
},{"../../core":144,"luma.gl":317,"./../../core/utils/math-utils":275,"./screen-grid-layer-vertex.glsl":276,"./screen-grid-layer-fragment.glsl":277}],271:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.w < 0.0);\n  float finalCellSize = project_scale(cellSize) * mix(1.0, 0.0, noRender);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instancePositions.w  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // cube geometry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec3 extrudedPosition = vec3(instancePositions.xy, elevation);\n  vec2 extrudedPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(\n    (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n    (positions.y * coverage - 1.0) / 2.0 * finalCellSize,\n    1.0);\n\n  // extrude positions\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(extrudedPosition, extrudedPosition64xyLow, offset, position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],272:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME grid-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],169:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("luma.gl"),r=require("./grid-cell-layer-vertex.glsl"),o=a(r),n=require("./grid-cell-layer-fragment.glsl"),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!l(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:d(n,t,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=e.experimental.fp64LowPart,g=e.experimental.enable64bitSupport,b=[255,0,255,255],m={cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:function(e){return e.position},getElevation:function(e){return e.elevation},getColor:function(e){return e.color},lightSettings:{}},S=function(r){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return v(n,e.Layer),p(n,[{key:"getShaders",value:function(){var e=g(this.props)?"project64":"project32";return{vs:o.default,fs:i.default,modules:[e,"lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getPosition","getElevation"],update:this.calculateInstancePositions},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:t.GL.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,o=e.changeFlags;if(d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:o}),t.fp64!==r.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.state.attributeManager.invalidateAll()}}},{key:"_getModel",value:function(e){return new t.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new t.CubeGeometry,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,o=r.cellSize,n=r.extruded,i=r.elevationScale,a=r.coverage;this.state.model.render(Object.assign({},t,{cellSize:o,extruded:n,elevationScale:i,coverage:a}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,r=t.data,o=t.getPosition,n=t.getElevation,i=e.value,a=e.size,l=0,s=!0,u=!1,c=void 0;try{for(var p,f=r[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var y=p.value,d=o(y),v=n(y)||0;i[l+0]=d[0],i[l+1]=d[1],i[l+2]=0,i[l+3]=v,l+=a}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=g(this.props);if(e.isGeneric=!t,t){var r=this.props,o=r.data,n=r.getPosition,i=e.value,a=0,l=!0,s=!1,u=void 0;try{for(var c,p=o[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=n(c.value);i[a++]=h(f[0]),i[a++]=h(f[1])}}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}}else e.value=new Float32Array(2)}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,o=t.getColor,n=e.value,i=e.size,a=0,l=!0,s=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=o(c.value)||b;n[a+0]=f[0],n[a+1]=f[1],n[a+2]=f[2],n[a+3]=Number.isFinite(f[3])?f[3]:b[3],a+=i}}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}}}]),n}();exports.default=S,S.layerName="GridCellLayer",S.defaultProps=m;
},{"../../core":144,"luma.gl":317,"./grid-cell-layer-vertex.glsl":271,"./grid-cell-layer-fragment.glsl":272}],280:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pointToDensityGridData=e;var t=6378e3;function e(t,e,i){var f=r(t,e,i),s=f.gridHash,o=f.gridOffset;return{gridOffset:o,layerData:n(s,o)}}function r(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,f=1/0,s=-1/0,o=0;o<e.length;o++)t=n(e[o])[1],Number.isFinite(t)&&(f=t<f?t:f,s=t>s?t:s);var u=i(r,(f+s)/2);return u.xOffset<=0||u.yOffset<=0?{gridHash:{},gridOffset:u}:{gridHash:e.reduce(function(t,e){var r=n(e)[1],i=n(e)[0];if(!Number.isFinite(r)||!Number.isFinite(i))return t;var f=Math.floor((r+90)/u.yOffset),s=Math.floor((i+180)/u.xOffset),o="".concat(f,"-").concat(s);return t[o]=t[o]||{count:0,points:[]},t[o].count+=1,t[o].points.push(e),t},{}),gridOffset:u}}function n(t,e){return Object.keys(t).reduce(function(r,n,i){var f=n.split("-"),s=parseInt(f[0],10),o=parseInt(f[1],10);return r.push(Object.assign({index:i,position:[e.xOffset*o-180,e.yOffset*s-90]},t[n])),r},[])}function i(t,e){return{yOffset:f(t),xOffset:s(e,t)}}function f(e){return e/t*(180/Math.PI)}function s(e,r){return r/t*(180/Math.PI)/Math.cos(e*Math.PI/180)}
},{}],170:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("../grid-cell-layer/grid-cell-layer"),n=i(t),o=require("./grid-aggregator");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:v(i,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=e.experimental.BinSorter,f=e.experimental.defaultColorRange,y=e.experimental.getQuantizeScale,h=e.experimental.getLinearScale;function m(){}var S={colorDomain:null,colorRange:f,getColorValue:function(e){return e.length},lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},onSetColorDomain:m,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:1,onSetElevationDomain:m,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:function(e){return e.position},extruded:!1,fp64:!1,lightSettings:{}},b=function(t){function i(){return l(this,i),c(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return g(i,e.CompositeLayer),s(i,[{key:"initializeState",value:function(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:m,elevationScaleFunc:m,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,o=e.props,i=e.changeFlags,a=this.getDimensionChanges(n,o);i.dataChanged||this.needsReProjectPoints(n,o)?this.getLayerData():a&&a.forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.cellSize!==t.cellSize}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,o=[];for(var i in n){var a=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});a&&o.push(a.updater)}return o.length?o:null}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,o=n.sortedColorBins,i=n.sortedElevationBins,a=null;if(t.picked&&t.index>-1){var r=this.state.layerData[t.index],l=o.binMap[r.index]&&o.binMap[r.index].value,u=i.binMap[r.index]&&i.binMap[r.index].value;a=Object.assign({colorValue:l,elevationValue:u},r)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={},o=function(o){n[o]={};var i=!0,a=!1,r=void 0;try{for(var l,u=t[o][Symbol.iterator]();!(i=(l=u.next()).done);i=!0){l.value.triggers.forEach(function(t){n[o][t]=e.props[t]})}}catch(e){a=!0,r=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw r}}};for(var i in t)o(i);return n}},{key:"getLayerData",value:function(){var e=this.props,t=e.data,n=e.cellSize,i=e.getPosition,a=(0,o.pointToDensityGridData)(t,n,i).layerData;this.setState({layerData:a}),this.getSortedBins()}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new d(this.state.layerData||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new d(this.state.layerData||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,o=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"==typeof o&&o(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,o=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"==typeof o&&o(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=y(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=h(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,o=t.colorScaleFunc,i=t.colorValueDomain,a=n.binMap[e.index]&&n.binMap[e.index].value,r=this.props.colorDomain||i,l=a>=r[0]&&a<=r[r.length-1]?o(a):[0,0,0,0];return l[3]=Number.isFinite(l[3])?l[3]:255,l}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,o=t.elevationScaleFunc,i=t.elevationValueDomain,a=n.binMap[e.index]&&n.binMap[e.index].value,r=this.props.elevationDomain||i;return a>=r[0]&&a<=r[r.length-1]?o(a):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,t=e.elevationScale,n=e.fp64,o=e.extruded,a=e.cellSize,r=e.coverage,l=e.lightSettings;return v(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"getSubLayerProps",this).call(this,{id:"grid-cell",data:this.state.layerData,fp64:n,cellSize:a,coverage:r,lightSettings:l,elevationScale:t,extruded:o,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return n.default}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),i}();exports.default=b,b.layerName="GridLayer",b.defaultProps=S;
},{"../../core":144,"../grid-cell-layer/grid-cell-layer":169,"./grid-aggregator":280}],283:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  vec2 rPos = rotationMatrix * positions.xz;\n  vec2 rNorm = rotationMatrix * normals.xz; // the hexagon cells has y axis as the vertical axis\n\n  vec3 rotatedPositions = vec3(rPos.x, positions.y, rPos.y);\n  vec3 rotatedNormals = vec3(rNorm.x, rNorm.y, normals.y);\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instancePositions.z * (positions.y + 0.5) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.z < 0.0);\n  float dotRadius = project_scale(radius) * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec3 centroidPosition = vec3(instancePositions.xy, elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(vec2(rotatedPositions.xz * dotRadius), 0.);\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, offset, position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = rotatedNormals;\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n";
},{}],284:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],172:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("luma.gl"),r=require("./hexagon-cell-layer-vertex.glsl"),n=i(r),a=require("./hexagon-cell-layer-fragment.glsl"),o=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return d(e)||p(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}function d(e){if(Array.isArray(e))return e}function f(e,t){if(!l(e,t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:b(a,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=e.experimental.log,S=e.experimental.fp64LowPart,w=e.experimental.enable64bitSupport,C=[255,0,255,255],P={hexagonVertices:null,radius:null,angle:null,coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getCentroid:function(e){return e.centroid},getColor:function(e){return e.color},getElevation:function(e){return e.elevation},lightSettings:{}},_=function(r){function a(e){f(this,a);var t=!1;return e.hexagonVertices||e.radius&&Number.isFinite(e.angle)?e.hexagonVertices&&(!Array.isArray(e.hexagonVertices)||e.hexagonVertices.length<6)&&(x.once(0,"HexagonCellLayer: hexagonVertices needs to be an array of 6 points")(),t=!0):(x.once(0,"HexagonCellLayer: Either hexagonVertices or radius and angle are needed to calculate primitive hexagon.")(),t=!0),t&&(x.once(0,"Now using 1000 meter as default radius, 0 as default angle")(),e.radius=1e3,e.angle=0),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return m(a,e.Layer),h(a,[{key:"getShaders",value:function(){var e=w(this.props)?"project64":"project32";return{vs:n.default,fs:o.default,modules:[e,"lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:["getCentroid","getElevation"],update:this.calculateInstancePositions},instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:t.GL.UNSIGNED_BYTE,transition:!0,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,n=e.changeFlags;if(b(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:n}),t.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.state.attributeManager.invalidateAll()}t.hexagonVertices===r.hexagonVertices&&t.radius===r.radius&&t.angle===r.angle||this.updateRadiusAngle()}},{key:"updateRadiusAngle",value:function(){var e=this.props,t=e.angle,r=e.radius,n=this.props.hexagonVertices;if(Array.isArray(n)&&n.length>=6){var a=this.props.hexagonVertices,o=a[0],i=a[3],l=this.context.viewport.getDistanceScales().pixelsPerMeter,s=this.projectFlat(o),u=this.projectFlat(i),c=s[0]-u[0],p=s[1]-u[1],d=Math.sqrt(c*c+p*p);t=Math.acos(c/d)*-Math.sign(p)+Math.PI/2,r=d/2/l[0]}this.setState({angle:t,radius:r})}},{key:"getCylinderGeometry",value:function(e){return new t.CylinderGeometry({radius:e,topRadius:e,bottomRadius:e,topCap:!0,bottomCap:!0,height:1,nradial:6,nvertical:1})}},{key:"_getModel",value:function(e){return new t.Model(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,n=r.elevationScale,a=r.extruded,o=r.coverage,i=this.state,l=i.radius,s=i.angle;this.state.model.render(Object.assign({},t,{radius:l,angle:s,extruded:a,coverage:o,elevationScale:n}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,r=t.data,n=t.getCentroid,a=t.getElevation,o=e.value,i=e.size,l=0,s=!0,c=!1,p=void 0;try{for(var d,f=r[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var y=d.value,h=u(n(y),2),g=h[0],v=h[1],b=a(y);o[l+0]=g,o[l+1]=v,o[l+2]=b||0,l+=i}}catch(e){c=!0,p=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw p}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=w(this.props);if(e.isGeneric=!t,t){var r=this.props,n=r.data,a=r.getCentroid,o=e.value,i=0,l=!0,s=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var d=a(c.value);o[i++]=S(d[0]),o[i++]=S(d[1])}}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}}else e.value=new Float32Array(2)}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,n=t.getColor,a=e.value,o=e.size,i=0,l=!0,s=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var d=n(c.value)||C;a[i+0]=d[0],a[i+1]=d[1],a[i+2]=d[2],a[i+3]=Number.isFinite(d[3])?d[3]:C[3],i+=o}}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}}}]),a}();exports.default=_,_.layerName="HexagonCellLayer",_.defaultProps=P;
},{"../../core":144,"luma.gl":317,"./hexagon-cell-layer-vertex.glsl":283,"./hexagon-cell-layer-fragment.glsl":284}],478:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e,a,o,i=0,c=0,f=1,l=1,s=t,h=u;function v(n){var r,t={},u=[],e=n.length;for(r=0;r<e;++r)if(!isNaN(c=+s.call(null,i=n[r],r,n))&&!isNaN(f=+h.call(null,i,r,n))){var i,c,f,l=Math.round(f/=o),v=Math.round(c=c/a-(1&l)/2),M=f-l;if(3*Math.abs(M)>1){var d=c-v,p=v+(c<v?-1:1)/2,g=l+(f<l?-1:1),x=c-p,m=f-g;d*d+M*M>x*x+m*m&&(v=p+(1&l?1:-1)/2,l=g)}var j=v+"-"+l,N=t[j];N?N.push(i):(u.push(N=t[j]=[i]),N.x=(v+(1&l)/2)*a,N.y=l*o)}return u}function M(n){var t=0,u=0;return r.map(function(r){var e=Math.sin(r)*n,a=-Math.cos(r)*n,o=e-t,i=a-u;return t=e,u=a,[o,i]})}return v.hexagon=function(n){return"m"+M(null==n?e:+n).join("l")+"z"},v.centers=function(){for(var n=[],r=Math.round(c/o),t=Math.round(i/a),u=r*o;u<l+e;u+=o,++r)for(var s=t*a+(1&r)*a/2;s<f+a/2;s+=a)n.push([s,u]);return n},v.mesh=function(){var n=M(e).slice(0,4).join("l");return v.centers().map(function(r){return"M"+r+"m"+n}).join("")},v.x=function(n){return arguments.length?(s=n,v):s},v.y=function(n){return arguments.length?(h=n,v):h},v.radius=function(r){return arguments.length?(a=2*(e=+r)*Math.sin(n),o=1.5*e,v):e},v.size=function(n){return arguments.length?(i=c=0,f=+n[0],l=+n[1],v):[f-i,l-c]},v.extent=function(n){return arguments.length?(i=+n[0][0],c=+n[0][1],f=+n[1][0],l=+n[1][1],v):[[i,c],[f,l]]},v.radius(1)};var n=Math.PI/3,r=[0,n,2*n,3*n,4*n,5*n];function t(n){return n[0]}function u(n){return n[1]}
},{}],453:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/hexbin");function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"hexbin",{enumerable:!0,get:function(){return r(e).default}});
},{"./src/hexbin":478}],288:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pointToHexbin=n,exports.getRadiusInPixel=r;var e=require("d3-hexbin");function n(n,t){var o=n.data,i=n.radius,s=n.getPosition,u=r(i,t),c=o.map(function(e){return Object.assign({screenCoord:t.projectFlat(s(e))},e)});return{hexagons:(0,e.hexbin)().radius(u).x(function(e){return e.screenCoord[0]}).y(function(e){return e.screenCoord[1]})(c).map(function(e,n){return{centroid:t.unprojectFlat([e.x,e.y]),points:e,index:n}})}}function r(e,n){return e*n.getDistanceScales().pixelsPerMeter[0]}
},{"d3-hexbin":453}],171:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("../hexagon-cell-layer/hexagon-cell-layer"),n=i(t),o=require("./hexagon-aggregator");function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:p(i,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=e.experimental.log,d=e.experimental.BinSorter,f=e.experimental.getQuantizeScale,y=e.experimental.getLinearScale,m=e.experimental.defaultColorRange;function b(){}var S={colorDomain:null,colorRange:m,getColorValue:function(e){return e.length},lowerPercentile:0,upperPercentile:100,onSetColorDomain:b,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:0,elevationUpperPercentile:100,elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:b,radius:1e3,coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:o.pointToHexbin,getPosition:function(e){return e.position},fp64:!1,lightSettings:{}},x=function(t){function o(e){return l(this,o),e.hexagonAggregator||e.radius||(v.once(0,"HexagonLayer: Default hexagonAggregator requires radius prop to be set, Now using 1000 meter as default")(),e.radius=S.radius),Number.isFinite(e.upperPercentile)&&(e.upperPercentile>100||e.upperPercentile<0)&&(v.once(0,"HexagonLayer: upperPercentile should be between 0 and 100. Assign to 100 by default")(),e.upperPercentile=S.upperPercentile),Number.isFinite(e.lowerPercentile)&&(e.lowerPercentile>100||e.lowerPercentile<0)&&(v.once(0,"HexagonLayer: lowerPercentile should be between 0 and 100. Assign to 0 by default")(),e.lowerPercentile=S.upperPercentile),e.lowerPercentile>=e.upperPercentile&&(v.once(0,"HexagonLayer: lowerPercentile should not be bigger than upperPercentile. Assign to 0 by default")(),e.lowerPercentile=S.lowerPercentile),c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))}return h(o,e.CompositeLayer),u(o,[{key:"initializeState",value:function(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:b,elevationScaleFunc:b,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,o=e.props,i=e.changeFlags,r=this.getDimensionChanges(n,o);i.dataChanged||this.needsReProjectPoints(n,o)?this.getHexagons():r&&r.forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,o=[];for(var i in n){var r=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});r&&o.push(r.updater)}return o.length?o:null}},{key:"getHexagons",value:function(){var e=this.props.hexagonAggregator,t=this.context.viewport,n=e(this.props,t),o=n.hexagons,i=n.hexagonVertices;this.setState({hexagons:o,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,o=n.sortedColorBins,i=n.sortedElevationBins,r=null;if(t.picked&&t.index>-1){var a=this.state.hexagons[t.index],l=o.binMap[a.index]&&o.binMap[a.index].value,s=i.binMap[a.index]&&i.binMap[a.index].value;r=Object.assign({colorValue:l,elevationValue:s},a)}return Object.assign(t,{picked:Boolean(r),object:r})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={},o=function(o){n[o]={};var i=!0,r=!1,a=void 0;try{for(var l,s=t[o][Symbol.iterator]();!(i=(l=s.next()).done);i=!0){l.value.triggers.forEach(function(t){n[o][t]=e.props[t]})}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}};for(var i in t)o(i);return n}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new d(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new d(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,o=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"==typeof o&&o(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,o=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"==typeof o&&o(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=f(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=y(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,o=t.colorScaleFunc,i=t.colorValueDomain,r=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,l=r>=a[0]&&r<=a[a.length-1]?o(r):[0,0,0,0];return l[3]=Number.isFinite(l[3])?l[3]:255,l}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,o=t.elevationScaleFunc,i=t.elevationValueDomain,r=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return r>=a[0]&&r<=a[a.length-1]?o(r):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,t=e.radius,n=e.elevationScale,i=e.extruded,r=e.coverage,a=e.lightSettings,l=e.fp64;return p(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"getSubLayerProps",this).call(this,{id:"hexagon-cell",data:this.state.hexagons,fp64:l,hexagonVertices:this.state.hexagonVertices,radius:t,elevationScale:n,angle:Math.PI,extruded:i,coverage:r,lightSettings:a,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return n.default}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),o}();exports.default=x,x.layerName="HexagonLayer",x.defaultProps=S;
},{"../../core":144,"../hexagon-cell-layer/hexagon-cell-layer":172,"./hexagon-aggregator":288}],285:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n  prevPosition = project_position(prevPosition);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  currPosition = project_position(currPosition);\n\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n  nextPosition = project_position(nextPosition);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n";
},{}],286:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position 64bit\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  // Calculate prev position 64bit\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  // Calculate next position 64bit\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n";
},{}],287:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME path-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition >= 0.0 &&\n    vPathPosition <= vPathLength &&\n    mod2(vPathPosition + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],173:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../core"),e=require("luma.gl"),a=require("./path-layer-vertex.glsl"),r=l(a),n=require("./path-layer-vertex-64.glsl"),i=l(n),o=require("./path-layer-fragment.glsl"),s=l(o);function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!u(t,e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,a){return e&&f(t.prototype,e),a&&f(t,a),t}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:g(n,e,a)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(a):void 0}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=t.experimental.fp64LowPart,m=t.experimental.enable64bitSupport,P=[0,0,0,255],S={widthScale:1,widthMinPixels:0,widthMaxPixels:Number.MAX_SAFE_INTEGER,rounded:!1,miterLimit:4,fp64:!1,dashJustified:!1,getPath:function(t){return t.path},getColor:function(t){return t.color||P},getWidth:function(t){return t.width||1},getDashArray:null},w=function(t){var e=t[0],a=t[t.length-1];return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]},E=function(a){function n(){return h(this,n),d(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return y(n,t.Layer),p(n,[{key:"getShaders",value:function(){return m(this.props)?{vs:i.default,fs:s.default,modules:["project64","picking"]}:{vs:r.default,fs:s.default,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,update:this.calculateStartPositions},instanceEndPositions:{size:3,update:this.calculateEndPositions},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas},instanceRightDeltas:{size:3,update:this.calculateRightDeltas},instanceStrokeWidths:{size:1,accessor:"getWidth",update:this.calculateStrokeWidths},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:e.GL.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateColors},instancePickingColors:{size:3,type:e.GL.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"updateAttribute",value:function(e){var a=e.props,r=e.oldProps;e.changeFlags;if(a.fp64!==r.fp64){var n=this.getAttributeManager();n.invalidateAll(),a.fp64&&a.coordinateSystem===t.COORDINATE_SYSTEM.LNGLAT?n.addInstanced({instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow}}):n.remove(["instanceStartEndPositions64xyLow"])}}},{key:"updateState",value:function(t){var e=t.oldProps,a=t.props,r=t.changeFlags;g(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateState",this).call(this,{props:a,oldProps:e,changeFlags:r});var i=this.props.getPath,o=this.getAttributeManager();if(a.fp64!==e.fp64){var s=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)})}if(this.updateAttribute({props:a,oldProps:e,changeFlags:r}),r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){var l=a.data.map(i),u=l.reduce(function(t,e){return t+e.length-1},0);this.setState({paths:l,numInstances:u}),o.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,a=this.props,r=a.rounded,n=a.miterLimit,i=a.widthScale,o=a.widthMinPixels,s=a.widthMaxPixels,l=a.dashJustified;this.state.model.render(Object.assign({},e,{jointType:Number(r),alignMode:Number(l),widthScale:i,miterLimit:n,widthMinPixels:o,widthMaxPixels:s}))}},{key:"_getModel",value:function(t){return new e.Model(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new e.Geometry({drawMode:e.GL.TRIANGLES,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function(t){var e=this.state.paths,a=t.value,r=0;e.forEach(function(t){for(var e=t.length-1,n=0;n<e;n++){var i=t[n];a[r++]=i[0],a[r++]=i[1],a[r++]=i[2]||0}})}},{key:"calculateEndPositions",value:function(t){var e=this.state.paths,a=t.value,r=0;e.forEach(function(t){for(var e=1;e<t.length;e++){var n=t[e];a[r++]=n[0],a[r++]=n[1],a[r++]=n[2]||0}})}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(t){var e=this.state.paths,a=t.value,r=0;e.forEach(function(t){for(var e=t.length-1,n=0;n<e;n++){var i=t[n],o=t[n+1];a[r++]=b(i[0]),a[r++]=b(i[1]),a[r++]=b(o[0]),a[r++]=b(o[1])}})}},{key:"calculateLeftDeltas",value:function(t){var e=this.state.paths,a=t.value,r=0;e.forEach(function(t){for(var e=t.length-1,n=w(t)?t[t.length-2]:t[0],i=0;i<e;i++){var o=t[i];a[r++]=o[0]-n[0],a[r++]=o[1]-n[1],a[r++]=o[2]-n[2]||0,n=o}})}},{key:"calculateRightDeltas",value:function(t){var e=this.state.paths,a=t.value,r=0;e.forEach(function(t){for(var e=1;e<t.length;e++){var n=t[e],i=t[e+1];i||(i=w(t)?t[1]:n),a[r++]=i[0]-n[0],a[r++]=i[1]-n[1],a[r++]=i[2]-n[2]||0}})}},{key:"calculateStrokeWidths",value:function(t){var e=this.props,a=e.data,r=e.getWidth,n=this.state.paths,i=t.value,o=0;n.forEach(function(t,e){for(var n=r(a[e],e),s=1;s<t.length;s++)i[o++]=n})}},{key:"calculateDashArrays",value:function(t){var e=this.props,a=e.data,r=e.getDashArray;if(r){var n=this.state.paths,i=t.value,o=0;n.forEach(function(t,e){for(var n=r(a[e],e),s=1;s<t.length;s++)i[o++]=n[0],i[o++]=n[1]})}}},{key:"calculateColors",value:function(t){var e=this.props,a=e.data,r=e.getColor,n=this.state.paths,i=t.value,o=0;n.forEach(function(t,e){var n=r(a[e],e);isNaN(n[3])&&(n[3]=255);for(var s=1;s<t.length;s++)i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],i[o++]=n[3]})}},{key:"calculatePickingColors",value:function(t){var e=this,a=this.state.paths,r=t.value,n=0;a.forEach(function(t,a){for(var i=e.encodePickingColor(a),o=1;o<t.length;o++)r[n++]=i[0],r[n++]=i[1],r[n++]=i[2]})}}]),n}();exports.default=E,E.layerName="PathLayer",E.defaultProps=S;
},{"../../core":144,"luma.gl":317,"./path-layer-vertex.glsl":285,"./path-layer-vertex-64.glsl":286,"./path-layer-fragment.glsl":287}],452:[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,y,o,p,l,a=t&&t.length,h=a?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s)return c;if(a&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=y=e[1];for(var Z=x;Z<h;Z+=x)o=e[Z],p=e[Z+1],o<i&&(i=o),p<u&&(u=p),o>v&&(v=o),p>y&&(y=p);l=0!==(l=Math.max(v-i,y-u))?1/l:0}return r(s,c,x,i,u,l),c}function n(e,n,t,r,x){var i,u;if(x===A(e,n,t,r)>0)for(i=n;i<t;i+=r)u=k(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=k(i,e[i],e[i+1],u);return u&&g(u,u.next)&&(j(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!g(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(j(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,y,o,p,a){if(e){!a&&p&&l(e,y,o,p);for(var h,s,c=e;e.prev!==e.next;)if(h=e.prev,s=e.next,p?i(e,y,o,p):x(e))n.push(h.i/f),n.push(e.i/f),n.push(s.i/f),j(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(e,n,f),n,f,y,o,p,2):2===a&&v(e,n,f,y,o,p):r(t(e),n,f,y,o,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(d(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(c(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(d(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,y=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,o=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=h(v,f,n,t,r),l=h(y,o,n,t,r),a=e.prevZ,s=e.nextZ;a&&a.z>=p&&s&&s.z<=l;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&d(a.prev,a,a.next)>=0)return!1;if(a=a.prevZ,s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&d(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;a&&a.z>=p;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&d(a.prev,a,a.next)>=0)return!1;a=a.prevZ}for(;s&&s.z<=l;){if(s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&d(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function u(e,n,t){var r=e;do{var x=r.prev,i=r.next.next;!g(x,i)&&w(x,r,r.next,i)&&b(x,i)&&b(i,x)&&(n.push(x.i/t),n.push(r.i/t),n.push(i.i/t),j(r),j(r.next),r=e=i),r=r.next}while(r!==e);return r}function v(e,n,x,i,u,v){var f=e;do{for(var y=f.next.next;y!==f.prev;){if(f.i!==y.i&&Z(f,y)){var o=m(f,y);return f=t(f,f.next),o=t(o,o.next),r(f,n,x,i,u,v),void r(o,n,x,i,u,v)}y=y.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,p=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),p.push(s(f));for(p.sort(y),u=0;u<p.length;u++)o(p[u],x),x=t(x,x.next);return x}function y(e,n){return e.x-n.x}function o(e,n){if(n=p(e,n)){var r=m(n,e);t(r,r.next)}}function p(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t.prev;var f,y=t,o=t.x,p=t.y,l=1/0;for(r=t.next;r!==y;)x>=r.x&&r.x>=o&&x!==r.x&&c(i<p?x:u,i,o,p,i<p?u:x,i,r.x,r.y)&&((f=Math.abs(i-r.y)/(x-r.x))<l||f===l&&r.x>t.x)&&b(r,e)&&(t=r,l=f),r=r.next;return t}function l(e,n,t,r){var x=e;do{null===x.z&&(x.z=h(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,a(x)}function a(e){var n,t,r,x,i,u,v,f,y=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<y&&(v++,r=r.nextZ);n++);for(f=y;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,y*=2}while(u>1);return e}function h(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function s(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function c(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function Z(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!z(e,n)&&b(e,n)&&b(n,e)&&M(e,n)}function d(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function g(e,n){return e.x===n.x&&e.y===n.y}function w(e,n,t,r){return!!(g(e,n)&&g(t,r)||g(e,r)&&g(t,n))||d(e,n,t)>0!=d(e,n,r)>0&&d(t,r,e)>0!=d(t,r,n)>0}function z(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&w(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function b(e,n){return d(e.prev,e,e.next)<0?d(e,n,e.next)>=0&&d(e,e.prev,n)>=0:d(e,n,e.prev)<0||d(e,e.next,n)<0}function M(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function m(e,n){var t=new q(e.i,e.x,e.y),r=new q(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function k(e,n,t,r){var x=new q(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function j(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function q(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(A(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var y=n[v]*t,o=v<f-1?n[v+1]*t:e.length;u-=Math.abs(A(e,y,o,t))}var p=0;for(v=0;v<r.length;v+=3){var l=r[v]*t,a=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[l]-e[h])*(e[a+1]-e[l+1])-(e[l]-e[a])*(e[h+1]-e[l+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],282:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSimple=u,exports.normalize=i,exports.getVertexCount=l,exports.getTriangleCount=a,exports.forEachVertex=c,exports.getSurfaceIndices=s;var e=require("../../core"),r=require("earcut"),t=n(r);function n(e){return e&&e.__esModule?e:{default:e}}var o=e.experimental.flattenVertices;function u(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function i(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).dimensions;return u(e)?[e]:e}function l(e){return u(e)?e.length:e.reduce(function(e,r){return e+r.length},0)}function a(e){var r=0,t=!0,n=!0,o=!1,u=void 0;try{for(var l,a=i(e)[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var c=l.value.length;r+=t?c>=3?c-2:0:c+1,t=!1}}catch(e){o=!0,u=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw u}}return r}function c(e,r){u(e)?e.forEach(r):e.forEach(function(e){e.forEach(r)})}function f(e){var r=null;if(e.length>1){var t=0;r=[],e.forEach(function(e){t+=e.length,r.push(t)}),r.pop()}return r}function s(e){var r=f(e),n=o(e,{dimensions:2,result:[]});return(0,t.default)(n,r,2)}
},{"../../core":144,"earcut":452}],331:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PolygonTesselator=void 0;var t=require("./polygon"),n=e(t),o=require("../../core");function e(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n.default=t,n}function r(t,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n}function i(t,n){if(!r(t,n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function s(t,n,o){return n&&u(t.prototype,n),o&&u(t,o),t}var a=o.experimental.fillArray,l=o.experimental.fp64LowPart;function c(t){return[255&++t,t>>8&255,t>>16&255]}var y=[0,0,0,255],f=exports.PolygonTesselator=function(){function t(o){var e=o.polygons,r=o.IndexType;i(this,t);var u=p(e=e.map(function(t){return n.normalize(t)}));if(this.polygons=e,this.pointCount=u,this.IndexType=r,r===Uint16Array&&u>65535)throw new Error("Vertex count exceeds browser's limit");this.attributes={pickingColors:C({polygons:e,pointCount:u})}}return s(t,[{key:"updatePositions",value:function(t){var n=t.fp64,o=t.extruded,e=this.attributes,r=this.polygons,i=this.pointCount;e.positions=e.positions||new Float32Array(3*i),e.nextPositions=e.nextPositions||new Float32Array(3*i),n&&(e.positions64xyLow=e.positions64xyLow||new Float32Array(2*i),e.nextPositions64xyLow=e.nextPositions64xyLow||new Float32Array(2*i)),x({cache:e,polygons:r,extruded:o,fp64:n})}},{key:"indices",value:function(){return g({polygons:this.polygons,IndexType:this.IndexType})}},{key:"positions",value:function(){return this.attributes.positions}},{key:"positions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"nextPositions",value:function(){return this.attributes.nextPositions}},{key:"nextPositions64xyLow",value:function(){return this.attributes.nextPositions64xyLow}},{key:"elevations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.key,o=void 0===n?"elevations":n,e=t.getElevation,r=void 0===e?function(t){return 100}:e,i=this.attributes,u=this.polygons,s=this.pointCount,a=d({cache:i[o],polygons:u,pointCount:s,getElevation:r});return i[o]=a,a}},{key:"colors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.key,o=void 0===n?"colors":n,e=t.getColor,r=void 0===e?function(t){return y}:e,i=this.attributes,u=this.polygons,s=this.pointCount,a=w({cache:i[o],polygons:u,pointCount:s,getColor:r});return i[o]=a,a}},{key:"pickingColors",value:function(){return this.attributes.pickingColors}}]),t}();function p(t){return t.reduce(function(t,o){return t+n.getVertexCount(o)},0)}function v(t){return t.reduce(function(t,o){return t+n.getTriangleCount(o)},0)}function h(t){var o=new Array(t.length+1);o[0]=0;var e=0;return t.forEach(function(t,r){e+=n.getVertexCount(t),o[r+1]=e}),o}function g(t){var o=t.polygons,e=t.IndexType,r=void 0===e?Uint32Array:e,i=3*v(o),u=h(o),s=new r(i),a=0;return o.forEach(function(t,o){var e=!0,r=!1,i=void 0;try{for(var l,c=n.getSurfaceIndices(t)[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var y=l.value;s[a++]=y+u[o]}}catch(t){r=!0,i=t}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}}),s}function x(t){var o=t.cache,e=o.positions,r=o.positions64xyLow,i=o.nextPositions,u=o.nextPositions64xyLow,s=t.polygons,a=t.extruded,c=t.fp64,y=0,f=0,p=null,v=function(){p&&(i[3*f]=p.x,i[3*f+1]=p.y,i[3*f+2]=p.z,c&&(u[2*f]=p.xLow,u[2*f+1]=p.yLow),f++),p=null};s.forEach(function(t,o){n.forEachVertex(t,function(t,n){var o,s,h=t[0],g=t[1],x=t[2]||0;e[3*y]=h,e[3*y+1]=g,e[3*y+2]=x,c&&(o=l(h),s=l(g),r[2*y]=o,r[2*y+1]=s),y++,a&&n>0&&(i[3*f]=h,i[3*f+1]=g,i[3*f+2]=x,c&&(u[2*f]=o,u[2*f+1]=s),f++),0===n&&(v(),function(t,n,o,e,r){a&&(p={x:t,y:n,z:o,xLow:e,yLow:r})}(h,g,x,o,s))})}),v()}function d(t){var o=t.cache,e=t.polygons,r=t.pointCount,i=t.getElevation,u=o||new Float32Array(r),s=0;return e.forEach(function(t,o){var e=i(o),r=n.getVertexCount(t);a({target:u,source:[e],start:s,count:r}),s+=r}),u}function w(t){var o=t.cache,e=t.polygons,r=t.pointCount,i=t.getColor,u=o||new Uint8ClampedArray(4*r),s=0;return e.forEach(function(t,o){var e=i(o);isNaN(e[3])&&(e[3]=255);var r=n.getVertexCount(t);a({target:u,source:e,start:s,count:r}),s+=e.length*r}),u}function C(t){var o=t.polygons,e=t.pointCount,r=new Uint8ClampedArray(3*e),i=0;return o.forEach(function(t,o){var e=c(o),u=n.getVertexCount(t);a({target:r,source:e,start:i,count:u}),i+=e.length*u}),r}
},{"./polygon":282,"../../core":144}],332:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec2 vertexPositions;\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float elevations;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float isSideVertex;\nuniform float extruded;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n\n  if (isSideVertex > 0.5) {\n    pos = mix(positions, nextPositions, vertexPositions.x);\n    pos64xyLow = mix(positions64xyLow, nextPositions64xyLow, vertexPositions.x);\n  } else {\n    pos = positions;\n    pos64xyLow = positions64xyLow;\n  }\n  if (extruded > 0.5) {\n    pos.z += elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded > 0.5) {\n    if (isSideVertex > 0.5) {\n      normal = vec3(positions.y - nextPositions.y, nextPositions.x - positions.x, 0.0);\n      normal = project_normal(normal);\n    } else {\n      normal = vec3(0.0, 0.0, 1.0);\n    }\n\n    lightWeight = lighting_getLightWeight(position_worldspace.xyz, normal);\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n";
},{}],333:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";
},{}],281:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("luma.gl"),o=require("./polygon-tesselator"),n=require("./solid-polygon-layer-vertex.glsl"),s=r(n),i=require("./solid-polygon-layer-fragment.glsl"),a=r(i);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!l(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,o){return t&&d(e.prototype,t),o&&d(e,o),e}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:g(s,t,o)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=e.experimental.enable64bitSupport,x=e.experimental.get,m=[0,0,0,255],b=[0,0,0,255],C={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:1,getPolygon:function(e){return x(e,"polygon")||x(e,"geometry.coordinates")},getElevation:function(e){return x(e,"elevation")||x(e,"properties.height")||0},getFillColor:function(e){return x(e,"fillColor")||x(e,"properties.color")||b},getLineColor:function(e){return x(e,"lineColor")||x(e,"properties.color")||m},lightSettings:{}},w=new Float32Array([0,1,0,0,1,1,1,0]),P=new Float32Array([1,1,0,1,0,0,1,0]),S={TOP:{indices:{instanced:0},positions:{instanced:0},positions64xyLow:{instanced:0},elevations:{instanced:0},fillColors:{name:"colors",instanced:0},pickingColors:{instanced:0}},SIDE:{positions:{instanced:1},positions64xyLow:{instanced:1},nextPositions:{instanced:1},nextPositions64xyLow:{instanced:1},elevations:{instanced:1},fillColors:{name:"colors",instanced:1},pickingColors:{instanced:1}},WIRE:{positions:{instanced:1},positions64xyLow:{instanced:1},nextPositions:{instanced:1},nextPositions64xyLow:{instanced:1},elevations:{instanced:1},lineColors:{name:"colors",instanced:1},pickingColors:{instanced:1}}},E=function(n){function i(){return c(this,i),f(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return h(i,e.Layer),p(i,[{key:"getShaders",value:function(){var e=v(this.props)?"project64":"project32";return{vs:s.default,fs:a.default,modules:[e,"lighting","picking"]}}},{key:"initializeState",value:function(){var e=this.context.gl;this.setState({numInstances:0,IndexType:(0,t.hasFeature)(e,t.FEATURES.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array});this.getAttributeManager().add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,accessor:["extruded","fp64"],update:this.calculatePositions,noAlloc:!0},positions64xyLow:{size:2,accessor:"fp64",update:this.calculatePositionsLow},nextPositions:{size:3,accessor:["extruded","fp64"],update:this.calculateNextPositions,noAlloc:!0},nextPositions64xyLow:{size:2,accessor:"fp64",update:this.calculateNextPositionsLow},elevations:{size:1,accessor:["extruded","getElevation"],update:this.calculateElevations,noAlloc:!0},fillColors:{alias:"colors",size:4,type:t.GL.UNSIGNED_BYTE,accessor:"getFillColor",update:this.calculateFillColors,noAlloc:!0},lineColors:{alias:"colors",size:4,type:t.GL.UNSIGNED_BYTE,accessor:"getLineColor",update:this.calculateLineColors,noAlloc:!0},pickingColors:{size:3,type:t.GL.UNSIGNED_BYTE,update:this.calculatePickingColors,noAlloc:!0}})}},{key:"draw",value:function(e){var t=e.uniforms,o=this.props,n=o.extruded,s=o.elevationScale,i=Object.assign({},t,{extruded:n?1:0,elevationScale:s});this.state.models.forEach(function(e){e.render(i)})}},{key:"updateState",value:function(e){g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,o=e.oldProps;(t.fp64!==o.fp64||t.filled!==o.filled||t.extruded!==o.extruded||t.wireframe!==o.wireframe)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(Object.assign({modelsChanged:!0},this._getModels(this.context.gl)))),t.extruded!==o.extruded&&this.state.attributeManager.invalidate("extruded"),t.fp64!==o.fp64&&this.state.attributeManager.invalidate("fp64")}},{key:"updateGeometry",value:function(e){var t=e.props,n=e.oldProps,s=e.changeFlags,i=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getPolygon);if(i){var a=t.data.map(t.getPolygon);this.setState({polygonTesselator:new o.PolygonTesselator({polygons:a,IndexType:this.state.IndexType})}),this.state.attributeManager.invalidateAll()}(i||t.extruded!==n.extruded||t.fp64!==n.fp64)&&this.state.polygonTesselator.updatePositions({fp64:t.fp64,extruded:t.extruded})}},{key:"updateAttributes",value:function(e){var t=this.state,o=t.attributeManager,n=t.modelsChanged;if(o.update({data:e.data,numInstances:0,props:e,buffers:e,context:this,ignoreUnknownAttributes:!0}),n)this._updateAttributes(o.getAttributes()),this.setState({modelsChanged:!1});else{var s=o.getChangedAttributes({clearChangedFlags:!0});this._updateAttributes(s)}}},{key:"_updateAttributes",value:function(e){var t=this.state.modelsByName;for(var o in t){var n=t[o];"TOP"===o?n.setVertexCount(this.state.numVertex):n.setInstanceCount(this.state.numInstances);var s=S[o],i={};for(var a in e){var r=e[a],l=s[a];l&&(r.instanced=l.instanced,i[l.name||a]=r)}n.setAttributes(i)}}},{key:"_getModels",value:function(e){var o=this.props,n=o.id,s=o.filled,i=o.extruded,a=o.wireframe,r={};return s&&(r.TOP=new t.Model(e,Object.assign({},this.getShaders(),{id:"".concat(n,"-top"),geometry:new t.Geometry({drawMode:t.GL.TRIANGLES,attributes:{vertexPositions:{size:2,isGeneric:!0,value:new Float32Array([0,1])},nextPositions:{size:3,isGeneric:!0,value:new Float32Array(3)},nextPositions64xyLow:{size:2,isGeneric:!0,value:new Float32Array(2)}}}),uniforms:{isSideVertex:0},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),s&&i&&(r.SIDE=new t.Model(e,Object.assign({},this.getShaders(),{id:"".concat(n,"-side"),geometry:new t.Geometry({drawMode:t.GL.TRIANGLE_STRIP,vertexCount:4,attributes:{vertexPositions:{size:2,value:w}}}),uniforms:{isSideVertex:1},isInstanced:1,shaderCache:this.context.shaderCache}))),i&&a&&(r.WIRE=new t.Model(e,Object.assign({},this.getShaders(),{id:"".concat(n,"-wire"),geometry:new t.Geometry({drawMode:t.GL.LINE_STRIP,vertexCount:4,attributes:{vertexPositions:{size:2,value:P}}}),uniforms:{isSideVertex:1},isInstanced:1,shaderCache:this.context.shaderCache}))),{models:[r.WIRE,r.SIDE,r.TOP].filter(Boolean),modelsByName:r}}},{key:"calculateIndices",value:function(e){e.value=this.state.polygonTesselator.indices(),e.target=t.GL.ELEMENT_ARRAY_BUFFER;var o=e.value.length/e.size;this.setState({numVertex:o})}},{key:"calculatePositions",value:function(e){e.value=this.state.polygonTesselator.positions();var t=e.value.length/e.size;this.setState({numInstances:t})}},{key:"calculatePositionsLow",value:function(e){var t=v(this.props);e.isGeneric=!t,e.value=t?this.state.polygonTesselator.positions64xyLow():new Float32Array(2)}},{key:"calculateNextPositions",value:function(e){e.value=this.state.polygonTesselator.nextPositions()}},{key:"calculateNextPositionsLow",value:function(e){var t=v(this.props);e.isGeneric=!t,e.value=t?this.state.polygonTesselator.nextPositions64xyLow():new Float32Array(2)}},{key:"calculateElevations",value:function(e){var t=this;this.props.extruded?(e.isGeneric=!1,e.value=this.state.polygonTesselator.elevations({getElevation:function(e){return t.props.getElevation(t.props.data[e])}})):(e.isGeneric=!0,e.value=new Float32Array(1))}},{key:"calculateFillColors",value:function(e){var t=this;e.value=this.state.polygonTesselator.colors({key:"fillColors",getColor:function(e){return t.props.getFillColor(t.props.data[e])}})}},{key:"calculateLineColors",value:function(e){var t=this;e.value=this.state.polygonTesselator.colors({key:"lineColors",getColor:function(e){return t.props.getLineColor(t.props.data[e])}})}},{key:"calculatePickingColors",value:function(e){e.value=this.state.polygonTesselator.pickingColors()}}]),i}();exports.default=E,E.layerName="SolidPolygonLayer",E.defaultProps=C;
},{"../../core":144,"luma.gl":317,"./polygon-tesselator":331,"./solid-polygon-layer-vertex.glsl":332,"./solid-polygon-layer-fragment.glsl":333}],174:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("../solid-polygon-layer/solid-polygon-layer"),n=u(t),o=require("../path-layer/path-layer"),r=u(o),i=require("../solid-polygon-layer/polygon"),l=a(i);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=e.experimental.get,v=[0,0,0,255],m=[0,0,0,255],P={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:function(e){return b(e,"polygon")},getFillColor:function(e){return b(e,"fillColor")||m},getLineColor:function(e){return b(e,"lineColor")||v},getLineWidth:function(e){return b(e,"lineWidth")||1},getLineDashArray:null,getElevation:function(e){return b(e,"elevation")||1e3},lightSettings:{}},S=function(t){function o(){return c(this,o),p(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return y(o,e.CompositeLayer),d(o,[{key:"initializeState",value:function(){this.state={paths:[]}}},{key:"updateState",value:function(e){var t=this,n=(e.oldProps,e.props,e.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var o=this.props,r=o.data,i=o.getPolygon;this.state.paths=[],r.forEach(function(e){l.normalize(i(e)).forEach(function(n){return t.state.paths.push({path:n,object:e})})})}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object||t.object})}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,o=e.stroked,i=e.filled,l=e.extruded,a=e.wireframe,u=e.elevationScale,s=this.props,f=s.lineWidthScale,c=s.lineWidthMinPixels,g=s.lineWidthMaxPixels,d=s.lineJointRounded,p=s.lineMiterLimit,h=s.lineDashJustified,y=s.fp64,b=this.props,v=b.getFillColor,m=b.getLineColor,P=b.getLineWidth,S=b.getLineDashArray,C=b.getElevation,L=b.getPolygon,j=b.updateTriggers,w=b.lightSettings,x=this.state.paths,_=t&&t.length>0,E=_&&new n.default(this.getSubLayerProps({id:"fill",updateTriggers:{getElevation:j.getElevation,getFillColor:j.getFillColor,getLineColor:j.getLineColor}}),{data:t,extruded:l,elevationScale:u,fp64:y,filled:i,wireframe:a,getPolygon:L,getElevation:C,getFillColor:v,getLineColor:m,lightSettings:w}),M=!l&&o&&_&&new r.default(this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:j.getLineWidth,getColor:j.getLineColor,getDashArray:j.getLineDashArray}}),{data:x,fp64:y,widthScale:f,widthMinPixels:c,widthMaxPixels:g,rounded:d,miterLimit:p,dashJustified:h,getPath:function(e){return e.path},getColor:function(e){return m(e.object)},getWidth:function(e){return P(e.object)},getDashArray:S&&function(e){return S(e.object)}});return[!l&&E,M,l&&E]}}]),o}();exports.default=S,S.layerName="PolygonLayer",S.defaultProps=P;
},{"../../core":144,"../solid-polygon-layer/solid-polygon-layer":281,"../path-layer/path-layer":173,"../solid-polygon-layer/polygon":282}],289:[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error("deck.gl: ".concat(r))}function r(r){if(Array.isArray(r))return r;switch(e(r.type,"GeoJSON does not have type"),r.type){case"GeometryCollection":return e(Array.isArray(r.geometries),"GeoJSON does not have geometries array"),r.geometries.map(function(e){return{geometry:e}});case"Feature":return[r];case"FeatureCollection":return e(Array.isArray(r.features),"GeoJSON does not have features array"),r.features;default:return[{geometry:r}]}}function t(r){var t=[],o=[],a=[],i=[];return r.forEach(function(r){e(r&&r.geometry,"GeoJSON does not have geometry");var s=r.geometry,u=s.type,c=s.coordinates,p=r.properties;switch(n(u,c),u){case"Point":t.push(r);break;case"MultiPoint":c.forEach(function(e){t.push({geometry:{coordinates:e},properties:p,feature:r})});break;case"LineString":o.push(r);break;case"MultiLineString":c.forEach(function(e){o.push({geometry:{coordinates:e},properties:p,feature:r})});break;case"Polygon":a.push(r),c.forEach(function(e){i.push({geometry:{coordinates:e},properties:p,feature:r})});break;case"MultiPolygon":c.forEach(function(e){a.push({geometry:{coordinates:e},properties:p,feature:r}),e.forEach(function(e){i.push({geometry:{coordinates:e},properties:p,feature:r})})})}}),{pointFeatures:t,lineFeatures:o,polygonFeatures:a,polygonOutlineFeatures:i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.getGeojsonFeatures=r,exports.separateGeojsonFeatures=t;var o={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function n(r,t){var n=o[r];for(e(n,"Unknown GeoJSON type ".concat(r));t&&--n>0;)t=t[0];e(t&&Number.isFinite(t[0]),"".concat(r," coordinates are malformed"))}
},{}],175:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("../scatterplot-layer/scatterplot-layer"),i=s(t),o=require("../path-layer/path-layer"),r=s(o),n=require("../solid-polygon-layer/solid-polygon-layer"),l=s(n),a=require("./geojson");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,i){return t&&g(e.prototype,t),i&&g(e,i),e}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=e.experimental.get,L=[0,0,0,255],P=[0,0,0,255],S={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,fp64:!1,getLineColor:function(e){return b(e,"properties.lineColor")||L},getFillColor:function(e){return b(e,"properties.fillColor")||P},getRadius:function(e){return b(e,"properties.radius")||b(e,"properties.size")||1},getLineWidth:function(e){return b(e,"properties.lineWidth")||1},getElevation:function(e){return b(e,"properties.elevation")||1e3},subLayers:{PointLayer:i.default,LineLayer:r.default,PolygonLayer:l.default},lightSettings:{}},m=function(e){return e.geometry.coordinates},x=function(t){function i(){return p(this,i),c(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return h(i,e.CompositeLayer),f(i,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(e){e.oldProps;var t=e.props;if(e.changeFlags.dataChanged){var i=t.data,o=(0,a.getGeojsonFeatures)(i);this.state.features=(0,a.separateGeojsonFeatures)(o)}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.feature||t.object})}},{key:"renderLayers",value:function(){var e=this.state.features,t=e.pointFeatures,i=e.lineFeatures,o=e.polygonFeatures,r=e.polygonOutlineFeatures,n=this.props,l=n.stroked,a=n.filled,s=n.extruded,u=n.wireframe,d=n.subLayers,p=n.lightSettings,g=this.props,f=g.lineWidthScale,c=g.lineWidthMinPixels,y=g.lineWidthMaxPixels,h=g.lineJointRounded,b=g.lineMiterLimit,L=g.pointRadiusScale,P=g.pointRadiusMinPixels,S=g.pointRadiusMaxPixels,x=g.elevationScale,v=g.fp64,C=this.props,w=C.getLineColor,M=C.getFillColor,R=C.getRadius,_=C.getLineWidth,j=C.getElevation,F=C.updateTriggers,W=t&&t.length>0,E=i&&i.length>0,O=r&&r.length>0,T=o&&o.length>0&&new d.PolygonLayer(this.getSubLayerProps({id:"polygon-fill",updateTriggers:{getElevation:F.getElevation,getFillColor:F.getFillColor,getLineColor:F.getLineColor}}),{data:o,fp64:v,extruded:s,elevationScale:x,filled:a,wireframe:u,lightSettings:p,getPolygon:m,getElevation:j,getFillColor:M,getLineColor:w}),k=!s&&l&&O&&new d.LineLayer(this.getSubLayerProps({id:"polygon-outline",updateTriggers:{getColor:F.getLineColor,getWidth:F.getLineWidth}}),{data:r,fp64:v,widthScale:f,widthMinPixels:c,widthMaxPixels:y,rounded:h,miterLimit:b,getPath:m,getColor:w,getWidth:_}),q=E&&new d.LineLayer(this.getSubLayerProps({id:"line-paths",updateTriggers:{getColor:F.getLineColor,getWidth:F.getLineWidth}}),{data:i,fp64:v,widthScale:f,widthMinPixels:c,widthMaxPixels:y,rounded:h,miterLimit:b,getPath:m,getColor:w,getWidth:_}),G=W&&new d.PointLayer(this.getSubLayerProps({id:"points",updateTriggers:{getColor:F.getFillColor,getRadius:F.getRadius}}),{data:t,fp64:v,radiusScale:L,radiusMinPixels:P,radiusMaxPixels:S,getPosition:m,getColor:M,getRadius:R});return[!s&&T,k,q,G,s&&T]}}]),i}();exports.default=x,x.layerName="GeoJsonLayer",x.defaultProps=S;
},{"../../core":144,"../scatterplot-layer/scatterplot-layer":167,"../path-layer/path-layer":173,"../solid-polygon-layer/solid-polygon-layer":281,"./geojson":289}],439:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default='#define SHADER_NAME multi-icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\n// the following three attributes are for the multi-icon layer\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  vColorMode = instanceColorModes;\n}\n';
},{}],306:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../icon-layer/icon-layer"),e=o(t),r=require("./multi-icon-layer-vertex.glsl"),n=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!i(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,r)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(r):void 0}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h={getShiftInQueue:function(t){return t.shift||0},getLengthOfQueue:function(t){return t.len||1},getAnchorX:function(t){return t.anchorX||0},getAnchorY:function(t){return t.anchorY||0},getPixelOffset:function(t){return t.pixelOffset||[0,0]}},g=function(t){function r(){return u(this,r),f(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return y(r,e.default),c(r,[{key:"getShaders",value:function(){return Object.assign({},p(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"getShaders",this).call(this),{vs:n.default})}},{key:"initializeState",value:function(){p(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instancePixelOffset:{size:2,accessor:"getPixelOffset",update:this.calculatePixelOffset}})}},{key:"updateState",value:function(t){p(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"updateState",this).call(this,t);var e=t.changeFlags;e.updateTriggersChanged&&(e.updateTriggersChanged.getAnchorX||e.updateTriggersChanged.getAnchorY)&&this.getAttributeManager().invalidate("instanceOffsets")}},{key:"calculateInstanceOffsets",value:function(t){var e=this.props,r=e.data,n=e.iconMapping,o=e.getIcon,i=e.getAnchorX,a=e.getAnchorY,u=e.getLengthOfQueue,l=e.getShiftInQueue,c=t.value,f=0,s=!0,p=!1,y=void 0;try{for(var h,g=r[Symbol.iterator]();!(s=(h=g.next()).done);s=!0){var d=h.value,v=n[o(d)]||{},b=u(d),O=l(d);c[f++]=(i(d)-1)*b/2+v.width/2+O||0,c[f++]=v.height/2*a(d)||0}}catch(t){p=!0,y=t}finally{try{s||null==g.return||g.return()}finally{if(p)throw y}}}},{key:"calculatePixelOffset",value:function(t){var e=this.props,r=e.data,n=e.getPixelOffset,o=t.value,i=0,a=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var s=n(c.value);o[i++]=s[0]||0,o[i++]=s[1]||0}}catch(t){u=!0,l=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw l}}}}]),r}();exports.default=g,g.layerName="MultiIconLayer",g.defaultProps=h;
},{"../../icon-layer/icon-layer":164,"./multi-icon-layer-vertex.glsl":439}],290:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_CHAR_SET=void 0,exports.makeFontAtlas=s;var e=require("luma.gl");function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}for(var r=10242,n=10243,a=33071,o=1024,i=64,l=4,u=exports.DEFAULT_CHAR_SET=[],c=32;c<128;c++)u.push(String.fromCharCode(c));function f(e,t,r,n){e.font="".concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline=n?"top":"hanging",e.textAlign="left"}function s(c,s){var x,d=s.fontFamily,p=s.characterSet,m=void 0===p?u:p,v=s.fontSize,g=void 0===v?i:v,h=s.padding,T=void 0===h?l:h,y=document.createElement("canvas"),A=y.getContext("2d");f(A,d,g,!0);var E=0,S=0,_=A.measureText(m[0]).fontBoundingBoxDescent,b=_||g,w=Boolean(_),C={};for(var B in Array.from(m).forEach(function(e){var t=A.measureText(e).width;S+t>o&&(S=0,E++),C[e]={x:S,y:E*(b+T),width:t,height:b,mask:!0},S+=t+T}),y.width=o,y.height=(E+1)*(b+T),f(A,d,g,w),C)A.fillText(B,C[B].x,C[B].y);return{scale:b/g,mapping:C,texture:new e.Texture2D(c,{pixels:y,parameters:(x={},t(x,r,a),t(x,n,a),x)})}}
},{"luma.gl":317}],176:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../core"),t=require("./multi-icon-layer/multi-icon-layer"),n=o(t),r=require("./font-atlas");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=e.experimental.log,h={start:1,middle:0,end:-1},y={top:1,center:0,bottom:-1},m="Monaco, monospace",d=[0,0,0,255],b=32,A={fp64:!1,sizeScale:1,fontFamily:m,characterSet:r.DEFAULT_CHAR_SET,getText:function(e){return e.text},getPosition:function(e){return e.position},getColor:function(e){return e.color||d},getSize:function(e){return e.size||32},getAngle:function(e){return e.angle||0},getTextAnchor:function(e){return e.textAnchor||"middle"},getAlignmentBaseline:function(e){return e.alignmentBaseline||"center"},getPixelOffset:function(e){return e.offset||e.pixelOffset||[0,0]}},x=function(t){function o(){return c(this,o),l(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return g(o,e.CompositeLayer),f(o,[{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags,o=n.fontFamily!==t.fontFamily||n.characterSet!==t.characterSet;o&&this.updateFontAtlas(t.fontFamily,t.characterSet),(r.dataChanged||o||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this.transformStringToLetters()}},{key:"updateFontAtlas",value:function(e,t){var n=this.context.gl,o=(0,r.makeFontAtlas)(n,{fontFamily:e,characterSet:t}),i=o.scale,a=o.mapping,c=o.texture;this.setState({scale:i,iconAtlas:c,iconMapping:a})}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object})}},{key:"transformStringToLetters",value:function(){var e=this.props,t=e.data,n=e.getText,r=this.state.iconMapping;if(t&&0!==t.length){var o=[];t.forEach(function(e){var t=n(e);if(t){var i=[0],a=0;Array.from(t).forEach(function(n,c){var u={text:n,index:c,offsets:i,len:t.length,object:e},f=r[n];f?a+=f.width:(p.warn("Missing character: ".concat(n))(),a+=b),i.push(a),o.push(u)})}}),this.setState({data:o})}}},{key:"getLetterOffset",value:function(e){return e.offsets[e.index]}},{key:"getTextLength",value:function(e){return e.offsets[e.offsets.length-1]}},{key:"getAnchorXFromTextAnchor",value:function(e){if(!h.hasOwnProperty(e))throw new Error("Invalid text anchor parameter: ".concat(e));return h[e]}},{key:"getAnchorYFromAlignmentBaseline",value:function(e){if(!y.hasOwnProperty(e))throw new Error("Invalid alignment baseline parameter: ".concat(e));return y[e]}},{key:"renderLayers",value:function(){var e=this,t=this.state,r=t.data,o=t.scale,i=t.iconAtlas,a=t.iconMapping;if(!a||!i||!r)return null;var c=this.props,u=c.getPosition,f=c.getColor,l=c.getSize,s=c.getAngle,g=c.getTextAnchor,p=c.getAlignmentBaseline,h=c.getPixelOffset,y=c.fp64,m=c.sizeScale,d=c.updateTriggers;return[new n.default(this.getSubLayerProps({id:"text-multi-icon-layer",data:r,iconAtlas:i,iconMapping:a,getIcon:function(e){return e.text},getPosition:function(e){return u(e.object)},getShiftInQueue:function(t){return e.getLetterOffset(t)},getLengthOfQueue:function(t){return e.getTextLength(t)},getColor:function(e){return f(e.object)},getSize:function(e){return l(e.object)},getAngle:function(e){return s(e.object)},getAnchorX:function(t){return e.getAnchorXFromTextAnchor(g(t.object))},getAnchorY:function(t){return e.getAnchorYFromAlignmentBaseline(p(t.object))},getPixelOffset:function(e){return h(e.object)},fp64:y,sizeScale:m*o,updateTriggers:{getPosition:d.getPosition,getAngle:d.getAngle,getColor:d.getColor,getSize:d.getSize,getPixelOffset:d.getPixelOffset,getAnchorX:d.getTextAnchor,getAnchorY:d.getAlignmentBaseline}}))]}}]),o}();exports.default=x,x.layerName="TextLayer",x.defaultProps=A;
},{"../../core":144,"./multi-icon-layer/multi-icon-layer":306,"./font-atlas":290}],143:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./arc-layer/arc-layer");Object.defineProperty(exports,"ArcLayer",{enumerable:!0,get:function(){return g(e).default}});var r=require("./icon-layer/icon-layer");Object.defineProperty(exports,"IconLayer",{enumerable:!0,get:function(){return g(r).default}});var t=require("./line-layer/line-layer");Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return g(t).default}});var a=require("./point-cloud-layer/point-cloud-layer");Object.defineProperty(exports,"PointCloudLayer",{enumerable:!0,get:function(){return g(a).default}});var n=require("./scatterplot-layer/scatterplot-layer");Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return g(n).default}});var l=require("./screen-grid-layer/screen-grid-layer");Object.defineProperty(exports,"ScreenGridLayer",{enumerable:!0,get:function(){return g(l).default}});var u=require("./grid-layer/grid-layer");Object.defineProperty(exports,"GridLayer",{enumerable:!0,get:function(){return g(u).default}});var o=require("./grid-cell-layer/grid-cell-layer");Object.defineProperty(exports,"GridCellLayer",{enumerable:!0,get:function(){return g(o).default}});var i=require("./hexagon-layer/hexagon-layer");Object.defineProperty(exports,"HexagonLayer",{enumerable:!0,get:function(){return g(i).default}});var y=require("./hexagon-cell-layer/hexagon-cell-layer");Object.defineProperty(exports,"HexagonCellLayer",{enumerable:!0,get:function(){return g(y).default}});var c=require("./path-layer/path-layer");Object.defineProperty(exports,"PathLayer",{enumerable:!0,get:function(){return g(c).default}});var f=require("./polygon-layer/polygon-layer");Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return g(f).default}});var d=require("./geojson-layer/geojson-layer");Object.defineProperty(exports,"GeoJsonLayer",{enumerable:!0,get:function(){return g(d).default}});var p=require("./text-layer/text-layer");function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"TextLayer",{enumerable:!0,get:function(){return g(p).default}});
},{"./arc-layer/arc-layer":163,"./icon-layer/icon-layer":164,"./line-layer/line-layer":165,"./point-cloud-layer/point-cloud-layer":166,"./scatterplot-layer/scatterplot-layer":167,"./screen-grid-layer/screen-grid-layer":168,"./grid-layer/grid-layer":170,"./grid-cell-layer/grid-cell-layer":169,"./hexagon-layer/hexagon-layer":171,"./hexagon-cell-layer/hexagon-cell-layer":172,"./path-layer/path-layer":173,"./polygon-layer/polygon-layer":174,"./geojson-layer/geojson-layer":175,"./text-layer/text-layer":176}],73:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core");Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return e.Deck}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return e.LayerManager}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return e.AttributeManager}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return e.Layer}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return e.CompositeLayer}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return e.Viewport}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.WebMercatorViewport}}),Object.defineProperty(exports,"PerspectiveViewport",{enumerable:!0,get:function(){return e.PerspectiveViewport}}),Object.defineProperty(exports,"OrthographicViewport",{enumerable:!0,get:function(){return e.OrthographicViewport}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return e.project}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return e.project64}}),Object.defineProperty(exports,"lighting",{enumerable:!0,get:function(){return e.lighting}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return e.View}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return e.MapView}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return e.FirstPersonView}}),Object.defineProperty(exports,"ThirdPersonView",{enumerable:!0,get:function(){return e.ThirdPersonView}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return e.OrbitView}}),Object.defineProperty(exports,"PerspectiveView",{enumerable:!0,get:function(){return e.PerspectiveView}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return e.OrthographicView}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return e.MapController}}),Object.defineProperty(exports,"experimental",{enumerable:!0,get:function(){return e.experimental}});var r=require("./core-layers");Object.defineProperty(exports,"ArcLayer",{enumerable:!0,get:function(){return r.ArcLayer}}),Object.defineProperty(exports,"IconLayer",{enumerable:!0,get:function(){return r.IconLayer}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return r.LineLayer}}),Object.defineProperty(exports,"PointCloudLayer",{enumerable:!0,get:function(){return r.PointCloudLayer}}),Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return r.ScatterplotLayer}}),Object.defineProperty(exports,"ScreenGridLayer",{enumerable:!0,get:function(){return r.ScreenGridLayer}}),Object.defineProperty(exports,"GridLayer",{enumerable:!0,get:function(){return r.GridLayer}}),Object.defineProperty(exports,"GridCellLayer",{enumerable:!0,get:function(){return r.GridCellLayer}}),Object.defineProperty(exports,"HexagonLayer",{enumerable:!0,get:function(){return r.HexagonLayer}}),Object.defineProperty(exports,"HexagonCellLayer",{enumerable:!0,get:function(){return r.HexagonCellLayer}}),Object.defineProperty(exports,"PathLayer",{enumerable:!0,get:function(){return r.PathLayer}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return r.PolygonLayer}}),Object.defineProperty(exports,"GeoJsonLayer",{enumerable:!0,get:function(){return r.GeoJsonLayer}}),Object.defineProperty(exports,"TextLayer",{enumerable:!0,get:function(){return r.TextLayer}});
},{"./core":144,"./core-layers":143}],117:[function(require,module,exports) {
"use strict";var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=_;
},{}],100:[function(require,module,exports) {
"use strict";var e=require("fbjs/lib/emptyFunction"),r=require("fbjs/lib/invariant"),t=require("./lib/ReactPropTypesSecret");module.exports=function(){function o(e,o,p,n,s,a){a!==t&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function p(){return o}o.isRequired=o;var n={array:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:p,element:o,instanceOf:p,node:o,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p};return n.checkPropTypes=e,n.PropTypes=n,n};
},{"fbjs/lib/emptyFunction":40,"fbjs/lib/invariant":38,"./lib/ReactPropTypesSecret":117}],96:[function(require,module,exports) {
var r,e,i;module.exports=require("./factoryWithThrowingShims")();
},{"./factoryWithThrowingShims":100}],95:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"];function e(e){var n=Object.getPrototypeOf(e),o=Object.getOwnPropertyNames(n),r=!0,i=!1,l=void 0;try{for(var c,u=function(){var n=c.value;"function"==typeof e[n]&&(t.find(function(t){return n===t})||(e[n]=e[n].bind(e)))},p=o[Symbol.iterator]();!(r=(c=p.next()).done);r=!0)u()}catch(t){i=!0,l=t}finally{try{r||null==p.return||p.return()}finally{if(i)throw l}}}
},{}],105:[function(require,module,exports) {
"use strict";function e(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inheritsFrom=e;
},{}],90:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("react")),t=o(require("prop-types")),r=o(require("./utils/autobind")),i=require("./utils/inherits-from"),n=require("@deck.gl/core");function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return d(e)||p(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function f(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?w(e):t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=n.experimental.log,m=Object.assign({},n.Deck.getPropTypes(t.default),{viewports:t.default.array,viewport:t.default.object}),O=n.Deck.defaultProps,j=function(t){function o(e){var t;return f(this,o),(t=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))).state={},t.children=[],(0,r.default)(w(t)),t}return b(o,e.default.Component),v(o,[{key:"componentDidMount",value:function(){var e=this;this.deck=new n.Deck(Object.assign({},this.props,{canvas:this.deckCanvas,onResize:function(t){return e.forceUpdate()}})),this._updateFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this._updateFromProps(e)}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){var t=e.x,r=e.y,i=e.radius,n=void 0===i?0:i,o=e.layerIds,c=void 0===o?null:o;return this.deck.pickObject({x:t,y:r,radius:n,layerIds:c})}},{key:"pickObjects",value:function(e){var t=e.x,r=e.y,i=e.width,n=void 0===i?1:i,o=e.height,c=void 0===o?1:o,a=e.layerIds,s=void 0===a?null:a;return this.deck.pickObjects({x:t,y:r,width:n,height:c,layerIds:s})}},{key:"queryObject",value:function(e){return k.deprecated("queryObject","pickObject")(),this.deck.pickObject(e)}},{key:"queryVisibleObjects",value:function(e){return k.deprecated("queryVisibleObjects","pickObjects")(),this.pickObjects(e)}},{key:"_updateFromProps",value:function(e){var t=e.viewState;if(!t){var r=e.latitude,i=e.longitude,n=e.zoom,o=e.pitch,c=e.bearing;t=e.viewState||{latitude:r,longitude:i,zoom:n,pitch:o,bearing:c}}var a=e.views||e.viewports||e.viewport&&[e.viewport];e.viewports&&k.deprecated("DeckGL.viewports","DeckGL.views")(),e.viewport&&k.deprecated("DeckGL.viewport","DeckGL.views")();var s=this._extractJSXLayers(e.children),l=s.layers,p=s.children;this.deck&&this.deck.setProps(Object.assign({},e,{views:a,viewState:t,layers:l?u(l).concat(u(e.layers)):e.layers})),this.children=p}},{key:"_extractJSXLayers",value:function(t){var r=[],o=null;return e.default.Children.forEach(t,function(e){if(e){var t=e.type;if((0,i.inheritsFrom)(t,n.Layer)){var c=new t(e.props);(o=o||[]).push(c)}else r.push(e)}}),{layers:o,children:r}}},{key:"_renderChildrenUnderViews",value:function(e){var t=this,r={};return(this.deck?this.deck.getViewports():[]).forEach(function(e){e.id&&(r[e.id]=e)}),e.map(function(e,i){return e.props.viewId||e.props.viewId?t._positionChild({child:e,viewMap:r,i:i}):e})}},{key:"_positionChild",value:function(t){var r=t.child,i=t.viewMap,n=t.i,o=r.props,c=o.viewId,a=o.viewportId;a&&k.deprecated("viewportId","viewId")();var s=i[c||a];if(!s)return null;var u=s.x,l=s.y,p=s.width,d=s.height,f=Object.assign({},r.props,{width:p,height:d});Object.assign(f,s.getMercatorParams(),{visible:s.isMapSynched()});var y=(0,e.cloneElement)(r,f),v={position:"absolute",left:u,top:l,width:p,height:d},h="view-child-".concat(c,"-").concat(n);return(0,e.createElement)("div",{key:h,id:h,style:v},y)}},{key:"render",value:function(){var t=this,r=this._renderChildrenUnderViews(this.children),i=this.props.id,n=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),o=(0,e.createElement)("canvas",{ref:function(e){return t.deckCanvas=e},key:"deck-canvas",id:i,style:n});return r.push(o),(0,e.createElement)("div",{id:"deckgl-wrapper"},r)}}]),o}();exports.default=j,j.propTypes=m,j.defaultProps=O;
},{"react":8,"prop-types":96,"./utils/autobind":95,"./utils/inherits-from":105,"@deck.gl/core":73}],104:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="-webkit-",t={GRABBING:"".concat(e,"grabbing"),GRAB:"".concat(e,"grab"),POINTER:"pointer"};exports.default=t;
},{}],91:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("react"),e=i(require("prop-types")),n=require("mjolnir.js"),o=require("@deck.gl/core"),r=i(require("./utils/cursors"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=o.experimental.ViewportControls,b=o.experimental.TransitionManager,m={viewportState:e.default.func,state:e.default.object,width:e.default.number.isRequired,height:e.default.number.isRequired,longitude:e.default.number.isRequired,latitude:e.default.number.isRequired,zoom:e.default.number.isRequired,bearing:e.default.number,pitch:e.default.number,altitude:e.default.number,position:e.default.array,maxZoom:e.default.number,minZoom:e.default.number,maxPitch:e.default.number,minPitch:e.default.number,onViewportChange:e.default.func,transitionDuration:e.default.number,transitionInterpolator:e.default.object,transitionInterruption:e.default.number,transitionEasing:e.default.func,onTransitionStart:e.default.func,onTransitionInterrupt:e.default.func,onTransitionEnd:e.default.func,scrollZoom:e.default.bool,dragPan:e.default.bool,dragRotate:e.default.bool,doubleClickZoom:e.default.bool,touchZoomRotate:e.default.bool,getCursor:e.default.func,controls:e.default.shape({events:e.default.arrayOf(e.default.string),handleEvent:e.default.func})},g=function(t){return t.isDragging?r.default.GRABBING:r.default.GRAB},y=Object.assign({},b.defaultProps,{onViewportChange:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:g}),v=function(e){function o(t){var e;return s(this,o),(e=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t))).state={isDragging:!1},e}return p(o,t.Component),f(o,[{key:"componentDidMount",value:function(){this._eventManager=new n.EventManager(this.eventCanvas),this._controls=this.props.controls||new h(this.props.viewportState),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:this._eventManager})),this._transitionManger=new b(this.props)}},{key:"shouldComponentUpdate",value:function(t,e){return!this._transitionManger||!this._transitionManger.processViewportChange(t)}},{key:"componentWillUpdate",value:function(t){this._controls&&this._controls.setOptions(t)}},{key:"componentWillUnmount",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"render",value:function(){var e=this,n=this.props,o={width:n.width,height:n.height,position:"relative",cursor:(0,n.getCursor)(this.state)};return(0,t.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:o},this.props.children)}}]),o}();exports.default=v,v.displayName="ViewportController",v.propTypes=m,v.defaultProps=y;
},{"react":8,"prop-types":96,"mjolnir.js":98,"@deck.gl/core":73,"./utils/cursors":104}],74:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DeckGL",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"ViewportController",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return r.default}});var e=u(require("./deckgl")),t=u(require("./viewport-controller")),r=u(require("./utils/autobind"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./deckgl":90,"./viewport-controller":91,"./utils/autobind":95}],53:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.experimental=exports.DeckGL=exports.default=exports.TextLayer=exports.GeoJsonLayer=exports.PolygonLayer=exports.PathLayer=exports.HexagonCellLayer=exports.HexagonLayer=exports.GridCellLayer=exports.GridLayer=exports.ScreenGridLayer=exports.ScatterplotLayer=exports.PointCloudLayer=exports.LineLayer=exports.IconLayer=exports.ArcLayer=exports.LayerManager=exports.lighting=exports.project64=exports.project=exports.AttributeManager=exports.MapController=exports.OrthographicViewport=exports.PerspectiveViewport=exports.WebMercatorViewport=exports.Viewport=exports.OrthographicView=exports.PerspectiveView=exports.OrbitView=exports.ThirdPersonView=exports.FirstPersonView=exports.MapView=exports.View=exports.CompositeLayer=exports.Layer=exports.Deck=exports.COORDINATE_SYSTEM=void 0;var e=require("@deck.gl/core");Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return e.Deck}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return e.Layer}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return e.CompositeLayer}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return e.View}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return e.MapView}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return e.FirstPersonView}}),Object.defineProperty(exports,"ThirdPersonView",{enumerable:!0,get:function(){return e.ThirdPersonView}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return e.OrbitView}}),Object.defineProperty(exports,"PerspectiveView",{enumerable:!0,get:function(){return e.PerspectiveView}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return e.OrthographicView}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return e.Viewport}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.WebMercatorViewport}}),Object.defineProperty(exports,"PerspectiveViewport",{enumerable:!0,get:function(){return e.PerspectiveViewport}}),Object.defineProperty(exports,"OrthographicViewport",{enumerable:!0,get:function(){return e.OrthographicViewport}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return e.MapController}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return e.AttributeManager}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return e.project}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return e.project64}}),Object.defineProperty(exports,"lighting",{enumerable:!0,get:function(){return e.lighting}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return e.LayerManager}}),Object.defineProperty(exports,"ArcLayer",{enumerable:!0,get:function(){return e.ArcLayer}}),Object.defineProperty(exports,"IconLayer",{enumerable:!0,get:function(){return e.IconLayer}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return e.LineLayer}}),Object.defineProperty(exports,"PointCloudLayer",{enumerable:!0,get:function(){return e.PointCloudLayer}}),Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return e.ScatterplotLayer}}),Object.defineProperty(exports,"ScreenGridLayer",{enumerable:!0,get:function(){return e.ScreenGridLayer}}),Object.defineProperty(exports,"GridLayer",{enumerable:!0,get:function(){return e.GridLayer}}),Object.defineProperty(exports,"GridCellLayer",{enumerable:!0,get:function(){return e.GridCellLayer}}),Object.defineProperty(exports,"HexagonLayer",{enumerable:!0,get:function(){return e.HexagonLayer}}),Object.defineProperty(exports,"HexagonCellLayer",{enumerable:!0,get:function(){return e.HexagonCellLayer}}),Object.defineProperty(exports,"PathLayer",{enumerable:!0,get:function(){return e.PathLayer}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return e.PolygonLayer}}),Object.defineProperty(exports,"GeoJsonLayer",{enumerable:!0,get:function(){return e.GeoJsonLayer}}),Object.defineProperty(exports,"TextLayer",{enumerable:!0,get:function(){return e.TextLayer}});var r=require("@deck.gl/react");function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return t(r).default}}),Object.defineProperty(exports,"DeckGL",{enumerable:!0,get:function(){return r.DeckGL}});var n={},o=e.experimental.OrbitController,i=e.experimental.FirstPersonController,a=e.experimental.ViewportControls,p=e.experimental.ViewState,l=e.experimental.FirstPersonState,c=e.experimental.OrbitState,u=e.experimental.MapState,s=e.experimental.FirstPersonViewport,x=e.experimental.OrbitViewport,f=e.experimental.ThirdPersonViewport,y=e.experimental.TRANSITION_EVENTS,b=e.experimental.LinearInterpolator,g=e.experimental.ViewportFlyToInterpolator,m=e.experimental.EffectManager,P=e.experimental.Effect;Object.assign(n,{OrbitController:o,FirstPersonController:i,ViewportControls:a,Controller:a,ViewState:p,FirstPersonState:l,OrbitState:c,MapState:u,FirstPersonViewport:s,OrbitViewport:x,ThirdPersonViewport:f,TRANSITION_EVENTS:y,LinearInterpolator:b,ViewportFlyToInterpolator:g,EffectManager:m,Effect:P});var d=e.experimental.TransitionManager,O=e.experimental.extractViewState,L=e.experimental.BinSorter,V=e.experimental.linearScale,w=e.experimental.getLinearScale,j=e.experimental.quantizeScale,S=e.experimental.getQuantizeScale,C=e.experimental.clamp,M=e.experimental.defaultColorRange,T=e.experimental.log,h=e.experimental.get,E=e.experimental.count,G=e.experimental.flatten,I=e.experimental.countVertices,A=e.experimental.flattenVertices,v=e.experimental.fillArray,F=e.experimental.enable64bitSupport,D=e.experimental.fp64ify,N=e.experimental.fp64LowPart,R=e.experimental.ReflectionEffect;Object.assign(n,{TransitionManager:d,extractViewState:O,BinSorter:L,linearScale:V,getLinearScale:w,quantizeScale:j,getQuantizeScale:S,clamp:C,defaultColorRange:M,log:T,get:h,count:E,flatten:G,countVertices:I,flattenVertices:A,fillArray:v,enable64bitSupport:F,fp64ify:D,fp64LowPart:N,ReflectionEffect:R}),Object.assign(n,{ViewportController:r.ViewportController}),exports.experimental=n;
},{"@deck.gl/core":73,"@deck.gl/react":74}],84:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e="@@__IMMUTABLE_MAP__@@";function t(t){return Boolean(t&&t[e])}
},{}],99:[function(require,module,exports) {
"use strict";function e(e,r){var t=e.get("sources"),a=r.get("sources"),o=[],i=[],u=[],n=t.keySeq().toArray(),l=a.keySeq().toArray(),f=!0,s=!1,y=void 0;try{for(var d,c=n[Symbol.iterator]();!(f=(d=c.next()).done);f=!0){var v=d.value,g=a.get(v);g?g.equals(t.get(v))||i.push({id:v,source:a.get(v)}):u.push({id:v,source:t.get(v)})}}catch(e){s=!0,y=e}finally{try{!f&&c.return&&c.return()}finally{if(s)throw y}}var h=!0,p=!1,x=void 0;try{for(var b,S=l[Symbol.iterator]();!(h=(b=S.next()).done);h=!0){var q=b.value;t.get(q)||o.push({id:q,source:a.get(q)})}}catch(e){p=!0,x=e}finally{try{!h&&S.return&&S.return()}finally{if(p)throw x}}return{enter:o,update:i,exit:u}}function r(e,r){var t=e.get("layers"),a=r.get("layers"),o=[],i=[],u={},n={};a.forEach(function(e,r){var t=e.get("id"),o=a.get(r+1);n[t]={layer:e,id:t,before:o?o.get("id"):null,enter:!0}}),t.forEach(function(e,r){var a=e.get("id"),o=t.get(r+1);u[a]={layer:e,id:a,before:o?o.get("id"):null},n[a]?n[a].enter=!1:i.push(u[a])});var l=!0,f=!1,s=void 0;try{for(var y,d=a.reverse()[Symbol.iterator]();!(l=(y=d.next()).done);l=!0){var c=y.value.get("id");u[c]&&u[c].layer.equals(n[c].layer)&&u[c].before===n[c].before||o.push(n[c])}}catch(e){f=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(f)throw s}}return{updates:o,exiting:i}}function t(t,a){return{sourcesDiff:e(t,a),layersDiff:r(t,a)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.diffSources=e,exports.diffLayers=r,exports.default=t;
},{}],83:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteractiveLayerIds=i,exports.setDiffStyle=a;var e=require("./is-immutable-map"),r=n(e),t=require("./diff-styles"),o=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=null;return(0,r.default)(e)&&e.has("layers")?t=e.get("layers").filter(function(e){return e.get("interactive")}).map(function(e){return e.get("id")}).toJS():Array.isArray(e.layers)&&(t=e.layers.filter(function(e){return e.interactive}).map(function(e){return e.id})),t}function a(e,r,t){var n=e&&a(e)||{},i=a(r);function a(e){return e.map(function(){return!0}).delete("layers").delete("sources").toJS()}if(e&&(u=Object.keys(n),f=Object.keys(i),u.length===f.length&&!f.some(function(t){return e.get(t)!==r.get(t)}))){var u,f,c=(0,o.default)(e,r),d=c.sourcesDiff,y=c.layersDiff;s(d.exit,r.get("layers")),l(t,r,d,y)}else t.setStyle(r.toJS())}function u(e,r){var t=r.source.toJS();if("geojson"===t.type){var o=e.getSource(r.id);if("geojson"===o.type){var n=o.workerOptions,i=n.geojsonVtOptions.extent/512;if(!(void 0!==t.maxzoom&&t.maxzoom!==n.geojsonVtOptions.maxZoom||void 0!==t.buffer&&t.buffer!==n.geojsonVtOptions.buffer/i||void 0!==t.tolerance&&t.tolerance!==n.geojsonVtOptions.tolerance/i||void 0!==t.cluster&&t.cluster!==n.cluster||void 0!==t.clusterRadius&&t.clusterRadius!==n.superclusterOptions.radius/i||void 0!==t.clusterMaxZoom&&t.clusterMaxZoom!==n.superclusterOptions.maxZoom))return void o.setData(t.data)}}e.removeSource(r.id),e.addSource(r.id,t)}function l(e,r,t,o){if(o.updates.some(function(e){return e.layer.get("ref")}))e.setStyle(r.toJS());else{var n=!0,i=!1,a=void 0;try{for(var l,s=t.enter[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var f=l.value;e.addSource(f.id,f.source.toJS())}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}var c=!0,d=!1,y=void 0;try{for(var v,m=t.update[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){u(e,v.value)}}catch(e){d=!0,y=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw y}}var p=!0,g=!1,S=void 0;try{for(var x,h=o.exiting[Symbol.iterator]();!(p=(x=h.next()).done);p=!0){var b=x.value;e.style.getLayer(b.id)&&e.removeLayer(b.id)}}catch(e){g=!0,S=e}finally{try{!p&&h.return&&h.return()}finally{if(g)throw S}}var j=!0,O=!1,w=void 0;try{for(var J,L=o.updates[Symbol.iterator]();!(j=(J=L.next()).done);j=!0){var D=J.value;D.enter||e.removeLayer(D.id),e.addLayer(D.layer.toJS(),D.before)}}catch(e){O=!0,w=e}finally{try{!j&&L.return&&L.return()}finally{if(O)throw w}}var M=!0,V=!1,Z=void 0;try{for(var _,k=t.exit[Symbol.iterator]();!(M=(_=k.next()).done);M=!0){var z=_.value;e.removeSource(z.id)}}catch(e){V=!0,Z=e}finally{try{!M&&k.return&&k.return()}finally{if(V)throw Z}}}}function s(e,r){var t=e.map(function(e){return e.id}),o=r.filter(function(e){return t.includes(e.get("source"))});if(o.size)throw new Error("You must remove any layers associated with sources you are removing: "+o.map(function(e){return e.get("id")}).toJS().join(""))}
},{"./is-immutable-map":84,"./diff-styles":99}],106:[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof t&&t.amd)t([],r);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).mapboxgl=r()}}(function(){return function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return n(r||t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(n(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(n(t[r]))}return e}function n(t){var e,r,i,n,s,l,u=0,c=t.length;if(c>2){for(l=0;l<c;l++)l===c-2?(i=c-2,n=c-1,s=0):l===c-1?(i=c-1,n=0,s=1):(i=l,n=l+1,s=l+2),e=t[i],r=t[n],u+=(o(t[s][0])-o(e[0]))*Math.sin(o(r[1]));u=u*a.RADIUS*a.RADIUS/2}return u}function o(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=function t(e){var r,n=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)n+=i(e.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)n+=t(e.geometries[r]);return n}},e.exports.ring=n},{wgs84:37}],2:[function(t,e,r){var i,n;i=this,n=function(){"use strict";return function(){var t=new Float32Array(3);t[0]=0,t[1]=0,t[2]=0}(),function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}(),{vec3:{transformMat3:function(t,e,r){var i=e[0],n=e[1],o=e[2];return t[0]=i*r[0]+n*r[3]+o*r[6],t[1]=i*r[1]+n*r[4]+o*r[7],t[2]=i*r[2]+n*r[5]+o*r[8],t}},vec4:{transformMat4:function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,t[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,t[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,t[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+o*s,t[1]=n*l+a*s,t[2]=i*-s+o*l,t[3]=n*-s+a*l,t},scale:function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=r[0],l=r[1];return t[0]=i*s,t[1]=n*s,t[2]=o*l,t[3]=a*l,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,r){var i,n,o,a,s,l,u,c,p,h,f,d,m=r[0],y=r[1],_=r[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*_+e[12],t[13]=e[1]*m+e[5]*y+e[9]*_+e[13],t[14]=e[2]*m+e[6]*y+e[10]*_+e[14],t[15]=e[3]*m+e[7]*y+e[11]*_+e[15]):(i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=i,t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=i*m+s*y+p*_+e[12],t[13]=n*m+l*y+h*_+e[13],t[14]=o*m+u*y+f*_+e[14],t[15]=a*m+c*y+d*_+e[15]),t},scale:function(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],_=e[14],g=e[15],v=r[0],x=r[1],b=r[2],w=r[3];return t[0]=v*i+x*s+b*p+w*m,t[1]=v*n+x*l+b*h+w*y,t[2]=v*o+x*u+b*f+w*_,t[3]=v*a+x*c+b*d+w*g,v=r[4],x=r[5],b=r[6],w=r[7],t[4]=v*i+x*s+b*p+w*m,t[5]=v*n+x*l+b*h+w*y,t[6]=v*o+x*u+b*f+w*_,t[7]=v*a+x*c+b*d+w*g,v=r[8],x=r[9],b=r[10],w=r[11],t[8]=v*i+x*s+b*p+w*m,t[9]=v*n+x*l+b*h+w*y,t[10]=v*o+x*u+b*f+w*_,t[11]=v*a+x*c+b*d+w*g,v=r[12],x=r[13],b=r[14],w=r[15],t[12]=v*i+x*s+b*p+w*m,t[13]=v*n+x*l+b*h+w*y,t[14]=v*o+x*u+b*f+w*_,t[15]=v*a+x*c+b*d+w*g,t},perspective:function(t,e,r,i,n){var o=1/Math.tan(e/2),a=1/(i-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*a,t[15]=0,t},rotateX:function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+u*i,t[5]=a*n+c*i,t[6]=s*n+p*i,t[7]=l*n+h*i,t[8]=u*n-o*i,t[9]=c*n-a*i,t[10]=p*n-s*i,t[11]=h*n-l*i,t},rotateZ:function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+u*i,t[1]=a*n+c*i,t[2]=s*n+p*i,t[3]=l*n+h*i,t[4]=u*n-o*i,t[5]=c*n-a*i,t[6]=p*n-s*i,t[7]=h*n-l*i,t},invert:function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],_=e[15],g=r*s-i*a,v=r*l-n*a,x=r*u-o*a,b=i*l-n*s,w=i*u-o*s,S=n*u-o*l,A=c*m-p*d,T=c*y-h*d,z=c*_-f*d,E=p*y-h*m,k=p*_-f*m,C=h*_-f*y,I=g*C-v*k+x*E+b*z-w*T+S*A;return I?(I=1/I,t[0]=(s*C-l*k+u*E)*I,t[1]=(n*k-i*C-o*E)*I,t[2]=(m*S-y*w+_*b)*I,t[3]=(h*w-p*S-f*b)*I,t[4]=(l*z-a*C-u*T)*I,t[5]=(r*C-n*z+o*T)*I,t[6]=(y*x-d*S-_*v)*I,t[7]=(c*S-h*x+f*v)*I,t[8]=(a*k-s*z+u*A)*I,t[9]=(i*z-r*k-o*A)*I,t[10]=(d*w-m*x+_*g)*I,t[11]=(p*x-c*w-f*g)*I,t[12]=(s*T-a*E-l*A)*I,t[13]=(r*E-i*T+n*A)*I,t[14]=(m*v-d*b-y*g)*I,t[15]=(c*b-p*v+h*g)*I,t):null},ortho:function(t,e,r,i,n,o,a){var s=1/(e-r),l=1/(i-n),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(a+o)*u,t[15]=1,t}}}},"object"==typeof r&&void 0!==e?e.exports=n():i.glMatrix=n()},{}],3:[function(t,e,r){"use strict";function i(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(r);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&function(t){return void 0===n[t]&&(n[t]=function(t){var e=document.createElement("canvas"),r=Object.create(i.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",r)||e.probablySupportsContext("experimental-webgl",r):e.supportsContext?e.supportsContext("webgl",r)||e.supportsContext("experimental-webgl",r):e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}void 0!==e&&e.exports?e.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var n={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(t,e,r){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=e*this.x-r*this.y,n=r*this.x+e*this.y;return this.x=i,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),i=Math.sin(t),n=e.x+r*(this.x-e.x)-i*(this.y-e.y),o=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],5:[function(t,e,r){var i,n;i=this,n=function(){function t(t,e,r){r=r||{},this.w=t||64,this.h=e||64,this.autoResize=!!r.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,r){this.x=0,this.y=t,this.w=this.free=e,this.h=r}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var r,i,n,o,a=[],s=0;s<t.length;s++)if(r=t[s].w||t[s].width,i=t[s].h||t[s].height,n=t[s].id,r&&i){if(!(o=this.packOne(r,i,n)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,r,i){var n,o,a,s,l,u,c,p,h={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof i||"number"==typeof i){if(n=this.getBin(i))return this.ref(n),n;"number"==typeof i&&(this.maxId=Math.max(i,this.maxId))}else i=++this.maxId;for(s=0;s<this.freebins.length;s++){if(r===(n=this.freebins[s]).maxh&&t===n.maxw)return this.allocFreebin(s,t,r,i);r>n.maxh||t>n.maxw||r<=n.maxh&&t<=n.maxw&&(a=n.maxw*n.maxh-t*r)<h.waste&&(h.waste=a,h.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(r===o.h)return this.allocShelf(s,t,r,i);r>o.h||r<o.h&&(a=(o.h-r)*t)<h.waste&&(h.freebin=-1,h.waste=a,h.shelf=s)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,r,i):-1!==h.shelf?this.allocShelf(h.shelf,t,r,i):r<=this.h-f&&t<=this.w?(o=new e(f,this.w,r),this.allocShelf(this.shelves.push(o)-1,t,r,i)):this.autoResize?(l=u=this.h,((c=p=this.w)<=l||t>c)&&(p=2*Math.max(t,c)),(l<c||r>l)&&(u=2*Math.max(r,l)),this.resize(p,u),this.packOne(t,r,i)):null},t.prototype.allocFreebin=function(t,e,r,i){var n=this.freebins.splice(t,1)[0];return n.id=i,n.w=e,n.h=r,n.refcount=0,this.bins[i]=n,this.ref(n),n},t.prototype.allocShelf=function(t,e,r,i){var n=this.shelves[t].alloc(e,r,i);return this.bins[i]=n,this.ref(n),n},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,r=0;r<this.shelves.length;r++){var i=this.shelves[r];e+=i.h,t=Math.max(i.w-i.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var r=0;r<this.shelves.length;r++)this.shelves[r].resize(t);return!0},e.prototype.alloc=function(t,e,r){if(t>this.free||e>this.h)return null;var i=this.x;return this.x+=t,this.free-=t,new function(t,e,r,i,n,o,a){this.id=t,this.x=e,this.y=r,this.w=i,this.h=n,this.maxw=o||i,this.maxh=a||n,this.refcount=0}(r,i,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},"object"==typeof r&&void 0!==e?e.exports=n():i.ShelfPack=n()},{}],6:[function(t,e,r){"use strict";function i(t,e,r,i,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function n(t,e,r,i,n,a,s){for(var l=0;l<e;l++){for(var u=0;u<r;u++)i[u]=t[u*e+l];for(o(i,n,a,s,r),u=0;u<r;u++)t[u*e+l]=n[u]}for(u=0;u<r;u++){for(l=0;l<e;l++)i[l]=t[u*e+l];for(o(i,n,a,s,e),l=0;l<e;l++)t[u*e+l]=Math.sqrt(n[l])}}function o(t,e,r,i,n){r[0]=0,i[0]=-a,i[1]=+a;for(var o=1,s=0;o<n;o++){for(var l=(t[o]+o*o-(t[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);l<=i[s];)s--,l=(t[o]+o*o-(t[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);r[++s]=o,i[s]=l,i[s+1]=+a}for(o=0,s=0;o<n;o++){for(;i[s+1]<o;)s++;e[o]=(o-r[s])*(o-r[s])+t[r[s]]}}e.exports=i;var a=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=e.data[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(n(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),n(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var s=this.gridOuter[i]-this.gridInner[i];r[i]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return r}},{}],7:[function(t,e,r){function i(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}e.exports=i,i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var r,i,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if(i=1,(n=t)<(r=0))return r;if(n>i)return i;for(;r<i;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?r=n:i=n,n=.5*(i-r)+r}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],8:[function(t,e,r){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(t,e,r){"use strict";function i(t,e,r){if(3===t){var i=new n(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}var n=t("./vectortilelayer");e.exports=function(t,e){this.layers=t.readFields(i,{},e)}},{"./vectortilelayer":11}],10:[function(t,e,r){"use strict";function i(t,e,r,i,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(n,this,e)}function n(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var i=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[i]=n}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function o(t){for(var e,r,i=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],i+=((r=t[a]).x-e.x)*(e.y+r.y);return i}var a=t("@mapbox/point-geometry");e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,n=0,o=0,s=0,l=[];t.pos<r;){if(!n){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)o+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new a(o,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,i=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!i){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)n+=t.readSVarint(),o+=t.readSVarint(),n<a&&(a=n),n>s&&(s=n),o<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},i.prototype.toGeoJSON=function(t,e,r){function n(t){for(var e=0;e<t.length;e++){var r=t[e],i=180-360*(r.y+c)/l;t[e]=[360*(r.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var a,s,l=this.extent*Math.pow(2,r),u=this.extent*t,c=this.extent*e,p=this.loadGeometry(),h=i.types[this.type];switch(this.type){case 1:var f=[];for(a=0;a<p.length;a++)f[a]=p[a][0];n(p=f);break;case 2:for(a=0;a<p.length;a++)n(p[a]);break;case 3:for(p=function(t){var e=t.length;if(e<=1)return[t];for(var r,i,n=[],a=0;a<e;a++){var s=o(t[a]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(r&&n.push(r),r=[t[a]]):r.push(t[a]))}return r&&n.push(r),n}(p),a=0;a<p.length;a++)for(s=0;s<p[a].length;s++)n(p[a][s])}1===p.length?p=p[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:p},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":4}],11:[function(t,e,r){"use strict";function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(n,this,e),this.length=this._features.length}function n(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(r))}var o=t("./vectortilefeature.js");e.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,e,r){var i;i=this,function(t){function e(t,e,i){var n=r(256*t,256*(e=Math.pow(2,i)-e-1),i),o=r(256*(t+1),256*(e+1),i);return n[0]+","+n[1]+","+o[0]+","+o[1]}function r(t,e,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}t.getURL=function(t,r,i,n,o,a){return a=a||{},t+"?"+["bbox="+e(i,n,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+r].join("&")},t.getTileBBox=e,t.getMercCoords=r,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof r&&void 0!==e?r:i.WhooTS=i.WhooTS||{})},{}],13:[function(t,e,r){function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{r.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in s)return s[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=r.indexOf("("),u=r.indexOf(")");if(-1!==l&&u+1===r.length){var c=r.substr(0,l),p=r.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[n(p[0]),n(p[1]),n(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,_=2*m-y;return[i(255*a(_,y,f+1/3)),i(255*a(_,y,f)),i(255*a(_,y,f-1/3)),h];default:return null}}return null}}catch(t){}},{}],14:[function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,s,l,u,c,f,m,y=e&&e.length,_=y?e[0]*r:t.length,g=n(t,0,_,r,!0),v=[];if(!g)return v;if(y&&(g=function(t,e,r,i){var a,s,l,u,c,f=[];for(a=0,s=e.length;a<s;a++)l=e[a]*i,u=a<s-1?e[a+1]*i:t.length,(c=n(t,l,u,i,!1))===c.next&&(c.steiner=!0),f.push(d(c));for(f.sort(p),a=0;a<f.length;a++)h(f[a],r),r=o(r,r.next);return r}(t,e,g,r)),t.length>80*r){i=l=t[0],s=u=t[1];for(var x=r;x<_;x+=r)c=t[x],f=t[x+1],c<i&&(i=c),f<s&&(s=f),c>l&&(l=c),f>u&&(u=f);m=0!==(m=Math.max(l-i,u-s))?1/m:0}return a(g,v,r,i,s,m),v}function n(t,e,r,i,n){var o,a;if(n===T(t,e,r,i)>0)for(o=e;o<r;o+=i)a=w(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=w(o,t[o],t[o+1],a);return a&&g(a,a.next)&&(S(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!g(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next;else{if(S(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function a(t,e,r,i,n,p,h){if(t){!h&&p&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=f(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,a,s,l,u=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(a>1)}(n)}(t,i,n,p);for(var d,m,y=t;t.prev!==t.next;)if(d=t.prev,m=t.next,p?l(t,i,n,p):s(t))e.push(d.i/r),e.push(t.i/r),e.push(m.i/r),S(t),t=m.next,y=m.next;else if((t=m)===y){h?1===h?a(t=u(t,e,r),e,r,i,n,p,2):2===h&&c(t,e,r,i,n,p):a(o(t),e,r,i,n,p,1);break}}}function s(t){var e=t.prev,r=t,i=t.next;if(_(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(m(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&_(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(t,e,r,i){var n=t.prev,o=t,a=t.next;if(_(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,l=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,u=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,p=f(s,l,e,r,i),h=f(u,c,e,r,i),d=t.prevZ,y=t.nextZ;d&&d.z>=p&&y&&y.z<=h;){if(d!==t.prev&&d!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==t.prev&&y!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&m(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function u(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!g(n,o)&&v(n,i,i.next,o)&&x(n,o)&&x(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),S(i),S(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,r,i,n,s){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&y(l,u)){var c=b(l,u);return l=o(l,l.next),c=o(c,c.next),a(l,e,r,i,n,s),void a(c,e,r,i,n,s)}u=u.next}l=l.next}while(l!==t)}function p(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r.prev;var l,u=r,c=r.x,p=r.y,h=1/0;for(i=r.next;i!==u;)n>=i.x&&i.x>=c&&n!==i.x&&m(o<p?n:a,o,c,p,o<p?a:n,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(n-i.x))<h||l===h&&i.x>r.x)&&x(i,t)&&(r=i,h=l),i=i.next;return r}(t,e)){var r=b(e,t);o(r,r.next)}}function f(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function m(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&v(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)}function _(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,r,i){return!!(g(t,e)&&g(r,i)||g(t,i)&&g(r,e))||_(t,e,r)>0!=_(t,e,i)>0&&_(r,i,t)>0!=_(r,i,e)>0}function x(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function b(t,e){var r=new A(t.i,t.x,t.y),i=new A(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function w(t,e,r,i){var n=new A(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}e.exports=i,e.exports.default=i,i.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(T(t,0,o,r));if(n)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;a-=Math.abs(T(t,u,c,r))}var p=0;for(s=0;s<i.length;s+=3){var h=i[s]*r,f=i[s+1]*r,d=i[s+2]*r;p+=Math.abs((t[h]-t[d])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},{}],15:[function(t,e,r){function i(t,e){return function(r){return t(r,e)}}function n(t,e){e=!!e,t[0]=o(t[0],e);for(var r=1;r<t.length;r++)t[r]=o(t[r],!e);return t}function o(t,e){return function(t){return a.ring(t)>=0}(t)===e?t:t.reverse()}var a=t("@mapbox/geojson-area");e.exports=function t(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(t,r)),e;case"Feature":return e.geometry=t(e.geometry,r),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=n(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(n,e))),t}(e,r);default:return e}}},{"@mapbox/geojson-area":1}],16:[function(t,e,r){"use strict";function i(t,e,r,i,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];a>=r&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function n(t,e,r,i,n,o){for(var u=[],c=0===n?s:l,p=0;p<t.length-3;p+=3){var h=t[p],f=t[p+1],d=t[p+2],m=t[p+3],y=t[p+4],_=0===n?h:f,g=0===n?m:y,v=!1;_<r?g>=r&&c(u,h,f,m,y,r):_>i?g<=i&&c(u,h,f,m,y,i):a(u,h,f,d),g<r&&_>=r&&(c(u,h,f,m,y,r),v=!0),g>i&&_<=i&&(c(u,h,f,m,y,i),v=!0),!o&&v&&(u.size=t.size,e.push(u),u=[])}var x=t.length-3;h=t[x],f=t[x+1],d=t[x+2],(_=0===n?h:f)>=r&&_<=i&&a(u,h,f,d),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&a(u,u[0],u[1],u[2]),u.length&&(u.size=t.size,e.push(u))}function o(t,e,r,i,o,a){for(var s=0;s<t.length;s++)n(t[s],e,r,i,o,a)}function a(t,e,r,i){t.push(e),t.push(r),t.push(i)}function s(t,e,r,i,n,o){t.push(o),t.push(r+(o-e)*(n-r)/(i-e)),t.push(1)}function l(t,e,r,i,n,o){t.push(e+(o-r)*(i-e)/(n-r)),t.push(o),t.push(1)}e.exports=function(t,e,r,a,s,l,c){if(a/=e,l>=(r/=e)&&c<=a)return t;if(l>a||c<r)return null;for(var p=[],h=0;h<t.length;h++){var f=t[h],d=f.geometry,m=f.type,y=0===s?f.minX:f.minY,_=0===s?f.maxX:f.maxY;if(y>=r&&_<=a)p.push(f);else if(!(y>a||_<r)){var g=[];if("Point"===m||"MultiPoint"===m)i(d,g,r,a,s);else if("LineString"===m)n(d,g,r,a,s,!1);else if("MultiLineString"===m)o(d,g,r,a,s,!1);else if("Polygon"===m)o(d,g,r,a,s,!0);else if("MultiPolygon"===m)for(var v=0;v<d.length;v++){var x=[];o(d[v],x,r,a,s,!0),x.length&&g.push(x)}g.length&&("LineString"!==m&&"MultiLineString"!==m||(1===g.length?(m="LineString",g=g[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===g.length?"Point":"MultiPoint"),p.push(u(f.id,m,g,f.tags)))}}return p.length?p:null};var u=t("./feature")},{"./feature":18}],17:[function(t,e,r){"use strict";function i(t,e,r){if(e.geometry){var s=e.geometry.coordinates,l=e.geometry.type,u=r*r,p=[];if("Point"===l)n(s,p);else if("MultiPoint"===l)for(var h=0;h<s.length;h++)n(s[h],p);else if("LineString"===l)o(s,p,u,!1);else if("MultiLineString"===l)a(s,p,u,!1);else if("Polygon"===l)a(s,p,u,!0);else{if("MultiPolygon"!==l){if("GeometryCollection"===l){for(h=0;h<e.geometry.geometries.length;h++)i(t,{geometry:e.geometry.geometries[h],properties:e.properties},r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<s.length;h++){var f=[];a(s[h],f,u,!0),p.push(f)}}t.push(c(e.id,l,p,e.properties))}}function n(t,e){e.push(s(t[0])),e.push(l(t[1])),e.push(0)}function o(t,e,r,i){for(var n,o,a=0,c=0;c<t.length;c++){var p=s(t[c][0]),h=l(t[c][1]);e.push(p),e.push(h),e.push(0),c>0&&(a+=i?(n*h-p*o)/2:Math.sqrt(Math.pow(p-n,2)+Math.pow(h-o,2))),n=p,o=h}var f=e.length-3;e[2]=1,u(e,0,f,r),e[f+2]=1,e.size=Math.abs(a)}function a(t,e,r,i){for(var n=0;n<t.length;n++){var a=[];o(t[n],a,r,i),e.push(a)}}function s(t){return t/360+.5}function l(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}e.exports=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)i(r,t.features[n],e);else"Feature"===t.type?i(r,t,e):i(r,{geometry:t},e);return r};var u=t("./simplify"),c=t("./feature")},{"./feature":18,"./simplify":20}],18:[function(t,e,r){"use strict";function i(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}e.exports=function(t,e,r,n){var o={id:t||null,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)i(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)i(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++)i(t,e[n][o])}(o),o}},{}],19:[function(t,e,r){"use strict";function i(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var i=1<<e.maxZoom,n=o(t,e.tolerance/(i*e.extent));this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=l(n,e.buffer/e.extent)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function n(t,e,r){return 32*((1<<t)*r+e)+t}e.exports=function(t,e){return new i(t,e)};var o=t("./convert"),a=t("./transform"),s=t("./clip"),l=t("./wrap"),u=t("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(t,e,r,i,o,a,l){for(var c=[t,e,r,i],p=this.options,h=p.debug;c.length;){i=c.pop(),r=c.pop(),e=c.pop(),t=c.pop();var f=1<<e,d=n(e,r,i),m=this.tiles[d],y=e===p.maxZoom?0:p.tolerance/(f*p.extent);if(!m&&(h>1&&console.time("creation"),m=this.tiles[d]=u(t,f,r,i,y,e===p.maxZoom),this.tileCoords.push({z:e,x:r,y:i}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,i,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var _="z"+e;this.stats[_]=(this.stats[_]||0)+1,this.total++}if(m.source=t,o){if(e===p.maxZoom||e===o)continue;var g=1<<o-e;if(r!==Math.floor(a/g)||i!==Math.floor(l/g))continue}else if(e===p.indexMaxZoom||m.numPoints<=p.indexMaxPoints)continue;if(m.source=null,0!==t.length){h>1&&console.time("clipping");var v,x,b,w,S,A,T=.5*p.buffer/p.extent,z=.5-T,E=.5+T,k=1+T;v=x=b=w=null,S=s(t,f,r-T,r+E,0,m.minX,m.maxX),A=s(t,f,r+z,r+k,0,m.minX,m.maxX),t=null,S&&(v=s(S,f,i-T,i+E,1,m.minY,m.maxY),x=s(S,f,i+z,i+k,1,m.minY,m.maxY),S=null),A&&(b=s(A,f,i-T,i+E,1,m.minY,m.maxY),w=s(A,f,i+z,i+k,1,m.minY,m.maxY),A=null),h>1&&console.timeEnd("clipping"),c.push(v||[],e+1,2*r,2*i),c.push(x||[],e+1,2*r,2*i+1),c.push(b||[],e+1,2*r+1,2*i),c.push(w||[],e+1,2*r+1,2*i+1)}}},i.prototype.getTile=function(t,e,r){var i=this.options,o=i.extent,s=i.debug;if(t<0||t>24)return null;var l=1<<t,u=n(t,e=(e%l+l)%l,r);if(this.tiles[u])return a.tile(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var c,p=t,h=e,f=r;!c&&p>0;)p--,h=Math.floor(h/2),f=Math.floor(f/2),c=this.tiles[n(p,h,f)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",p,h,f),s>1&&console.time("drilling down"),this.splitTile(c.source,p,h,f,t,e,r),s>1&&console.timeEnd("drilling down"),this.tiles[u]?a.tile(this.tiles[u],o):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(t,e,r){"use strict";function i(t,e,r,i,n,o){var a=n-r,s=o-i;if(0!==a||0!==s){var l=((t-r)*a+(e-i)*s)/(a*a+s*s);l>1?(r=n,i=o):l>0&&(r+=a*l,i+=s*l)}return(a=t-r)*a+(s=e-i)*s}e.exports=function t(e,r,n,o){for(var a,s=o,l=e[r],u=e[r+1],c=e[n],p=e[n+1],h=r+3;h<n;h+=3){var f=i(e[h],e[h+1],l,u,c,p);f>s&&(a=h,s=f)}s>o&&(a-r>3&&t(e,r,a,o),e[a+2]=s,n-a>3&&t(e,a,n,o))}},{}],21:[function(t,e,r){"use strict";function i(t,e,r,i){var o=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var l=0;l<o.length;l+=3)s.push(o[l]),s.push(o[l+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)n(s,o,t,r,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(l=0;l<o.length;l++)n(s,o[l],t,r,i,"Polygon"===a,0===l);else if("MultiPolygon"===a)for(var u=0;u<o.length;u++){var c=o[u];for(l=0;l<c.length;l++)n(s,c[l],t,r,i,!0,0===l)}if(s.length){var p={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:e.tags||null};null!==e.id&&(p.id=e.id),t.features.push(p)}}function n(t,e,r,i,n,o,a){var s=i*i;if(!n&&e.size<(o?s:i))r.numPoints+=e.length/3;else{for(var l=[],u=0;u<e.length;u+=3)(n||e[u+2]>s)&&(r.numSimplified++,l.push(e[u]),l.push(e[u+1])),r.numPoints++;o&&function(t,e){for(var r=0,i=0,n=t.length,o=n-2;i<n;o=i,i+=2)r+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(r>0===e)for(i=0,n=t.length;i<n/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[n-2-i],t[i+1]=t[n-1-i],t[n-2-i]=a,t[n-1-i]=s}}(l,a),t.push(l)}}e.exports=function(t,e,r,n,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z2:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},l=0;l<t.length;l++){s.numFeatures++,i(s,t[l],o,a);var u=t[l].minX,c=t[l].minY,p=t[l].maxX,h=t[l].maxY;u<s.minX&&(s.minX=u),c<s.minY&&(s.minY=c),p>s.maxX&&(s.maxX=p),h>s.maxY&&(s.maxY=h)}return s}},{}],22:[function(t,e,r){"use strict";function i(t,e,r,i,n,o){return[Math.round(r*(t*i-n)),Math.round(r*(e*i-o))]}r.tile=function(t,e){if(t.transformed)return t;var r,n,o,a=t.z2,s=t.x,l=t.y;for(r=0;r<t.features.length;r++){var u=t.features[r],c=u.geometry,p=u.type;if(u.geometry=[],1===p)for(n=0;n<c.length;n+=2)u.geometry.push(i(c[n],c[n+1],e,a,s,l));else for(n=0;n<c.length;n++){var h=[];for(o=0;o<c[n].length;o+=2)h.push(i(c[n][o],c[n][o+1],e,a,s,l));u.geometry.push(h)}}return t.transformed=!0,t},r.point=i},{}],23:[function(t,e,r){"use strict";function i(t,e){for(var r=[],i=0;i<t.length;i++){var o,s=t[i],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)o=n(s.geometry,e);else if("MultiLineString"===l||"Polygon"===l){o=[];for(var u=0;u<s.geometry.length;u++)o.push(n(s.geometry[u],e))}else if("MultiPolygon"===l)for(o=[],u=0;u<s.geometry.length;u++){for(var c=[],p=0;p<s.geometry[u].length;p++)c.push(n(s.geometry[u][p],e));o.push(c)}r.push(a(s.id,l,o,s.tags))}return r}function n(t,e){var r=[];r.size=t.size;for(var i=0;i<t.length;i+=3)r.push(t[i]+e,t[i+1],t[i+2]);return r}var o=t("./clip"),a=t("./feature");e.exports=function(t,e){var r=t,n=o(t,1,-1-e,e,0,-1,2),a=o(t,1,1-e,2+e,0,-1,2);return(n||a)&&(r=o(t,1,-e,1+e,0,-1,2)||[],n&&(r=i(n,1).concat(r)),a&&(r=r.concat(i(a,-1)))),r}},{"./clip":16,"./feature":18}],24:[function(t,e,r){"use strict";function i(t,e,r){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],e=o[1],r=o[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var s=o[n+a],l=o[n+a+1];i.push(s===l?null:o.subarray(s,l))}var u=o[n+i.length],c=o[n+i.length+1];this.keys=o.subarray(u,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var p=0;p<this.d*this.d;p++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var h=r/e*t;this.min=-h,this.max=t+h}e.exports=i;var n=3;i.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(t,e,r,i,n,o){this.cells[n].push(o)},i.prototype.query=function(t,e,r,i){var n=this.min,o=this.max;if(t<=n&&e<=n&&o<=r&&o<=i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,r,i,this._queryCell,a,{}),a},i.prototype._queryCell=function(t,e,r,i,n,o,a){var s=this.cells[n];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;t<=u[h+2]&&e<=u[h+3]&&r>=u[h+0]&&i>=u[h+1]?(a[p]=!0,o.push(l[p])):a[p]=!1}}},i.prototype._forEachCell=function(t,e,r,i,n,o,a){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(r),c=this._convertToCellCoord(i),p=s;p<=u;p++)for(var h=l;h<=c;h++){var f=this.d*h+p;if(n.call(this,t,e,r,i,f,o,a))return}},i.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=n+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var o=new Int32Array(e+r+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var l=t[s];o[n+s]=a,o.set(l,a),a+=l.length}return o[n+t.length]=a,o.set(this.keys,a),a+=this.keys.length,o[n+t.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],25:[function(t,e,r){r.read=function(t,e,r,i,n){var o,a,s=8*n-i-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?n-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},r.write=function(t,e,r,i,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[r+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;t[r+f]=255&a,f+=d,a/=256,u-=8);t[r+f-d]|=128*m}},{}],26:[function(t,e,r){"use strict";function i(t,e,r,i,s){e=e||n,r=r||o,s=s||Array,this.nodeSize=i||64,this.points=t,this.ids=new s(t.length),this.coords=new s(2*t.length);for(var l=0;l<t.length;l++)this.ids[l]=l,this.coords[2*l]=e(t[l]),this.coords[2*l+1]=r(t[l]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function n(t){return t[0]}function o(t){return t[1]}var a=t("./sort"),s=t("./range"),l=t("./within");e.exports=function(t,e,r,n,o){return new i(t,e,r,n,o)},i.prototype={range:function(t,e,r,i){return s(this.ids,this.coords,t,e,r,i,this.nodeSize)},within:function(t,e,r){return l(this.ids,this.coords,t,e,r,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],l=e[2*d+1],s>=r&&s<=n&&l>=i&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],l=e[2*m+1],s>=r&&s<=n&&l>=i&&l<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?r<=s:i<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===p?n>=s:o>=l)&&(u.push(m+1),u.push(h),u.push(y))}}return c}},{}],28:[function(t,e,r){"use strict";function i(t,e,r,i){n(t,r,i),n(e,2*r,2*i),n(e,2*r+1,2*i+1)}function n(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}e.exports=function t(e,r,n,o,a,s){if(!(a-o<=n)){var l=Math.floor((o+a)/2);(function t(e,r,n,o,a,s){for(;a>o;){if(a-o>600){var l=a-o+1,u=n-o+1,c=Math.log(l),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1);t(e,r,n,Math.max(o,Math.floor(n-u*p/l+h)),Math.min(a,Math.floor(n+(l-u)*p/l+h)),s)}var f=r[2*n+s],d=o,m=a;for(i(e,r,o,n),r[2*a+s]>f&&i(e,r,o,a);d<m;){for(i(e,r,d,m),d++,m--;r[2*d+s]<f;)d++;for(;r[2*m+s]>f;)m--}r[2*o+s]===f?i(e,r,o,m):i(e,r,++m,a),m<=n&&(o=m+1),n<=m&&(a=m-1)}})(e,r,l,o,a,s%2),t(e,r,n,o,l-1,s+1),t(e,r,n,l+1,a,s+1)}}},{}],29:[function(t,e,r){"use strict";function i(t,e,r,i){var n=t-r,o=e-i;return n*n+o*o}e.exports=function(t,e,r,n,o,a){for(var s=[0,t.length-1,0],l=[],u=o*o;s.length;){var c=s.pop(),p=s.pop(),h=s.pop();if(p-h<=a)for(var f=h;f<=p;f++)i(e[2*f],e[2*f+1],r,n)<=u&&l.push(t[f]);else{var d=Math.floor((h+p)/2),m=e[2*d],y=e[2*d+1];i(m,y,r,n)<=u&&l.push(t[d]);var _=(c+1)%2;(0===c?r-o<=m:n-o<=y)&&(s.push(h),s.push(d-1),s.push(_)),(0===c?r+o>=m:n+o>=y)&&(s.push(d+1),s.push(p),s.push(_))}}return l}},{}],30:[function(t,e,r){"use strict";function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function n(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function s(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function u(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function g(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}e.exports=i;var v=t("ieee754");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,t(n,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=g(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=v.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=v.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,a=r.buf;if(i=(112&(n=a[r.pos++]))>>4,n<128)return o(t,i,e);if(i|=(127&(n=a[r.pos++]))<<3,n<128)return o(t,i,e);if(i|=(127&(n=a[r.pos++]))<<10,n<128)return o(t,i,e);if(i|=(127&(n=a[r.pos++]))<<17,n<128)return o(t,i,e);if(i|=(127&(n=a[r.pos++]))<<24,n<128)return o(t,i,e);if(i|=(1&(n=a[r.pos++]))<<31,n<128)return o(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var i="",n=e;n<r;){var o,a,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),n+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&a(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),v.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),v.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&a(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){this.writeMessage(t,p,e)},writePackedFloat:function(t,e){this.writeMessage(t,u,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,h,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:25}],31:[function(t,e,r){"use strict";function i(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function n(t,e){return t<e?-1:t>e?1:0}e.exports=function t(e,r,o,a,s){for(o=o||0,a=a||e.length-1,s=s||n;a>o;){if(a-o>600){var l=a-o+1,u=r-o+1,c=Math.log(l),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1);t(e,r,Math.max(o,Math.floor(r-u*p/l+h)),Math.min(a,Math.floor(r+(l-u)*p/l+h)),s)}var f=e[r],d=o,m=a;for(i(e,o,r),s(e[a],f)>0&&i(e,o,a);d<m;){for(i(e,d,m),d++,m--;s(e[d],f)<0;)d++;for(;s(e[m],f)>0;)m--}0===s(e[o],f)?i(e,o,m):i(e,++m,a),m<=r&&(o=m+1),r<=m&&(a=m-1)}}},{}],32:[function(t,e,r){"use strict";function i(t){this.options=c(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function n(t,e,r,i,n){return{x:t,y:e,zoom:1/0,id:i,properties:n,parentId:-1,numPoints:r}}function o(t,e){var r=t.geometry.coordinates;return{x:l(r[0]),y:u(r[1]),zoom:1/0,id:e,parentId:-1}}function a(t){return{type:"Feature",properties:s(t),geometry:{type:"Point",coordinates:[function(t){return 360*(t-.5)}(t.x),function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(t.y)]}}}function s(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return c(c({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function l(t){return t/360+.5}function u(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function c(t,e){for(var r in e)t[r]=e[r];return t}function p(t){return t.x}function h(t){return t.y}var f=t("kdbush");e.exports=function(t){return new i(t)},i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var r="prepare "+t.length+" points";e&&console.time(r),this.points=t;var i=t.map(o);e&&console.timeEnd(r);for(var n=this.options.maxZoom;n>=this.options.minZoom;n--){var a=+Date.now();this.trees[n+1]=f(i,p,h,this.options.nodeSize,Float32Array),i=this._cluster(i,n),e&&console.log("z%d: %d clusters in %dms",n,i.length,+Date.now()-a)}return this.trees[this.options.minZoom]=f(i,p,h,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var r=this.trees[this._limitZoom(e)],i=r.range(l(t[0]),u(t[3]),l(t[2]),u(t[1])),n=[],o=0;o<i.length;o++){var s=r.points[i[o]];n.push(s.numPoints?a(s):this.points[s.id])}return n},getChildren:function(t,e){for(var r=this.trees[e+1].points[t],i=this.options.radius/(this.options.extent*Math.pow(2,e)),n=this.trees[e+1].within(r.x,r.y,i),o=[],s=0;s<n.length;s++){var l=this.trees[e+1].points[n[s]];l.parentId===t&&o.push(l.numPoints?a(l):this.points[l.id])}return o},getLeaves:function(t,e,r,i){r=r||10,i=i||0;var n=[];return this._appendLeaves(n,t,e,r,i,0),n},getTile:function(t,e,r){var i=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(r-a)/n,l=(r+1+a)/n,u={features:[]};return this._addTileFeatures(i.range((e-a)/n,s,(e+1+a)/n,l),i.points,e,r,n,u),0===e&&this._addTileFeatures(i.range(1-a/n,s,1,l),i.points,n,r,n,u),e===n-1&&this._addTileFeatures(i.range(0,s,a/n,l),i.points,-1,r,n,u),u.features.length?u:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var r=this.getChildren(t,e);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},_appendLeaves:function(t,e,r,i,n,o){for(var a=this.getChildren(e,r),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?o+l.point_count<=n?o+=l.point_count:o=this._appendLeaves(t,l.cluster_id,r+1,i,n,o):o<n?o++:t.push(a[s]),t.length===i)break}return o},_addTileFeatures:function(t,e,r,i,n,o){for(var a=0;a<t.length;a++){var l=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(l.x*n-r)),Math.round(this.options.extent*(l.y*n-i))]],tags:l.numPoints?s(l):this.points[l.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var r=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var a=t[o];if(!(a.zoom<=e)){a.zoom=e;var s=this.trees[e+1],l=s.within(a.x,a.y,i),u=a.numPoints||1,c=a.x*u,p=a.y*u,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,a));for(var f=0;f<l.length;f++){var d=s.points[l[f]];if(e<d.zoom){var m=d.numPoints||1;d.zoom=e,c+=d.x*m,p+=d.y*m,u+=m,d.parentId=o,this.options.reduce&&this._accumulate(h,d)}}1===u?r.push(a):(a.parentId=o,r.push(n(c/u,p/u,u,o,h)))}}return r},_accumulate:function(t,e){var r=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,r)}}},{kdbush:26}],33:[function(t,e,r){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||n,this.length>0)for(var r=this.length>>1;r>=0;r--)this._down(r)}function n(t,e){return t<e?-1:t>e?1:0}e.exports=i,i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];t>0;){var n=t-1>>1,o=e[n];if(r(i,o)>=0)break;e[t]=o,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length,n=i>>1,o=e[t];t<n;){var a=1+(t<<1),s=a+1,l=e[a];if(s<i&&r(e[s],l)<0&&(a=s,l=e[s]),r(l,o)>=0)break;e[t]=l,t=a}e[t]=o}}},{}],34:[function(t,e,r){function i(t){var e=new p;return function(t,e){for(var r in t.layers)e.writeMessage(3,n,t.layers[r])}(t,e),e.finish()}function n(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r,i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)i.feature=t.feature(r),e.writeMessage(2,o,i);var n=i.keys;for(r=0;r<n.length;r++)e.writeStringField(3,n[r]);var a=i.values;for(r=0;r<a.length;r++)e.writeMessage(4,c,a[r])}function o(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,a,t),e.writeVarintField(3,r.type),e.writeMessage(4,u,r)}function a(t,e){var r=t.feature,i=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in r.properties){var l=o[s];void 0===l&&(i.push(s),l=i.length-1,o[s]=l),e.writeVarint(l);var u=r.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=a[p];void 0===h&&(n.push(u),h=n.length-1,a[p]=h),e.writeVarint(h)}}function s(t,e){return(e<<3)+(7&t)}function l(t){return t<<1^t>>31}function u(t,e){for(var r=t.loadGeometry(),i=t.type,n=0,o=0,a=r.length,u=0;u<a;u++){var c=r[u],p=1;1===i&&(p=c.length),e.writeVarint(s(1,p));for(var h=0;h<c.length;h++){1===h&&1!==i&&e.writeVarint(s(2,c.length-1));var f=c[h].x-n,d=c[h].y-o;e.writeVarint(l(f)),e.writeVarint(l(d)),n+=f,o+=d}}}function c(t,e){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var p=t("pbf"),h=t("./lib/geojson_wrapper");e.exports=i,e.exports.fromVectorTileJs=i,e.exports.fromGeojsonVt=function(t){var e={};for(var r in t)e[r]=new h(t[r].features),e[r].name=r;return i({layers:e})},e.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(t,e,r){"use strict";function i(t){this.features=t,this.length=t.length}function n(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("@mapbox/point-geometry"),a=t("@mapbox/vector-tile").VectorTileFeature;e.exports=i,i.prototype.feature=function(t){return new n(this.features[t])},n.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var r=t[e],i=[],n=0;n<r.length;n++)i.push(new o(r[n][0],r[n][1]));this.geometry.push(i)}return this.geometry},n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.y)}return[e,i,r,n]},n.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(t,e,r){var i=arguments[3],n=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var r,s=Object.keys(o),l=0,u=s.length;l<u;l++){var c=s[l],p=o[c].exports;if(p===t||p&&p.default===t){r=c;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(l=0,u=s.length;l<u;l++){h[c=s[l]]=c}n[r]=["function(require,module,exports){"+t+"(self); }",h]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[r]=r,n[f]=["function(require,module,exports){var f = require("+a(r)+");(f.default ? f.default : f)(self);}",d];var m={};!function t(e){for(var r in m[e]=!0,n[e][1]){var i=n[e][1][r];m[i]||t(i)}}(f);var y="("+i+")({"+Object.keys(m).map(function(t){return a(t)+":["+n[t][0]+","+a(n[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",_=window.URL||window.webkitURL||window.mozURL||window.msURL,g=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return g;var v=_.createObjectURL(g),x=new Worker(v);return x.objectURL=v,x}},{}],37:[function(t,e,r){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(t,e,r){e.exports={version:"0.44.2"}},{}],39:[function(t,e,r){"use strict";var i=t("../util/struct_array").StructArray,n=t("../util/struct_array").Struct,o=t("../util/web_worker_transfer").register,a=t("@mapbox/point-geometry"),s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var i=2*r;return this.int16[i+0]=t,this.int16[i+1]=e,r},e}(i);s.prototype.bytesPerElement=4,o("StructArrayLayout2i4",s);var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;this.resize(n+1);var o=4*n;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=r,this.int16[o+3]=i,n},e}(i);l.prototype.bytesPerElement=8,o("StructArrayLayout4i8",l);var u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=n,this.int16[s+5]=o,a},e}(i);u.prototype.bytesPerElement=12,o("StructArrayLayout2i4i12",u);var c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=r,this.int16[u+3]=i,this.uint8[c+8]=n,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,l},e}(i);c.prototype.bytesPerElement=12,o("StructArrayLayout4i4ub12",c);var p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=r,this.int16[u+3]=i,this.uint16[u+4]=n,this.uint16[u+5]=o,this.uint16[u+6]=a,this.uint16[u+7]=s,l},e}(i);p.prototype.bytesPerElement=16,o("StructArrayLayout4i4ui16",p);var h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;this.resize(i+1);var n=3*i;return this.float32[n+0]=t,this.float32[n+1]=e,this.float32[n+2]=r,i},e}(i);h.prototype.bytesPerElement=12,o("StructArrayLayout3f12",h);var f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var r=1*e;return this.uint32[r+0]=t,e},e}(i);f.prototype.bytesPerElement=4,o("StructArrayLayout1ul4",f);var d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c){var p=this.length;this.resize(p+1);var h=12*p,f=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=n,this.int16[h+5]=o,this.uint32[f+3]=a,this.uint16[h+8]=s,this.uint16[h+9]=l,this.int16[h+10]=u,this.int16[h+11]=c,p},e}(i);d.prototype.bytesPerElement=24,o("StructArrayLayout6i1ul2ui2i24",d);var m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=n,this.int16[s+5]=o,a},e}(i);m.prototype.bytesPerElement=12,o("StructArrayLayout2i2i2i12",m);var y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var i=4*r;return this.uint8[i+0]=t,this.uint8[i+1]=e,r},e}(i);y.prototype.bytesPerElement=4,o("StructArrayLayout2ub4",y);var _=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f){var d=this.length;this.resize(d+1);var m=20*d,y=10*d,_=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[y+2]=n,this.uint32[y+3]=o,this.uint32[y+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[y+7]=c,this.float32[y+8]=p,this.uint8[_+36]=h,this.uint8[_+37]=f,d},e}(i);_.prototype.bytesPerElement=40,o("StructArrayLayout2i2ui3ul3ui2f2ub40",_);var g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var r=1*e;return this.float32[r+0]=t,e},e}(i);g.prototype.bytesPerElement=4,o("StructArrayLayout1f4",g);var v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;this.resize(i+1);var n=3*i;return this.int16[n+0]=t,this.int16[n+1]=e,this.int16[n+2]=r,i},e}(i);v.prototype.bytesPerElement=6,o("StructArrayLayout3i6",v);var x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;this.resize(i+1);var n=2*i,o=4*i;return this.uint32[n+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=r,i},e}(i);x.prototype.bytesPerElement=8,o("StructArrayLayout1ul2ui8",x);var b=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;this.resize(i+1);var n=3*i;return this.uint16[n+0]=t,this.uint16[n+1]=e,this.uint16[n+2]=r,i},e}(i);b.prototype.bytesPerElement=6,o("StructArrayLayout3ui6",b);var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var i=2*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,r},e}(i);w.prototype.bytesPerElement=4,o("StructArrayLayout2ui4",w);var S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;this.resize(r+1);var i=2*r;return this.float32[i+0]=t,this.float32[i+1]=e,r},e}(i);S.prototype.bytesPerElement=8,o("StructArrayLayout2f8",S);var A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;this.resize(n+1);var o=4*n;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=r,this.float32[o+3]=i,n},e}(i);A.prototype.bytesPerElement=16,o("StructArrayLayout4f16",A);var T=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(n);T.prototype.size=24;var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new T(this,t)},e}(d);o("CollisionBoxArray",z);var E=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,r),e}(n);E.prototype.size=40;var k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new E(this,t)},e}(_);o("PlacedSymbolArray",k);var C=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(n);C.prototype.size=4;var I=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new C(this,t)},e}(g);o("GlyphOffsetArray",I);var M=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{},y:{},tileUnitDistanceFromAnchor:{}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(n);M.prototype.size=6;var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new M(this,t)},e}(v);o("SymbolLineVertexArray",P);var L=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(n);L.prototype.size=8;var D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new L(this,t)},e}(x);o("FeatureIndexArray",D),e.exports={StructArrayLayout2i4:s,StructArrayLayout4i8:l,StructArrayLayout2i4i12:u,StructArrayLayout4i4ub12:c,StructArrayLayout4i4ui16:p,StructArrayLayout3f12:h,StructArrayLayout1ul4:f,StructArrayLayout6i1ul2ui2i24:d,StructArrayLayout2i2i2i12:m,StructArrayLayout2ub4:y,StructArrayLayout2i2ui3ul3ui2f2ub40:_,StructArrayLayout1f4:g,StructArrayLayout3i6:v,StructArrayLayout1ul2ui8:x,StructArrayLayout3ui6:b,StructArrayLayout2ui4:w,StructArrayLayout2f8:S,StructArrayLayout4f16:A,PosArray:s,RasterBoundsArray:l,CircleLayoutArray:s,FillLayoutArray:s,FillExtrusionLayoutArray:u,HeatmapLayoutArray:s,LineLayoutArray:c,SymbolLayoutArray:p,SymbolDynamicLayoutArray:h,SymbolOpacityArray:f,CollisionBoxLayoutArray:m,CollisionCircleLayoutArray:m,CollisionVertexArray:y,TriangleIndexArray:b,LineIndexArray:w,CollisionBoxArray:z,PlacedSymbolArray:k,GlyphOffsetArray:I,SymbolLineVertexArray:P,FeatureIndexArray:D}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(t,e,r){"use strict";e.exports={deserialize:function(t,e){var r={};if(!e)return r;for(var i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,l=a;s<l.length;s+=1)r[l[s].id]=o}}return r}}},{}],41:[function(t,e,r){"use strict";var i=t("../../util/struct_array").createLayout;e.exports=i([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(t,e,r){"use strict";function i(t,e,r,i,n){t.emplaceBack(2*e+(i+1)/2,2*r+(n+1)/2)}var n=t("../array_types").CircleLayoutArray,o=t("./circle_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,l=t("../index_array_type").TriangleIndexArray,u=t("../load_geometry"),c=t("../extent"),p=t("../../util/web_worker_transfer").register,h=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new l,this.segments=new a,this.programConfigurations=new s(o,t.layers,t.zoom)};h.prototype.populate=function(t,e){for(var r=this,i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(r.layers[0]._featureFilter({zoom:r.zoom},a)){var c=u(a);r.addFeature(a,c),e.featureIndex.insert(a,c,s,l,r.index)}}},h.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},h.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},h.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},h.prototype.addFeature=function(t,e){for(var r=this,n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var l=s[a],u=l.x,p=l.y;if(!(u<0||u>=c||p<0||p>=c)){var h=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),f=h.vertexLength;i(r.layoutVertexArray,u,p,-1,-1),i(r.layoutVertexArray,u,p,1,-1),i(r.layoutVertexArray,u,p,1,1),i(r.layoutVertexArray,u,p,-1,1),r.indexArray.emplaceBack(f,f+1,f+2),r.indexArray.emplaceBack(f,f+3,f+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},p("CircleBucket",h,{omit:["layers"]}),e.exports=h},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(t,e,r){arguments[4][41][0].apply(r,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(t,e,r){"use strict";var i=t("../array_types").FillLayoutArray,n=t("./fill_attributes").members,o=t("../segment").SegmentVector,a=t("../program_configuration").ProgramConfigurationSet,s=t("../index_array_type"),l=s.LineIndexArray,u=s.TriangleIndexArray,c=t("../load_geometry"),p=t("earcut"),h=t("../../util/classify_rings"),f=t("../../util/web_worker_transfer").register,d=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new i,this.indexArray=new u,this.indexArray2=new l,this.programConfigurations=new a(n,t.layers,t.zoom),this.segments=new o,this.segments2=new o};d.prototype.populate=function(t,e){for(var r=this,i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(r.layers[0]._featureFilter({zoom:r.zoom},a)){var u=c(a);r.addFeature(a,u),e.featureIndex.insert(a,u,s,l,r.index)}}},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,n),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(t)},d.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},d.prototype.addFeature=function(t,e){for(var r=this,i=0,n=h(e,500);i<n.length;i+=1){for(var o=n[i],a=0,s=0,l=o;s<l.length;s+=1)a+=l[s].length;for(var u=r.segments.prepareSegment(a,r.layoutVertexArray,r.indexArray),c=u.vertexLength,f=[],d=[],m=0,y=o;m<y.length;m+=1){var _=y[m];if(0!==_.length){_!==o[0]&&d.push(f.length/2);var g=r.segments2.prepareSegment(_.length,r.layoutVertexArray,r.indexArray2),v=g.vertexLength;r.layoutVertexArray.emplaceBack(_[0].x,_[0].y),r.indexArray2.emplaceBack(v+_.length-1,v),f.push(_[0].x),f.push(_[0].y);for(var x=1;x<_.length;x++)r.layoutVertexArray.emplaceBack(_[x].x,_[x].y),r.indexArray2.emplaceBack(v+x-1,v+x),f.push(_[x].x),f.push(_[x].y);g.vertexLength+=_.length,g.primitiveLength+=_.length}}for(var b=p(f,d),w=0;w<b.length;w+=3)r.indexArray.emplaceBack(c+b[w],c+b[w+1],c+b[w+2]);u.vertexLength+=a,u.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},f("FillBucket",d,{omit:["layers"]}),e.exports=d},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(t,e,r){"use strict";var i=t("../../util/struct_array").createLayout;e.exports=i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(t,e,r){"use strict";function i(t,e,r,i,n,o,a,s){t.emplaceBack(e,r,2*Math.floor(i*g)+a,n*g*2,o*g*2,Math.round(s))}function n(t,e){return t.x===e.x&&(t.x<0||t.x>d)||t.y===e.y&&(t.y<0||t.y>d)}function o(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>d})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>d})}var a=t("../array_types").FillExtrusionLayoutArray,s=t("./fill_extrusion_attributes").members,l=t("../segment"),u=l.SegmentVector,c=l.MAX_VERTEX_ARRAY_LENGTH,p=t("../program_configuration").ProgramConfigurationSet,h=t("../index_array_type").TriangleIndexArray,f=t("../load_geometry"),d=t("../extent"),m=t("earcut"),y=t("../../util/classify_rings"),_=t("../../util/web_worker_transfer").register,g=Math.pow(2,13),v=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new a,this.indexArray=new h,this.programConfigurations=new p(s,t.layers,t.zoom),this.segments=new u};v.prototype.populate=function(t,e){for(var r=this,i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(r.layers[0]._featureFilter({zoom:r.zoom},a)){var u=f(a);r.addFeature(a,u),e.featureIndex.insert(a,u,s,l,r.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,s),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},v.prototype.addFeature=function(t,e){for(var r=this,a=0,s=y(e,500);a<s.length;a+=1){for(var l=s[a],u=0,p=0,h=l;p<h.length;p+=1)u+=h[p].length;for(var f=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),d=0,_=l;d<_.length;d+=1){var g=_[d];if(0!==g.length&&!o(g))for(var v=0,x=0;x<g.length;x++){var b=g[x];if(x>=1){var w=g[x-1];if(!n(b,w)){f.vertexLength+4>c&&(f=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray));var S=b.sub(w)._perp()._unit(),A=w.dist(b);v+A>32768&&(v=0),i(r.layoutVertexArray,b.x,b.y,S.x,S.y,0,0,v),i(r.layoutVertexArray,b.x,b.y,S.x,S.y,0,1,v),v+=A,i(r.layoutVertexArray,w.x,w.y,S.x,S.y,0,0,v),i(r.layoutVertexArray,w.x,w.y,S.x,S.y,0,1,v);var T=f.vertexLength;r.indexArray.emplaceBack(T,T+1,T+2),r.indexArray.emplaceBack(T+1,T+2,T+3),f.vertexLength+=4,f.primitiveLength+=2}}}}f.vertexLength+u>c&&(f=r.segments.prepareSegment(u,r.layoutVertexArray,r.indexArray));for(var z=[],E=[],k=f.vertexLength,C=0,I=l;C<I.length;C+=1){var M=I[C];if(0!==M.length){M!==l[0]&&E.push(z.length/2);for(var P=0;P<M.length;P++){var L=M[P];i(r.layoutVertexArray,L.x,L.y,0,0,1,1,0),z.push(L.x),z.push(L.y)}}}for(var D=m(z,E),B=0;B<D.length;B+=3)r.indexArray.emplaceBack(k+D[B],k+D[B+1],k+D[B+2]);f.primitiveLength+=D.length/3,f.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},_("FillExtrusionBucket",v,{omit:["layers"]}),e.exports=v},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(t,e,r){"use strict";var i=t("./circle_bucket"),n=t("../../util/web_worker_transfer").register,o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i);n("HeatmapBucket",o,{omit:["layers"]}),e.exports=o},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(t,e,r){"use strict";var i=t("../../util/struct_array").createLayout;e.exports=i([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(t,e,r){"use strict";function i(t,e,r,i,n,o,a){t.emplaceBack(e.x,e.y,i?1:0,n?1:-1,Math.round(f*r.x)+128,Math.round(f*r.y)+128,1+(0===o?0:o<0?-1:1)|(a*m&63)<<2,a*m>>6)}var n=t("../array_types").LineLayoutArray,o=t("./line_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,l=t("../index_array_type").TriangleIndexArray,u=t("../load_geometry"),c=t("../extent"),p=t("@mapbox/vector-tile").VectorTileFeature.types,h=t("../../util/web_worker_transfer").register,f=63,d=Math.cos(Math.PI/180*37.5),m=.5,y=Math.pow(2,14)/m,_=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new l,this.programConfigurations=new s(o,t.layers,t.zoom),this.segments=new a};_.prototype.populate=function(t,e){for(var r=this,i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(r.layers[0]._featureFilter({zoom:r.zoom},a)){var c=u(a);r.addFeature(a,c),e.featureIndex.insert(a,c,s,l,r.index)}}},_.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},_.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},_.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_.prototype.addFeature=function(t,e){for(var r=this.layers[0].layout,i=r.get("line-join").evaluate(t),n=r.get("line-cap"),o=r.get("line-miter-limit"),a=r.get("line-round-limit"),s=0,l=e;s<l.length;s+=1){var u=l[s];this.addLine(u,t,i,n,o,a)}},_.prototype.addLine=function(t,e,r,i,n,o){for(var a=this,s="Polygon"===p[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===r&&(n=1.05);var h=c/(512*this.overscaling)*15,f=t[u],m=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var y,_,g,v=i,x=s?"butt":i,b=!0,w=void 0,S=void 0,A=void 0,T=void 0;this.e1=this.e2=this.e3=-1,s&&(y=t[l-2],T=f.sub(y)._unit()._perp());for(var z=u;z<l;z++)if(!(S=s&&z===l-1?t[u+1]:t[z+1])||!t[z].equals(S)){T&&(A=T),y&&(w=y),y=t[z],T=S?S.sub(y)._unit()._perp():A;var E=(A=A||T).add(T);0===E.x&&0===E.y||E._unit();var k=E.x*T.x+E.y*T.y,C=0!==k?1/k:1/0,I=k<d&&w&&S;if(I&&z>u){var M=y.dist(w);if(M>2*h){var P=y.sub(y.sub(w)._mult(h/M)._round());a.distance+=P.dist(w),a.addCurrentVertex(P,a.distance,A.mult(1),0,0,!1,m),w=P}}var L=w&&S,D=L?r:S?v:x;if(L&&"round"===D&&(C<o?D="miter":C<=2&&(D="fakeround")),"miter"===D&&C>n&&(D="bevel"),"bevel"===D&&(C>2&&(D="flipbevel"),C<n&&(D="miter")),w&&(a.distance+=y.dist(w)),"miter"===D)E._mult(C),a.addCurrentVertex(y,a.distance,E,0,0,!1,m);else if("flipbevel"===D){if(C>100)E=T.clone().mult(-1);else{var B=A.x*T.y-A.y*T.x>0?-1:1,R=C*A.add(T).mag()/A.sub(T).mag();E._perp()._mult(R*B)}a.addCurrentVertex(y,a.distance,E,0,0,!1,m),a.addCurrentVertex(y,a.distance,E.mult(-1),0,0,!1,m)}else if("bevel"===D||"fakeround"===D){var O=A.x*T.y-A.y*T.x>0,F=-Math.sqrt(C*C-1);if(O?(g=0,_=F):(_=0,g=F),b||a.addCurrentVertex(y,a.distance,A,_,g,!1,m),"fakeround"===D){for(var V=Math.floor(8*(.5-(k-.5))),j=void 0,N=0;N<V;N++)j=T.mult((N+1)/(V+1))._add(A)._unit(),a.addPieSliceVertex(y,a.distance,j,O,m);a.addPieSliceVertex(y,a.distance,E,O,m);for(var U=V-1;U>=0;U--)j=A.mult((U+1)/(V+1))._add(T)._unit(),a.addPieSliceVertex(y,a.distance,j,O,m)}S&&a.addCurrentVertex(y,a.distance,T,-_,-g,!1,m)}else"butt"===D?(b||a.addCurrentVertex(y,a.distance,A,0,0,!1,m),S&&a.addCurrentVertex(y,a.distance,T,0,0,!1,m)):"square"===D?(b||(a.addCurrentVertex(y,a.distance,A,1,1,!1,m),a.e1=a.e2=-1),S&&a.addCurrentVertex(y,a.distance,T,-1,-1,!1,m)):"round"===D&&(b||(a.addCurrentVertex(y,a.distance,A,0,0,!1,m),a.addCurrentVertex(y,a.distance,A,1,1,!0,m),a.e1=a.e2=-1),S&&(a.addCurrentVertex(y,a.distance,T,-1,-1,!0,m),a.addCurrentVertex(y,a.distance,T,0,0,!1,m)));if(I&&z<l-1){var q=y.dist(S);if(q>2*h){var Z=y.add(S.sub(y)._mult(h/q)._round());a.distance+=Z.dist(y),a.addCurrentVertex(Z,a.distance,T.mult(1),0,0,!1,m),y=Z}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)}},_.prototype.addCurrentVertex=function(t,e,r,n,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;l=r.clone(),n&&l._sub(r.perp()._mult(n)),i(u,t,l,a,!1,n,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=r.mult(-1),o&&l._sub(r.perp()._mult(o)),i(u,t,l,a,!0,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>y/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,o,a,s))},_.prototype.addPieSliceVertex=function(t,e,r,n,o){r=r.mult(n?-1:1);var a=this.layoutVertexArray,s=this.indexArray;i(a,t,r,!1,n,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},h("LineBucket",_,{omit:["layers"]}),e.exports=_},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(t,e,r){"use strict";var i=t("../../util/struct_array").createLayout,n={symbolLayoutAttributes:i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),dynamicLayoutAttributes:i([{name:"a_projected_pos",components:3,type:"Float32"}],4),placementOpacityAttributes:i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),collisionVertexAttributes:i([{name:"a_placed",components:2,type:"Uint8"}],4),collisionBox:i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:i([{type:"Float32",name:"offsetX"}]),lineVertex:i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};e.exports=n},{"../../util/struct_array":271}],51:[function(t,e,r){"use strict";function i(t,e,r,i,n,o,a,s){t.emplaceBack(e,r,Math.round(64*i),Math.round(64*n),o,a,s?s[0]:0,s?s[1]:0)}function n(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}var o=t("./symbol_attributes"),a=o.symbolLayoutAttributes,s=o.collisionVertexAttributes,l=o.collisionBoxLayout,u=o.collisionCircleLayout,c=o.dynamicLayoutAttributes,p=t("../array_types"),h=p.SymbolLayoutArray,f=p.SymbolDynamicLayoutArray,d=p.SymbolOpacityArray,m=p.CollisionBoxLayoutArray,y=p.CollisionCircleLayoutArray,_=p.CollisionVertexArray,g=p.PlacedSymbolArray,v=p.GlyphOffsetArray,x=p.SymbolLineVertexArray,b=t("@mapbox/point-geometry"),w=t("../segment").SegmentVector,S=t("../program_configuration").ProgramConfigurationSet,A=t("../index_array_type"),T=A.TriangleIndexArray,z=A.LineIndexArray,E=t("../../symbol/transform_text"),k=t("../../symbol/mergelines"),C=t("../../util/script_detection"),I=t("../load_geometry"),M=t("@mapbox/vector-tile").VectorTileFeature.types,P=t("../../util/verticalize_punctuation"),L=(t("../../symbol/anchor"),t("../../symbol/symbol_size").getSizeData),D=t("../../util/web_worker_transfer").register,B=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],R=function(t){this.layoutVertexArray=new h,this.indexArray=new T,this.programConfigurations=t,this.segments=new w,this.dynamicLayoutVertexArray=new f,this.opacityVertexArray=new d,this.placedSymbolArray=new g};R.prototype.upload=function(t,e){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,a.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.programConfigurations.upload(t),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,B,!0),this.opacityVertexBuffer.itemSize=1},R.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},D("SymbolBuffers",R);var O=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new w,this.collisionVertexArray=new _};O.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,s.members,!0)},O.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},D("CollisionBuffers",O);var F=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=L(this.zoom,e["text-size"]),this.iconSizeData=L(this.zoom,e["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")};F.prototype.createArrays=function(){this.text=new R(new S(a.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new R(new S(a.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new O(m,l.members,z),this.collisionCircle=new O(y,u.members,T),this.glyphOffsetArray=new v,this.lineVertexArray=new x},F.prototype.populate=function(t,e){var r=this.layers[0],i=r.layout,n=i.get("text-font"),o=i.get("text-field"),a=i.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==n.value.kind||n.value.value.length>0),l="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||l){for(var u=e.iconDependencies,c=e.glyphDependencies,p={zoom:this.zoom},h=0,f=t;h<f.length;h+=1){var d=f[h],m=d.feature,y=d.index,_=d.sourceLayerIndex;if(r._featureFilter(p,m)){var g=void 0;s&&(g=r.getValueAndResolveTokens("text-field",m),g=E(g,r,m));var v=void 0;if(l&&(v=r.getValueAndResolveTokens("icon-image",m)),g||v){var x={text:g,icon:v,index:y,sourceLayerIndex:_,geometry:I(m),properties:m.properties,type:M[m.type]};if(void 0!==m.id&&(x.id=m.id),this.features.push(x),v&&(u[v]=!0),g)for(var b=n.evaluate(m).join(","),w=c[b]=c[b]||{},S="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),A=C.allowsVerticalWritingMode(g),T=0;T<g.length;T++)if(w[g.charCodeAt(T)]=!0,S&&A){var z=P.lookup[g.charAt(T)];z&&(w[z.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=k(this.features))}},F.prototype.isEmpty=function(){return 0===this.symbolInstances.length},F.prototype.upload=function(t){this.text.upload(t,this.sortFeaturesByY),this.icon.upload(t,this.sortFeaturesByY),this.collisionBox.upload(t),this.collisionCircle.upload(t)},F.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},F.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},F.prototype.addSymbols=function(t,e,r,o,a,s,l,u,c,p){for(var h=t.indexArray,f=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),y=this.glyphOffsetArray.length,_=m.vertexLength,g=0,v=e;g<v.length;g+=1){var x=v[g],b=x.tl,w=x.tr,S=x.bl,A=x.br,T=x.tex,z=m.vertexLength,E=x.glyphOffset[1];i(f,u.x,u.y,b.x,E+b.y,T.x,T.y,r),i(f,u.x,u.y,w.x,E+w.y,T.x+T.w,T.y,r),i(f,u.x,u.y,S.x,E+S.y,T.x,T.y+T.h,r),i(f,u.x,u.y,A.x,E+A.y,T.x+T.w,T.y+T.h,r),n(d,u,0),h.emplaceBack(z,z+1,z+2),h.emplaceBack(z+1,z+2,z+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x.glyphOffset[0])}t.placedSymbolArray.emplaceBack(u.x,u.y,y,this.glyphOffsetArray.length-y,_,c,p,u.segment,r?r[0]:0,r?r[1]:0,o[0],o[1],l,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,s)},F.prototype._addCollisionDebugVertex=function(t,e,r,i,n){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,i.x,i.y,Math.round(n.x),Math.round(n.y))},F.prototype.addCollisionDebugVertices=function(t,e,r,i,n,o,a,s){var l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=l.vertexLength,c=n.layoutVertexArray,p=n.collisionVertexArray;if(this._addCollisionDebugVertex(c,p,o,a.anchor,new b(t,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new b(r,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new b(r,i)),this._addCollisionDebugVertex(c,p,o,a.anchor,new b(t,i)),l.vertexLength+=4,s){var h=n.indexArray;h.emplaceBack(u,u+1,u+2),h.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var f=n.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4}},F.prototype.generateCollisionDebugBuffers=function(){for(var t=this,e=0,r=t.symbolInstances;e<r.length;e+=1){var i=r[e];i.textCollisionFeature={boxStartIndex:i.textBoxStartIndex,boxEndIndex:i.textBoxEndIndex},i.iconCollisionFeature={boxStartIndex:i.iconBoxStartIndex,boxEndIndex:i.iconBoxEndIndex};for(var n=0;n<2;n++){var o=i[0===n?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=t.collisionBoxArray.get(a),l=s.x1,u=s.y1,c=s.x2,p=s.y2,h=s.radius>0;t.addCollisionDebugVertices(l,u,c,p,h?t.collisionCircle:t.collisionBox,s.anchorPoint,i,h)}}}},F.prototype.deserializeCollisionBoxes=function(t,e,r,i,n){for(var o={},a=e;a<r;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=i;l<n;l++){var u=t.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};break}}return o},F.prototype.hasTextData=function(){return this.text.segments.get().length>0},F.prototype.hasIconData=function(){return this.icon.segments.get().length>0},F.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},F.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},F.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var r=[],i=0;i<this.symbolInstances.length;i++)r.push(i);var n=Math.sin(t),o=Math.cos(t);r.sort(function(t,r){var i=e.symbolInstances[t],a=e.symbolInstances[r];return(n*i.anchor.x+o*i.anchor.y|0)-(n*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-i.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=r;a<s.length;a+=1){for(var l=s[a],u=0,c=e.symbolInstances[l].placedTextSymbolIndices;u<c.length;u+=1)for(var p=c[u],h=e.text.placedSymbolArray.get(p),f=h.vertexStartIndex+4*h.numGlyphs,d=h.vertexStartIndex;d<f;d+=4)e.text.indexArray.emplaceBack(d,d+1,d+2),e.text.indexArray.emplaceBack(d+1,d+2,d+3);var m=e.icon.placedSymbolArray.get(l);if(m.numGlyphs){var y=m.vertexStartIndex;e.icon.indexArray.emplaceBack(y,y+1,y+2),e.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},D("SymbolBucket",F,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),F.MAX_GLYPHS=65535,F.addDynamicAttributes=n,e.exports=F},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(t,e,r){"use strict";var i=t("../util/image").RGBAImage,n=t("../util/util"),o=t("../util/web_worker_transfer").register,a=function(t,e,r){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=r||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};a.prototype.set=function(t,e,r){this.data[this._idx(t,e)]=r+65536},a.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},a.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},o("Level",a);var s=function(t,e,r){this.uid=t,this.scale=e||1,this.level=r||new a(256,512),this.loaded=!!r};s.prototype.loadFromImage=function(t){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");for(var e=this.level=new a(t.width,t.width/2),r=t.data,i=0;i<e.dim;i++)for(var n=0;n<e.dim;n++){var o=4*(i*e.dim+n);e.set(n,i,this.scale*((256*r[o]*256+256*r[o+1]+r[o+2])/10-1e4))}for(var s=0;s<e.dim;s++)e.set(-1,s,e.get(0,s)),e.set(e.dim,s,e.get(e.dim-1,s)),e.set(s,-1,e.get(s,0)),e.set(s,e.dim,e.get(s,e.dim-1));e.set(-1,-1,e.get(0,0)),e.set(e.dim,-1,e.get(e.dim-1,0)),e.set(-1,e.dim,e.get(0,e.dim-1)),e.set(e.dim,e.dim,e.get(e.dim-1,e.dim-1)),this.loaded=!0},s.prototype.getPixels=function(){return new i({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},s.prototype.backfillBorder=function(t,e,r){var i=this.level,o=t.level;if(i.dim!==o.dim)throw new Error("level mismatch (dem dimension)");var a=e*i.dim,s=e*i.dim+i.dim,l=r*i.dim,u=r*i.dim+i.dim;switch(e){case-1:a=s-1;break;case 1:s=a+1}switch(r){case-1:l=u-1;break;case 1:u=l+1}for(var c=n.clamp(a,-i.border,i.dim+i.border),p=n.clamp(s,-i.border,i.dim+i.border),h=n.clamp(l,-i.border,i.dim+i.border),f=n.clamp(u,-i.border,i.dim+i.border),d=-e*i.dim,m=-r*i.dim,y=h;y<f;y++)for(var _=c;_<p;_++)i.set(_,y,o.get(_+d,y+m))},o("DEMData",s),e.exports={DEMData:s,Level:a}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(t,e,r){"use strict";e.exports=8192},{}],54:[function(t,e,r){"use strict";function i(t,e){return e-t}t("@mapbox/point-geometry");var n=t("./load_geometry"),o=t("./extent"),a=t("../style-spec/feature_filter"),s=t("grid-index"),l=t("../util/dictionary_coder"),u=t("@mapbox/vector-tile"),c=t("pbf"),p=t("../util/vectortile_to_geojson"),h=t("../util/util").arraysIntersect,f=(t("../source/tile_id").OverscaledTileID,t("../util/web_worker_transfer").register),d=t("./array_types").FeatureIndexArray,m=function(t,e,r,i){this.tileID=t,this.overscaling=e,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=r||new s(o,16,0),this.featureIndexArray=i||new d};m.prototype.insert=function(t,e,r,i,n){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);for(var a=0;a<e.length;a++){for(var s=e[a],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}this.grid.insert(o,l[0],l[1],l[2],l[3])}},m.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new u.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var r={},n=t.params||{},s=o/t.tileSize/t.scale,p=a(n.filter),h=t.queryGeometry,f=t.additionalRadius*s,d=1/0,m=1/0,y=-1/0,_=-1/0,g=0;g<h.length;g++)for(var v=h[g],x=0;x<v.length;x++){var b=v[x];d=Math.min(d,b.x),m=Math.min(m,b.y),y=Math.max(y,b.x),_=Math.max(_,b.y)}var w=this.grid.query(d-f,m-f,y+f,_+f);w.sort(i),this.filterMatching(r,w,this.featureIndexArray,h,p,n.layers,e,t.bearing,s);var S=t.collisionIndex?t.collisionIndex.queryRenderedSymbols(h,this.tileID,o/t.tileSize,t.collisionBoxArray,t.sourceID,t.bucketInstanceIds):[];return S.sort(),this.filterMatching(r,S,t.collisionBoxArray,h,p,n.layers,e,t.bearing,s),r},m.prototype.filterMatching=function(t,e,r,i,o,a,s,l,u){for(var c,f=this,d=0;d<e.length;d++){var m=e[d];if(m!==c){c=m;var y=r.get(m),_=f.bucketLayerIDs[y.bucketIndex];if(!a||h(a,_)){var g=f.sourceLayerCoder.decode(y.sourceLayerIndex),v=f.vtLayers[g].feature(y.featureIndex);if(o({zoom:f.tileID.overscaledZ},v))for(var x=null,b=0;b<_.length;b++){var w=_[b];if(!(a&&a.indexOf(w)<0)){var S=s[w];if(S&&("symbol"===S.type||(x||(x=n(v)),S.queryIntersectsFeature(i,v,x,f.z,l,u)))){var A=new p(v,f.z,f.x,f.y);A.layer=S.serialize();var T=t[w];void 0===T&&(T=t[w]=[]),T.push({featureIndex:m,feature:A})}}}}}}},m.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var i=0,n=r[e];i<n.length;i+=1){if(t===n[i])return!0}return!1},f("FeatureIndex",m,{omit:["rawTileData","sourceLayerCoder"]}),e.exports=m},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(t,e,r){"use strict";e.exports={LineIndexArray:t("./array_types").LineIndexArray,TriangleIndexArray:t("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(t,e,r){"use strict";var i,n=t("../util/util"),o=t("./extent"),a=(i=16,{min:-1*Math.pow(2,i-1),max:Math.pow(2,i-1)-1});e.exports=function(t){for(var e=o/t.extent,r=t.loadGeometry(),i=0;i<r.length;i++)for(var s=r[i],l=0;l<s.length;l++){var u=s[l];u.x=Math.round(u.x*e),u.y=Math.round(u.y*e),(u.x<a.min||u.x>a.max||u.y<a.min||u.y>a.max)&&n.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}},{"../util/util":275,"./extent":53}],57:[function(t,e,r){"use strict";var i=t("../util/struct_array").createLayout;e.exports=i([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(t,e,r){"use strict";function i(t){return[o(255*t.r,255*t.g),o(255*t.b,255*t.a)]}function n(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}var o=t("../shaders/encode_attribute").packUint8ToFloat,a=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),s=t("../style/properties").PossiblyEvaluatedPropertyValue,l=t("./array_types"),u=l.StructArrayLayout1f4,c=l.StructArrayLayout2f8,p=l.StructArrayLayout4f16,h=function(t,e,r){this.value=t,this.name=e,this.type=r,this.statistics={max:-1/0}};h.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},h.prototype.populatePaintArray=function(){},h.prototype.upload=function(){},h.prototype.destroy=function(){},h.prototype.setUniforms=function(t,e,r,i){var n=i.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],n.r,n.g,n.b,n.a):o.uniform1f(e.uniforms["u_"+this.name],n)};var f=function(t,e,r){this.expression=t,this.name=e,this.type=r,this.statistics={max:-1/0};var i="color"===r?c:u;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===r?2:1,offset:0}],this.paintVertexArray=new i};f.prototype.defines=function(){return[]},f.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var o=this.expression.evaluate({zoom:0},e);if("color"===this.type)for(var a=i(o),s=n;s<t;s++)r.emplaceBack(a[0],a[1]);else{for(var l=n;l<t;l++)r.emplaceBack(o);this.statistics.max=Math.max(this.statistics.max,o)}},f.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},f.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},f.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var d=function(t,e,r,i,n){this.expression=t,this.name=e,this.type=r,this.useIntegerZoom=i,this.zoom=n,this.statistics={max:-1/0};var o="color"===r?p:c;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===r?4:2,offset:0}],this.paintVertexArray=new o};d.prototype.defines=function(){return[]},d.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var o=this.expression.evaluate({zoom:this.zoom},e),a=this.expression.evaluate({zoom:this.zoom+1},e);if("color"===this.type)for(var s=i(o),l=i(a),u=n;u<t;u++)r.emplaceBack(s[0],s[1],l[0],l[1]);else{for(var c=n;c<t;c++)r.emplaceBack(o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},d.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},d.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},d.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},d.prototype.setUniforms=function(t,e,r){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(r.zoom))};var m=function(){this.binders={},this.cacheKey="",this._buffers=[]};m.createDynamic=function(t,e,r){var i=new m,o=[];for(var a in t.paint._values)if(r(a)){var l=t.paint.get(a);if(l instanceof s&&l.property.specification["property-function"]){var u=n(a,t.type),c=l.property.specification.type,p=l.property.useIntegerZoom;"constant"===l.value.kind?(i.binders[a]=new h(l.value,u,c),o.push("/u_"+u)):"source"===l.value.kind?(i.binders[a]=new f(l.value,u,c),o.push("/a_"+u)):(i.binders[a]=new d(l.value,u,c,p,e),o.push("/z_"+u))}}return i.cacheKey=o.sort().join(""),i},m.prototype.populatePaintArrays=function(t,e){for(var r in this.binders)this.binders[r].populatePaintArray(t,e)},m.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},m.prototype.setUniforms=function(t,e,r,i){for(var n in this.binders)this.binders[n].setUniforms(t,e,i,r.get(n))},m.prototype.getPaintVertexBuffers=function(){return this._buffers},m.prototype.upload=function(t){var e=this;for(var r in e.binders)e.binders[r].upload(t);var i=[];for(var n in e.binders){var o=e.binders[n];(o instanceof f||o instanceof d)&&o.paintVertexBuffer&&i.push(o.paintVertexBuffer)}this._buffers=i},m.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var y=function(t,e,r,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var n=0,o=e;n<o.length;n+=1){var a=o[n];this.programConfigurations[a.id]=m.createDynamic(a,r,i),this.programConfigurations[a.id].layoutAttributes=t}};y.prototype.populatePaintArrays=function(t,e){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e)},y.prototype.get=function(t){return this.programConfigurations[t]},y.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},y.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},a("ConstantBinder",h),a("SourceExpressionBinder",f),a("CompositeExpressionBinder",d),a("ProgramConfiguration",m,{omit:["_buffers"]}),a("ProgramConfigurationSet",y),e.exports={ProgramConfiguration:m,ProgramConfigurationSet:y}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(t,e,r){"use strict";var i=t("../util/struct_array").createLayout;e.exports=i([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(t,e,r){"use strict";var i=t("../util/util").warnOnce,n=t("../util/web_worker_transfer").register,o=Math.pow(2,16)-1,a=function(t){void 0===t&&(t=[]),this.segments=t};a.prototype.prepareSegment=function(t,r,n){var a=this.segments[this.segments.length-1];return t>o&&i("Max vertices per segment is "+o+": bucket requested "+t),(!a||a.vertexLength+t>e.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:r.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var i in r.vaos)r.vaos[i].destroy()}},n("SegmentVector",a),e.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:o}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(t,e,r){"use strict";var i=function(t,e,r){this.column=t,this.row=e,this.zoom=r};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)},i.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},i.prototype.sub=function(t){return this.clone()._sub(t)},i.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},i.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=i},{}],62:[function(t,e,r){"use strict";var i=t("../util/util").wrap,n=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};n.prototype.wrap=function(){return new n(i(this.lng,-180,180),this.lat)},n.prototype.toArray=function(){return[this.lng,this.lat]},n.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},n.prototype.toBounds=function(e){var r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new(t("./lng_lat_bounds"))(new n(this.lng-i,this.lat-r),new n(this.lng+i,this.lat+r))},n.convert=function(t){if(t instanceof n)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new n(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new n(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=n},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(t,e,r){"use strict";var i=t("./lng_lat"),n=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};n.prototype.setNorthEast=function(t){return this._ne=t instanceof i?new i(t.lng,t.lat):i.convert(t),this},n.prototype.setSouthWest=function(t){return this._sw=t instanceof i?new i(t.lng,t.lat):i.convert(t),this},n.prototype.extend=function(t){var e,r,o=this._sw,a=this._ne;if(t instanceof i)e=t,r=t;else{if(!(t instanceof n))return Array.isArray(t)?t.every(Array.isArray)?this.extend(n.convert(t)):this.extend(i.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new i(e.lng,e.lat),this._ne=new i(r.lng,r.lat)),this},n.prototype.getCenter=function(){return new i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},n.prototype.getSouthWest=function(){return this._sw},n.prototype.getNorthEast=function(){return this._ne},n.prototype.getNorthWest=function(){return new i(this.getWest(),this.getNorth())},n.prototype.getSouthEast=function(){return new i(this.getEast(),this.getSouth())},n.prototype.getWest=function(){return this._sw.lng},n.prototype.getSouth=function(){return this._sw.lat},n.prototype.getEast=function(){return this._ne.lng},n.prototype.getNorth=function(){return this._ne.lat},n.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},n.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},n.prototype.isEmpty=function(){return!(this._sw&&this._ne)},n.convert=function(t){return!t||t instanceof n?t:new n(t)},e.exports=n},{"./lng_lat":62}],64:[function(t,e,r){"use strict";var i=t("./lng_lat"),n=t("@mapbox/point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../style-spec/util/interpolate").number,l=t("../util/tile_cover"),u=t("../source/tile_id"),c=(u.CanonicalTileID,u.UnwrappedTileID),p=t("../data/extent"),h=t("@mapbox/gl-matrix"),f=h.vec4,d=h.mat4,m=h.mat2,y=function(t,e,r){this.tileSize=512,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new i(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},_={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};y.prototype.clone=function(){var t=new y(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},_.minZoom.get=function(){return this._minZoom},_.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},_.maxZoom.get=function(){return this._maxZoom},_.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},_.renderWorldCopies.get=function(){return this._renderWorldCopies},_.worldSize.get=function(){return this.tileSize*this.scale},_.centerPoint.get=function(){return this.size._div(2)},_.size.get=function(){return new n(this.width,this.height)},_.bearing.get=function(){return-this.angle/Math.PI*180},_.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=m.create(),m.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},_.pitch.get=function(){return this._pitch/Math.PI*180},_.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},_.fov.get=function(){return this._fov/Math.PI*180},_.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},_.zoom.get=function(){return this._zoom},_.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},_.center.get=function(){return this._center},_.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},y.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},y.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new n(0,0),0),r=this.pointCoordinate(new n(this.width,0),0),i=Math.floor(e.column),o=Math.floor(r.column),a=[new c(0,t)];if(this._renderWorldCopies)for(var s=i;s<=o;s++)0!==s&&a.push(new c(s,t));return a},y.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),r=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var i=this.pointCoordinate(this.centerPoint,e),o=new n(i.column-.5,i.row-.5),a=[this.pointCoordinate(new n(0,0),e),this.pointCoordinate(new n(this.width,0),e),this.pointCoordinate(new n(this.width,this.height),e),this.pointCoordinate(new n(0,this.height),e)];return l(e,a,t.reparseOverscaled?r:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},y.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},_.unmodified.get=function(){return this._unmodified},y.prototype.zoomScale=function(t){return Math.pow(2,t)},y.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},y.prototype.project=function(t){return new n(this.lngX(t.lng),this.latY(t.lat))},y.prototype.unproject=function(t){return new i(this.xLng(t.x),this.yLat(t.y))},_.x.get=function(){return this.lngX(this.center.lng)},_.y.get=function(){return this.latY(this.center.lat)},_.point.get=function(){return new n(this.x,this.y)},y.prototype.lngX=function(t){return(180+t)*this.worldSize/360},y.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},y.prototype.xLng=function(t){return 360*t/this.worldSize-180},y.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},y.prototype.setLocationAtPoint=function(t,e){var r=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(r)),this._renderWorldCopies&&(this.center=this.center.wrap())},y.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},y.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},y.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},y.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new i(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},y.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var r=[t.x,t.y,0,1],i=[t.x,t.y,1,1];f.transformMat4(r,r,this.pixelMatrixInverse),f.transformMat4(i,i,this.pixelMatrixInverse);var n=r[3],a=i[3],l=r[1]/n,u=i[1]/a,c=r[2]/n,p=i[2]/a,h=c===p?0:(0-c)/(p-c);return new o(s(r[0]/n,i[0]/a,h)/this.tileSize,s(l,u,h)/this.tileSize,this.zoom)._zoomTo(e)},y.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),r=[e.column*this.tileSize,e.row*this.tileSize,0,1];return f.transformMat4(r,r,this.pixelMatrix),new n(r[0]/r[3],r[1]/r[3])},y.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var r=t.key,i=e?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*t.wrap,s=d.identity(new Float64Array(16));return d.translate(s,s,[a*o,n.y*o,0]),d.scale(s,s,[o/p,o/p,1]),d.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),i[r]=new Float32Array(s),i[r]},y.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,r,i,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=this.latY(p[1]),t=(a=this.latY(p[0]))-o<u.y?u.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),e=(l=this.lngX(h[1]))-s<u.x?u.x/(l-s):0}var f=Math.max(e||0,t||0);if(f)return this.center=this.unproject(new n(e?(l+s)/2:this.x,t?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=u.y/2;d-m<o&&(i=o+m),d+m>a&&(i=a-m)}if(this.lngRange){var y=this.x,_=u.x/2;y-_<s&&(r=s+_),y+_>l&&(r=l-_)}void 0===r&&void 0===i||(this.center=this.unproject(new n(void 0!==r?r:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},y.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,r=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),i=this.x,n=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),a=new Float64Array(16);d.perspective(a,this._fov,this.width/this.height,1,o),d.scale(a,a,[1,-1,1]),d.translate(a,a,[0,0,-this.cameraToCenterDistance]),d.rotateX(a,a,this._pitch),d.rotateZ(a,a,this.angle),d.translate(a,a,[-i,-n,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));d.scale(a,a,[1,1,s,1]),this.projMatrix=a;var l=this.width%2/2,u=this.height%2/2,c=Math.cos(this.angle),p=Math.sin(this.angle),h=i-Math.round(i)+c*l+p*u,f=n-Math.round(n)+c*u+p*l,m=new Float64Array(a);if(d.translate(m,m,[h>.5?h-1:h,f>.5?f-1:f,0]),this.alignedProjMatrix=m,a=d.create(),d.scale(a,a,[this.width/2,-this.height/2,1]),d.translate(a,a,[1,-1,0]),this.pixelMatrix=d.multiply(new Float64Array(16),a,this.projMatrix),!(a=d.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(y.prototype,_),e.exports=y},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(t,e,r){"use strict";var i=t("../style-spec/util/color"),n=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};n.disabled=new n(n.Replace=[1,0],i.transparent,[!1,!1,!1,!1]),n.unblended=new n(n.Replace,i.transparent,[!0,!0,!0,!0]),n.alphaBlended=new n([1,771],i.transparent,[!0,!0,!0,!0]),e.exports=n},{"../style-spec/util/color":153}],66:[function(t,e,r){"use strict";var i=t("./index_buffer"),n=t("./vertex_buffer"),o=t("./framebuffer"),a=(t("./depth_mode"),t("./stencil_mode"),t("./color_mode")),s=t("../util/util"),l=t("./value"),u=l.ClearColor,c=l.ClearDepth,p=l.ClearStencil,h=l.ColorMask,f=l.DepthMask,d=l.StencilMask,m=l.StencilFunc,y=l.StencilOp,_=l.StencilTest,g=l.DepthRange,v=l.DepthTest,x=l.DepthFunc,b=l.Blend,w=l.BlendFunc,S=l.BlendColor,A=l.Program,T=l.LineWidth,z=l.ActiveTextureUnit,E=l.Viewport,k=l.BindFramebuffer,C=l.BindRenderbuffer,I=l.BindTexture,M=l.BindVertexBuffer,P=l.BindElementBuffer,L=l.BindVertexArrayOES,D=l.PixelStoreUnpack,B=l.PixelStoreUnpackPremultiplyAlpha,R=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new u(this),this.clearDepth=new c(this),this.clearStencil=new p(this),this.colorMask=new h(this),this.depthMask=new f(this),this.stencilMask=new d(this),this.stencilFunc=new m(this),this.stencilOp=new y(this),this.stencilTest=new _(this),this.depthRange=new g(this),this.depthTest=new v(this),this.depthFunc=new x(this),this.blend=new b(this),this.blendFunc=new w(this),this.blendColor=new S(this),this.program=new A(this),this.lineWidth=new T(this),this.activeTexture=new z(this),this.viewport=new E(this),this.bindFramebuffer=new k(this),this.bindRenderbuffer=new C(this),this.bindTexture=new I(this),this.bindVertexBuffer=new M(this),this.bindElementBuffer=new P(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new L(this),this.pixelStoreUnpack=new D(this),this.pixelStoreUnpackPremultiplyAlpha=new B(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};R.prototype.createIndexBuffer=function(t,e){return new i(this,t,e)},R.prototype.createVertexBuffer=function(t,e,r){return new n(this,t,e,r)},R.prototype.createRenderbuffer=function(t,e,r){var i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),n},R.prototype.createFramebuffer=function(t,e){return new o(this,t,e)},R.prototype.clear=function(t){var e=t.color,r=t.depth,i=this.gl,n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(n|=i.DEPTH_BUFFER_BIT,this.clearDepth.set(r),this.depthMask.set(!0)),i.clear(n)},R.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},R.prototype.setStencilMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},R.prototype.setColorMode=function(t){s.deepEqual(t.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},e.exports=R},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(t,e,r){"use strict";var i=function(t,e,r){this.func=t,this.mask=e,this.range=r};i.ReadOnly=!1,i.ReadWrite=!0,i.disabled=new i(519,i.ReadOnly,[0,1]),e.exports=i},{}],68:[function(t,e,r){"use strict";var i=t("./value"),n=i.ColorAttachment,o=i.DepthAttachment,a=function(t,e,r){this.context=t,this.width=e,this.height=r;var i=t.gl,a=this.framebuffer=i.createFramebuffer();this.colorAttachment=new n(t,a),this.depthAttachment=new o(t,a)};a.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r),t.deleteFramebuffer(this.framebuffer)},e.exports=a},{"./value":71}],69:[function(t,e,r){"use strict";var i=function(t,e,r){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};i.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},i.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},i.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},i.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)},e.exports=i},{}],70:[function(t,e,r){"use strict";var i=function(t,e,r,i,n,o){this.test=t,this.ref=e,this.mask=r,this.fail=i,this.depthFail=n,this.pass=o};i.disabled=new i({func:519,mask:0},0,0,7680,7680,7680),e.exports=i},{}],71:[function(t,e,r){"use strict";var i=t("../style-spec/util/color"),n=t("../util/util"),o=function(t){this.context=t,this.current=i.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var a=function(t){this.context=t,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var s=function(t){this.context=t,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var l=function(t){this.context=t,this.current=[!0,!0,!0,!0]};l.prototype.get=function(){return this.current},l.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var u=function(t){this.context=t,this.current=!0};u.prototype.get=function(){return this.current},u.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var c=function(t){this.context=t,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var p=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};p.prototype.get=function(){return this.current},p.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var h=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};h.prototype.get=function(){return this.current},h.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var f=function(t){this.context=t,this.current=!1};f.prototype.get=function(){return this.current},f.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var d=function(t){this.context=t,this.current=[0,1]};d.prototype.get=function(){return this.current},d.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var m=function(t){this.context=t,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var y=function(t){this.context=t,this.current=t.gl.LESS};y.prototype.get=function(){return this.current},y.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var _=function(t){this.context=t,this.current=!1};_.prototype.get=function(){return this.current},_.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var g=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};g.prototype.get=function(){return this.current},g.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var v=function(t){this.context=t,this.current=i.transparent};v.prototype.get=function(){return this.current},v.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var x=function(t){this.context=t,this.current=null};x.prototype.get=function(){return this.current},x.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var b=function(t){this.context=t,this.current=1};b.prototype.get=function(){return this.current},b.prototype.set=function(t){var e=this.context.lineWidthRange,r=n.clamp(t,e[0],e[1]);this.current!==r&&(this.context.gl.lineWidth(r),this.current=t)};var w=function(t){this.context=t,this.current=t.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var S=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};S.prototype.get=function(){return this.current},S.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var A=function(t){this.context=t,this.current=null};A.prototype.get=function(){return this.current},A.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var T=function(t){this.context=t,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var z=function(t){this.context=t,this.current=null};z.prototype.get=function(){return this.current},z.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var E=function(t){this.context=t,this.current=null};E.prototype.get=function(){return this.current},E.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var k=function(t){this.context=t,this.current=null};k.prototype.get=function(){return this.current},k.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var C=function(t){this.context=t,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var I=function(t){this.context=t,this.current=4};I.prototype.get=function(){return this.current},I.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var M=function(t){this.context=t,this.current=!1};M.prototype.get=function(){return this.current},M.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var P=function(t,e){this.context=t,this.current=null,this.parent=e};P.prototype.get=function(){return this.current};var L=function(t){function e(e,r){t.call(this,e,r),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(P),D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(P);e.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:l,DepthMask:u,StencilMask:c,StencilFunc:p,StencilOp:h,StencilTest:f,DepthRange:d,DepthTest:m,DepthFunc:y,Blend:_,BlendFunc:g,BlendColor:v,Program:x,LineWidth:b,ActiveTextureUnit:w,Viewport:S,BindFramebuffer:A,BindRenderbuffer:T,BindTexture:z,BindVertexBuffer:E,BindElementBuffer:k,BindVertexArrayOES:C,PixelStoreUnpack:I,PixelStoreUnpackPremultiplyAlpha:M,ColorAttachment:L,DepthAttachment:D}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(t,e,r){"use strict";var i={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},n=function(t,e,r,i){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};n.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},n.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},n.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],n=e.attributes[i.name];void 0!==n&&t.enableVertexAttribArray(n)}},n.prototype.setVertexAttribPointers=function(t,e,r){for(var n=this,o=0;o<this.attributes.length;o++){var a=n.attributes[o],s=e.attributes[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[i[a.type]],!1,n.itemSize,a.offset+n.itemSize*(r||0))}},n.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)},e.exports=n},{}],73:[function(t,e,r){"use strict";var i=t("@mapbox/mapbox-gl-supported"),n=t("./util/browser"),o=t("../package.json").version,a=t("./ui/map"),s=t("./ui/control/navigation_control"),l=t("./ui/control/geolocate_control"),u=t("./ui/control/attribution_control"),c=t("./ui/control/scale_control"),p=t("./ui/control/fullscreen_control"),h=t("./ui/popup"),f=t("./ui/marker"),d=t("./style/style"),m=t("./geo/lng_lat"),y=t("./geo/lng_lat_bounds"),_=t("@mapbox/point-geometry"),g=t("./util/evented"),v=t("./util/config"),x=t("./source/rtl_text_plugin");e.exports={version:o,supported:i,workerCount:Math.max(Math.floor(n.hardwareConcurrency/2),1),setRTLTextPlugin:x.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:l,AttributionControl:u,ScaleControl:c,FullscreenControl:p,Popup:h,Marker:f,Style:d,LngLat:m,LngLatBounds:y,Point:_,Evented:g,config:v,get accessToken(){return v.ACCESS_TOKEN},set accessToken(t){v.ACCESS_TOKEN=t}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(t,e,r){"use strict";var i=t("./pattern"),n=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,r){var a=r.paint.get("background-color"),s=r.paint.get("background-opacity");if(0!==s){var l=t.context,u=l.gl,c=t.transform,p=c.tileSize,h=r.paint.get("background-pattern"),f=h||1!==a.a||1!==s?"translucent":"opaque";if(t.renderPass===f){var d;if(l.setStencilMode(n.disabled),l.setDepthMode(t.depthModeForSublayer(0,"opaque"===f?o.ReadWrite:o.ReadOnly)),l.setColorMode(t.colorModeForRenderPass()),h){if(i.isPatternMissing(h,t))return;d=t.useProgram("backgroundPattern"),i.prepare(h,t,d),t.tileExtentPatternVAO.bind(l,d,t.tileExtentBuffer,[])}else d=t.useProgram("background"),u.uniform4fv(d.uniforms.u_color,[a.r,a.g,a.b,a.a]),t.tileExtentVAO.bind(l,d,t.tileExtentBuffer,[]);u.uniform1f(d.uniforms.u_opacity,s);for(var m=0,y=c.coveringTiles({tileSize:p});m<y.length;m+=1){var _=y[m];h&&i.setTile({tileID:_,tileSize:p},t,d),u.uniformMatrix4fv(d.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(_.toUnwrapped())),u.drawArrays(u.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(t,e,r){"use strict";var i=t("../source/pixels_to_tile_units"),n=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,r,a){if("translucent"===t.renderPass){var s=r.paint.get("circle-opacity"),l=r.paint.get("circle-stroke-width"),u=r.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==l.constantOr(1)&&0!==u.constantOr(1)){var c=t.context,p=c.gl;c.setDepthMode(t.depthModeForSublayer(0,o.ReadOnly)),c.setStencilMode(n.disabled),c.setColorMode(t.colorModeForRenderPass());for(var h=!0,f=0;f<a.length;f++){var d=a[f],m=e.getTile(d),y=m.getBucket(r);if(y){var _=t.context.program.get(),g=y.programConfigurations.get(r.id),v=t.useProgram("circle",g);if((h||v.program!==_)&&(g.setUniforms(c,v,r.paint,{zoom:t.transform.zoom}),h=!1),p.uniform1f(v.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),p.uniform1i(v.uniforms.u_scale_with_map,"map"===r.paint.get("circle-pitch-scale")?1:0),"map"===r.paint.get("circle-pitch-alignment")){p.uniform1i(v.uniforms.u_pitch_with_map,1);var x=i(m,1,t.transform.zoom);p.uniform2f(v.uniforms.u_extrude_scale,x,x)}else p.uniform1i(v.uniforms.u_pitch_with_map,0),p.uniform2fv(v.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);p.uniformMatrix4fv(v.uniforms.u_matrix,!1,t.translatePosMatrix(d.posMatrix,m,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor"))),v.draw(c,p.TRIANGLES,r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,g)}}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(t,e,r){"use strict";function i(t,e,r,i,s){var l=t.context,u=l.gl,c=s?t.useProgram("collisionCircle"):t.useProgram("collisionBox");l.setDepthMode(o.disabled),l.setStencilMode(a.disabled),l.setColorMode(t.colorModeForRenderPass());for(var p=0;p<i.length;p++){var h=i[p],f=e.getTile(h),d=f.getBucket(r);if(d){var m=s?d.collisionCircle:d.collisionBox;if(m){u.uniformMatrix4fv(c.uniforms.u_matrix,!1,h.posMatrix),s||l.lineWidth.set(1),u.uniform1f(c.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var y=n(f,1,t.transform.zoom),_=Math.pow(2,t.transform.zoom-f.tileID.overscaledZ);u.uniform1f(c.uniforms.u_pixels_to_tile_units,y),u.uniform2f(c.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(y*_),t.transform.pixelsToGLUnits[1]/(y*_)),c.draw(l,s?u.TRIANGLES:u.LINES,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}}var n=t("../source/pixels_to_tile_units"),o=t("../gl/depth_mode"),a=t("../gl/stencil_mode");e.exports=function(t,e,r,n){i(t,e,r,n,!1),i(t,e,r,n,!0)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(t,e,r){"use strict";function i(t,e,r){var i=t.context,f=i.gl;i.lineWidth.set(1*n.devicePixelRatio);var d=r.posMatrix,m=t.useProgram("debug");i.setDepthMode(c.disabled),i.setStencilMode(p.disabled),i.setColorMode(t.colorModeForRenderPass()),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.uniform4f(m.uniforms.u_color,1,0,0,1),t.debugVAO.bind(i,m,t.debugBuffer,[]),f.drawArrays(f.LINE_STRIP,0,t.debugBuffer.length);for(var y=function(t,e,r,i){i=i||1;var n,o,a,s,l,u,c,p,f=[];for(n=0,o=t.length;n<o;n++)if(l=h[t[n]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=e+l[1][a]*i,c=r-l[1][a+1]*i,p&&f.push(p.x,p.y,u,c),p={x:u,y:c});e+=l[0]*i}return f}(r.toString(),50,200,5),_=new l,g=0;g<y.length;g+=2)_.emplaceBack(y[g],y[g+1]);var v=i.createVertexBuffer(_,u.members);(new s).bind(i,m,v,[]),f.uniform4f(m.uniforms.u_color,1,1,1,1);for(var x=e.getTile(r).tileSize,b=a/(Math.pow(2,t.transform.zoom-r.overscaledZ)*x),w=[[-1,-1],[-1,1],[1,-1],[1,1]],S=0;S<w.length;S++){var A=w[S];f.uniformMatrix4fv(m.uniforms.u_matrix,!1,o.translate([],d,[b*A[0],b*A[1],0])),f.drawArrays(f.LINES,0,v.length)}f.uniform4f(m.uniforms.u_color,0,0,0,1),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.drawArrays(f.LINES,0,v.length)}var n=t("../util/browser"),o=t("@mapbox/gl-matrix").mat4,a=t("../data/extent"),s=t("./vertex_array_object"),l=t("../data/array_types").PosArray,u=t("../data/pos_attributes"),c=t("../gl/depth_mode"),p=t("../gl/stencil_mode");e.exports=function(t,e,r){for(var n=0;n<r.length;n++)i(t,e,r[n])};var h={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(t,e,r){"use strict";function i(t,e,r,i,n){if(!s.isPatternMissing(r.paint.get("fill-pattern"),t))for(var o=!0,a=0,l=i;a<l.length;a+=1){var u=l[a],c=e.getTile(u),p=c.getBucket(r);p&&(t.context.setStencilMode(t.stencilModeForClipping(u)),n(t,e,r,c,u,p,o),o=!1)}}function n(t,e,r,i,n,o,s){var l=t.context.gl,u=o.programConfigurations.get(r.id);a("fill",r.paint.get("fill-pattern"),t,u,r,i,n,s).draw(t.context,l.TRIANGLES,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,u)}function o(t,e,r,i,n,o,s){var l=t.context.gl,u=o.programConfigurations.get(r.id),c=a("fillOutline",r.getPaintProperty("fill-outline-color")?null:r.paint.get("fill-pattern"),t,u,r,i,n,s);l.uniform2f(c.uniforms.u_world,l.drawingBufferWidth,l.drawingBufferHeight),c.draw(t.context,l.LINES,r.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,u)}function a(t,e,r,i,n,o,a,l){var u,c=r.context.program.get();return e?(u=r.useProgram(t+"Pattern",i),(l||u.program!==c)&&(i.setUniforms(r.context,u,n.paint,{zoom:r.transform.zoom}),s.prepare(e,r,u)),s.setTile(o,r,u)):(u=r.useProgram(t,i),(l||u.program!==c)&&i.setUniforms(r.context,u,n.paint,{zoom:r.transform.zoom})),r.context.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,r.translatePosMatrix(a.posMatrix,o,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"))),u}var s=t("./pattern"),l=t("../style-spec/util/color"),u=t("../gl/depth_mode");e.exports=function(t,e,r,a){var s=r.paint.get("fill-color"),c=r.paint.get("fill-opacity");if(0!==c.constantOr(1)){var p=t.context;p.setColorMode(t.colorModeForRenderPass());var h=r.paint.get("fill-pattern")||1!==s.constantOr(l.transparent).a||1!==c.constantOr(0)?"translucent":"opaque";t.renderPass===h&&(p.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?u.ReadWrite:u.ReadOnly)),i(t,e,r,a,n)),"translucent"===t.renderPass&&r.paint.get("fill-antialias")&&(p.lineWidth.set(2),p.setDepthMode(t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,u.ReadOnly)),i(t,e,r,a,o))}}},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(t,e,r){"use strict";function i(t,e,r,i,n,a,s){var l=t.context,c=l.gl,h=r.paint.get("fill-extrusion-pattern"),f=t.context.program.get(),d=a.programConfigurations.get(r.id),m=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",d);if((s||m.program!==f)&&d.setUniforms(l,m,r.paint,{zoom:t.transform.zoom}),h){if(o.isPatternMissing(h,t))return;o.prepare(h,t,m),o.setTile(i,t,m),c.uniform1f(m.uniforms.u_height_factor,-Math.pow(2,n.overscaledZ)/i.tileSize/8)}t.context.gl.uniformMatrix4fv(m.uniforms.u_matrix,!1,t.translatePosMatrix(n.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor"))),function(t,e){var r=e.context.gl,i=e.style.light,n=i.properties.get("position"),o=[n.x,n.y,n.z],a=u.create();"viewport"===i.properties.get("anchor")&&u.fromRotation(a,-e.transform.angle),p.transformMat3(o,o,a);var s=i.properties.get("color");r.uniform3fv(t.uniforms.u_lightpos,o),r.uniform1f(t.uniforms.u_lightintensity,i.properties.get("intensity")),r.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}(m,t),m.draw(l,c.TRIANGLES,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,d)}var n=t("@mapbox/gl-matrix"),o=t("./pattern"),a=t("./texture"),s=t("../style-spec/util/color"),l=t("../gl/depth_mode"),u=n.mat3,c=n.mat4,p=n.vec3,h=t("../gl/stencil_mode");e.exports=function(t,e,r,n){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){!function(t,e){var r=t.context,i=r.gl,n=e.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!n){var o=new a(r,{width:t.width,height:t.height,data:null},i.RGBA);o.bind(i.LINEAR,i.CLAMP_TO_EDGE),(n=e.viewportFrame=r.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}r.bindFramebuffer.set(n.framebuffer),n.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(r.clear({depth:1}),t.depthRboNeedsClear=!1),r.clear({color:s.transparent}),r.setStencilMode(h.disabled),r.setDepthMode(new l(i.LEQUAL,l.ReadWrite,[0,1])),r.setColorMode(t.colorModeForRenderPass())}(t,r);for(var o=!0,u=0,p=n;u<p.length;u+=1){var f=p[u],d=e.getTile(f),m=d.getBucket(r);m&&(i(t,0,r,d,f,m,o),o=!1)}}else"translucent"===t.renderPass&&function(t,e){var r=e.viewportFrame;if(r){var i=t.context,n=i.gl,o=t.useProgram("extrusionTexture");i.setStencilMode(h.disabled),i.setDepthMode(l.disabled),i.setColorMode(t.colorModeForRenderPass()),i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),n.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),n.uniform1i(o.uniforms.u_image,0);var a=c.create();c.ortho(a,0,t.width,t.height,0,0,1),n.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),n.uniform2f(o.uniforms.u_world,n.drawingBufferWidth,n.drawingBufferHeight),t.viewportVAO.bind(i,o,t.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}(t,r)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(t,e,r){"use strict";var i=t("@mapbox/gl-matrix").mat4,n=t("./texture"),o=t("../source/pixels_to_tile_units"),a=t("../style-spec/util/color"),s=t("../gl/depth_mode"),l=t("../gl/stencil_mode"),u=t("../gl/color_mode");e.exports=function(t,e,r,c){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var p=t.context,h=p.gl;p.setDepthMode(t.depthModeForSublayer(0,s.ReadOnly)),p.setStencilMode(l.disabled),function(t,e,r){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=r.heatmapFbo;if(n)i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),n=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,r,i,n){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r.width/4,r.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),n.colorAttachment.set(i),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,n.colorAttachment.setDirty(),t(e,r,i,n))}(t,e,o,n)}}(p,t,r),p.clear({color:a.transparent}),p.setColorMode(new u([h.ONE,h.ONE],a.transparent,[!0,!0,!0,!0]));for(var f=!0,d=0;d<c.length;d++){var m=c[d];if(!e.hasRenderableParent(m)){var y=e.getTile(m),_=y.getBucket(r);if(_){var g=t.context.program.get(),v=_.programConfigurations.get(r.id),x=t.useProgram("heatmap",v),b=t.transform.zoom;(f||x.program!==g)&&(v.setUniforms(t.context,x,r.paint,{zoom:b}),f=!1),h.uniform1f(x.uniforms.u_extrude_scale,o(y,1,b)),h.uniform1f(x.uniforms.u_intensity,r.paint.get("heatmap-intensity")),h.uniformMatrix4fv(x.uniforms.u_matrix,!1,m.posMatrix),x.draw(p,h.TRIANGLES,r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,v)}}}p.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var r=t.context,o=r.gl,a=e.heatmapFbo;if(a){r.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(o.TEXTURE1);var l=e.colorRampTexture;l||(l=e.colorRampTexture=new n(r,e.colorRamp,o.RGBA)),l.bind(o.LINEAR,o.CLAMP_TO_EDGE),r.setDepthMode(s.disabled);var u=t.useProgram("heatmapTexture"),c=e.paint.get("heatmap-opacity");o.uniform1f(u.uniforms.u_opacity,c),o.uniform1i(u.uniforms.u_image,0),o.uniform1i(u.uniforms.u_color_ramp,1);var p=i.create();i.ortho(p,0,t.width,t.height,0,0,1),o.uniformMatrix4fv(u.uniforms.u_matrix,!1,p),o.uniform2f(u.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),t.viewportVAO.bind(t.context,u,t.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4)}}(t,r))}},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(t,e,r){"use strict";function i(t,e,r){var i=t.context,n=i.gl,a=e.fbo;if(a){var s=t.useProgram("hillshade"),l=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());!function(t,e,r){var i=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(i-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,r.paint.get("hillshade-exaggeration"),i)}(s,t,r);var u=function(t,e){var r=e.toCoordinate(),i=new o(r.column,r.row+1,r.zoom);return[t.transform.coordinateLocation(r).lat,t.transform.coordinateLocation(i).lat]}(t,e.tileID);i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),n.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),n.uniform2fv(s.uniforms.u_latrange,u),n.uniform1i(s.uniforms.u_image,0);var c=r.paint.get("hillshade-shadow-color");n.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var p=r.paint.get("hillshade-highlight-color");n.uniform4f(s.uniforms.u_highlight,p.r,p.g,p.b,p.a);var h=r.paint.get("hillshade-accent-color");if(n.uniform4f(s.uniforms.u_accent,h.r,h.g,h.b,h.a),e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments)s.draw(i,n.TRIANGLES,r.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments);else{var f=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(i,s,f,[]),n.drawArrays(n.TRIANGLE_STRIP,0,f.length)}}}function n(t,e){var r=t.context,i=r.gl;if(e.dem&&e.dem.level){var n=e.dem.level.dim,o=e.dem.getPixels();if(r.activeTexture.set(i.TEXTURE1),r.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(e.tileSize),e.demTexture){var u=e.demTexture;u.update(o,!1),u.bind(i.NEAREST,i.CLAMP_TO_EDGE)}else e.demTexture=new a(r,o,i.RGBA,!1),e.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE);r.activeTexture.set(i.TEXTURE0);var c=e.fbo;if(!c){var p=new a(r,{width:n,height:n,data:null},i.RGBA);p.bind(i.LINEAR,i.CLAMP_TO_EDGE),(c=e.fbo=r.createFramebuffer(n,n)).colorAttachment.set(p.texture)}r.bindFramebuffer.set(c.framebuffer),r.viewport.set([0,0,n,n]);var h=l.create();l.ortho(h,0,s,-s,0,0,1),l.translate(h,h,[0,-s,0]);var f=t.useProgram("hillshadePrepare");i.uniformMatrix4fv(f.uniforms.u_matrix,!1,h),i.uniform1f(f.uniforms.u_zoom,e.tileID.overscaledZ),i.uniform2fv(f.uniforms.u_dimension,[2*n,2*n]),i.uniform1i(f.uniforms.u_image,1);var d=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(r,f,d,[]),i.drawArrays(i.TRIANGLE_STRIP,0,d.length),e.needsHillshadePrepare=!1}}var o=t("../geo/coordinate"),a=t("./texture"),s=t("../data/extent"),l=t("@mapbox/gl-matrix").mat4,u=t("../gl/stencil_mode"),c=t("../gl/depth_mode");e.exports=function(t,e,r,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,c.ReadOnly)),a.setStencilMode(u.disabled),a.setColorMode(t.colorModeForRenderPass());for(var s=0,l=o;s<l.length;s+=1){var p=l[s],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?n(t,h):"translucent"===t.renderPass&&i(t,h,r)}a.viewport.set([0,0,t.width,t.height])}}},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(t,e,r){"use strict";function i(t,e,r,i,a,s,l,u,c){var p,h,f,d,m=e.context,y=m.gl,_=a.paint.get("line-dasharray"),g=a.paint.get("line-pattern");if(u||c){var v=1/o(r,1,e.transform.tileZoom);if(_){p=e.lineAtlas.getDash(_.from,"round"===a.layout.get("line-cap")),h=e.lineAtlas.getDash(_.to,"round"===a.layout.get("line-cap"));var x=p.width*_.fromScale,b=h.width*_.toScale;y.uniform2f(t.uniforms.u_patternscale_a,v/x,-p.height/2),y.uniform2f(t.uniforms.u_patternscale_b,v/b,-h.height/2),y.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(x,b)*n.devicePixelRatio)/2)}else if(g){if(f=e.imageManager.getPattern(g.from),d=e.imageManager.getPattern(g.to),!f||!d)return;y.uniform2f(t.uniforms.u_pattern_size_a,f.displaySize[0]*g.fromScale/v,d.displaySize[1]),y.uniform2f(t.uniforms.u_pattern_size_b,d.displaySize[0]*g.toScale/v,d.displaySize[1]);var w=e.imageManager.getPixelSize(),S=w.width,A=w.height;y.uniform2fv(t.uniforms.u_texsize,[S,A])}y.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}u&&(_?(y.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(m),y.uniform1f(t.uniforms.u_tex_y_a,p.y),y.uniform1f(t.uniforms.u_tex_y_b,h.y),y.uniform1f(t.uniforms.u_mix,_.t)):g&&(y.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(y.TEXTURE0),e.imageManager.bind(m),y.uniform2fv(t.uniforms.u_pattern_tl_a,f.tl),y.uniform2fv(t.uniforms.u_pattern_br_a,f.br),y.uniform2fv(t.uniforms.u_pattern_tl_b,d.tl),y.uniform2fv(t.uniforms.u_pattern_br_b,d.br),y.uniform1f(t.uniforms.u_fade,g.t))),m.setStencilMode(e.stencilModeForClipping(s));var T=e.translatePosMatrix(s.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));y.uniformMatrix4fv(t.uniforms.u_matrix,!1,T),y.uniform1f(t.uniforms.u_ratio,1/o(r,1,e.transform.zoom)),t.draw(m,y.TRIANGLES,a.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,l)}var n=t("../util/browser"),o=t("../source/pixels_to_tile_units"),a=t("../gl/depth_mode");e.exports=function(t,e,r,n){if("translucent"===t.renderPass&&0!==r.paint.get("line-opacity").constantOr(1)){var o=t.context;o.setDepthMode(t.depthModeForSublayer(0,a.ReadOnly)),o.setColorMode(t.colorModeForRenderPass());for(var s,l=r.paint.get("line-dasharray")?"lineSDF":r.paint.get("line-pattern")?"linePattern":"line",u=!0,c=0,p=n;c<p.length;c+=1){var h=p[c],f=e.getTile(h),d=f.getBucket(r);if(d){var m=d.programConfigurations.get(r.id),y=t.context.program.get(),_=t.useProgram(l,m),g=u||_.program!==y,v=s!==f.tileID.overscaledZ;g&&m.setUniforms(t.context,_,r.paint,{zoom:t.transform.zoom}),i(_,t,f,d,r,h,m,g,v),s=f.tileID.overscaledZ,u=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(t,e,r){"use strict";function i(t,e,r,i,o){var s=i.paint.get("raster-fade-duration");if(s>0){var l=a.now(),u=(l-t.timeAdded)/s,c=e?(l-e.timeAdded)/s:-1,p=r.getSource(),h=o.coveringZoomLevel({tileSize:p.tileSize,roundZoom:p.roundZoom}),f=!e||Math.abs(e.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),d=f&&t.refreshedUponExpiration?1:n.clamp(f?u:1-c,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var n=t("../util/util"),o=t("../source/image_source"),a=t("../util/browser"),s=t("../gl/stencil_mode"),l=t("../gl/depth_mode");e.exports=function(t,e,r,n){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")){var a=t.context,u=a.gl,c=e.getSource(),p=t.useProgram("raster");a.setStencilMode(s.disabled),a.setColorMode(t.colorModeForRenderPass()),u.uniform1f(p.uniforms.u_brightness_low,r.paint.get("raster-brightness-min")),u.uniform1f(p.uniforms.u_brightness_high,r.paint.get("raster-brightness-max")),u.uniform1f(p.uniforms.u_saturation_factor,function(t){return t>0?1-1/(1.001-t):-t}(r.paint.get("raster-saturation"))),u.uniform1f(p.uniforms.u_contrast_factor,function(t){return t>0?1/(1-t):1+t}(r.paint.get("raster-contrast"))),u.uniform3fv(p.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}(r.paint.get("raster-hue-rotate"))),u.uniform1f(p.uniforms.u_buffer_scale,1),u.uniform1i(p.uniforms.u_image0,0),u.uniform1i(p.uniforms.u_image1,1);for(var h=n.length&&n[0].overscaledZ,f=0,d=n;f<d.length;f+=1){var m=d[f];a.setDepthMode(t.depthModeForSublayer(m.overscaledZ-h,1===r.paint.get("raster-opacity")?l.ReadWrite:l.ReadOnly,u.LESS));var y=e.getTile(m),_=t.transform.calculatePosMatrix(m.toUnwrapped(),!0);y.registerFadeDuration(r.paint.get("raster-fade-duration")),u.uniformMatrix4fv(p.uniforms.u_matrix,!1,_);var g=e.findLoadedParent(m,0,{}),v=i(y,g,e,r,t.transform),x=void 0,b=void 0;if(a.activeTexture.set(u.TEXTURE0),y.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(u.TEXTURE1),g?(g.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,g.tileID.overscaledZ-y.tileID.overscaledZ),b=[y.tileID.canonical.x*x%1,y.tileID.canonical.y*x%1]):y.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),u.uniform2fv(p.uniforms.u_tl_parent,b||[0,0]),u.uniform1f(p.uniforms.u_scale_parent,x||1),u.uniform1f(p.uniforms.u_fade_t,v.mix),u.uniform1f(p.uniforms.u_opacity,v.opacity*r.paint.get("raster-opacity")),c instanceof o){var w=c.boundsBuffer;c.boundsVAO.bind(a,p,w,[]),u.drawArrays(u.TRIANGLE_STRIP,0,w.length)}else if(y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments)p.draw(a,u.TRIANGLES,r.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments);else{var S=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,p,S,[]),u.drawArrays(u.TRIANGLE_STRIP,0,S.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(t,e,r){"use strict";function i(t,e,r,i,a,s,c,h,f,m){var y=t.context,_=y.gl,g=t.transform,v="map"===h,x="map"===f,b=v&&"line"===r.layout.get("symbol-placement"),w=v&&!x&&!b,S=x;y.setDepthMode(S?t.depthModeForSublayer(0,d.ReadOnly):d.disabled);for(var A,T=0,z=i;T<z.length;T+=1){var E=z[T],k=e.getTile(E),C=k.getBucket(r);if(C){var I=a?C.text:C.icon;if(I&&I.segments.get().length){var M=I.programConfigurations.get(r.id),P=a||C.sdfIcons,L=a?C.textSizeData:C.iconSizeData;if(A||(A=t.useProgram(P?"symbolSDF":"symbolIcon",M),M.setUniforms(t.context,A,r.paint,{zoom:t.transform.zoom}),n(A,t,r,a,w,x,L)),y.activeTexture.set(_.TEXTURE0),_.uniform1i(A.uniforms.u_texture,0),a)k.glyphAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),_.uniform2fv(A.uniforms.u_texsize,k.glyphAtlasTexture.size);else{var D=1!==r.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,B=x||0!==g.pitch;k.iconAtlasTexture.bind(P||t.options.rotating||t.options.zooming||D||B?_.LINEAR:_.NEAREST,_.CLAMP_TO_EDGE),_.uniform2fv(A.uniforms.u_texsize,k.iconAtlasTexture.size)}_.uniformMatrix4fv(A.uniforms.u_matrix,!1,t.translatePosMatrix(E.posMatrix,k,s,c));var R=l(k,1,t.transform.zoom),O=u.getLabelPlaneMatrix(E.posMatrix,x,v,t.transform,R),F=u.getGlCoordMatrix(E.posMatrix,x,v,t.transform,R);_.uniformMatrix4fv(A.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(F,k,s,c,!0)),b?(_.uniformMatrix4fv(A.uniforms.u_label_plane_matrix,!1,p),u.updateLineLabels(C,E.posMatrix,t,a,O,F,x,m)):_.uniformMatrix4fv(A.uniforms.u_label_plane_matrix,!1,O),_.uniform1f(A.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),o(A,M,t,r,k,I,a,P,x)}}}}function n(t,e,r,i,n,o,a){var s=e.context.gl,l=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,i?1:0),s.uniform1f(t.uniforms.u_pitch,l.pitch/360*2*Math.PI);var u="constant"===a.functionType||"source"===a.functionType,p="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(t.uniforms.u_is_size_zoom_constant,u?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,p?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var f=c.evaluateSizeForZoom(a,l.zoom,h.properties[i?"text-size":"icon-size"]);void 0!==f.uSizeT&&s.uniform1f(t.uniforms.u_size_t,f.uSizeT),void 0!==f.uSize&&s.uniform1f(t.uniforms.u_size,f.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(t.uniforms.u_rotate_symbol,n?1:0)}function o(t,e,r,i,n,o,s,l,u){var c=r.context,p=c.gl,h=r.transform;if(l){var f=0!==i.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),d=u?Math.cos(h._pitch)*h.cameraToCenterDistance:1;p.uniform1f(t.uniforms.u_gamma_scale,d),f&&(p.uniform1f(t.uniforms.u_is_halo,1),a(o,i,c,t)),p.uniform1f(t.uniforms.u_is_halo,0)}a(o,i,c,t)}function a(t,e,r,i){i.draw(r,r.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}var s=t("./draw_collision_debug"),l=t("../source/pixels_to_tile_units"),u=t("../symbol/projection"),c=t("../symbol/symbol_size"),p=t("@mapbox/gl-matrix").mat4.identity(new Float32Array(16)),h=t("../style/style_layer/symbol_style_layer_properties").layout,f=t("../gl/stencil_mode"),d=t("../gl/depth_mode");e.exports=function(t,e,r,n){if("translucent"===t.renderPass){var o=t.context;o.setStencilMode(f.disabled),o.setColorMode(t.colorModeForRenderPass()),0!==r.paint.get("icon-opacity").constantOr(1)&&i(t,e,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright")),0!==r.paint.get("text-opacity").constantOr(1)&&i(t,e,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&s(t,e,r,n)}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(t,e,r){"use strict";var i=t("@mapbox/shelf-pack"),n=t("../util/image").AlphaImage,o=1;e.exports={makeGlyphAtlas:function(t){var e=new n({width:0,height:0}),r={},a=new i(0,0,{autoResize:!0});for(var s in t){var l=t[s],u=r[s]={};for(var c in l){var p=l[+c];if(p&&0!==p.bitmap.width&&0!==p.bitmap.height){var h=a.packOne(p.bitmap.width+2*o,p.bitmap.height+2*o);e.resize({width:a.w,height:a.h}),n.copy(p.bitmap,e,{x:0,y:0},{x:h.x+o,y:h.y+o},p.bitmap),u[c]={rect:h,metrics:p.metrics}}}}return a.shrink(),e.resize({width:a.w,height:a.h}),{image:e,positions:r}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(t,e,r){"use strict";var i=t("../style/load_glyph_range"),n=t("@mapbox/tiny-sdf"),o=t("../util/is_char_in_unicode_block"),a=t("../util/util").asyncAll,s=t("../util/image").AlphaImage,l=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};l.prototype.setURL=function(t){this.url=t},l.prototype.getGlyphs=function(t,e){var r=this,n=[];for(var o in t)for(var s=0,l=t[o];s<l.length;s+=1){var u=l[s];n.push({stack:o,id:u})}a(n,function(t,e){var n=t.stack,o=t.id,a=r.entries[n];a||(a=r.entries[n]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0===s)if(s=r._tinySDF(a,n,o))e(null,{stack:n,id:o,glyph:s});else{var l=Math.floor(o/256);if(256*l>65535)e(new Error("glyphs > 65535 not supported"));else{var u=a.requests[l];u||(u=a.requests[l]=[],i(n,l,r.url,r.requestTransform,function(t,e){if(e)for(var r in e)a.glyphs[+r]=e[+r];for(var i=0,n=u;i<n.length;i+=1)(0,n[i])(t,e);delete a.requests[l]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:o,glyph:r[o]||null})})}}else e(null,{stack:n,id:o,glyph:s})},function(t,r){if(t)e(t);else if(r){for(var i={},n=0,o=r;n<o.length;n+=1){var a=o[n],s=a.stack,l=a.id,u=a.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}e(null,i)}})},l.prototype._tinySDF=function(t,e,r){var i=this.localIdeographFontFamily;if(i&&(o["CJK Unified Ideographs"](r)||o["Hangul Syllables"](r))){var a=t.tinySDF;if(!a){var l="400";/bold/i.test(e)?l="900":/medium/i.test(e)?l="500":/light/i.test(e)&&(l="200"),a=t.tinySDF=new n(24,3,8,.25,i,l)}return{id:r,bitmap:new s({width:30,height:30},a.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=l},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(t,e,r){"use strict";function i(t,e){var r=e.pixelRatio,i={x:t.x+a,y:t.y+a,w:t.w-2*a,h:t.h-2*a};return{pixelRatio:r,textureRect:i,tl:[i.x,i.y],br:[i.x+i.w,i.y+i.h],displaySize:[i.w/r,i.h/r]}}var n=t("@mapbox/shelf-pack"),o=t("../util/image").RGBAImage,a=1;e.exports={imagePosition:i,makeImageAtlas:function(t){var e=new o({width:0,height:0}),r={},s=new n(0,0,{autoResize:!0});for(var l in t){var u=t[l],c=s.packOne(u.data.width+2*a,u.data.height+2*a);e.resize({width:s.w,height:s.h}),o.copy(u.data,e,{x:0,y:0},{x:c.x+a,y:c.y+a},u.data),r[l]=i(c,u)}return s.shrink(),e.resize({width:s.w,height:s.h}),{image:e,positions:r}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(t,e,r){"use strict";var i=t("@mapbox/shelf-pack"),n=t("../util/image").RGBAImage,o=t("./image_atlas").imagePosition,a=t("./texture"),s=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new i(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new n({width:64,height:64}),this.dirty=!0};s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var i=r[e],n=i.ids,o=i.callback;this._notify(n,o)}this.requestors=[]}},s.prototype.getImage=function(t){return this.images[t]},s.prototype.addImage=function(t,e){this.images[t]=e},s.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},s.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var i=0,n=t;i<n.length;i+=1){var o=n[i];this.images[o]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},s.prototype._notify=function(t,e){for(var r={},i=0,n=t;i<n.length;i+=1){var o=n[i],a=this.images[o];a&&(r[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,r)},s.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},s.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var r=this.getImage(t);if(!r)return null;var i=r.data.width+2,a=r.data.height+2,s=this.shelfPack.packOne(i,a);if(!s)return null;this.atlasImage.resize(this.getPixelSize());var l=r.data,u=this.atlasImage,c=s.x+1,p=s.y+1,h=l.width,f=l.height;n.copy(l,u,{x:0,y:0},{x:c,y:p},{width:h,height:f}),n.copy(l,u,{x:0,y:f-1},{x:c,y:p-1},{width:h,height:1}),n.copy(l,u,{x:0,y:0},{x:c,y:p+f},{width:h,height:1}),n.copy(l,u,{x:h-1,y:0},{x:c-1,y:p},{width:1,height:f}),n.copy(l,u,{x:0,y:0},{x:c+h,y:p},{width:1,height:f}),this.dirty=!0;var d=o(s,r);return this.patterns[t]={bin:s,position:d},d},s.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.exports=s},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(t,e,r){"use strict";var i=t("../util/util"),n=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};n.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.positions[r]||(this.positions[r]=this.addDash(t,e)),this.positions[r]},n.prototype.addDash=function(t,e){var r=this,n=e?7:0,o=2*n+1;if(this.nextRow+o>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var l=this.width/a,u=l/2,c=t.length%2==1,p=-n;p<=n;p++)for(var h=r.nextRow+n+p,f=r.width*h,d=c?-t[t.length-1]:0,m=t[0],y=1,_=0;_<this.width;_++){for(;m<_/l;)d=m,m+=t[y],c&&y===t.length-1&&(m+=t[0]),y++;var g=Math.abs(_-d*l),v=Math.abs(_-m*l),x=Math.min(g,v),b=y%2==1,w=void 0;if(e){var S=n?p/n*(u+1):0;if(b){var A=u-Math.abs(S);w=Math.sqrt(x*x+A*A)}else w=u-Math.sqrt(x*x+S*S)}else w=(b?1:-1)*x;r.data[3+4*(f+_)]=Math.max(0,Math.min(255,w+128))}var T={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:a};return this.nextRow+=o,this.dirty=!0,T},n.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},e.exports=n},{"../util/util":275}],90:[function(t,e,r){"use strict";var i=t("../util/browser"),n=t("@mapbox/gl-matrix").mat4,o=t("../source/source_cache"),a=t("../data/extent"),s=t("../source/pixels_to_tile_units"),l=t("../util/util"),u=t("./vertex_array_object"),c=t("../data/array_types"),p=c.RasterBoundsArray,h=c.PosArray,f=t("../data/raster_bounds_attributes"),d=t("../data/pos_attributes"),m=t("../data/program_configuration").ProgramConfiguration,y=t("../symbol/cross_tile_symbol_index"),_=t("../shaders"),g=t("./program"),v=t("../gl/context"),x=t("../gl/depth_mode"),b=t("../gl/stencil_mode"),w=t("../gl/color_mode"),S=(t("./texture"),t("./tile_mask")),A=t("../style-spec/util/color"),T={symbol:t("./draw_symbol"),circle:t("./draw_circle"),heatmap:t("./draw_heatmap"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),hillshade:t("./draw_hillshade"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},z=function(t,e){this.context=new v(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new m,this.crossTileSymbolIndex=new y};z.prototype.resize=function(t,e){var r=this.context.gl;if(this.width=t*i.devicePixelRatio,this.height=e*i.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,o=this.style._order;n<o.length;n+=1){var a=o[n];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},z.prototype.setup=function(){var t=this.context,e=new h;e.emplaceBack(0,0),e.emplaceBack(a,0),e.emplaceBack(0,a),e.emplaceBack(a,a),this.tileExtentBuffer=t.createVertexBuffer(e,d.members),this.tileExtentVAO=new u,this.tileExtentPatternVAO=new u;var r=new h;r.emplaceBack(0,0),r.emplaceBack(a,0),r.emplaceBack(a,a),r.emplaceBack(0,a),r.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(r,d.members),this.debugVAO=new u;var i=new p;i.emplaceBack(0,0,0,0),i.emplaceBack(a,0,a,0),i.emplaceBack(0,a,0,a),i.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=t.createVertexBuffer(i,f.members),this.rasterBoundsVAO=new u;var n=new h;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,d.members),this.viewportVAO=new u},z.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(w.disabled),t.setDepthMode(x.disabled),t.setStencilMode(new b({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var r=n.create();n.ortho(r,0,this.width,this.height,0,0,1),n.scale(r,r,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");e.uniformMatrix4fv(i.uniforms.u_matrix,!1,r),this.viewportVAO.bind(t,i,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},z.prototype._renderTileClippingMasks=function(t){var e=this,r=this.context,i=r.gl;r.setColorMode(w.disabled),r.setDepthMode(x.disabled);var n=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],l=e._tileClippingMaskIDs[s.key]=n++;r.setStencilMode(new b({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE));var u=e.useProgram("clippingMask");i.uniformMatrix4fv(u.uniforms.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(e.context,u,e.tileExtentBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}},z.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new b({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},z.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new w([t.CONSTANT_COLOR,t.ONE],new A(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?w.unblended:w.alphaBlended},z.prototype.depthModeForSublayer=function(t,e,r){var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=i-1+this.depthRange;return new x(r||this.context.gl.LEQUAL,e,[n,i])},z.prototype.render=function(t,e){var r=this;for(var n in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(i.now()),t.sourceCaches){var o=r.style.sourceCaches[n];o.used&&o.prepare(r.context)}var a=this.style._order,s=l.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var u in s)!function(t){var e=s[u],i=e.getVisibleCoordinates().map(function(t){return e.getTile(t)});S(i,r.context)}();this.renderPass="offscreen";var c,p=[];this.depthRboNeedsClear=!0;for(var h=0;h<a.length;h++){var f=r.style._layers[a[h]];f.hasOffscreenPass()&&!f.isHidden(r.transform.zoom)&&(f.source!==(c&&c.id)&&(p=[],(c=r.style.sourceCaches[f.source])&&(p=c.getVisibleCoordinates()).reverse()),p.length&&r.renderLayer(r,c,f,p))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?A.black:A.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var d,m=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var y=r.style._layers[a[r.currentLayer]];y.source!==(d&&d.id)&&(m=[],(d=r.style.sourceCaches[y.source])&&(r.clearStencil(),m=d.getVisibleCoordinates(),d.getSource().isTileClipped&&r._renderTileClippingMasks(m))),r.renderLayer(r,d,y,m)}this.renderPass="translucent";var _,g=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var v=r.style._layers[a[r.currentLayer]];v.source!==(_&&_.id)&&(g=[],(_=r.style.sourceCaches[v.source])&&(r.clearStencil(),g=_.getVisibleCoordinates(),_.getSource().isTileClipped&&r._renderTileClippingMasks(g)),g.reverse()),r.renderLayer(r,_,v,g)}if(this.options.showTileBoundaries){var x=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];x&&T.debug(this,x,x.getVisibleCoordinates())}},z.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},z.prototype.renderLayer=function(t,e,r,i){r.isHidden(this.transform.zoom)||("background"===r.type||i.length)&&(this.id=r.id,T[r.type](t,e,r,i))},z.prototype.translatePosMatrix=function(t,e,r,i,o){if(!r[0]&&!r[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var l=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*l,r[0]*l+r[1]*u]}var c=[o?r[0]:s(e,r[0],this.transform.zoom),o?r[1]:s(e,r[1],this.transform.zoom),0],p=new Float32Array(16);return n.translate(p,t,c),p},z.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},z.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},z.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var r=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new g(this.context,_[t],e,this._showOverdrawInspector)),this.cache[r]},z.prototype.useProgram=function(t,e){var r=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(r.program),r},e.exports=z},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(t,e,r){"use strict";var i=t("../source/pixels_to_tile_units");r.isPatternMissing=function(t,e){if(!t)return!1;var r=e.imageManager.getPattern(t.from),i=e.imageManager.getPattern(t.to);return!r||!i},r.prepare=function(t,e,r){var i=e.context,n=i.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);n.uniform1i(r.uniforms.u_image,0),n.uniform2fv(r.uniforms.u_pattern_tl_a,o.tl),n.uniform2fv(r.uniforms.u_pattern_br_a,o.br),n.uniform2fv(r.uniforms.u_pattern_tl_b,a.tl),n.uniform2fv(r.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),l=s.width,u=s.height;n.uniform2fv(r.uniforms.u_texsize,[l,u]),n.uniform1f(r.uniforms.u_mix,t.t),n.uniform2fv(r.uniforms.u_pattern_size_a,o.displaySize),n.uniform2fv(r.uniforms.u_pattern_size_b,a.displaySize),n.uniform1f(r.uniforms.u_scale_a,t.fromScale),n.uniform1f(r.uniforms.u_scale_b,t.toScale),i.activeTexture.set(n.TEXTURE0),e.imageManager.bind(e.context)},r.setTile=function(t,e,r){var n=e.context.gl;n.uniform1f(r.uniforms.u_tile_units_to_pixels,1/i(t,1,e.transform.tileZoom));var o=Math.pow(2,t.tileID.overscaledZ),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.tileID.canonical.x+t.tileID.wrap*o),l=a*t.tileID.canonical.y;n.uniform2f(r.uniforms.u_pixel_coord_upper,s>>16,l>>16),n.uniform2f(r.uniforms.u_pixel_coord_lower,65535&s,65535&l)}},{"../source/pixels_to_tile_units":104}],92:[function(t,e,r){"use strict";var i=t("../util/browser"),n=t("../shaders"),o=(t("../data/program_configuration").ProgramConfiguration,t("./vertex_array_object")),a=(t("../gl/context"),function(t,e,r,o){var a=this,s=t.gl;this.program=s.createProgram();var l=r.defines().concat("#define DEVICE_PIXEL_RATIO "+i.devicePixelRatio.toFixed(1));o&&l.push("#define OVERDRAW_INSPECTOR;");var u=l.concat(n.prelude.fragmentSource,e.fragmentSource).join("\n"),c=l.concat(n.prelude.vertexSource,e.vertexSource).join("\n"),p=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(p,u),s.compileShader(p),s.attachShader(this.program,p);var h=s.createShader(s.VERTEX_SHADER);s.shaderSource(h,c),s.compileShader(h),s.attachShader(this.program,h);for(var f=r.layoutAttributes||[],d=0;d<f.length;d++)s.bindAttribLocation(a.program,d,f[d].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var m=0;m<this.numAttributes;m++){var y=s.getActiveAttrib(a.program,m);y&&(a.attributes[y.name]=s.getAttribLocation(a.program,y.name))}for(var _=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),g=0;g<_;g++){var v=s.getActiveUniform(a.program,g);v&&(a.uniforms[v.name]=s.getUniformLocation(a.program,v.name))}});a.prototype.draw=function(t,e,r,i,n,a,s,l,u){for(var c,p=t.gl,h=(c={},c[p.LINES]=2,c[p.TRIANGLES]=3,c)[e],f=0,d=a.get();f<d.length;f+=1){var m=d[f],y=m.vaos||(m.vaos={});(y[r]||(y[r]=new o)).bind(t,this,i,s?s.getPaintVertexBuffers():[],n,m.vertexOffset,l,u),p.drawElements(e,m.primitiveLength*h,p.UNSIGNED_SHORT,m.primitiveOffset*h*2)}},e.exports=a},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(t,e,r){"use strict";var i=t("../util/window"),n=i.HTMLImageElement,o=i.HTMLCanvasElement,a=i.HTMLVideoElement,s=i.ImageData,l=function(t,e,r,i){this.context=t;var n=e.width,o=e.height;this.size=[n,o],this.format=r,this.texture=t.gl.createTexture(),this.update(e,i)};l.prototype.update=function(t,e){var r=t.width,i=t.height;this.size=[r,i];var l=this.context,u=l.gl;u.bindTexture(u.TEXTURE_2D,this.texture),l.pixelStoreUnpack.set(1),this.format===u.RGBA&&!1!==e&&l.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof n||t instanceof o||t instanceof a||t instanceof s?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,t):u.texImage2D(u.TEXTURE_2D,0,this.format,r,i,0,this.format,u.UNSIGNED_BYTE,t.data)},l.prototype.bind=function(t,e,r){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},l.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},e.exports=l},{"../util/window":254}],94:[function(t,e,r){"use strict";function i(t,e,r,n,o){for(var s=0;s<r.length;s++){var l=r[s];if(n.isLessThan(l.tileID))break;if(e.key===l.tileID.key)return;if(l.tileID.isChildOf(e)){for(var u=e.children(1/0),c=0;c<u.length;c++)i(t,u[c],r.slice(s),n,o);return}}var p=e.overscaledZ-t.overscaledZ,h=new a(p,e.canonical.x-(t.canonical.x<<p),e.canonical.y-(t.canonical.y<<p));o[h.key]=o[h.key]||h}var n=t("../source/tile_id"),o=n.OverscaledTileID,a=n.CanonicalTileID;e.exports=function(t,e){for(var r=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),n=0;n<r.length;n++){var a={},s=r[n],l=r.slice(n+1);i(s.tileID.wrapped(),s.tileID,l,new o(0,s.tileID.wrap+1,0,0,0),a),s.setMask(a,e)}}},{"../source/tile_id":114}],95:[function(t,e,r){"use strict";var i=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};i.prototype.bind=function(t,e,r,i,n,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,r,i,n,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind())},i.prototype.freshBind=function(t,e,r,i,n,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=r;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var d=0,m=r;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),u.currentNumAttributes=l},i.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=i},{}],96:[function(t,e,r){"use strict";var i=t("../util/util");r.packUint8ToFloat=function(t,e){return 256*(t=i.clamp(Math.floor(t),0,255))+(e=i.clamp(Math.floor(e),0,255))}},{"../util/util":275}],97:[function(t,e,r){"use strict";var i={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=function(t){var e=i[t],r={};e.fragmentSource=e.fragmentSource.replace(n,function(t,e,i,n,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+i+" "+n+" "+o+";\n#else\nuniform "+i+" "+n+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+i+" "+n+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(n,function(t,e,i,n,o){var a="float"===n?"vec2":"vec4";return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+i+" "+a+" a_"+o+";\nvarying "+i+" "+n+" "+o+";\n#else\nuniform "+i+" "+n+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+i+" "+n+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+i+" "+a+" a_"+o+";\n#else\nuniform "+i+" "+n+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+n+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+i+" "+n+" "+o+" = u_"+o+";\n#endif\n"})};for(var a in i)o(a);e.exports=i},{}],98:[function(t,e,r){"use strict";var i=t("./image_source"),n=t("../util/window"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),l=function(t){function e(e,r,i,n){t.call(this,e,r,i,n),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){this.canvas=this.canvas||n.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero.")):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=this,e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,i=r.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(r,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),t.tiles){var l=t.tiles[n];"loaded"!==l.state&&(l.state="loaded",l.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},e}(i);e.exports=l},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(t,e,r){"use strict";var i=t("../util/evented"),n=t("../util/util"),o=t("../util/window"),a=t("../data/extent"),s=t("../util/ajax").ResourceType,l=t("../util/browser"),u=function(t){function e(e,r,i,o){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=n.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type);var s=a/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:a,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a,radius:(r.clusterRadius||50)*s,log:!1}},r.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)t.fire("error",{error:e});else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",r)}})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return e.fire("error",{error:t});var r={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",r)}),this},e.prototype._updateWorkerData=function(t){var e=this,r=n.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(function(t){var e=o.document.createElement("a");return e.href=t,e.href}(i),s.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(r,i){e._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[e.id]&&(e._resourceTiming=i.resourceTiming[e.id].slice(0)),t(r)},this.workerID)},e.prototype.loadTile=function(t,e){var r=this,i=void 0===t.workerID||"expired"===t.state?"loadTile":"reloadTile",n={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:t.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(i,n,function(n,o){return t.unloadVectorData(),t.aborted?e(null):n?e(n):(t.loadVectorData(o,r.map.painter,"reloadTile"===i),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(i);e.exports=u},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(t,e,r){"use strict";function i(t,e){var r=t.source,i=t.tileID.canonical;if(!this._geoJSONIndexes[r])return e(null,null);var n=this._geoJSONIndexes[r].getTile(i.z,i.x,i.y);if(!n)return e(null,null);var o=new s(n.features),a=l(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:o,rawData:a.buffer})}var n=t("../util/ajax"),o=t("../util/performance"),a=t("geojson-rewind"),s=t("./geojson_wrapper"),l=t("vt-pbf"),u=t("supercluster"),c=t("geojson-vt"),p=function(t){function e(e,r,n){t.call(this,e,r,i),n&&(this.loadGeoJSON=n),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadData=function(t,e){var r=this;this.loadGeoJSON(t,function(i,n){if(i||!n)return e(i);if("object"!=typeof n)return e(new Error("Input data is not a valid GeoJSON object."));a(n,!0);try{r._geoJSONIndexes[t.source]=t.cluster?u(t.superclusterOptions).load(n.features):c(n,t.geojsonVtOptions)}catch(i){return e(i)}r.loaded[t.source]={};var s={};if(t.request&&t.request.collectResourceTiming){var l=o.getEntriesByName(t.request.url);l&&(s.resourceTiming={},s.resourceTiming[t.source]=JSON.parse(JSON.stringify(l)))}e(null,s)})},e.prototype.reloadTile=function(e,r){var i=this.loaded[e.source],n=e.uid;return i&&i[n]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},e.prototype.loadGeoJSON=function(t,e){if(t.request)n.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t,e){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source],e()},e}(t("./vector_tile_worker_source"));e.exports=p},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry"),n=t("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=t("../data/extent"),a=function(t){this._feature=t,this.extent=o,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};a.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,r=this._feature.geometry;e<r.length;e+=1){var n=r[e];t.push([new i(n[0],n[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new i(p[0],p[1]))}o.push(l)}return o},a.prototype.toGeoJSON=function(t,e,r){return n.call(this,t,e,r)};var s=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=t.length,this._features=t};s.prototype.feature=function(t){return new a(this._features[t])},e.exports=s},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("./tile_id").CanonicalTileID,o=t("../geo/lng_lat"),a=t("@mapbox/point-geometry"),s=t("../util/evented"),l=t("../util/ajax"),u=t("../util/browser"),c=t("../data/extent"),p=t("../data/array_types").RasterBoundsArray,h=t("../data/raster_bounds_attributes"),f=t("../render/vertex_array_object"),d=t("../render/texture"),m=function(t){function e(e,r,i,n){t.call(this),this.id=e,this.dispatcher=i,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(n),this.options=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(e,r){e?t.fire("error",{error:e}):r&&(t.image=u.getImageData(r),t._finishLoading())})},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,r=t.map(function(t){return e.transform.locationCoordinate(o.convert(t)).zoomTo(0)}),s=this.centerCoord=i.getCoordinatesCenter(r);s.column=Math.floor(s.column),s.row=Math.floor(s.row),this.tileID=new n(s.zoom,s.column,s.row),this.minzoom=this.maxzoom=s.zoom;var l=r.map(function(t){var e=t.zoomTo(s.zoom);return new a(Math.round((e.column-s.column)*c),Math.round((e.row-s.row)*c))});return this._boundsArray=new p,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,c,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,c),this._boundsArray.emplaceBack(l[2].x,l[2].y,c,c),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},e.prototype.prepare=function(){var t=this;if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,h.members)),this.boundsVAO||(this.boundsVAO=new f),this.texture||(this.texture=new d(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),t.tiles){var n=t.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=t.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(s);e.exports=m},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e,r){var s=function(t,e){if(t)return r(t);if(e){var n=i.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(n.vectorLayers=e.vector_layers,n.vectorLayerIds=n.vectorLayers.map(function(t){return t.id})),r(null,n)}};t.url?n.getJSON(e(a(t.url),n.ResourceType.Source),s):o.frame(function(){return s(null,t)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(t,e,r){"use strict";var i=t("../data/extent");e.exports=function(t,e,r){return e*(i/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(t,e,r){"use strict";function i(t,e){var r=t.tileID,i=e.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}r.rendered=function(t,e,r,n,o,a,s){var l=t.tilesIn(r);l.sort(i);for(var u=[],c=0,p=l;c<p.length;c+=1){var h=p[c];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,h.queryGeometry,h.scale,n,a,t.id,s)})}return function(t){for(var e={},r={},i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},h=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return e}(u)},r.source=function(t,e){for(var r=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],n={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(i,e))}return i}},{}],106:[function(t,e,r){"use strict";var i=t("../util/ajax"),n=t("../util/util"),o=(t("../util/evented"),t("../util/mapbox").normalizeTileURL),a=t("../util/browser"),s=t("./tile_id").OverscaledTileID,l=function(t){function e(e,r,i,o){t.call(this,e,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({},r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},e.prototype.loadTile=function(t,e){var r=o(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var n=a.getImageData(i),o={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:n};t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",o,function(r,i){r&&(t.state="errored",e(r)),i&&(t.dem=i,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,r=Math.pow(2,e.z),i=(e.x-1+r)%r,n=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+r)%r,a=e.x+1===r?t.wrap+1:t.wrap,l={};return l[new s(t.overscaledZ,n,e.z,i,e.y).key]={backfilled:!1},l[new s(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(l[new s(t.overscaledZ,n,e.z,i,e.y-1).key]={backfilled:!1},l[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},l[new s(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<r&&(l[new s(t.overscaledZ,n,e.z,i,e.y+1).key]={backfilled:!1},l[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},l[new s(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),l},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},e}(t("./raster_tile_source"));e.exports=l},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(t,e,r){"use strict";var i=t("../data/dem_data").DEMData,n=function(){this.loading={},this.loaded={}};n.prototype.loadTile=function(t,e){var r=t.source,n=t.uid;this.loading[r]||(this.loading[r]={});var o=new i(n);this.loading[r][n]=o,o.loadFromImage(t.rawImageData),delete this.loading[r][n],this.loaded[r]=this.loaded[r]||{},this.loaded[r][n]=o,e(null,o)},n.prototype.removeTile=function(t){var e=this.loaded[t.source],r=t.uid;e&&e[r]&&delete e[r]},e.exports=n},{"../data/dem_data":52}],108:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,l=t("./tile_bounds"),u=t("../render/texture"),c=function(t){function e(e,r,n,o){t.call(this),this.id=e,this.dispatcher=n,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({},r),i.extend(this,i.pick(r,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(e,r){e?t.fire("error",e):r&&(i.extend(t,r),r.bounds&&(t.tileBounds=new l(r.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var r=this,i=s(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=n.getImage(this.map._transformRequest(i,n.ResourceType.Tile),function(i,n){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(i)t.state="errored",e(i);else if(n){r.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=r.map.painter.context,a=o.gl;t.texture=r.map.painter.getTileTexture(n.width),t.texture?(t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,n)):(t.texture=new u(o,n,a.RGBA),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),a.generateMipmap(a.TEXTURE_2D),t.state="loaded",e(null)}})},e.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(o);e.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(t,e,r){"use strict";var i=t("../util/ajax"),n=t("../util/evented"),o=t("../util/window"),a=!1,s=null;e.exports.evented=new n,e.exports.registerForPluginAvailability=function(t){return s?t({pluginBlobURL:s,errorCallback:e.exports.errorCallback}):e.exports.evented.once("pluginAvailable",t),t},e.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:"text/javascript"}))},e.exports.clearRTLTextPlugin=function(){a=!1,s=null},e.exports.setRTLTextPlugin=function(t,r){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=r,i.getArrayBuffer({url:t},function(t,i){t?r(t):i&&(s=e.exports.createBlobURL(i),e.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:r}))})},e.exports.applyArabicShaping=null,e.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(t,e,r){"use strict";var i=t("../util/util"),n={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),"raster-dem":t("../source/raster_dem_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};r.create=function(t,e,r,o){var a=new n[e.type](t,e,r,o);if(a.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+a.id);return i.bindAll(["load","abort","unload","serialize","prepare"],a),a},r.getType=function(t){return n[t]},r.setType=function(t,e){n[t]=e}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(t,e,r){"use strict";function i(t,e){var r=e.zoomTo(t.canonical.z);return new h((r.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*p,(r.row-t.canonical.y)*p)}function n(t){return"raster"===t||"image"===t||"video"===t}var o=t("./source").create,a=t("./tile"),s=t("../util/evented"),l=t("../util/lru_cache"),u=t("../geo/coordinate"),c=t("../util/util"),p=t("../data/extent"),h=(t("../gl/context"),t("@mapbox/point-geometry")),f=t("../util/browser"),d=t("./tile_id").OverscaledTileID,m=function(t){function e(e,r,i){var n=this;t.call(this),this.id=e,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))}),this.on("error",function(){n._sourceErrored=!0}),this._source=o(e,r,i,this),this._tiles={},this._cache=new l(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},e.prototype.getIds=function(){var t=this;return Object.keys(this._tiles).map(Number).sort(function(e,r){var i=t._tiles[e].tileID,n=t._tiles[r].tileID,o=new h(i.canonical.x,i.canonical.y).rotate(t.transform.angle),a=new h(n.canonical.x,n.canonical.y).rotate(t.transform.angle);return i.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x})},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._resetCache(),this._tiles)this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},e.prototype._tileLoaded=function(t,e,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire("error",{tile:t,error:i}):this.update(this.transform));t.timeAdded=f.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._source.fire("data",{dataType:"source",tile:t,coord:t.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var r=this.getRenderableIds(),i=0;i<r.length;i++){var n=r[i];if(t.neighboringTiles&&t.neighboringTiles[n]){var o=this.getTileByID(n);e(t,o),e(o,t)}}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype._findLoadedChildren=function(t,e,r){var i=this,n=!1;for(var o in i._tiles){var a=i._tiles[o];if(!(r[o]||!a.hasData()||a.tileID.overscaledZ<=t.overscaledZ||a.tileID.overscaledZ>e)){var s=Math.pow(2,a.tileID.canonical.z-t.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===t.canonical.x&&Math.floor(a.tileID.canonical.y/s)===t.canonical.y)for(r[o]=a.tileID,n=!0;a&&a.tileID.overscaledZ-1>t.overscaledZ;){var l=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!l)break;(a=i._tiles[l.key])&&a.hasData()&&(delete r[o],r[l.key]=l)}}}return n},e.prototype.findLoadedParent=function(t,e,r){for(var i=this,n=t.overscaledZ-1;n>=e;n--){var o=t.scaledTo(n);if(!o)return;var a=String(o.key),s=i._tiles[a];if(s&&s.hasData())return r[a]=o,s;if(i._cache.has(a))return r[a]=o,i._cache.get(a)}},e.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),r=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},e.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new d(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),s=Math.max(a-e.maxOverzooming,this._source.minzoom),l=Math.max(a+e.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,a),p={};if(n(this._source.type))for(var h=Object.keys(u),m=0;m<h.length;m++){var y=h[m],_=u[y],g=r._tiles[y];if(g&&(void 0===g.fadeEndTime||g.fadeEndTime>=f.now())){r._findLoadedChildren(_,l,u)&&(u[y]=_);var v=r.findLoadedParent(_,s,p);v&&r._addTile(v.tileID)}}for(o in p)u[o]||(r._coveredTiles[o]=!0);for(o in p)u[o]=p[o];for(var x=c.keysDifference(this._tiles,u),b=0;b<x.length;b++)r._removeTile(x[b])}},e.prototype._updateRetainedTiles=function(t,r){for(var i=this,n={},o={},a=Math.max(r-e.maxOverzooming,this._source.minzoom),s=Math.max(r+e.maxUnderzooming,this._source.minzoom),l=0;l<t.length;l++){var u=t[l],c=i._addTile(u),p=!1;if(c.hasData())n[u.key]=u;else{p=c.wasRequested(),n[u.key]=u;var h=!0;if(r+1>i._source.maxzoom){var f=u.children(i._source.maxzoom)[0],d=i.getTile(f);d&&d.hasData()?n[f.key]=f:h=!1}else{i._findLoadedChildren(u,s,n);for(var m=u.children(i._source.maxzoom),y=0;y<m.length;y++)if(!n[m[y].key]){h=!1;break}}if(!h)for(var _=u.overscaledZ-1;_>=a;--_){var g=u.scaledTo(_);if(o[g.key])break;if(o[g.key]=!0,!(c=i.getTile(g))&&p&&(c=i._addTile(g)),c&&(n[g.key]=g,p=c.wasRequested(),c.hasData()))break}}}return n},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t.key))&&this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e));var r=Boolean(e);return r||(e=new a(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire("dataloading",{tile:e,coord:e.tileID,dataType:"source"}),e):null},e.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(function(){r._reloadTile(t,"expired"),delete r._timers[t]},i))},e.prototype._setCacheInvalidationTimer=function(t,e){var r=this;t in this._cacheTimers&&(clearTimeout(this._cacheTimers[t]),delete this._cacheTimers[t]);var i=e.getExpiryTimeout();i&&(this._cacheTimers[t]=setTimeout(function(){r._cache.remove(t),delete r._cacheTimers[t]},i))},e.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(e.uses>0)))if(e.hasData()){e.tileID=e.tileID.wrapped();var r=e.tileID.key;this._cache.add(r,e),this._setCacheInvalidationTimer(r,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._resetCache()},e.prototype._resetCache=function(){for(var t in this._cacheTimers)clearTimeout(this._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=[],r=this.getIds(),n=1/0,o=1/0,a=-1/0,s=-1/0,l=t[0].zoom,c=0;c<t.length;c++){var h=t[c];n=Math.min(n,h.column),o=Math.min(o,h.row),a=Math.max(a,h.column),s=Math.max(s,h.row)}for(var f=0;f<r.length;f++){var d=this._tiles[r[f]],m=d.tileID,y=[i(m,new u(n,o,l)),i(m,new u(a,s,l))];if(y[0].x<p&&y[0].y<p&&y[1].x>=0&&y[1].y>=0){for(var _=[],g=0;g<t.length;g++)_.push(i(m,t[g]));e.push({tile:d,tileID:m,queryGeometry:[_],scale:Math.pow(2,this.transform.zoom-d.tileID.overscaledZ)})}}return e},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),r=0,i=e;r<i.length;r+=1){var n=i[r];n.posMatrix=t.transform.calculatePosMatrix(n.toUnwrapped())}return e},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(n(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=f.now())return!0}return!1},e}(s);m.maxOverzooming=10,m.maxUnderzooming=3,e.exports=m},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../data/bucket").deserialize,o=(t("../data/feature_index"),t("@mapbox/vector-tile")),a=t("pbf"),s=t("../util/vectortile_to_geojson"),l=t("../style-spec/feature_filter"),u=(t("../symbol/collision_index"),t("../data/bucket/symbol_bucket")),c=t("../data/array_types"),p=c.RasterBoundsArray,h=c.CollisionBoxArray,f=t("../data/raster_bounds_attributes"),d=t("../data/extent"),m=t("@mapbox/point-geometry"),y=t("../render/texture"),_=t("../data/segment").SegmentVector,g=t("../data/index_array_type").TriangleIndexArray,v=t("../util/browser"),x=function(t,e){this.tileID=t,this.uid=i.uniqueId(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};x.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<v.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},x.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},x.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=t.collisionBoxArray,this.featureIndex=t.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=n(t.buckets,e.style),r)for(var i in this.buckets){var o=this.buckets[i];o instanceof u&&(o.justReloaded=!0)}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new h},x.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},x.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},x.prototype.getBucket=function(t){return this.buckets[t.id]},x.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploaded||(r.upload(t),r.uploaded=!0)}var i=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new y(t,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new y(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},x.prototype.queryRenderedFeatures=function(t,e,r,i,n,o,a){if(!this.featureIndex||!this.collisionBoxArray)return{};var s=0,l={};for(var c in t){var p=this.getBucket(t[c]);p&&(s=Math.max(s,t[c].queryRadius(p)),p instanceof u&&void 0!==p.bucketInstanceId&&(l[p.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:e,scale:r,tileSize:this.tileSize,bearing:n,params:i,additionalRadius:s,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:l},t)},x.prototype.querySourceFeatures=function(t,e){if(this.rawTileData){this.vtLayers||(this.vtLayers=new o.VectorTile(new a(this.rawTileData)).layers);var r=e?e.sourceLayer:"",i=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(i)for(var n=l(e&&e.filter),u={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},c=0;c<i.length;c++){var p=i.feature(c);if(n({zoom:this.tileID.overscaledZ},p)){var h=new s(p,u.z,u.x,u.y);h.tile=u,t.push(h)}}}},x.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},x.prototype.setMask=function(t,e){if(!i.deepEqual(this.mask,t)&&(this.mask=t,this.clearMask(),!i.deepEqual(t,{0:!0}))){var r=new p,n=new g;this.segments=new _,this.segments.prepareSegment(0,r,n);for(var o=Object.keys(t),a=0;a<o.length;a++){var s=t[o[a]],l=d>>s.z,u=new m(s.x*l,s.y*l),c=new m(u.x+l,u.y+l),h=this.segments.prepareSegment(4,r,n);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(c.x,u.y,c.x,u.y),r.emplaceBack(u.x,c.y,u.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var y=h.vertexLength;n.emplaceBack(y,y+1,y+2),n.emplaceBack(y+1,y+2,y+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,f.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},x.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},x.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=i.parseCacheControl(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),o=!1;if(this.expirationTime>n)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},x.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},e.exports=x},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(t,e,r){"use strict";var i=t("../geo/lng_lat_bounds"),n=t("../util/util").clamp,o=function(t,e,r){this.bounds=i.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=r||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),r=Math.floor(this.latY(this.bounds.getNorth(),t.z)),i=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),n=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<i&&t.y>=r&&t.y<n},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var r=n(Math.sin(Math.PI/180*t),-.9999,.9999),i=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+r)/(1-r))*-i},e.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(t,e,r){"use strict";function i(t,e,r,i){(t*=2)<0&&(t=-1*t-1);var n=1<<e;return 32*(n*n*t+n*i+r)+e}var n=t("@mapbox/whoots-js"),o=t("../util/web_worker_transfer").register,a=t("../geo/coordinate"),s=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=i(0,t,e,r)};s.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},s.prototype.url=function(t,e){var r=n.getTileBBox(this.x,this.y,this.z),i=function(t,e,r){for(var i,n="",o=t;o>0;o--)n+=(e&(i=1<<o-1)?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",r)};var l=function(t,e){this.wrap=t,this.canonical=e,this.key=i(t,e.z,e.x,e.y)},u=function(t,e,r,n,o){this.overscaledZ=t,this.wrap=e,this.canonical=new s(r,+n,+o),this.key=i(e,t,n,o)};u.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new u(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new u(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},u.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},u.prototype.children=function(t){if(this.overscaledZ>=t)return[new u(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new u(e,this.wrap,e,r,i),new u(e,this.wrap,e,r+1,i),new u(e,this.wrap,e,r,i+1),new u(e,this.wrap,e,r+1,i+1)]},u.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},u.prototype.wrapped=function(){return new u(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},u.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},u.prototype.toUnwrapped=function(){return new l(this.wrap,this.canonical)},u.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},u.prototype.toCoordinate=function(){return new a(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},o("CanonicalTileID",s),o("OverscaledTileID",u,{omit:["posMatrix"]}),e.exports={CanonicalTileID:s,OverscaledTileID:u,UnwrappedTileID:l}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(t,e,r){"use strict";var i=t("../util/evented"),n=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=t("./tile_bounds"),l=t("../util/ajax").ResourceType,u=t("../util/browser"),c=function(t){function e(e,r,i,o){if(t.call(this),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,n.extend(this,n.pick(r,["url","scheme","tileSize"])),this._options=n.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(e,r){e?t.fire("error",e):r&&(n.extend(t,r),r.bounds&&(t.tileBounds=new s(r.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return n.extend({},this._options)},e.prototype.loadTile=function(t,e){function r(r,i){return t.aborted?e(null):r?e(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}var i=t.tileID.overscaleFactor(),n=a(t.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(n,l.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*i,type:this.type,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:i,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",o,r.bind(this)):"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",o,r.bind(this),t.workerID)},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.hasTransition=function(){return!1},e}(i);e.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(t,e,r){"use strict";function i(t,e){var r=n.getArrayBuffer(t.request,function(t,r){t?e(t):r&&e(null,{vectorTile:new o.VectorTile(new a(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.abort(),e()}}var n=t("../util/ajax"),o=t("@mapbox/vector-tile"),a=t("pbf"),s=t("./worker_tile"),l=t("../util/util"),u=t("../util/performance"),c=function(t,e,r){this.actor=t,this.layerIndex=e,this.loadVectorData=r||i,this.loading={},this.loaded={}};c.prototype.loadTile=function(t,e){var r=this,i=t.source,n=t.uid;this.loading[i]||(this.loading[i]={});var o=this.loading[i][n]=new s(t);o.abort=this.loadVectorData(t,function(a,s){if(delete r.loading[i][n],a||!s)return e(a);var c=s.rawData,p={};s.expires&&(p.expires=s.expires),s.cacheControl&&(p.cacheControl=s.cacheControl);var h={};if(t.request&&t.request.collectResourceTiming){var f=u.getEntriesByName(t.request.url);f&&(h.resourceTiming=JSON.parse(JSON.stringify(f)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,r.layerIndex,r.actor,function(t,r){if(t||!r)return e(t);e(null,l.extend({rawTileData:c.slice(0)},r,p,h))}),r.loaded[i]=r.loaded[i]||{},r.loaded[i][n]=o})},c.prototype.reloadTile=function(t,e){var r=this.loaded[t.source],i=t.uid,n=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=t.showCollisionBoxes,"parsing"===o.status?o.reloadCallback=e:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,function(t,r){if(this.reloadCallback){var i=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,n.layerIndex,n.actor,i)}e(t,r)}.bind(o))}},c.prototype.abortTile=function(t,e){var r=this.loading[t.source],i=t.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),e()},c.prototype.removeTile=function(t,e){var r=this.loaded[t.source],i=t.uid;r&&r[i]&&delete r[i],e()},e.exports=c},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(t,e,r){"use strict";var i=t("../util/ajax"),n=t("./image_source"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),l=function(t){function e(e,r,i,n){t.call(this,e,r,i,n),this.roundZoom=!0,this.type="video",this.options=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,i.getVideo(e.urls,function(e,r){e?t.fire("error",{error:e}):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map._rerender()}),t.map&&t.video.play(),t._finishLoading())})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new s(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),t.tiles){var n=t.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(n);e.exports=l},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(t,e,r){"use strict";var i=t("../util/actor"),n=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./raster_dem_tile_worker_source"),s=t("./geojson_worker_source"),l=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new i(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,r){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=r},this.self.registerRTLTextPlugin=function(t){if(l.applyArabicShaping||l.processBidirectionalText)throw new Error("RTL text plugin already registered.");l.applyArabicShaping=t.applyArabicShaping,l.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},u.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},u.prototype.loadTile=function(t,e,r){this.getWorkerSource(t,e.type).loadTile(e,r)},u.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t).loadTile(e,r)},u.prototype.reloadTile=function(t,e,r){this.getWorkerSource(t,e.type).reloadTile(e,r)},u.prototype.abortTile=function(t,e,r){this.getWorkerSource(t,e.type).abortTile(e,r)},u.prototype.removeTile=function(t,e,r){this.getWorkerSource(t,e.type).removeTile(e,r)},u.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t).removeTile(e)},u.prototype.removeSource=function(t,e,r){var i=this.getWorkerSource(t,e.type);void 0!==i.removeSource?i.removeSource(e,r):r()},u.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t)}},u.prototype.loadRTLTextPlugin=function(t,e,r){try{l.applyArabicShaping||l.processBidirectionalText||(this.self.importScripts(e),l.applyArabicShaping&&l.processBidirectionalText||r(new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){r(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},u.prototype.getWorkerSource=function(t,e){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,n){r.actor.send(e,i,n,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e]},u.prototype.getDEMWorkerSource=function(t){return this.demWorkerSources[t]||(this.demWorkerSources[t]=new a),this.demWorkerSources[t]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(t,e,r){"use strict";function i(t,e){for(var r=new h(e),i=0,n=t;i<n.length;i+=1)n[i].recalculate(r)}var n=t("../data/feature_index"),o=t("../symbol/symbol_layout").performSymbolLayout,a=t("../data/array_types").CollisionBoxArray,s=t("../util/dictionary_coder"),l=t("../data/bucket/symbol_bucket"),u=t("../util/util"),c=t("../render/image_atlas").makeImageAtlas,p=t("../render/glyph_atlas").makeGlyphAtlas,h=t("../style/evaluation_parameters"),f=t("./tile_id").OverscaledTileID,d=function(t){this.tileID=new f(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming};d.prototype.parse=function(t,e,r,h){function f(){if(I)return h(I);if(M&&P){var t=p(M),e=c(P);for(var r in _){var n=_[r];n instanceof l&&(i(n.layers,this.zoom),o(n,M,t.positions,P,e.positions,this.showCollisionBoxes))}this.status="done",h(null,{buckets:u.values(_).filter(function(t){return!t.isEmpty()}),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:e.image})}}var d=this;this.status="parsing",this.data=t,this.collisionBoxArray=new a;var m=new s(Object.keys(t.layers).sort()),y=new n(this.tileID,this.overscaling);y.bucketLayerIDs=[];var _={},g={featureIndex:y,iconDependencies:{},glyphDependencies:{}},v=e.familiesBySource[this.source];for(var x in v){var b=t.layers[x];if(b){1===b.version&&u.warnOnce('Vector tile source "'+d.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=m.encode(x),S=[],A=0;A<b.length;A++){var T=b.feature(A);S.push({feature:T,index:A,sourceLayerIndex:w})}for(var z=0,E=v[x];z<E.length;z+=1){var k=E[z],C=k[0];C.minzoom&&d.zoom<Math.floor(C.minzoom)||C.maxzoom&&d.zoom>=C.maxzoom||"none"===C.visibility||(i(k,d.zoom),(_[C.id]=C.createBucket({index:y.bucketLayerIDs.length,layers:k,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(S,g),y.bucketLayerIDs.push(k.map(function(t){return t.id})))}}}var I,M,P,L=u.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(L).length?r.send("getGlyphs",{uid:this.uid,stacks:L},function(t,e){I||(I=t,M=e,f.call(d))}):M={};var D=Object.keys(g.iconDependencies);D.length?r.send("getImages",{icons:D},function(t,e){I||(I=t,P=e,f.call(d))}):P={},f.call(this)},e.exports=d},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(t,e,r){"use strict";function i(t,e){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return n.forEach(function(t){t in e&&(r[t]=e[t])}),r}var n=t("./util/ref_properties");e.exports=function(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=i(t[n],e[t[n].ref]));return t}},{"./util/ref_properties":159}],121:[function(t,e,r){"use strict";function i(t,e,r){r.push({command:p.addSource,args:[t,e[t]]})}function n(t,e,r){e.push({command:p.removeSource,args:[t]}),r[t]=!0}function o(t,e,r,o){n(t,r,o),i(t,e,r)}function a(t,e,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!c(t[r][i],e[r][i]))return!1;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!c(t[r][i],e[r][i]))return!1;return!0}function s(t,e,r,i,n,o){var a;for(a in t=t||{},e=e||{},t)t.hasOwnProperty(a)&&(c(t[a],e[a])||r.push({command:o,args:[i,a,e[a],n]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(c(t[a],e[a])||r.push({command:o,args:[i,a,e[a],n]}))}function l(t){return t.id}function u(t,e){return t[e.id]=e,t}var c=t("./util/deep_equal"),p={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=function(t,e){if(!t)return[{command:p.setStyle,args:[e]}];var r=[];try{if(!c(t.version,e.version))return[{command:p.setStyle,args:[e]}];c(t.center,e.center)||r.push({command:p.setCenter,args:[e.center]}),c(t.zoom,e.zoom)||r.push({command:p.setZoom,args:[e.zoom]}),c(t.bearing,e.bearing)||r.push({command:p.setBearing,args:[e.bearing]}),c(t.pitch,e.pitch)||r.push({command:p.setPitch,args:[e.pitch]}),c(t.sprite,e.sprite)||r.push({command:p.setSprite,args:[e.sprite]}),c(t.glyphs,e.glyphs)||r.push({command:p.setGlyphs,args:[e.glyphs]}),c(t.transition,e.transition)||r.push({command:p.setTransition,args:[e.transition]}),c(t.light,e.light)||r.push({command:p.setLight,args:[e.light]});var h={},f=[];!function(t,e,r,s){var l;for(l in t=t||{},e=e||{},t)t.hasOwnProperty(l)&&(e.hasOwnProperty(l)||n(l,r,s));for(l in e)e.hasOwnProperty(l)&&(t.hasOwnProperty(l)?c(t[l],e[l])||("geojson"===t[l].type&&"geojson"===e[l].type&&a(t,e,l)?r.push({command:p.setGeoJSONSourceData,args:[l,e[l].data]}):o(l,e,r,s)):i(l,e,r))}(t.sources,e.sources,f,h);var d=[];t.layers&&t.layers.forEach(function(t){h[t.source]?r.push({command:p.removeLayer,args:[t.id]}):d.push(t)}),r=r.concat(f),function(t,e,r){t=t||[],e=e||[];var i,n,o,a,h,f,d,m=t.map(l),y=e.map(l),_=t.reduce(u,{}),g=e.reduce(u,{}),v=m.slice(),x=Object.create(null);for(i=0,n=0;i<m.length;i++)o=m[i],g.hasOwnProperty(o)?n++:(r.push({command:p.removeLayer,args:[o]}),v.splice(v.indexOf(o,n),1));for(i=0,n=0;i<y.length;i++)o=y[y.length-1-i],v[v.length-1-i]!==o&&(_.hasOwnProperty(o)?(r.push({command:p.removeLayer,args:[o]}),v.splice(v.lastIndexOf(o,v.length-n),1)):n++,f=v[v.length-i],r.push({command:p.addLayer,args:[g[o],f]}),v.splice(v.length-i,0,o),x[o]=!0);for(i=0;i<y.length;i++)if(a=_[o=y[i]],h=g[o],!x[o]&&!c(a,h))if(c(a.source,h.source)&&c(a["source-layer"],h["source-layer"])&&c(a.type,h.type)){for(d in s(a.layout,h.layout,r,o,null,p.setLayoutProperty),s(a.paint,h.paint,r,o,null,p.setPaintProperty),c(a.filter,h.filter)||r.push({command:p.setFilter,args:[o,h.filter]}),c(a.minzoom,h.minzoom)&&c(a.maxzoom,h.maxzoom)||r.push({command:p.setLayerZoomRange,args:[o,h.minzoom,h.maxzoom]}),a)a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],h[d],r,o,d.slice(6),p.setPaintProperty):c(a[d],h[d])||r.push({command:p.setLayerProperty,args:[o,d,h[d]]}));for(d in h)h.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],h[d],r,o,d.slice(6),p.setPaintProperty):c(a[d],h[d])||r.push({command:p.setLayerProperty,args:[o,d,h[d]]}))}else r.push({command:p.removeLayer,args:[o]}),f=v[v.lastIndexOf(o)+1],r.push({command:p.addLayer,args:[h,f]})}(d,e.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:p.setStyle,args:[e]}]}return r},e.exports.operations=p},{"./util/deep_equal":155}],122:[function(t,e,r){"use strict";e.exports=function(t,e,r){this.message=(t?t+": ":"")+r,null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}},{}],123:[function(t,e,r){"use strict";var i=t("./types").toString,n=t("./parsing_context"),o=(t("./evaluation_context"),function(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i});o.prototype.evaluate=function(t){return this._evaluate(t,this.args)},o.prototype.eachChild=function(t){this.args.forEach(t)},o.prototype.possibleOutputs=function(){return[void 0]},o.parse=function(t,e){var r=t[0],a=o.definitions[r];if(!a)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=l.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),c=[],p=1;p<t.length;p++){var h=t[p],f=void 0;if(1===u.length){var d=u[0][0];f=Array.isArray(d)?d[p-1]:d.type}var m=e.parse(h,1+c.length,f);if(!m)return null;c.push(m)}for(var y=null,_=0,g=u;_<g.length;_+=1){var v=g[_],x=v[0],b=v[1];if(y=new n(e.registry,e.path,null,e.scope),Array.isArray(x)&&x.length!==c.length)y.error("Expected "+x.length+" arguments, but found "+c.length+" instead.");else{for(var w=0;w<c.length;w++){var S=Array.isArray(x)?x[w]:x.type,A=c[w];y.concat(w+1).checkSubtype(S,A.type)}if(0===y.errors.length)return new o(r,s,b,c)}}if(1===u.length)e.errors.push.apply(e.errors,y.errors);else{var T=(u.length?u:l).map(function(t){return function(t){return Array.isArray(t)?"("+t.map(i).join(", ")+")":"("+i(t.type)+"...)"}(t[0])}).join(" | "),z=c.map(function(t){return i(t.type)}).join(", ");e.error("Expected arguments of type "+T+", but found ("+z+") instead.")}return null},o.register=function(t,e){for(var r in o.definitions=e,e)t[r]=o},e.exports={CompoundExpression:o,varargs:function(t){return{type:t}}}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(t,e,r){"use strict";var i=t("../types"),n=i.toString,o=i.array,a=i.ValueType,s=i.StringType,l=i.NumberType,u=i.BooleanType,c=i.checkSubtype,p=t("../values").typeOf,h=t("../runtime_error"),f={string:s,number:l,boolean:u},d=function(t,e){this.type=t,this.input=e};d.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var r,i;if(t.length>2){var n=t[1];if("string"!=typeof n||!(n in f))return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=f[n]}else r=a;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);i=t[2]}var s=o(r,i),l=e.parse(t[t.length-1],t.length-1,a);return l?new d(s,l):null},d.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(c(this.type,p(e)))throw new h("Expected value to be of type "+n(this.type)+", but found "+n(p(e))+" instead.");return e},d.prototype.eachChild=function(t){t(this.input)},d.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},e.exports=d},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(t,e,r){"use strict";var i=t("../types"),n=i.ObjectType,o=i.ValueType,a=i.StringType,s=i.NumberType,l=i.BooleanType,u=t("../runtime_error"),c=t("../types"),p=c.checkSubtype,h=c.toString,f=t("../values").typeOf,d={string:a,number:s,boolean:l,object:n},m=function(t,e){this.type=t,this.args=e};m.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var r=t[0],i=d[r],n=[],a=1;a<t.length;a++){var s=e.parse(t[a],a,o);if(!s)return null;n.push(s)}return new m(i,n)},m.prototype.evaluate=function(t){for(var e=this,r=0;r<this.args.length;r++){var i=e.args[r].evaluate(t);if(!p(e.type,f(i)))return i;if(r===e.args.length-1)throw new u("Expected value to be of type "+h(e.type)+", but found "+h(f(i))+" instead.")}return null},m.prototype.eachChild=function(t){this.args.forEach(t)},m.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(t,e,r){"use strict";var i=t("../types"),n=i.array,o=i.ValueType,a=i.NumberType,s=t("../runtime_error"),l=function(t,e,r){this.type=t,this.index=e,this.input=r};l.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,a),i=e.parse(t[2],2,n(e.expectedType||o));if(!r||!i)return null;var s=i.type;return new l(s.itemType,r,i)},l.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0||e>=r.length)throw new s("Array index out of bounds: "+e+" > "+r.length+".");if(e!==Math.floor(e))throw new s("Array index must be an integer, but found "+e+" instead.");return r[e]},l.prototype.eachChild=function(t){t(this.index),t(this.input)},l.prototype.possibleOutputs=function(){return[void 0]},e.exports=l},{"../runtime_error":143,"../types":146}],127:[function(t,e,r){"use strict";var i=t("../types").BooleanType,n=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};n.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=[],a=1;a<t.length-1;a+=2){var s=e.parse(t[a],a,i);if(!s)return null;var l=e.parse(t[a+1],a+1,r);if(!l)return null;o.push([s,l]),r=r||l.type}var u=e.parse(t[t.length-1],t.length-1,r);return u?new n(r,o,u):null},n.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],o=i[1];if(n.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},n.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],o=i[1];t(n),t(o)}t(this.otherwise)},n.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=n},{"../types":146}],128:[function(t,e,r){"use strict";var i=t("../types"),n=i.checkSubtype,o=i.ValueType,a=function(t,e){this.type=t,this.args=e};a.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,i=e.expectedType;i&&"value"!==i.kind&&(r=i);for(var s=[],l=0,u=t.slice(1);l<u.length;l+=1){var c=u[l],p=e.parse(c,1+s.length,r,void 0,{omitTypeAnnotations:!0});if(!p)return null;r=r||p.type,s.push(p)}return i&&s.some(function(t){return n(i,t.type)})?new a(o,s):new a(r,s)},a.prototype.evaluate=function(t){for(var e=null,r=0,i=this.args;r<i.length&&null===(e=i[r].evaluate(t));r+=1);return e},a.prototype.eachChild=function(t){this.args.forEach(t)},a.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=a},{"../types":146}],129:[function(t,e,r){"use strict";var i=t("../types"),n=i.ColorType,o=i.ValueType,a=i.NumberType,s=t("../values"),l=s.Color,u=s.validateRGBA,c=t("../runtime_error"),p={"to-number":a,"to-color":n},h=function(t,e){this.type=t,this.args=e};h.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var r=t[0],i=p[r],n=[],a=1;a<t.length;a++){var s=e.parse(t[a],a,o);if(!s)return null;n.push(s)}return new h(i,n)},h.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,r,i=0,n=this.args;i<n.length;i+=1)if(r=null,"string"==typeof(e=n[i].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":u(e[0],e[1],e[2],e[3])))return new l(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new c(r||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,p=this.args;s<p.length;s+=1)if(null!==(a=p[s].evaluate(t))){var h=Number(a);if(!isNaN(h))return h}throw new c("Could not convert "+JSON.stringify(a)+" to number.")},h.prototype.eachChild=function(t){this.args.forEach(t)},h.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=h},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(t,e,r){"use strict";function i(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function n(t){return function(){function e(t,e){this.type=s,this.lhs=t,this.rhs=e}return e.parse=function(t,r){if(3!==t.length)return r.error("Expected two arguments.");var n=r.parse(t[1],1,a);if(!n)return null;var o=r.parse(t[2],2,a);return o?i(n.type)||i(o.type)?n.type.kind!==o.type.kind&&"value"!==n.type.kind&&"value"!==o.type.kind?r.error("Cannot compare "+l(n.type)+" and "+l(o.type)+"."):new e(n,o):r.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+l(n.type)+", "+l(o.type)+") instead."):null},e.prototype.evaluate=function(e){return t(this.lhs.evaluate(e),this.rhs.evaluate(e))},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs)},e.prototype.possibleOutputs=function(){return[!0,!1]},e}()}var o=t("../types"),a=o.ValueType,s=o.BooleanType,l=t("../types").toString;e.exports={Equals:n(function(t,e){return t===e}),NotEquals:n(function(t,e){return t!==e})}},{"../types":146}],131:[function(t,e,r){"use strict";function i(t,e){var r=e[0],i=e[1],n=e[2],o=e[3];r=r.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=A(r,i,n,a);if(s)throw new k(s);return new S(r/255*a,i/255*a,n/255*a,a)}function n(t,e){return t in e}function o(t,e){var r=e[t];return void 0===r?null:r}function a(t,e){return e[0].evaluate(t).length}function s(t,e){var r=e[0],i=e[1];return r.evaluate(t)<i.evaluate(t)}function l(t,e){var r=e[0],i=e[1];return r.evaluate(t)>i.evaluate(t)}function u(t,e){var r=e[0],i=e[1];return r.evaluate(t)<=i.evaluate(t)}function c(t,e){var r=e[0],i=e[1];return r.evaluate(t)>=i.evaluate(t)}var p=t("../types"),h=p.NumberType,f=p.StringType,d=p.BooleanType,m=p.ColorType,y=p.ObjectType,_=p.ValueType,g=p.ErrorType,v=p.array,x=p.toString,b=t("../values"),w=b.typeOf,S=b.Color,A=b.validateRGBA,T=t("../compound_expression"),z=T.CompoundExpression,E=T.varargs,k=t("../runtime_error"),C=t("./let"),I=t("./var"),M=t("./literal"),P=t("./assertion"),L=t("./array"),D=t("./coercion"),B=t("./at"),R=t("./match"),O=t("./case"),F=t("./step"),V=t("./interpolate"),j=t("./coalesce"),N=t("./equals"),U={"==":N.Equals,"!=":N.NotEquals,array:L,at:B,boolean:P,case:O,coalesce:j,interpolate:V,let:C,literal:M,match:R,number:P,object:P,step:F,string:P,"to-color":D,"to-number":D,var:I};z.register(U,{error:[g,[f],function(t,e){var r=e[0];throw new k(r.evaluate(t))}],typeof:[f,[_],function(t,e){var r=e[0];return x(w(r.evaluate(t)))}],"to-string":[f,[_],function(t,e){var r=e[0],i=typeof(r=r.evaluate(t));return null===r||"string"===i||"number"===i||"boolean"===i?String(r):r instanceof S?r.toString():JSON.stringify(r)}],"to-boolean":[d,[_],function(t,e){var r=e[0];return Boolean(r.evaluate(t))}],"to-rgba":[v(h,4),[m],function(t,e){var r=e[0].evaluate(t),i=r.r,n=r.g,o=r.b,a=r.a;return[255*i/a,255*n/a,255*o/a,a]}],rgb:[m,[h,h,h],i],rgba:[m,[h,h,h,h],i],length:{type:h,overloads:[[[f],a],[[v(_)],a]]},has:{type:d,overloads:[[[f],function(t,e){return n(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var r=e[0],i=e[1];return n(r.evaluate(t),i.evaluate(t))}]]},get:{type:_,overloads:[[[f],function(t,e){return o(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var r=e[0],i=e[1];return o(r.evaluate(t),i.evaluate(t))}]]},properties:[y,[],function(t){return t.properties()}],"geometry-type":[f,[],function(t){return t.geometryType()}],id:[_,[],function(t){return t.id()}],zoom:[h,[],function(t){return t.globals.zoom}],"heatmap-density":[h,[],function(t){return t.globals.heatmapDensity||0}],"+":[h,E(h),function(t,e){for(var r=0,i=0,n=e;i<n.length;i+=1)r+=n[i].evaluate(t);return r}],"*":[h,E(h),function(t,e){for(var r=1,i=0,n=e;i<n.length;i+=1)r*=n[i].evaluate(t);return r}],"-":{type:h,overloads:[[[h,h],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)-i.evaluate(t)}],[[h],function(t,e){return-e[0].evaluate(t)}]]},"/":[h,[h,h],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)/i.evaluate(t)}],"%":[h,[h,h],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[h,[],function(){return Math.LN2}],pi:[h,[],function(){return Math.PI}],e:[h,[],function(){return Math.E}],"^":[h,[h,h],function(t,e){var r=e[0],i=e[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[h,[h],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[h,[h],function(t,e){var r=e[0];return Math.log10(r.evaluate(t))}],ln:[h,[h],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[h,[h],function(t,e){var r=e[0];return Math.log2(r.evaluate(t))}],sin:[h,[h],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[h,[h],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[h,[h],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[h,[h],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[h,[h],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[h,[h],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[h,E(h),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[h,E(h),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],"filter-==":[d,[f,_],function(t,e){var r=e[0],i=e[1];return t.properties()[r.value]===i.value}],"filter-id-==":[d,[_],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[d,[f],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[d,[f,_],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n<o}],"filter-id-<":[d,[_],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<n}],"filter->":[d,[f,_],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n>o}],"filter-id->":[d,[_],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>n}],"filter-<=":[d,[f,_],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[d,[_],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<=n}],"filter->=":[d,[f,_],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[d,[_],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>=n}],"filter-has":[d,[_],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[d,[],function(t){return null!==t.id()}],"filter-type-in":[d,[v(f)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[d,[v(_)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[d,[f,v(_)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[d,[f,v(_)],function(t,e){var r=e[0],i=e[1];return function(t,e,r,i){for(;r<=i;){var n=r+i>>1;if(e[n]===t)return!0;e[n]>t?i=n-1:r=n+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],">":{type:d,overloads:[[[h,h],l],[[f,f],l]]},"<":{type:d,overloads:[[[h,h],s],[[f,f],s]]},">=":{type:d,overloads:[[[h,h],c],[[f,f],c]]},"<=":{type:d,overloads:[[[h,h],u],[[f,f],u]]},all:{type:d,overloads:[[[d,d],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)&&i.evaluate(t)}],[E(d),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(!i[r].evaluate(t))return!1;return!0}]]},any:{type:d,overloads:[[[d,d],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)||i.evaluate(t)}],[E(d),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(i[r].evaluate(t))return!0;return!1}]]},"!":[d,[d],function(t,e){return!e[0].evaluate(t)}],upcase:[f,[f],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[f,[f],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[f,E(f),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}]}),e.exports=U},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(t,e,r){"use strict";function i(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}var n=t("@mapbox/unitbezier"),o=t("../../util/interpolate"),a=t("../types"),s=a.toString,l=a.NumberType,u=t("../stops").findStopLessThanOrEqualTo,c=function(t,e,r,i){this.type=t,this.interpolation=e,this.input=r,this.labels=[],this.outputs=[];for(var n=0,o=i;n<o.length;n+=1){var a=o[n],s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}};c.interpolationFactor=function(t,e,r,o){var a=0;if("exponential"===t.name)a=i(e,t.base,r,o);else if("linear"===t.name)a=i(e,1,r,o);else if("cubic-bezier"===t.name){var s=t.controlPoints;a=new n(s[0],s[1],s[2],s[3]).solve(i(e,1,r,o))}return a},c.parse=function(t,e){var r=t[1],i=t[2],n=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var a=r.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,l)))return null;var u=[],p=null;e.expectedType&&"value"!==e.expectedType.kind&&(p=e.expectedType);for(var h=0;h<n.length;h+=2){var f=n[h],d=n[h+1],m=h+3,y=h+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(u.length&&u[u.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var _=e.parse(d,y,p);if(!_)return null;p=p||_.type,u.push([f,_])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new c(p,r,i,u):e.error("Type "+s(p)+" is not interpolatable.")},c.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;if(i>=e[n-1])return r[n-1].evaluate(t);var a=u(e,i),s=e[a],l=e[a+1],p=c.interpolationFactor(this.interpolation,i,s,l),h=r[a].evaluate(t),f=r[a+1].evaluate(t);return o[this.type.kind.toLowerCase()](h,f,p)},c.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},c.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=c},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(t,e,r){"use strict";var i=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};i.prototype.evaluate=function(t){t.pushScope(this.bindings);var e=this.result.evaluate(t);return t.popScope(),e},i.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},i.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var o=t[n];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",n);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([o,a])}var s=e.parse(t[t.length-1],t.length-1,void 0,r);return s?new i(r,s):null},i.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},e.exports=i},{}],134:[function(t,e,r){"use strict";var i=t("../values"),n=i.isValue,o=i.typeOf,a=function(t,e){this.type=t,this.value=e};a.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!n(t[1]))return e.error("invalid value");var r=t[1],i=o(r),s=e.expectedType;return"array"!==i.kind||0!==i.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(i=s),new a(i,r)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},a.prototype.possibleOutputs=function(){return[this.value]},e.exports=a},{"../values":147}],135:[function(t,e,r){"use strict";var i=t("../values").typeOf,n=function(t,e,r,i,n,o){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=n,this.otherwise=o};n.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,o;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var a={},s=[],l=2;l<t.length-1;l+=2){var u=t[l],c=t[l+1];Array.isArray(u)||(u=[u]);var p=e.concat(l);if(0===u.length)return p.error("Expected at least one branch label.");for(var h=0,f=u;h<f.length;h+=1){var d=f[h];if("number"!=typeof d&&"string"!=typeof d)return p.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return p.error("Numeric branch labels must be integer values.");if(r){if(p.checkSubtype(r,i(d)))return null}else r=i(d);if(void 0!==a[String(d)])return p.error("Branch labels must be unique.");a[String(d)]=s.length}var m=e.parse(c,l,o);if(!m)return null;o=o||m.type,s.push(m)}var y=e.parse(t[1],1,r);if(!y)return null;var _=e.parse(t[t.length-1],t.length-1,o);return _?new n(r,o,y,a,s,_):null},n.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},n.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},n.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=n},{"../values":147}],136:[function(t,e,r){"use strict";var i=t("../types").NumberType,n=t("../stops").findStopLessThanOrEqualTo,o=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,n=r;i<n.length;i+=1){var o=n[i],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};o.parse=function(t,e){var r=t[1],n=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,1,i)))return null;var a=[],s=null;e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType),n.unshift(-1/0);for(var l=0;l<n.length;l+=2){var u=n[l],c=n[l+1],p=l+1,h=l+2;if("number"!=typeof u)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(a.length&&a[a.length-1][0]>=u)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',p);var f=e.parse(c,h,s);if(!f)return null;s=s||f.type,a.push([u,f])}return new o(s,r,a)},o.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var o=e.length;return i>=e[o-1]?r[o-1].evaluate(t):r[n(e,i)].evaluate(t)},o.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},o.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=o},{"../stops":145,"../types":146}],137:[function(t,e,r){"use strict";var i=function(t,e){this.type=e,this.name=t};i.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new i(r,e.scope.get(r).type):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},i.prototype.evaluate=function(t){return t.scope.get(this.name).evaluate(t)},i.prototype.eachChild=function(){},i.prototype.possibleOutputs=function(){return[void 0]},e.exports=i},{}],138:[function(t,e,r){"use strict";var i=t("./scope"),n=t("./values").Color,o=["Unknown","Point","LineString","Polygon"],a=function(){this.scope=new i,this._parseColorCache={}};a.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},a.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?o[this.feature.type]:this.feature.type:null},a.prototype.properties=function(){return this.feature&&this.feature.properties||{}},a.prototype.pushScope=function(t){this.scope=this.scope.concat(t)},a.prototype.popScope=function(){this.scope=this.scope.parent},a.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=n.parse(t)),e},e.exports=a},{"./scope":144,"./values":147}],139:[function(t,e,r){"use strict";function i(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in m}function n(t,e,r){void 0===r&&(r={});var i=new l(m,[],function(t){var e={color:M,string:P,number:L,enum:P,boolean:D};return"array"===t.type?R(e[t.value]||B,t.length):e[t.type]||null}(e)),n=i.parse(t);return n?v(!1===r.handleErrors?new b(n):new w(n,e)):x(i.errors)}function o(t,e,r){if(void 0===r&&(r={}),"error"===(t=n(t,e,r)).result)return t;var i=t.value.expression,o=y.isFeatureConstant(i);if(!o&&!e["property-function"])return x([new s("","property expressions not supported")]);var a=y.isGlobalPropertyConstant(i,["zoom"]);if(!a&&!1===e["zoom-function"])return x([new s("","zoom expressions not supported")]);var l=function t(e){var r=null;if(e instanceof d)r=t(e.result);else if(e instanceof f)for(var i=0,n=e.args;i<n.length;i+=1){var o=n[i];if(r=t(o))break}else(e instanceof p||e instanceof h)&&e.input instanceof c&&"zoom"===e.input.name&&(r=e);return r instanceof s?r:(e.eachChild(function(e){var i=t(e);i instanceof s?r=i:!r&&i?r=new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&i&&r!==i&&(r=new s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r)}(i);return l||a?l instanceof s?x([l]):l instanceof h&&"piecewise-constant"===e.function?x([new s("",'"interpolate" expressions cannot be used with this property')]):v(l?new A(o?"camera":"composite",t.value,l):new S(o?"constant":"source",t.value)):x([new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var a=t("../util/extend"),s=t("./parsing_error"),l=t("./parsing_context"),u=t("./evaluation_context"),c=t("./compound_expression").CompoundExpression,p=t("./definitions/step"),h=t("./definitions/interpolate"),f=t("./definitions/coalesce"),d=t("./definitions/let"),m=t("./definitions"),y=t("./is_constant"),_=t("./runtime_error"),g=t("../util/result"),v=g.success,x=g.error,b=function(t){this.expression=t};b.prototype.evaluate=function(t,e){return this._evaluator||(this._evaluator=new u),this._evaluator.globals=t,this._evaluator.feature=e,this.expression.evaluate(this._evaluator)};var w=function(t){function e(e,r){t.call(this,e),this._warningHistory={},this._defaultValue=function(t){return"color"===t.type&&z(t.default)?new k(0,0,0,0):"color"===t.type?k.parse(t.default)||null:void 0===t.default?null:t.default}(r),"enum"===r.type&&(this._enumValues=r.values)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.evaluate=function(t,e){this._evaluator||(this._evaluator=new u),this._evaluator.globals=t,this._evaluator.feature=e;try{var r=this.expression.evaluate(this._evaluator);if(null===r||void 0===r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new _("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}},e}(b),S=function(t,e){this.kind=t,this._styleExpression=e};S.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)};var A=function(t,e,r){this.kind=t,this.zoomStops=r.labels,this._styleExpression=e,r instanceof h&&(this._interpolationType=r.interpolation)};A.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)},A.prototype.interpolationFactor=function(t,e,r){return this._interpolationType?h.interpolationFactor(this._interpolationType,t,e,r):0};var T=t("../function"),z=T.isFunction,E=T.createFunction,k=t("./values").Color,C=function(t,e){this._parameters=t,this._specification=e,a(this,E(this._parameters,this._specification))};C.deserialize=function(t){return new C(t._parameters,t._specification)},C.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}},e.exports={StyleExpression:b,StyleExpressionWithErrorHandling:w,isExpression:i,createExpression:n,createPropertyExpression:o,normalizePropertyExpression:function(t,e){if(z(t))return new C(t,e);if(i(t)){var r=o(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=k.parse(t)),{kind:"constant",evaluate:function(){return n}}},ZoomConstantExpression:S,ZoomDependentExpression:A,StylePropertyFunction:C};var I=t("./types"),M=I.ColorType,P=I.StringType,L=I.NumberType,D=I.BooleanType,B=I.ValueType,R=I.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(t,e,r){"use strict";var i=t("./compound_expression").CompoundExpression;e.exports={isFeatureConstant:function t(e){if(e instanceof i){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var r=!0;return e.eachChild(function(e){r&&!t(e)&&(r=!1)}),r},isGlobalPropertyConstant:function t(e,r){if(e instanceof i&&r.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!t(e,r)&&(n=!1)}),n}}},{"./compound_expression":123}],141:[function(t,e,r){"use strict";var i=t("./scope"),n=t("./types").checkSubtype,o=t("./parsing_error"),a=t("./definitions/literal"),s=t("./definitions/assertion"),l=t("./definitions/array"),u=t("./definitions/coercion"),c=function(t,e,r,n,o){void 0===e&&(e=[]),void 0===n&&(n=new i),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=o,this.expectedType=r};c.prototype.parse=function(e,r,i,n,o){void 0===o&&(o={});var c=this;if(r&&(c=c.concat(r,i,n)),null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return c.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=e[0];if("string"!=typeof p)return c.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=c.registry[p];if(h){var f=h.parse(e,c);if(!f)return null;if(c.expectedType){var d=c.expectedType,m=f.type;if("string"!==d.kind&&"number"!==d.kind&&"boolean"!==d.kind||"value"!==m.kind)if("array"===d.kind&&"value"===m.kind)o.omitTypeAnnotations||(f=new l(d,f));else if("color"!==d.kind||"value"!==m.kind&&"string"!==m.kind){if(c.checkSubtype(c.expectedType,f.type))return null}else o.omitTypeAnnotations||(f=new u(d,[f]));else o.omitTypeAnnotations||(f=new s(d,[f]))}if(!(f instanceof a)&&function(e){var r=t("./compound_expression").CompoundExpression,i=t("./is_constant"),n=i.isGlobalPropertyConstant,o=i.isFeatureConstant;if(e instanceof t("./definitions/var"))return!1;if(e instanceof r&&"error"===e.name)return!1;var s=!0;return e.eachChild(function(t){t instanceof a||(s=!1)}),!!s&&o(e)&&n(e,["zoom","heatmap-density"])}(f)){var y=new(t("./evaluation_context"));try{f=new a(f.type,f.evaluate(y))}catch(e){return c.error(e.message),null}}return f}return c.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?c.error("'undefined' value invalid. Use null instead."):"object"==typeof e?c.error('Bare objects invalid. Use ["literal", {...}] instead.'):c.error("Expected an array, but found "+typeof e+" instead.")},c.prototype.concat=function(t,e,r){var i="number"==typeof t?this.path.concat(t):this.path,n=r?this.scope.concat(r):this.scope;return new c(this.registry,i,e||null,n,this.errors)},c.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new o(i,t))},c.prototype.checkSubtype=function(t,e){var r=n(t,e);return r&&this.error(r),r},e.exports=c},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(t,e,r){"use strict";var i=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.exports=i},{}],143:[function(t,e,r){"use strict";var i=function(t){this.name="ExpressionEvaluationError",this.message=t};i.prototype.toJSON=function(){return this.message},e.exports=i},{}],144:[function(t,e,r){"use strict";var i=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var n=i[r],o=n[0],a=n[1];this.bindings[o]=a}};i.prototype.concat=function(t){return new i(this,t)},i.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},i.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)},e.exports=i},{}],145:[function(t,e,r){"use strict";var i=t("./runtime_error");e.exports={findStopLessThanOrEqualTo:function(t,e){for(var r,n,o=0,a=t.length-1,s=0;o<=a;){if(r=t[s=Math.floor((o+a)/2)],n=t[s+1],e===r||e>r&&e<n)return s;if(r<e)o=s+1;else{if(!(r>e))throw new i("Input is not a number.");a=s-1}}return Math.max(s-1,0)}}},{"./runtime_error":143}],146:[function(t,e,r){"use strict";function i(t,e){return{kind:"array",itemType:t,N:e}}function n(t){if("array"===t.kind){var e=n(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var o={kind:"null"},a={kind:"number"},s={kind:"string"},l={kind:"boolean"},u={kind:"color"},c={kind:"object"},p={kind:"value"},h=[o,a,s,l,u,c,i(p)];e.exports={NullType:o,NumberType:a,StringType:s,BooleanType:l,ColorType:u,ObjectType:c,ValueType:p,array:i,ErrorType:{kind:"error"},toString:n,checkSubtype:function t(e,r){if("error"===r.kind)return null;if("array"===e.kind){if("array"===r.kind&&!t(e.itemType,r.itemType)&&("number"!=typeof e.N||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if("value"===e.kind)for(var i=0,o=h;i<o.length;i+=1)if(!t(o[i],r))return null}return"Expected "+n(e)+" but found "+n(r)+" instead."}}},{}],147:[function(t,e,r){"use strict";var i=t("../util/color"),n=t("./types"),o=n.NullType,a=n.NumberType,s=n.StringType,l=n.BooleanType,u=n.ColorType,c=n.ObjectType,p=n.ValueType,h=n.array;e.exports={Color:i,validateRGBA:function(t,e,r,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,r,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,r,i]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."},isValue:function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof i)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var o in e)if(!t(e[o]))return!1;return!0}return!1},typeOf:function t(e){if(null===e)return o;if("string"==typeof e)return s;if("boolean"==typeof e)return l;if("number"==typeof e)return a;if(e instanceof i)return u;if(Array.isArray(e)){for(var r,n=e.length,f=0,d=e;f<d.length;f+=1){var m=t(d[f]);if(r){if(r===m)continue;r=p;break}r=m}return h(r||p,n)}return c}}},{"../util/color":153,"./types":146}],148:[function(t,e,r){"use strict";function i(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!i(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}function n(t,e){return t<e?-1:t>e?1:0}function o(t){if(!t)return!0;var e=t[0];return t.length<=1?"any"!==e:"=="===e?a(t[1],t[2],"=="):"!="===e?u(a(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e):"any"===e?function(t){return["any"].concat(t.map(o))}(t.slice(1)):"all"===e?["all"].concat(t.slice(1).map(o)):"none"===e?["all"].concat(t.slice(1).map(o).map(u)):"in"===e?s(t[1],t.slice(2)):"!in"===e?u(s(t[1],t.slice(2))):"has"===e?l(t[1]):"!has"!==e||u(l(t[1]))}function a(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function s(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(n)]]:["filter-in-small",t,["literal",e]]}}function l(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function u(t){return["!",t]}var c=t("../expression").createExpression;e.exports=function(t){if(!t)return function(){return!0};i(t)||(t=o(t));var e=c(t,p);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}},e.exports.isExpressionFilter=i;var p={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(t,e,r){"use strict";function i(t){return t}function n(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function o(t,e,r,i,o){return n(typeof r===o?i[r]:void 0,t.default,e.default)}function a(t,e,r){if("number"!==f(r))return n(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var o=u(t.stops,r);return t.stops[o][1]}function s(t,e,r){var o=void 0!==t.base?t.base:1;if("number"!==f(r))return n(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[a-1][0])return t.stops[a-1][1];var s=u(t.stops,r),l=function(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(r,o,t.stops[s][0],t.stops[s+1][0]),p=t.stops[s][1],h=t.stops[s+1][1],m=d[e.type]||i;if(t.colorSpace&&"rgb"!==t.colorSpace){var y=c[t.colorSpace];m=function(t,e){return y.reverse(y.interpolate(y.forward(t),y.forward(e),l))}}return"function"==typeof p.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=p.evaluate.apply(void 0,t),i=h.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return m(r,i,l)}}:m(p,h,l)}function l(t,e,r){return"color"===e.type?r=p.parse(r):f(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),n(r,t.default,e.default)}function u(t,e){for(var r,i,n=0,o=t.length-1,a=0;n<=o;){if(r=t[a=Math.floor((n+o)/2)][0],i=t[a+1][0],e===r||e>r&&e<i)return a;r<e?n=a+1:r>e&&(o=a-1)}return Math.max(a-1,0)}var c=t("../util/color_spaces"),p=t("../util/color"),h=t("../util/extend"),f=t("../util/get_type"),d=t("../util/interpolate"),m=t("../expression/definitions/interpolate");e.exports={createFunction:function t(e,r){var i,u,f,d="color"===r.type,y=e.stops&&"object"==typeof e.stops[0][0],_=y||void 0!==e.property,g=y||!_,v=e.type||("interpolated"===r.function?"exponential":"interval");if(d&&((e=h({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],p.parse(t[1])]})),e.default?e.default=p.parse(e.default):e.default=p.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!c[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===v)i=s;else if("interval"===v)i=a;else if("categorical"===v){i=o,u=Object.create(null);for(var x=0,b=e.stops;x<b.length;x+=1){var w=b[x];u[w[0]]=w[1]}f=typeof e.stops[0][0]}else{if("identity"!==v)throw new Error('Unknown function type "'+v+'"');i=l}if(y){for(var S={},A=[],T=0;T<e.stops.length;T++){var z=e.stops[T],E=z[0].zoom;void 0===S[E]&&(S[E]={zoom:E,type:e.type,property:e.property,default:e.default,stops:[]},A.push(E)),S[E].stops.push([z[0].value,z[1]])}for(var k=[],C=0,I=A;C<I.length;C+=1){var M=I[C];k.push([S[M].zoom,t(S[M],r)])}return{kind:"composite",interpolationFactor:m.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:k.map(function(t){return t[0]}),evaluate:function(t,i){var n=t.zoom;return s({stops:k,base:e.base},r,n).evaluate(n,i)}}}return g?{kind:"camera",interpolationFactor:"exponential"===v?m.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var n=t.zoom;return i(e,r,n,u,f)}}:{kind:"source",evaluate:function(t,o){var a=o&&o.properties?o.properties[e.property]:void 0;return void 0===a?n(e.default,r.default):i(e,r,a,u,f)}}},isFunction:function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(t,e,r){"use strict";function i(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",n=0,o=t;n<o.length;n+=1)r+=i(o[n])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+i(t[a[l]])+",";return s+"}"}function n(t){for(var e="",r=0,n=o;r<n.length;r+=1)e+="/"+i(t[n[r]]);return e}var o=t("./util/ref_properties");e.exports=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}},{"./util/ref_properties":159}],151:[function(t,e,r){"use strict";e.exports=t("./v8.json")},{"./v8.json":152}],152:[function(t,e,r){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(t,e,r){"use strict";var i=t("csscolorparser").parseCSSColor,n=function(t,e,r,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i};n.parse=function(t){if(t){if(t instanceof n)return t;if("string"==typeof t){var e=i(t);if(e)return new n(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},n.prototype.toString=function(){var t=this;return"rgba("+[this.r,this.g,this.b].map(function(e){return Math.round(255*e/t.a)}).concat(this.a).join(",")+")"},n.black=new n(0,0,0,1),n.white=new n(1,1,1,1),n.transparent=new n(0,0,0,0),e.exports=n},{csscolorparser:13}],154:[function(t,e,r){"use strict";function i(t){return t>_?Math.pow(t,1/3):t/y+d}function n(t){return t>m?t*t*t:y*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t.r),r=a(t.g),n=a(t.b),o=i((.4124564*e+.3575761*r+.1804375*n)/p),s=i((.2126729*e+.7151522*r+.072175*n)/h);return{l:116*s-16,a:500*(o-s),b:200*(s-i((.0193339*e+.119192*r+.9503041*n)/f)),alpha:t.a}}function l(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=h*n(e),r=p*n(r),i=f*n(i),new u(o(3.2404542*r-1.5371385*e-.4985314*i),o(-.969266*r+1.8760108*e+.041556*i),o(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}var u=t("./color"),c=t("./interpolate").number,p=.95047,h=1,f=1.08883,d=4/29,m=6/29,y=3*m*m,_=m*m*m,g=Math.PI/180,v=180/Math.PI;e.exports={lab:{forward:s,reverse:l,interpolate:function(t,e,r){return{l:c(t.l,e.l,r),a:c(t.a,e.a,r),b:c(t.b,e.b,r),alpha:c(t.alpha,e.alpha,r)}}},hcl:{forward:function(t){var e=s(t),r=e.l,i=e.a,n=e.b,o=Math.atan2(n,i)*v;return{h:o<0?o+360:o,c:Math.sqrt(i*i+n*n),l:r,alpha:t.a}},reverse:function(t){var e=t.h*g,r=t.c;return l({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:function(t,e,r){var i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}(t.h,e.h,r),c:c(t.c,e.c,r),l:c(t.l,e.l,r),alpha:c(t.alpha,e.alpha,r)}}}}},{"./color":153,"./interpolate":158}],155:[function(t,e,r){"use strict";e.exports=function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],r[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r}},{}],156:[function(t,e,r){"use strict";e.exports=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t}},{}],157:[function(t,e,r){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],158:[function(t,e,r){"use strict";function i(t,e,r){return t*(1-r)+e*r}var n=t("./color");e.exports={number:i,color:function(t,e,r){return new n(i(t.r,e.r,r),i(t.g,e.g,r),i(t.b,e.b,r),i(t.a,e.a,r))},array:function(t,e,r){return t.map(function(t,n){return i(t,e[n],r)})}}},{"./color":153}],159:[function(t,e,r){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(t,e,r){"use strict";e.exports={success:function(t){return{result:"success",value:t}},error:function(t){return{result:"error",value:t}}}},{}],161:[function(t,e,r){"use strict";function i(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}e.exports=i,e.exports.deep=function t(e){return Array.isArray(e)?e.map(t):i(e)}},{}],162:[function(t,e,r){"use strict";var i=t("../util/extend"),n=t("../util/unbundle_jsonlint"),o=t("../expression").isExpression,a=t("../function").isFunction;e.exports=function(e){var r=t("./validate_function"),s=t("./validate_expression"),l=t("./validate_object"),u={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},c=e.value,p=e.valueSpec,h=e.styleSpec;return p.function&&a(n(c))?r(e):p.function&&o(n.deep(c))?s(e):p.type&&u[p.type]?u[p.type](e):l(i({},e,{valueSpec:p.type?h[p.type]:p}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(t,e,r){"use strict";var i=t("../util/get_type"),n=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,r=t.valueSpec,a=t.style,s=t.styleSpec,l=t.key,u=t.arrayElementValidator||n;if("array"!==i(e))return[new o(l,e,"array expected, "+i(e)+" found")];if(r.length&&e.length!==r.length)return[new o(l,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new o(l,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var c={type:r.value};s.$version<7&&(c.function=r.function),"object"===i(r.value)&&(c=r.value);for(var p=[],h=0;h<e.length;h++)p=p.concat(u({array:e,arrayIndex:h,value:e[h],valueSpec:c,style:a,styleSpec:s,key:l+"["+h+"]"}));return p}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(t,e,r){"use strict";var i=t("../util/get_type"),n=t("../error/validation_error");e.exports=function(t){var e=t.value,r=t.key,o=i(e);return"boolean"!==o?[new n(r,e,"boolean expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,r=t.value,a=n(r);return"string"!==a?[new i(e,r,"color expected, "+a+" found")]:null===o(r)?[new i(e,r,'color expected, "'+r+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(t,e,r){"use strict";var i=t("../error/validation_error");e.exports=function(t){var e=t.key,r=t.value;return r?[new i(e,r,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,r=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(n(r))&&a.push(new i(e,r,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(o.values).indexOf(n(r))&&a.push(new i(e,r,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(r)+" found")),a}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../expression"),o=n.createExpression,a=n.createPropertyExpression,s=t("../util/unbundle_jsonlint");e.exports=function(t){var e=("property"===t.expressionContext?a:o)(s.deep(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new i(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new i(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("./validate_expression"),o=t("./validate_enum"),a=t("../util/get_type"),s=t("../util/unbundle_jsonlint"),l=t("../util/extend"),u=t("../feature_filter").isExpressionFilter;e.exports=function(t){return u(s.deep(t.value))?n(l({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==a(r))return[new i(n,r,"array expected, "+a(r)+" found")];var l,u=e.styleSpec,c=[];if(r.length<1)return[new i(n,r,"filter array must have at least 1 element")];switch(c=c.concat(o({key:n+"[0]",value:r[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===s(r[1])&&c.push(new i(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&c.push(new i(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(l=a(r[1]))&&c.push(new i(n+"[1]",r[1],"string expected, "+l+" found"));for(var p=2;p<r.length;p++)l=a(r[p]),"$type"===s(r[1])?c=c.concat(o({key:n+"["+p+"]",value:r[p],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==l&&"number"!==l&&"boolean"!==l&&c.push(new i(n+"["+p+"]",r[p],"string, number, or boolean expected, "+l+" found"));break;case"any":case"all":case"none":for(var h=1;h<r.length;h++)c=c.concat(t({key:n+"["+h+"]",value:r[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":l=a(r[1]),2!==r.length?c.push(new i(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==l&&c.push(new i(n+"[1]",r[1],"string expected, "+l+" found"))}return c}(t)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),l=t("./validate_number"),u=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){var e=[],s=t.value,c=t.key;if("array"!==n(s))return[new i(c,s,"array expected, "+n(s)+" found")];if(2!==s.length)return[new i(c,s,"array length 2 expected, length "+s.length+" found")];if(g){if("object"!==n(s[0]))return[new i(c,s,"object expected, "+n(s[0])+" found")];if(void 0===s[0].zoom)return[new i(c,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new i(c,s,"object stop key must have value")];if(h&&h>u(s[0].zoom))return[new i(c,s[0].zoom,"stop zoom values must appear in ascending order")];u(s[0].zoom)!==h&&(h=u(s[0].zoom),p=void 0,m={}),e=e.concat(a({key:c+"[0]",value:s[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:l,value:r}}))}else e=e.concat(r({key:c+"[0]",value:s[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},s));return e.concat(o({key:c+"[1]",value:s[1],valueSpec:f,style:t.style,styleSpec:t.styleSpec}))}function r(t,e){var r=n(t.value),o=u(t.value),a=null!==t.value?t.value:e;if(c){if(r!==c)return[new i(t.key,a,r+" stop domain type must match previous stop domain type "+c)]}else c=r;if("number"!==r&&"string"!==r&&"boolean"!==r)return[new i(t.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==r&&"categorical"!==d){var s="number expected, "+r+" found";return f["property-function"]&&void 0===d&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i(t.key,a,s)]}return"categorical"!==d||"number"!==r||isFinite(o)&&Math.floor(o)===o?"categorical"!==d&&"number"===r&&void 0!==p&&o<p?[new i(t.key,a,"stop domain values must appear in ascending order")]:(p=o,"categorical"===d&&o in m?[new i(t.key,a,"stop domain values must be unique")]:(m[o]=!0,[])):[new i(t.key,a,"integer expected, found "+o)]}var c,p,h,f=t.valueSpec,d=u(t.value.type),m={},y="categorical"!==d&&void 0===t.value.property,_=!y,g="array"===n(t.value.stops)&&"array"===n(t.value.stops[0])&&"object"===n(t.value.stops[0][0]),v=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===d)return[new i(t.key,t.value,'identity function may not have a "stops" property')];var r=[],o=t.value;return r=r.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===n(o)&&0===o.length&&r.push(new i(t.key,o,"array must have at least one stop")),r},default:function(t){return o({key:t.key,value:t.value,valueSpec:f,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===d&&y&&v.push(new i(t.key,t.value,'missing required property "property"')),"identity"===d||t.value.stops||v.push(new i(t.key,t.value,'missing required property "stops"')),"exponential"===d&&"piecewise-constant"===t.valueSpec.function&&v.push(new i(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(_&&!t.valueSpec["property-function"]?v.push(new i(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&"heatmap-color"!==t.objectKey&&v.push(new i(t.key,t.value,"zoom functions not supported"))),"categorical"!==d&&!g||void 0!==t.value.property||v.push(new i(t.key,t.value,'"property" property is required')),v}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("./validate_string");e.exports=function(t){var e=t.value,r=t.key,o=n(t);return o.length?o:(-1===e.indexOf("{fontstack}")&&o.push(new i(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&o.push(new i(r,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":122,"./validate_string":180}],172:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),l=t("./validate_layout_property"),u=t("./validate"),c=t("../util/extend");e.exports=function(t){var e=[],r=t.value,p=t.key,h=t.style,f=t.styleSpec;r.type||r.ref||e.push(new i(p,r,'either "type" or "ref" is required'));var d,m=n(r.type),y=n(r.ref);if(r.id)for(var _=n(r.id),g=0;g<t.arrayIndex;g++){var v=h.layers[g];n(v.id)===_&&e.push(new i(p,r.id,'duplicate layer id "'+r.id+'", previously used at line '+v.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new i(p,r[t],'"'+t+'" is prohibited for ref layers'))}),h.layers.forEach(function(t){n(t.id)===y&&(d=t)}),d?d.ref?e.push(new i(p,r.ref,"ref cannot reference another ref layer")):m=n(d.type):e.push(new i(p,r.ref,'ref layer "'+y+'" not found'));else if("background"!==m)if(r.source){var x=h.sources&&h.sources[r.source],b=x&&n(x.type);x?"vector"===b&&"raster"===m?e.push(new i(p,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===b&&"raster"!==m?e.push(new i(p,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==b||r["source-layer"]?"raster-dem"===b&&"hillshade"!==m&&e.push(new i(p,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):e.push(new i(p,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new i(p,r.source,'source "'+r.source+'" not found'))}else e.push(new i(p,r,'missing required property "source"'));return e=e.concat(o({key:p,value:r,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return u({key:p+".type",value:r.type,valueSpec:f.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:a,layout:function(t){return o({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return l(c({layerType:m},t))}}})},paint:function(t){return o({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(c({layerType:m},t))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(t,e,r){"use strict";var i=t("./validate_property");e.exports=function(t){return i(t,"layout")}},{"./validate_property":178}],174:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,r=t.styleSpec,a=r.light,s=t.style,l=[],u=n(e);if(void 0===e)return l;if("object"!==u)return l.concat([new i("light",e,"object expected, "+u+" found")]);for(var c in e){var p=c.match(/^(.*)-transition$/);l=p&&a[p[1]]&&a[p[1]].transition?l.concat(o({key:c,value:e[c],valueSpec:r.transition,style:s,styleSpec:r})):a[c]?l.concat(o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:r})):l.concat([new i(c,e[c],'unknown property "'+c+'"')])}return l}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(t,e,r){"use strict";var i=t("../util/get_type"),n=t("../error/validation_error");e.exports=function(t){var e=t.key,r=t.value,o=t.valueSpec,a=i(r);return"number"!==a?[new n(e,r,"number expected, "+a+" found")]:"minimum"in o&&r<o.minimum?[new n(e,r,r+" is less than the minimum value "+o.minimum)]:"maximum"in o&&r>o.maximum?[new n(e,r,r+" is greater than the maximum value "+o.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,r=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},l=t.style,u=t.styleSpec,c=[],p=n(r);if("object"!==p)return[new i(e,r,"object expected, "+p+" found")];for(var h in r){var f=h.split(".")[0],d=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=o;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new i(e,r[h],'unknown property "'+h+'"'));continue}m=o}c=c.concat(m({key:(e?e+".":e)+h,value:r[h],valueSpec:d,style:l,styleSpec:u,object:r,objectKey:h},r))}for(var y in a)s[y]||a[y].required&&void 0===a[y].default&&void 0===r[y]&&c.push(new i(e,r,'missing required property "'+y+'"'));return c}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(t,e,r){"use strict";var i=t("./validate_property");e.exports=function(t){return i(t,"paint")}},{"./validate_property":178}],178:[function(t,e,r){"use strict";var i=t("./validate"),n=t("../error/validation_error"),o=t("../util/get_type"),a=t("../function").isFunction,s=t("../util/unbundle_jsonlint");e.exports=function(t,e){var r=t.key,l=t.style,u=t.styleSpec,c=t.value,p=t.objectKey,h=u[e+"_"+t.layerType];if(!h)return[];var f=p.match(/^(.*)-transition$/);if("paint"===e&&f&&h[f[1]]&&h[f[1]].transition)return i({key:r,value:c,valueSpec:u.transition,style:l,styleSpec:u});var d,m=t.valueSpec||h[p];if(!m)return[new n(r,c,'unknown property "'+p+'"')];if("string"===o(c)&&m["property-function"]&&!m.tokens&&(d=/^{([^}]+)}$/.exec(c)))return[new n(r,c,'"'+p+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(d[1])+" }`.")];var y=[];return"symbol"===t.layerType&&("text-field"===p&&l&&!l.glyphs&&y.push(new n(r,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===p&&a(s.deep(c))&&"identity"===s(c.type)&&y.push(new n(r,c,'"text-font" does not support identity functions'))),y.concat(i({key:t.key,value:c,valueSpec:m,style:l,styleSpec:u,expressionContext:"property",propertyKey:p}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(t,e,r){"use strict";var i=t("../error/validation_error"),n=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,r=t.key,s=t.styleSpec,l=t.style;if(!e.type)return[new i(r,e,'"type" is required')];var u=n(e.type),c=[];switch(u){case"vector":case"raster":case"raster-dem":if(c=c.concat(o({key:r,value:e,valueSpec:s["source_"+u.replace("-","_")],style:t.style,styleSpec:s})),"url"in e)for(var p in e)["type","url","tileSize"].indexOf(p)<0&&c.push(new i(r+"."+p,e[p],'a source with a "url" property may not include a "'+p+'" property'));return c;case"geojson":return o({key:r,value:e,valueSpec:s.source_geojson,style:l,styleSpec:s});case"video":return o({key:r,value:e,valueSpec:s.source_video,style:l,styleSpec:s});case"image":return o({key:r,value:e,valueSpec:s.source_image,style:l,styleSpec:s});case"canvas":return o({key:r,value:e,valueSpec:s.source_canvas,style:l,styleSpec:s});default:return a({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:l,styleSpec:s})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(t,e,r){"use strict";var i=t("../util/get_type"),n=t("../error/validation_error");e.exports=function(t){var e=t.value,r=t.key,o=i(e);return"string"!==o?[new n(r,e,"string expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(t,e,r){"use strict";function i(t,e){e=e||l;var r=[];return r=r.concat(s({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:u,"*":function(){return[]}}})),t.constants&&(r=r.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),n(r)}function n(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return n(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),l=t("./reference/latest"),u=t("./validate/validate_glyphs_url");i.source=o(t("./validate/validate_source")),i.light=o(t("./validate/validate_light")),i.layer=o(t("./validate/validate_layer")),i.filter=o(t("./validate/validate_filter")),i.paintProperty=o(t("./validate/validate_paint_property")),i.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=i},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(t,e,r){"use strict";var i=t("./zoom_history"),n=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new i,this.transition={})};n.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},e.exports=n},{"./zoom_history":212}],183:[function(t,e,r){"use strict";var i=t("../style-spec/reference/latest"),n=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("../util/util").sphericalToCartesian,l=(t("../style-spec/util/color"),t("../style-spec/util/interpolate")),u=t("./properties"),c=u.Properties,p=u.Transitionable,h=(u.Transitioning,u.PossiblyEvaluated,u.DataConstantProperty),f=function(){this.specification=i.light.position};f.prototype.possiblyEvaluate=function(t,e){return s(t.expression.evaluate(e))},f.prototype.interpolate=function(t,e,r){return{x:l.number(t.x,e.x,r),y:l.number(t.y,e.y,r),z:l.number(t.z,e.z,r)}};var d=new c({anchor:new h(i.light.anchor),position:new f,color:new h(i.light.color),intensity:new h(i.light.intensity)}),m=function(t){function e(e){t.call(this),this._transitionable=new p(d),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t){if(!this._validate(a.light,t))for(var e in t){var r=t[e];n.endsWith(e,"-transition")?this._transitionable.setTransition(e.slice(0,-"-transition".length),r):this._transitionable.setValue(e,r)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,n.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:i})))},e}(o);e.exports=m},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(t,e,r){"use strict";var i=t("../util/mapbox").normalizeGlyphsURL,n=t("../util/ajax"),o=t("./parse_glyph_pbf");e.exports=function(t,e,r,a,s){var l=256*e,u=l+255,c=a(i(r).replace("{fontstack}",t).replace("{range}",l+"-"+u),n.ResourceType.Glyphs);n.getArrayBuffer(c,function(t,e){if(t)s(t);else if(e){for(var r={},i=0,n=o(e.data);i<n.length;i+=1){var a=n[i];r[a.id]=a}s(null,r)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(t,e,r){"use strict";var i=t("../util/ajax"),n=t("../util/browser"),o=t("../util/mapbox").normalizeSpriteURL,a=t("../util/image").RGBAImage;e.exports=function(t,e,r){function s(){if(c)r(c);else if(l&&u){var t=n.getImageData(u),e={};for(var i in l){var o=l[i],s=o.width,p=o.height,h=o.x,f=o.y,d=o.sdf,m=o.pixelRatio,y=new a({width:s,height:p});a.copy(t,y,{x:h,y:f},{x:0,y:0},{width:s,height:p}),e[i]={data:y,pixelRatio:m,sdf:d}}r(null,e)}}var l,u,c,p=n.devicePixelRatio>1?"@2x":"";i.getJSON(e(o(t,p,".json"),i.ResourceType.SpriteJSON),function(t,e){c||(c=t,l=e,s())}),i.getImage(e(o(t,p,".png"),i.ResourceType.SpriteImage),function(t,e){c||(c=t,u=e,s())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(t,e,r){"use strict";function i(t,e,r){1===t&&r.readMessage(n,e)}function n(t,e,r){if(3===t){var i=r.readMessage(o,{}),n=i.id,s=i.bitmap,u=i.width,c=i.height,p=i.left,h=i.top,f=i.advance;e.push({id:n,bitmap:new a({width:u+2*l,height:c+2*l},s),metrics:{width:u,height:c,left:p,top:h,advance:f}})}}function o(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var a=t("../util/image").AlphaImage,s=t("pbf"),l=3;e.exports=function(t){return new s(t).readFields(i,[])},e.exports.GLYPH_PBF_BORDER=l},{"../util/image":263,pbf:30}],187:[function(t,e,r){"use strict";var i=t("../util/browser"),n=t("../symbol/placement"),o=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};o.prototype.continuePlacement=function(t,e,r,i,n){for(var o=this;this._currentTileIndex<t.length;){var a=t[o._currentTileIndex];if(e.placeLayerTile(i,a,r,o._seenCrossTileIDs),o._currentTileIndex++,n())return!0}};var a=function(t,e,r,i,o){this.placement=new n(t,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1};a.prototype.isDone=function(){return this._done},a.prototype.continuePlacement=function(t,e,r){for(var n=this,a=i.now(),s=function(){var t=i.now()-a;return!n._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var l=e[t[n._currentPlacementIndex]],u=n.placement.collisionIndex.transform.zoom;if("symbol"===l.type&&(!l.minzoom||l.minzoom<=u)&&(!l.maxzoom||l.maxzoom>u)){if(n._inProgressLayer||(n._inProgressLayer=new o),n._inProgressLayer.continuePlacement(r[l.source],n.placement,n._showCollisionBoxes,l,s))return;delete n._inProgressLayer}n._currentPlacementIndex--}this._done=!0},a.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement},e.exports=a},{"../symbol/placement":223,"../util/browser":252}],188:[function(t,e,r){"use strict";var i=t("../util/util"),n=i.clone,o=i.extend,a=i.easeCubicInOut,s=t("../style-spec/util/interpolate"),l=t("../style-spec/expression").normalizePropertyExpression,u=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),c=function(t,e){this.property=t,this.value=e,this.expression=l(void 0===e?t.specification.default:e,t.specification)};c.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},c.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var p=function(t){this.property=t,this.value=new c(t,void 0)};p.prototype.transitioned=function(t,e){return new f(this.property,this.value,e,o({},t.transition,this.transition),t.now)},p.prototype.untransitioned=function(){return new f(this.property,this.value,null,{},0)};var h=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};h.prototype.getValue=function(t){return n(this._values[t].value.value)},h.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new p(this._values[t].property)),this._values[t].value=new c(this._values[t].property,null===e?void 0:n(e))},h.prototype.getTransition=function(t){return n(this._values[t].transition)},h.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new p(this._values[t].property)),this._values[t].transition=n(e)||void 0},h.prototype.serialize=function(){for(var t=this,e={},r=0,i=Object.keys(t._values);r<i.length;r+=1){var n=i[r],o=t.getValue(n);void 0!==o&&(e[n]=o);var a=t.getTransition(n);void 0!==a&&(e[n+"-transition"]=a)}return e},h.prototype.transitioned=function(t,e){for(var r=new d(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var o=n[i];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},h.prototype.untransitioned=function(){for(var t=new d(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e];t._values[i]=this._values[i].untransitioned()}return t};var f=function(t,e,r,i,n){this.property=t,this.value=e,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)};f.prototype.possiblyEvaluate=function(t){var e=t.now||0,r=this.value.possiblyEvaluate(t),i=this.prior;if(i){if(e>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(e<this.begin)return i.possiblyEvaluate(t);var n=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t),r,a(n))}return r};var d=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};d.prototype.possiblyEvaluate=function(t){for(var e=new _(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var n=i[r];e._values[n]=this._values[n].possiblyEvaluate(t)}return e},d.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var m=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};m.prototype.getValue=function(t){return n(this._values[t].value)},m.prototype.setValue=function(t,e){this._values[t]=new c(this._values[t].property,null===e?void 0:n(e))},m.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n)}return t},m.prototype.possiblyEvaluate=function(t){for(var e=new _(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var n=i[r];e._values[n]=this._values[n].possiblyEvaluate(t)}return e};var y=function(t,e,r){this.property=t,this.value=e,this.globals=r};y.prototype.isConstant=function(){return"constant"===this.value.kind},y.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},y.prototype.evaluate=function(t){return this.property.evaluate(this.value,this.globals,t)};var _=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};_.prototype.get=function(t){return this._values[t]};var g=function(t){this.specification=t};g.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},g.prototype.interpolate=function(t,e,r){var i=s[this.specification.type];return i?i(t,e,r):t};var v=function(t){this.specification=t};v.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new y(this,{kind:"constant",value:t.expression.evaluate(e)},e):new y(this,t.expression,e)},v.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0!==t.value.value&&void 0!==e.value.value){var i=s[this.specification.type];return i?new y(this,{kind:"constant",value:i(t.value.value,e.value.value,r)},t.globals):t}},v.prototype.evaluate=function(t,e,r){return"constant"===t.kind?t.value:t.evaluate(e,r)};var x=function(t){this.specification=t};x.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e)}},x.prototype._calculate=function(t,e,r,i){var n=i.zoom,o=n-Math.floor(n),a=i.crossFadingFactor();return n>i.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:r,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},x.prototype.interpolate=function(t){return t};var b=function(t){this.specification=t};b.prototype.possiblyEvaluate=function(){},b.prototype.interpolate=function(){};u("DataDrivenProperty",v),u("DataConstantProperty",g),u("CrossFadedProperty",x),u("HeatmapColorProperty",b),e.exports={PropertyValue:c,Transitionable:h,Transitioning:d,Layout:m,PossiblyEvaluatedPropertyValue:y,PossiblyEvaluated:_,DataConstantProperty:g,DataDrivenProperty:v,CrossFadedProperty:x,HeatmapColorProperty:b,Properties:function(t){var e=this;for(var r in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var i=t[r],n=e.defaultPropertyValues[r]=new c(i,void 0),o=e.defaultTransitionablePropertyValues[r]=new p(i);e.defaultTransitioningPropertyValues[r]=o.untransitioned(),e.defaultPossiblyEvaluatedValues[r]=n.possiblyEvaluate({})}}}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry");e.exports={getMaximumPaintValue:function(t,e,r){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:r.programConfigurations.get(e.id).binders[t].statistics.max},translateDistance:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},translate:function(t,e,r,n,o){if(!e[0]&&!e[1])return t;var a=i.convert(e);"viewport"===r&&a._rotate(-n);for(var s=[],l=0;l<t.length;l++){for(var u=t[l],c=[],p=0;p<u.length;p++)c.push(u[p].sub(a._mult(o)));s.push(c)}return s}}},{"@mapbox/point-geometry":4}],190:[function(t,e,r){"use strict";var i=t("../util/evented"),n=t("./style_layer"),o=t("./load_sprite"),a=t("../render/image_manager"),s=t("../render/glyph_manager"),l=t("./light"),u=t("../render/line_atlas"),c=t("../util/util"),p=t("../util/ajax"),h=t("../util/mapbox"),f=t("../util/browser"),d=t("../util/dispatcher"),m=t("./validate_style"),y=t("../source/source").getType,_=t("../source/source").setType,g=t("../source/query_features"),v=t("../source/source_cache"),x=(t("../source/geojson_source"),t("../style-spec/reference/latest")),b=t("../util/global_worker_pool"),w=t("../style-spec/deref"),S=t("../style-spec/diff"),A=t("../source/rtl_text_plugin"),T=t("./pauseable_placement"),z=t("./zoom_history"),E=t("../symbol/cross_tile_symbol_index"),k=c.pick(S.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),C=c.pick(S.operations,["setCenter","setZoom","setBearing","setPitch"]),I=function(t){function e(e,r){var i=this;void 0===r&&(r={}),t.call(this),this.map=e,this.dispatcher=new d(b(),this),this.imageManager=new a,this.glyphManager=new s(e._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new u(256,512),this.crossTileSymbolIndex=new E,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new z,this._loaded=!1,this._resetUpdates();var n=this;this._rtlTextPluginCallback=A.registerForPluginAvailability(function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback),n.sourceCaches)n.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var n in i._layers){var o=i._layers[n];o.source===r.id&&i._validateLayer(o)}}}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadURL=function(t,e){var r=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"});var i="boolean"==typeof e.validate?e.validate:!h.isMapboxURL(t);t=h.normalizeStyleURL(t,e.accessToken);var n=this.map._transformRequest(t,p.ResourceType.Style);p.getJSON(n,function(t,e){t?r.fire("error",{error:t}):e&&r._load(e,i)})},e.prototype.loadJSON=function(t,e){var r=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"}),f.frame(function(){r._load(t,!1!==e.validate)})},e.prototype._load=function(t,e){var r=this;if(!e||!m.emitErrors(this,m(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)r.addSource(i,t.sources[i],{validate:!1});t.sprite?o(t.sprite,this.map._transformRequest,function(t,e){if(t)r.fire("error",t);else if(e)for(var i in e)r.imageManager.addImage(i,e[i]);r.imageManager.setLoaded(!0),r.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var s=0,u=a;s<u.length;s+=1){var c=u[s];(c=n.create(c)).setEventedParent(r,{layer:{id:c.id}}),r._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new l(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var r=t.sourceLayer;if(r){var i=e.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire("error",{error:new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"')})}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype.hasTransitions=function(){var t=this;if(this.light&&this.light.hasTransition())return!0;for(var e in t.sourceCaches)if(t.sourceCaches[e].hasTransition())return!0;for(var r in t._layers)if(t._layers[r].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){var e=this;if(this._loaded){if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var n in(r.length||i.length)&&this._updateWorkerLayers(r,i),e._updatedSources){var o=e._updatedSources[n];"reload"===o?e._reloadSource(n):"clear"===o&&e._clearSource(n)}for(var a in e._updatedPaintProps)e._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in e.sourceCaches)e.sourceCaches[s].used=!1;for(var l=0,u=e._order;l<u.length;l+=1){var c=u[l],p=e._layers[c];p.recalculate(t),!p.isHidden(t.zoom)&&p.source&&(e.sourceCaches[p.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;(t=c.clone(t)).layers=w(t.layers);var r=S(this.serialize(),t).filter(function(t){return!(t.command in C)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in k)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(t,e),this.fire("data",{dataType:"style"})},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(t),this.fire("data",{dataType:"style"})},e.prototype.addSource=function(t,e,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(e.type)>=0&&this._validate(m.source,"sources."+t,e,null,r))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var n=this.sourceCaches[t]=new v(t,e,this.dispatcher);n.style=this,n.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:n.serialize(),sourceId:t}}),n.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){var e=this;if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var r in e._layers)if(e._layers[r].source===t)return e.fire("error",{error:new Error('Source "'+t+'" cannot be removed while layer "'+r+'" is using it.')});var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:t}),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,r){this._checkLoaded();var i=t.id;if("object"==typeof t.source&&(this.addSource(i,t.source),t=c.clone(t),t=c.extend(t,{source:i})),!this._validate(m.layer,"layers."+i,t,{arrayIndex:-1},r)){var o=n.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=e?this._order.indexOf(e):this._order.length;if(e&&-1===a)return void this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')});if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){var r=this._order.indexOf(t);this._order.splice(r,1);var i=e?this._order.indexOf(e):this._order.length;e&&-1===i?this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')}):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")})},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")})},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===e&&i.maxzoom===r||(null!=e&&(i.minzoom=e),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var r=this.getLayer(t);if(r)return c.deepEqual(r.filter,e)?void 0:null===e||void 0===e?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(m.filter,"layers."+r.id+".filter",e)||(r.filter=c.clone(e),this._updateLayer(r)));this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,r){this._checkLoaded();var i=this.getLayer(t);i?c.deepEqual(i.getLayoutProperty(e),r)||(i.setLayoutProperty(e,r),this._updateLayer(i)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,r){this._checkLoaded();var i=this.getLayer(t);if(i){if(!c.deepEqual(i.getPaintProperty(e),r)){var n=i._transitionablePaint._values[e].value.isDataDriven();i.setPaintProperty(e,r),(i._transitionablePaint._values[e].value.isDataDriven()||n)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0}}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=[],r=this._order.length-1;r>=0;r--)for(var i=this._order[r],n=0,o=t;n<o.length;n+=1){var a=o[n][i];if(a)for(var s=0,l=a;s<l.length;s+=1){var u=l[s];e.push(u)}}return e},e.prototype.queryRenderedFeatures=function(t,e,r,i){var n=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=e.layers;a<s.length;a+=1){var l=s[a],u=n._layers[l];if(!u)return n.fire("error",{error:"The layer '"+l+"' does not exist in the map's style and cannot be queried for features."}),[];o[u.source]=!0}}var c=[];for(var p in n.sourceCaches)if(!e.layers||o[p]){var h=g.rendered(n.sourceCaches[p],n._layers,t,e,r,i,n.placement?n.placement.collisionIndex:null);c.push(h)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var r=this.sourceCaches[t];return r?g.source(r,e):[]},e.prototype.addSourceType=function(t,e,r){return y(t)?r(new Error('A source type called "'+t+'" already exists.')):(_(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t){this._checkLoaded();var e=this.light.getLight(),r=!1;for(var i in t)if(!c.deepEqual(t[i],e[i])){r=!0;break}if(r){var n={now:f.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(n)}},e.prototype._validate=function(t,e,r,i,n){return(!n||!1!==n.validate)&&m.emitErrors(this,t.call(m,c.extend({key:e,style:this.serialize(),value:r,styleSpec:x},i)))},e.prototype._remove=function(){for(var t in A.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,r){for(var i=this,n=!1,o=!1,a={},s=0,l=i._order;s<l.length;s+=1){var u=l[s],c=i._layers[u];if("symbol"===c.type){if(!a[c.source]){var p=i.sourceCaches[c.source];a[c.source]=p.getRenderableIds().map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=i.crossTileSymbolIndex.addLayer(c,a[c.source]);n=n||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.now()))&&(this.pauseablePlacement=new T(t,this._order,d,e,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,f.now()),o=!0),n&&this.pauseablePlacement.placement.setStale()),o||n)for(var m=0,y=i._order;m<y.length;m+=1){var _=y[m],g=i._layers[_];"symbol"===g.type&&i.placement.updateLayerOpacities(g,a[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.now())},e.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r)},e.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},e}(i);e.exports=I},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../style-spec/reference/latest"),o=t("./validate_style"),a=t("../util/evented"),s=t("./properties"),l=s.Layout,u=s.Transitionable,c=(s.Transitioning,s.Properties,function(t){function e(e,r){for(var i in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},r.layout&&(this._unevaluatedLayout=new l(r.layout)),this._transitionablePaint=new u(r.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(null!==e&&void 0!==e){var i="layers."+this.id+".layout."+t;if(this._validate(o.layoutProperty,i,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return i.endsWith(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(null!==e&&void 0!==e){var n="layers."+this.id+".paint."+t;if(this._validate(o.paintProperty,n,t,e,r))return}i.endsWith(t,"-transition")?this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0):this._transitionablePaint.setValue(t,e)},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),i.filterObject(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,i,a){return(!a||!1!==a.validate)&&o.emitErrors(this,t.call(o,{key:e,layerType:this.type,objectKey:r,value:i,styleSpec:n,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e}(a));e.exports=c;var p={circle:t("./style_layer/circle_style_layer"),heatmap:t("./style_layer/heatmap_style_layer"),hillshade:t("./style_layer/hillshade_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer"),background:t("./style_layer/background_style_layer"),raster:t("./style_layer/raster_style_layer")};c.create=function(t){return new p[t.type](t)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("./background_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(t){function e(e){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i));e.exports=a},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty),l=(n.HeatmapColorProperty,new o({"background-color":new a(i.paint_background["background-color"]),"background-pattern":new s(i.paint_background["background-pattern"]),"background-opacity":new a(i.paint_background["background-opacity"])}));e.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("../../data/bucket/circle_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiPoint,a=t("../query_utils"),s=a.getMaximumPaintValue,l=a.translateDistance,u=a.translate,c=t("./circle_style_layer_properties"),p=t("../properties"),h=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new n(t)},e.prototype.queryRadius=function(t){var e=t;return s("circle-radius",this,e)+s("circle-stroke-width",this,e)+l(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a){var s=u(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),n,a),l=this.paint.get("circle-radius").evaluate(e)*a,c=this.paint.get("circle-stroke-width").evaluate(e)*a;return o(s,r,l+c)},e}(i));e.exports=h},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty,new o({"circle-radius":new s(i.paint_circle["circle-radius"]),"circle-color":new s(i.paint_circle["circle-color"]),"circle-blur":new s(i.paint_circle["circle-blur"]),"circle-opacity":new s(i.paint_circle["circle-opacity"]),"circle-translate":new a(i.paint_circle["circle-translate"]),"circle-translate-anchor":new a(i.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(i.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(i.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(i.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(i.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(i.paint_circle["circle-stroke-opacity"])}));e.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("../../data/bucket/fill_extrusion_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,l=a.translate,u=t("./fill_extrusion_style_layer_properties"),c=t("../properties"),p=(c.Transitionable,c.Transitioning,c.PossiblyEvaluated,function(t){function e(e){t.call(this,e,u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new n(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a){var s=l(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),n,a);return o(s,r)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(i));e.exports=p},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"fill-extrusion-opacity":new a(i["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(i["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(i["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(i["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new l(i["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(i["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(i["paint_fill-extrusion"]["fill-extrusion-base"])}));e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("../../data/bucket/fill_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,l=a.translate,u=t("./fill_style_layer_properties"),c=t("../properties"),p=(c.Transitionable,c.Transitioning,c.PossiblyEvaluated,function(t){function e(e){t.call(this,e,u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new n(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a){var s=l(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),n,a);return o(s,r)},e}(i));e.exports=p},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"fill-antialias":new a(i.paint_fill["fill-antialias"]),"fill-opacity":new s(i.paint_fill["fill-opacity"]),"fill-color":new s(i.paint_fill["fill-color"]),"fill-outline-color":new s(i.paint_fill["fill-outline-color"]),"fill-translate":new a(i.paint_fill["fill-translate"]),"fill-translate-anchor":new a(i.paint_fill["fill-translate-anchor"]),"fill-pattern":new l(i.paint_fill["fill-pattern"])}));e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("../../data/bucket/heatmap_bucket"),o=t("../../util/image").RGBAImage,a=t("./heatmap_style_layer_properties"),s=t("../properties"),l=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(t){function e(e){t.call(this,e,a),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new n(t)},e.prototype.setPaintProperty=function(e,r,i){t.prototype.setPaintProperty.call(this,e,r,i),"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){for(var t=this._transitionablePaint._values["heatmap-color"].value.expression,e=new Uint8Array(1024),r=e.length,i=4;i<r;i+=4){var n=t.evaluate({heatmapDensity:i/r});e[i+0]=Math.floor(255*n.r/n.a),e[i+1]=Math.floor(255*n.g/n.a),e[i+2]=Math.floor(255*n.b/n.a),e[i+3]=Math.floor(255*n.a)}this.colorRamp=new o({width:256,height:1},e),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(i));e.exports=l},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty),u=new o({"heatmap-radius":new s(i.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(i.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(i.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(i.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(i.paint_heatmap["heatmap-opacity"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("./hillshade_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(t){function e(e){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(i));e.exports=a},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty,n.HeatmapColorProperty,new o({"hillshade-illumination-direction":new a(i.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new a(i.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new a(i.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new a(i.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new a(i.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new a(i.paint_hillshade["hillshade-accent-color"])}));e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(t,e,r){"use strict";function i(t,e){return e>0?e+2*t:t}var n=t("@mapbox/point-geometry"),o=t("../style_layer"),a=t("../../data/bucket/line_bucket"),s=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiLine,l=t("../query_utils"),u=l.getMaximumPaintValue,c=l.translateDistance,p=l.translate,h=t("./line_style_layer_properties"),f=t("../../util/util").extend,d=t("../evaluation_parameters"),m=t("../properties"),y=(m.Transitionable,m.Transitioning,m.Layout,m.PossiblyEvaluated,new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new d(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,i){return r=f({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,i)},e}(m.DataDrivenProperty))(h.paint.properties["line-width"].specification));y.useIntegerZoom=!0;var _=function(t){function e(e){t.call(this,e,h)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=y.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new a(t)},e.prototype.queryRadius=function(t){var e=t,r=i(u("line-width",this,e),u("line-gap-width",this,e)),n=u("line-offset",this,e);return r/2+Math.abs(n)+c(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,o,a,l){var u=p(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,l),c=l/2*i(this.paint.get("line-width").evaluate(e),this.paint.get("line-gap-width").evaluate(e)),h=this.paint.get("line-offset").evaluate(e);return h&&(r=function(t,e){for(var r=[],i=new n(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],p=a[l+1],h=0===l?i:c.sub(u)._unit()._perp(),f=l===a.length-1?i:p.sub(c)._unit()._perp(),d=h._add(f)._unit(),m=d.x*f.x+d.y*f.y;d._mult(1/m),s.push(d._mult(e)._add(c))}r.push(s)}return r}(r,h*l)),s(u,r,c)},e}(o);e.exports=_},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"line-cap":new a(i.layout_line["line-cap"]),"line-join":new s(i.layout_line["line-join"]),"line-miter-limit":new a(i.layout_line["line-miter-limit"]),"line-round-limit":new a(i.layout_line["line-round-limit"])})),c=new o({"line-opacity":new s(i.paint_line["line-opacity"]),"line-color":new s(i.paint_line["line-color"]),"line-translate":new a(i.paint_line["line-translate"]),"line-translate-anchor":new a(i.paint_line["line-translate-anchor"]),"line-width":new s(i.paint_line["line-width"]),"line-gap-width":new s(i.paint_line["line-gap-width"]),"line-offset":new s(i.paint_line["line-offset"]),"line-blur":new s(i.paint_line["line-blur"]),"line-dasharray":new l(i.paint_line["line-dasharray"]),"line-pattern":new l(i.paint_line["line-pattern"])});e.exports={paint:c,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("./raster_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(t){function e(e){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i));e.exports=a},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty,n.HeatmapColorProperty,new o({"raster-opacity":new a(i.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(i.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(i.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(i.paint_raster["raster-brightness-max"]),"raster-saturation":new a(i.paint_raster["raster-saturation"]),"raster-contrast":new a(i.paint_raster["raster-contrast"]),"raster-fade-duration":new a(i.paint_raster["raster-fade-duration"])}));e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(t,e,r){"use strict";var i=t("../style_layer"),n=t("../../data/bucket/symbol_bucket"),o=t("../../util/token"),a=t("../../style-spec/expression").isExpression,s=t("./symbol_style_layer_properties"),l=t("../properties"),u=(l.Transitionable,l.Transitioning,l.Layout,l.PossiblyEvaluated,function(t){function e(e){t.call(this,e,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var r=this.layout.get(t).evaluate(e),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||a(i.value)?r:o(e.properties,r)},e.prototype.createBucket=function(t){return new n(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(i));e.exports=u},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(t,e,r){"use strict";var i=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty,new o({"symbol-placement":new a(i.layout_symbol["symbol-placement"]),"symbol-spacing":new a(i.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(i.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(i.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(i.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(i.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(i.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(i.layout_symbol["icon-size"]),"icon-text-fit":new a(i.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(i.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(i.layout_symbol["icon-image"]),"icon-rotate":new s(i.layout_symbol["icon-rotate"]),"icon-padding":new a(i.layout_symbol["icon-padding"]),"icon-keep-upright":new a(i.layout_symbol["icon-keep-upright"]),"icon-offset":new s(i.layout_symbol["icon-offset"]),"icon-anchor":new s(i.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(i.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(i.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(i.layout_symbol["text-rotation-alignment"]),"text-field":new s(i.layout_symbol["text-field"]),"text-font":new s(i.layout_symbol["text-font"]),"text-size":new s(i.layout_symbol["text-size"]),"text-max-width":new s(i.layout_symbol["text-max-width"]),"text-line-height":new a(i.layout_symbol["text-line-height"]),"text-letter-spacing":new s(i.layout_symbol["text-letter-spacing"]),"text-justify":new s(i.layout_symbol["text-justify"]),"text-anchor":new s(i.layout_symbol["text-anchor"]),"text-max-angle":new a(i.layout_symbol["text-max-angle"]),"text-rotate":new s(i.layout_symbol["text-rotate"]),"text-padding":new a(i.layout_symbol["text-padding"]),"text-keep-upright":new a(i.layout_symbol["text-keep-upright"]),"text-transform":new s(i.layout_symbol["text-transform"]),"text-offset":new s(i.layout_symbol["text-offset"]),"text-allow-overlap":new a(i.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(i.layout_symbol["text-ignore-placement"]),"text-optional":new a(i.layout_symbol["text-optional"])})),u=new o({"icon-opacity":new s(i.paint_symbol["icon-opacity"]),"icon-color":new s(i.paint_symbol["icon-color"]),"icon-halo-color":new s(i.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(i.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(i.paint_symbol["icon-halo-blur"]),"icon-translate":new a(i.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(i.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(i.paint_symbol["text-opacity"]),"text-color":new s(i.paint_symbol["text-color"]),"text-halo-color":new s(i.paint_symbol["text-halo-color"]),"text-halo-width":new s(i.paint_symbol["text-halo-width"]),"text-halo-blur":new s(i.paint_symbol["text-halo-blur"]),"text-translate":new a(i.paint_symbol["text-translate"]),"text-translate-anchor":new a(i.paint_symbol["text-translate-anchor"])});e.exports={paint:u,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(t,e,r){"use strict";var i=t("./style_layer"),n=t("../util/util"),o=t("../style-spec/feature_filter"),a=t("../style-spec/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e){for(var r=this,s=0,l=t;s<l.length;s+=1){var u=l[s];r._layerConfigs[u.id]=u;var c=r._layers[u.id]=i.create(u);c._featureFilter=o(c.filter)}for(var p=0,h=e;p<h.length;p+=1){var f=h[p];delete r._layerConfigs[f],delete r._layers[f]}this.familiesBySource={};for(var d=0,m=a(n.values(this._layerConfigs));d<m.length;d+=1){var y=m[d].map(function(t){return r._layers[t.id]}),_=y[0];if("none"!==_.visibility){var g=_.source||"",v=r.familiesBySource[g];v||(v=r.familiesBySource[g]={});var x=_.sourceLayer||"_geojsonTileLayer",b=v[x];b||(b=v[x]=[]),b.push(y)}}},e.exports=s},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(t,e,r){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var r=0,i=e;r<i.length;r+=1){var n=i[r].message;t.fire("error",{error:new Error(n)})}return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(t,e,r){"use strict";var i=function(){this.first=!0};i.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))},e.exports=i},{}],213:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry"),n=t("../util/web_worker_transfer").register,o=function(t){function e(e,r,i,n){t.call(this,e,r),this.angle=i,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);n("Anchor",o),e.exports=o},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<r/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>n)return!1;a++,s+=p.dist(h)}return!0}},{}],215:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry");e.exports=function(t,e,r,n,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<e&&h.x<e||(p.x<e?p=new i(e,p.y+(h.y-p.y)*((e-p.x)/(h.x-p.x)))._round():h.x<e&&(h=new i(e,p.y+(h.y-p.y)*((e-p.x)/(h.x-p.x)))._round()),p.y<r&&h.y<r||(p.y<r?p=new i(p.x+(h.x-p.x)*((r-p.y)/(h.y-p.y)),r)._round():h.y<r&&(h=new i(p.x+(h.x-p.x)*((r-p.y)/(h.y-p.y)),r)._round()),p.x>=n&&h.x>=n||(p.x>=n?p=new i(n,p.y+(h.y-p.y)*((n-p.x)/(h.x-p.x)))._round():h.x>=n&&(h=new i(n,p.y+(h.y-p.y)*((n-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new i(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new i(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(h)))))}return a}},{"@mapbox/point-geometry":4}],216:[function(t,e,r){"use strict";var i=function(t,e,r,i,n,o,a,s,l,u,c){var p=a.top*s-l,h=a.bottom*s+l,f=a.left*s-l,d=a.right*s+l;if(this.boxStartIndex=t.length,u){var m=h-p,y=d-f;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(t,e,r,r.segment,y,m,i,n,o,c))}else t.emplaceBack(r.x,r.y,f,p,d,h,i,n,o,0,0);this.boxEndIndex=t.length};i.prototype._addLineCollisionCircles=function(t,e,r,i,n,o,a,s,l,u){var c=o/2,p=Math.floor(n/c),h=1+.4*Math.log(u)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=r,y=i+1,_=d,g=-n/2,v=g-n/4;do{if(--y<0){if(_>g)return;y=0;break}_-=e[y].dist(m),m=e[y]}while(_>v);for(var x=e[y].dist(e[y+1]),b=-f;b<p+f;b++){var w=b*c,S=g+w;if(w<0&&(S+=w),w>n&&(S+=w-n),!(S<_)){for(;_+x<S;){if(_+=x,++y+1>=e.length)return;x=e[y].dist(e[y+1])}var A=S-_,T=e[y],z=e[y+1].sub(T)._unit()._mult(A)._add(T)._round(),E=Math.abs(S-d)<c?0:.8*(S-d);t.emplaceBack(z.x,z.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,E)}}},e.exports=i},{}],217:[function(t,e,r){"use strict";function i(t,e,r){t[e+4]=r?1:0}var n=t("@mapbox/point-geometry"),o=t("../util/intersection_tests"),a=t("./grid_index"),s=(t("@mapbox/gl-matrix").mat4,t("../symbol/projection")),l=function(t,e,r){void 0===e&&(e=new a(t.width+200,t.height+200,25)),void 0===r&&(r=new a(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100};l.prototype.placeCollisionBox=function(t,e,r,i){var n=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),o=r*n.perspectiveRatio,a=t.x1*o+n.point.x,s=t.y1*o+n.point.y,l=t.x2*o+n.point.x,u=t.y2*o+n.point.y;return!e&&this.grid.hitTest(a,s,l,u)?{box:[],offscreen:!1}:{box:[a,s,l,u],offscreen:this.isOffscreen(a,s,l,u)}},l.prototype.approximateTileDistance=function(t,e,r,i,n){var o=n?1:i/this.pitchfactor,a=t.lastSegmentViewportDistance*r;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},l.prototype.placeCollisionCircles=function(t,e,r,o,a,l,u,c,p,h,f,d,m){var y=this,_=[],g=this.projectAnchor(h,l.anchorX,l.anchorY),v=p/24,x=l.lineOffsetX*p,b=l.lineOffsetY*p,w=new n(l.anchorX,l.anchorY),S=s.project(w,f).point,A=s.placeFirstAndLastGlyph(v,c,x,b,!1,S,w,l,u,f,{},!0),T=!1,z=!0,E=g.perspectiveRatio*o,k=1/(o*r),C=0,I=0;A&&(C=this.approximateTileDistance(A.first.tileDistance,A.first.angle,k,g.cameraDistance,m),I=this.approximateTileDistance(A.last.tileDistance,A.last.angle,k,g.cameraDistance,m));for(var M=0;M<t.length;M+=5){var P=t[M],L=t[M+1],D=t[M+2],B=t[M+3];if(!A||B<-C||B>I)i(t,M,!1);else{var R=y.projectPoint(h,P,L),O=D*E;if(_.length>0){var F=R.x-_[_.length-4],V=R.y-_[_.length-3];if(O*O*2>F*F+V*V&&M+8<t.length){var j=t[M+8];if(j>-C&&j<I){i(t,M,!1);continue}}}var N=M/5;if(_.push(R.x,R.y,O,N),i(t,M,!0),z=z&&y.isOffscreen(R.x-O,R.y-O,R.x+O,R.y+O),!e&&y.grid.hitTestCircle(R.x,R.y,O)){if(!d)return{circles:[],offscreen:!1};T=!0}}}return{circles:T?[]:_,offscreen:z}},l.prototype.queryRenderedSymbols=function(t,e,r,i,a,s){var l={},u=[];if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return u;for(var c=this.transform.calculatePosMatrix(e.toUnwrapped()),p=[],h=1/0,f=1/0,d=-1/0,m=-1/0,y=0;y<t.length;y++)for(var _=t[y],g=0;g<_.length;g++){var v=this.projectPoint(c,_[g].x,_[g].y);h=Math.min(h,v.x),f=Math.min(f,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y),p.push(v)}for(var x=e.key,b=[],w=this.grid.query(h,f,d,m),S=0;S<w.length;S++)w[S].sourceID===a&&w[S].tileID===x&&s[w[S].bucketInstanceId]&&b.push(w[S].boxIndex);for(var A=this.ignoredGrid.query(h,f,d,m),T=0;T<A.length;T++)A[T].sourceID===a&&A[T].tileID===x&&s[A[T].bucketInstanceId]&&b.push(A[T].boxIndex);for(var z=0;z<b.length;z++){var E=i.get(b[z]),k=E.sourceLayerIndex,C=E.featureIndex,I=E.bucketIndex;if(void 0===l[k]&&(l[k]={}),void 0===l[k][C]&&(l[k][C]={}),!l[k][C][I]){var M=this.projectAndGetPerspectiveRatio(c,E.anchorPointX,E.anchorPointY),P=r*M.perspectiveRatio,L=E.x1*P+M.point.x,D=E.y1*P+M.point.y,B=E.x2*P+M.point.x,R=E.y2*P+M.point.y,O=[new n(L,D),new n(B,D),new n(B,R),new n(L,R)];o.polygonIntersectsPolygon(p,O)&&(l[k][C][I]=!0,u.push(b[z]))}}return u},l.prototype.insertCollisionBox=function(t,e,r,i,n,o){var a={tileID:r,sourceID:i,bucketInstanceId:n,boxIndex:o};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},l.prototype.insertCollisionCircles=function(t,e,r,i,n,o){for(var a=e?this.ignoredGrid:this.grid,s=0;s<t.length;s+=4){var l={tileID:r,sourceID:i,bucketInstanceId:n,boxIndex:o+t[s+3]};a.insertCircle(l,t[s],t[s+1],t[s+2])}},l.prototype.projectAnchor=function(t,e,r){var i=[e,r,0,1];return s.xyTransformMat4(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},l.prototype.projectPoint=function(t,e,r){var i=[e,r,0,1];return s.xyTransformMat4(i,i,t),new n((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},l.prototype.projectAndGetPerspectiveRatio=function(t,e,r){var i=[e,r,0,1];return s.xyTransformMat4(i,i,t),{point:new n((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},l.prototype.isOffscreen=function(t,e,r,i){return r<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},e.exports=l},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(t,e,r){"use strict";var i=t("../data/extent"),n=512/i/2,o=function(t,e,r){var i=this;this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.key;i.indexedSymbolInstances[s]||(i.indexedSymbolInstances[s]=[]),i.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:i.getScaledCoordinates(a,t)})}};o.prototype.getScaledCoordinates=function(t,e){var r=e.canonical.z-this.tileID.canonical.z,o=n/Math.pow(2,r),a=t.anchor;return{x:Math.floor((e.canonical.x*i+a.x)*o),y:Math.floor((e.canonical.y*i+a.y)*o)}},o.prototype.findMatches=function(t,e,r){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0,o=t;n<o.length;n+=1){var a=o[n];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var l=this.getScaledCoordinates(a,e),u=0,c=s;u<c.length;u+=1){var p=c[u];if(Math.abs(p.coord.x-l.x)<=i&&Math.abs(p.coord.y-l.y)<=i&&!r[p.crossTileID]){r[p.crossTileID]=!0,a.crossTileID=p.crossTileID;break}}}}};var a=function(){this.maxCrossTileID=0};a.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0,n=e.symbolInstances;i<n.length;i+=1)n[i].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var a=this.usedCrossTileIDs[t.overscaledZ];for(var s in this.indexes){var l=this.indexes[s];if(Number(s)>t.overscaledZ)for(var u in l){var c=l[u];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,a)}else{var p=l[t.scaledTo(Number(s)).key];p&&p.findMatches(e.symbolInstances,t,a)}}for(var h=0,f=e.symbolInstances;h<f.length;h+=1){var d=f[h];d.crossTileID||(d.crossTileID=r.generate(),a[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new o(t,e.symbolInstances,e.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var i=0,n=e.indexedSymbolInstances[r];i<n.length;i+=1){var o=n[i];delete this.usedCrossTileIDs[t][o.crossTileID]}},s.prototype.removeStaleBuckets=function(t){var e=this,r=!1;for(var i in e.indexes){var n=e.indexes[i];for(var o in n)t[n[o].bucketInstanceId]||(e.removeBucketCrossTileIDs(i,n[o]),delete n[o],r=!0)}return r};var l=function(){this.layerIndexes={},this.crossTileIDs=new a,this.maxBucketInstanceId=0};l.prototype.addLayer=function(t,e){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new s);for(var i=!1,n={},o=0,a=e;o<a.length;o+=1){var l=a[o],u=l.getBucket(t);u&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),n[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(n)&&(i=!0),i},l.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[r]||delete this.layerIndexes[r]},e.exports=l},{"../data/extent":53}],219:[function(t,e,r){"use strict";var i=t("../style-spec/util/interpolate").number,n=t("../symbol/anchor"),o=t("./check_max_angle");e.exports=function(t,e,r,a,s,l,u,c,p){var h=a?.6*l*u:0,f=Math.max(a?a.right-a.left:0,s?s.right-s.left:0),d=0===t[0].x||t[0].x===p||0===t[0].y||t[0].y===p;return e-f*u<e/4&&(e=f*u+e/4),function t(e,r,a,s,l,u,c,p,h){for(var f=u/2,d=0,m=0;m<e.length-1;m++)d+=e[m].dist(e[m+1]);for(var y=0,_=r-a,g=[],v=0;v<e.length-1;v++){for(var x=e[v],b=e[v+1],w=x.dist(b),S=b.angleTo(x);_+a<y+w;){var A=((_+=a)-y)/w,T=i(x.x,b.x,A),z=i(x.y,b.y,A);if(T>=0&&T<h&&z>=0&&z<h&&_-f>=0&&_+f<=d){var E=new n(T,z,S,v);E._round(),s&&!o(e,E,u,s,l)||g.push(E)}}y+=w}return p||g.length||c||(g=t(e,y/2,a,s,l,u,c,!0,h)),g}(t,d?e/2*c%e:(f/2+2*l)*u*c%e,e,h,r,f*u,d,!1,p)}},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(t,e,r){"use strict";var i=function(t,e,r){var i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};i.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},i.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},i.prototype.insertCircle=function(t,e,r,i){this._forEachCell(e-i,r-i,e+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(i)},i.prototype._insertBoxCell=function(t,e,r,i,n,o){this.boxCells[n].push(o)},i.prototype._insertCircleCell=function(t,e,r,i,n,o){this.circleCells[n].push(o)},i.prototype._query=function(t,e,r,i,n){if(r<0||t>this.width||i<0||e>this.height)return!n&&[];var o=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=i)o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:n,seenUids:{box:{},circle:{}}};this._forEachCell(t,e,r,i,this._queryCell,o,a)}return n?o.length>0:o},i.prototype._queryCircle=function(t,e,r,i){var n=t-r,o=t+r,a=e-r,s=e+r;if(o<0||n>this.width||s<0||a>this.height)return!i&&[];var l=[],u={hitTest:i,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(n,a,o,s,this._queryCellCircle,l,u),i?l.length>0:l},i.prototype.query=function(t,e,r,i){return this._query(t,e,r,i,!1)},i.prototype.hitTest=function(t,e,r,i){return this._query(t,e,r,i,!0)},i.prototype.hitTestCircle=function(t,e,r){return this._queryCircle(t,e,r,!0)},i.prototype._queryCell=function(t,e,r,i,n,o,a){var s=this,l=a.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&i>=c[d+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[f])}}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,_=0,g=m;_<g.length;_+=1){var v=g[_];if(!l.circle[v]){l.circle[v]=!0;var x=3*v;if(s._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,r,i)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[v])}}}},i.prototype._queryCellCircle=function(t,e,r,i,n,o,a){var s=a.circle,l=a.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[d+0],c[d+1],c[d+2],c[d+3]))return o.push(!0),!0}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,_=0,g=m;_<g.length;_+=1){var v=g[_];if(!l.circle[v]){l.circle[v]=!0;var x=3*v;if(this._circlesCollide(y[x],y[x+1],y[x+2],s.x,s.y,s.radius))return o.push(!0),!0}}},i.prototype._forEachCell=function(t,e,r,i,n,o,a){for(var s=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),u=this._convertToXCellCoord(r),c=this._convertToYCellCoord(i),p=s;p<=u;p++)for(var h=l;h<=c;h++){var f=this.xCellCount*h+p;if(n.call(this,t,e,r,i,f,o,a))return}},i.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},i.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},i.prototype._circlesCollide=function(t,e,r,i,n,o){var a=i-t,s=n-e,l=r+o;return l*l>a*a+s*s},i.prototype._circleAndRectCollide=function(t,e,r,i,n,o,a){var s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+r)return!1;var u=(a-n)/2,c=Math.abs(e-(n+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r},e.exports=i},{}],221:[function(t,e,r){"use strict";e.exports=function(t){function e(e){s.push(t[e]),l++}function r(t,e,r){var i=a[t];return delete a[t],a[e]=i,s[i].geometry[0].pop(),s[i].geometry[0]=s[i].geometry[0].concat(r[0]),i}function i(t,e,r){var i=o[e];return delete o[e],o[t]=i,s[i].geometry[0].shift(),s[i].geometry[0]=r[0].concat(s[i].geometry[0]),i}function n(t,e,r){var i=r?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var o={},a={},s=[],l=0,u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text;if(h){var f=n(h,p),d=n(h,p,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=i(f,d,p),y=r(f,d,s[m].geometry);delete o[f],delete a[d],a[n(h,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?r(f,d,p):d in o?i(f,d,p):(e(u),o[f]=l-1,a[d]=l-1)}else e(u)}return s.filter(function(t){return t.geometry})}},{}],222:[function(t,e,r){"use strict";var i=t("../util/web_worker_transfer").register,n=function(){this.opacity=0,this.targetOpacity=0,this.time=0};n.prototype.clone=function(){var t=new n;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},i("OpacityState",n),e.exports=n},{"../util/web_worker_transfer":278}],223:[function(t,e,r){"use strict";function i(t,e,r){t.emplaceBack(e?1:0,r?1:0),t.emplaceBack(e?1:0,r?1:0),t.emplaceBack(e?1:0,r?1:0),t.emplaceBack(e?1:0,r?1:0)}function n(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*m+e*y+r*_+e*g+r*v+e*x+r*b+e}var o=t("./collision_index"),a=t("../data/extent"),s=t("./symbol_size"),l=t("./projection"),u=t("../style/style_layer/symbol_style_layer_properties").layout,c=t("../source/pixels_to_tile_units"),p=function(t,e,r,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&r?1:0,this.placed=r};p.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var h=function(t,e,r,i,n){this.text=new p(t?t.text:null,e,r,n),this.icon=new p(t?t.icon:null,e,i,n)};h.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var f=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},d=function(t,e){this.transform=t.clone(),this.collisionIndex=new o(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e};d.prototype.placeLayerTile=function(t,e,r,i){var n=e.getBucket(t);if(n){var o=n.layers[0].layout,s=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),u=e.tileSize/a,p=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),h=l.getLabelPlaneMatrix(p,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,c(e,1,this.transform.zoom)),f=l.getLabelPlaneMatrix(p,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,c(e,1,this.transform.zoom));this.placeLayerBucket(n,p,h,f,s,u,r,i,e.collisionBoxArray,e.tileID.key,t.source)}},d.prototype.placeLayerBucket=function(t,e,r,i,n,o,a,l,c,p,h){for(var d=this,m=t.layers[0].layout,y=s.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,u.properties["text-size"]),_=!t.hasTextData()||m.get("text-optional"),g=!t.hasIconData()||m.get("icon-optional"),v=0,x=t.symbolInstances;v<x.length;v+=1){var b=x[v];if(!l[b.crossTileID]){var w=!1,S=!1,A=!0,T=null,z=null,E=null;b.collisionArrays||(b.collisionArrays=t.deserializeCollisionBoxes(c,b.textBoxStartIndex,b.textBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex)),b.collisionArrays.textBox&&(w=(T=d.collisionIndex.placeCollisionBox(b.collisionArrays.textBox,m.get("text-allow-overlap"),o,e)).box.length>0,A=A&&T.offscreen);var k=b.collisionArrays.textCircles;if(k){var C=t.text.placedSymbolArray.get(b.placedTextSymbolIndices[0]),I=s.evaluateSizeForFeature(t.textSizeData,y,C);z=d.collisionIndex.placeCollisionCircles(k,m.get("text-allow-overlap"),n,o,b.key,C,t.lineVertexArray,t.glyphOffsetArray,I,e,r,a,"map"===m.get("text-pitch-alignment")),w=m.get("text-allow-overlap")||z.circles.length>0,A=A&&z.offscreen}b.collisionArrays.iconBox&&(S=(E=d.collisionIndex.placeCollisionBox(b.collisionArrays.iconBox,m.get("icon-allow-overlap"),o,e)).box.length>0,A=A&&E.offscreen),_||g?g?_||(S=S&&w):w=S&&w:S=w=S&&w,w&&T&&d.collisionIndex.insertCollisionBox(T.box,m.get("text-ignore-placement"),p,h,t.bucketInstanceId,b.textBoxStartIndex),S&&E&&d.collisionIndex.insertCollisionBox(E.box,m.get("icon-ignore-placement"),p,h,t.bucketInstanceId,b.iconBoxStartIndex),w&&z&&d.collisionIndex.insertCollisionCircles(z.circles,m.get("text-ignore-placement"),p,h,t.bucketInstanceId,b.textBoxStartIndex),d.placements[b.crossTileID]=new f(w,S,A||t.justReloaded),l[b.crossTileID]=!0}}t.justReloaded=!1},d.prototype.commit=function(t,e){var r=this;this.commitTime=e;var i=!1,n=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,o=t?t.opacities:{};for(var a in r.placements){var s=r.placements[a],l=o[a];l?(r.opacities[a]=new h(l,n,s.text,s.icon),i=i||s.text!==l.text.placed||s.icon!==l.icon.placed):(r.opacities[a]=new h(null,n,s.text,s.icon,s.skipFade),i=i||s.text||s.icon)}for(var u in o){var c=o[u];if(!r.opacities[u]){var p=new h(c,n,!1,!1);p.isHidden()||(r.opacities[u]=p,i=i||c.text.placed||c.icon.placed)}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},d.prototype.updateLayerOpacities=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1){var o=n[i],a=o.getBucket(t);a&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},d.prototype.updateBucketOpacities=function(t,e,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var o=t.layers[0].layout,a=new h(null,0,o.get("text-allow-overlap"),o.get("icon-allow-overlap"),!0),s=0;s<t.symbolInstances.length;s++){var l=t.symbolInstances[s],u=e[l.crossTileID],c=this.opacities[l.crossTileID];c?u&&(c=a):(c=a,this.opacities[l.crossTileID]=c),e[l.crossTileID]=!0;var p=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,f=l.numIconVertices>0;if(p){for(var d=n(c.text),m=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,y=0;y<m;y++)t.text.opacityVertexArray.emplaceBack(d);for(var _=0,g=l.placedTextSymbolIndices;_<g.length;_+=1){var v=g[_];t.text.placedSymbolArray.get(v).hidden=c.text.isHidden()}}if(f){for(var x=n(c.icon),b=0;b<l.numIconVertices/4;b++)t.icon.opacityVertexArray.emplaceBack(x);t.icon.placedSymbolArray.get(s).hidden=c.icon.isHidden()}l.collisionArrays||(l.collisionArrays=t.deserializeCollisionBoxes(r,l.textBoxStartIndex,l.textBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex));var w=l.collisionArrays;if(w){w.textBox&&t.hasCollisionBoxData()&&i(t.collisionBox.collisionVertexArray,c.text.placed,!1),w.iconBox&&t.hasCollisionBoxData()&&i(t.collisionBox.collisionVertexArray,c.icon.placed,!1);var S=w.textCircles;if(S&&t.hasCollisionCircleData())for(var A=0;A<S.length;A+=5){var T=u||0===S[A+4];i(t.collisionCircle.collisionVertexArray,c.text.placed,T)}}}t.sortFeatures(this.transform.angle),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},d.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},d.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},d.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},d.prototype.setStale=function(){this.stale=!0};var m=Math.pow(2,25),y=Math.pow(2,24),_=Math.pow(2,17),g=Math.pow(2,16),v=Math.pow(2,9),x=Math.pow(2,8),b=Math.pow(2,1);e.exports=d},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(t,e,r){"use strict";function i(t,e){var r=[t.x,t.y,0,1];p(r,r,e);var i=r[3];return{point:new h(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function n(t,e){var r=t[0]/t[3],i=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&i>=-e[1]&&i<=e[1]}function o(t,e,r,i,n,o,a,s,l,c,p,h){var f=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(f-1),g=u(t*y,r,i,n,o,a,s.segment,d,m,l,c,p,h);if(!g)return null;var v=u(t*_,r,i,n,o,a,s.segment,d,m,l,c,p,h);return v?{first:g,last:v}:null}function a(t,e,r,i){return t===v.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*i?{useVertical:!0}:(t===v.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function s(t,e,r,n,s,c,p,f,d,m,y,g,v,x){var b,w=e/24,S=t.lineOffsetX*e,A=t.lineOffsetY*e;if(t.numGlyphs>1){var T=t.glyphStartIndex+t.numGlyphs,z=t.lineStartIndex,E=t.lineStartIndex+t.lineLength,k=o(w,f,S,A,r,y,g,t,d,c,v,!1);if(!k)return{notEnoughRoom:!0};var C=i(k.first.point,p).point,I=i(k.last.point,p).point;if(n&&!r){var M=a(t.writingMode,C,I,x);if(M)return M}b=[k.first];for(var P=t.glyphStartIndex+1;P<T-1;P++)b.push(u(w*f.getoffsetX(P),S,A,r,y,g,t.segment,z,E,d,c,v,!1));b.push(k.last)}else{if(n&&!r){var L=i(g,s).point,D=t.lineStartIndex+t.segment+1,B=new h(d.getx(D),d.gety(D)),R=i(B,s),O=R.signedDistanceFromCamera>0?R.point:l(g,B,L,1,s),F=a(t.writingMode,L,O,x);if(F)return F}var V=u(w*f.getoffsetX(t.glyphStartIndex),S,A,r,y,g,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,d,c,v,!1);if(!V)return{notEnoughRoom:!0};b=[V]}for(var j=0,N=b;j<N.length;j+=1){var U=N[j];_(m,U.point,U.angle)}return{}}function l(t,e,r,n,o){var a=i(t.add(t.sub(e)._unit()),o).point,s=r.sub(a);return r.add(s._mult(n/s.mag()))}function u(t,e,r,n,o,a,s,u,c,p,f,d,m){var y=n?t-e:t+e,_=y>0?1:-1,g=0;n&&(_*=-1,g=Math.PI),_<0&&(g+=Math.PI);for(var v=_>0?u+s:u+s+1,x=v,b=o,w=o,S=0,A=0,T=Math.abs(y);S+A<=T;){if((v+=_)<u||v>=c)return null;if(w=b,void 0===(b=d[v])){var z=new h(p.getx(v),p.gety(v)),E=i(z,f);if(E.signedDistanceFromCamera>0)b=d[v]=E.point;else{var k=v-_;b=l(0===S?a:new h(p.getx(k),p.gety(k)),z,w,T-S+1,f)}}S+=A,A=w.dist(b)}var C=(T-S)/A,I=b.sub(w),M=I.mult(C)._add(w);return M._add(I._unit()._perp()._mult(r*_)),{point:M,angle:g+Math.atan2(b.y-w.y,b.x-w.x),tileDistance:m?{prevTileDistance:v-_===x?0:p.gettileUnitDistanceFromAnchor(v-_),lastSegmentViewportDistance:T-S}:null}}function c(t,e){for(var r=0;r<t;r++){var i=e.length;e.resize(i+4),e.float32.set(x,3*i)}}function p(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t[3]=r[3]*i+r[7]*n+r[15],t}var h=t("@mapbox/point-geometry"),f=t("@mapbox/gl-matrix"),d=f.mat4,m=f.vec4,y=t("./symbol_size"),_=t("../data/bucket/symbol_bucket").addDynamicAttributes,g=t("../style/style_layer/symbol_style_layer_properties").layout,v=t("../symbol/shaping").WritingMode;e.exports={updateLineLabels:function(t,e,r,o,a,l,u,p){var f=o?t.textSizeData:t.iconSizeData,d=y.evaluateSizeForZoom(f,r.transform.zoom,g.properties[o?"text-size":"icon-size"]),_=[256/r.width*2+1,256/r.height*2+1],x=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;x.clear();for(var b=t.lineVertexArray,w=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,S=r.transform.width/r.transform.height,A=!1,T=0;T<w.length;T++){var z=w.get(T);if(z.hidden||z.writingMode===v.vertical&&!A)c(z.numGlyphs,x);else{A=!1;var E=[z.anchorX,z.anchorY,0,1];if(m.transformMat4(E,E,e),n(E,_)){var k=.5+E[3]/r.transform.cameraToCenterDistance*.5,C=y.evaluateSizeForFeature(f,d,z),I=u?C*k:C/k,M=new h(z.anchorX,z.anchorY),P=i(M,a).point,L={},D=s(z,I,!1,p,e,a,l,t.glyphOffsetArray,b,x,P,M,L,S);A=D.useVertical,(D.notEnoughRoom||A||D.needsFlipping&&s(z,I,!0,p,e,a,l,t.glyphOffsetArray,b,x,P,M,L,S).notEnoughRoom)&&c(z.numGlyphs,x)}else c(z.numGlyphs,x)}}o?t.text.dynamicLayoutVertexBuffer.updateData(x):t.icon.dynamicLayoutVertexBuffer.updateData(x)},getLabelPlaneMatrix:function(t,e,r,i,n){var o=d.identity(new Float32Array(16));return e?(d.identity(o),d.scale(o,o,[1/n,1/n,1]),r||d.rotateZ(o,o,i.angle)):(d.scale(o,o,[i.width/2,-i.height/2,1]),d.translate(o,o,[1,-1,0]),d.multiply(o,o,t)),o},getGlCoordMatrix:function(t,e,r,i,n){var o=d.identity(new Float32Array(16));return e?(d.multiply(o,o,t),d.scale(o,o,[n,n,1]),r||d.rotateZ(o,o,-i.angle)):(d.scale(o,o,[1,-1,1]),d.translate(o,o,[-1,-1,0]),d.scale(o,o,[2/i.width,2/i.height,1])),o},project:i,placeFirstAndLastGlyph:o,xyTransformMat4:p};var x=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry"),n=t("../style/parse_glyph_pbf").GLYPH_PBF_BORDER;e.exports={getIconQuads:function(t,e,r,n,o,a,s){var l,u,c,p,h=e.image,f=r.layout,d=e.top-1/h.pixelRatio,m=e.left-1/h.pixelRatio,y=e.bottom+1/h.pixelRatio,_=e.right+1/h.pixelRatio;if("none"!==f.get("icon-text-fit")&&o){var g=_-m,v=y-d,x=f.get("text-size").evaluate(s)/24,b=o.left*x,w=o.right*x,S=o.top*x,A=w-b,T=o.bottom*x-S,z=f.get("icon-text-fit-padding")[0],E=f.get("icon-text-fit-padding")[1],k=f.get("icon-text-fit-padding")[2],C=f.get("icon-text-fit-padding")[3],I="width"===f.get("icon-text-fit")?.5*(T-v):0,M="height"===f.get("icon-text-fit")?.5*(A-g):0,P="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?A:g,L="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?T:v;l=new i(b+M-C,S+I-z),u=new i(b+M+E+P,S+I-z),c=new i(b+M+E+P,S+I+k+L),p=new i(b+M-C,S+I+k+L)}else l=new i(m,d),u=new i(_,d),c=new i(_,y),p=new i(m,y);var D=r.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(D){var B=Math.sin(D),R=Math.cos(D),O=[R,-B,B,R];l._matMult(O),u._matMult(O),p._matMult(O),c._matMult(O)}return[{tl:l,tr:u,bl:p,br:c,tex:{x:h.textureRect.x-1,y:h.textureRect.y-1,w:h.textureRect.w+2,h:h.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]},getGlyphQuads:function(t,e,r,o,a,s,l){for(var u=r.layout.get("text-rotate").evaluate(s)*Math.PI/180,c=r.layout.get("text-offset").evaluate(s).map(function(t){return 24*t}),p=e.positionedGlyphs,h=[],f=0;f<p.length;f++){var d=p[f],m=l[d.glyph];if(m){var y=m.rect;if(y){var _=n+1,g=m.metrics.advance/2,v=o?[d.x+g,d.y]:[0,0],x=o?[0,0]:[d.x+g+c[0],d.y+c[1]],b=m.metrics.left-_-g+x[0],w=-m.metrics.top-_+x[1],S=b+y.w,A=w+y.h,T=new i(b,w),z=new i(S,w),E=new i(b,A),k=new i(S,A);if(o&&d.vertical){var C=new i(-g,g),I=-Math.PI/2,M=new i(5,0);T._rotateAround(I,C)._add(M),z._rotateAround(I,C)._add(M),E._rotateAround(I,C)._add(M),k._rotateAround(I,C)._add(M)}if(u){var P=Math.sin(u),L=Math.cos(u),D=[L,-P,P,L];T._matMult(D),z._matMult(D),E._matMult(D),k._matMult(D)}h.push({tl:T,tr:z,bl:E,br:k,tex:y,writingMode:e.writingMode,glyphOffset:v})}}}return h}}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(t,e,r){"use strict";function i(t,e,r,i){var n=Math.pow(t-e,2);return i?t<e?n/2:2*n:n+Math.abs(r)*r}function n(t,e){var r=0;return 10===t&&(r-=1e4),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function o(t,e,r,n,o,a){for(var s=null,l=i(e,r,o,a),u=0,c=n;u<c.length;u+=1){var p=c[u],h=i(e-p.x,r,o,a)+p.badness;h<=l&&(s=p,l=h)}return{index:t,x:e,priorBreak:s,badness:l}}function a(t,e,r,i){if(!r)return[];if(!t)return[];for(var a=[],s=function(t,e,r,i){for(var n=0,o=0;o<t.length;o++){var a=i[t.charCodeAt(o)];a&&(n+=a.metrics.advance+e)}return n/Math.max(1,Math.ceil(n/r))}(t,e,r,i),l=0,c=0;c<t.length;c++){var p=t.charCodeAt(c),h=i[p];h&&!f[p]&&(l+=h.metrics.advance+e),c<t.length-1&&(d[p]||u.charAllowsIdeographicBreaking(p))&&a.push(o(c+1,l,s,a,n(p,t.charCodeAt(c+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(o(t.length,l,s,a,0,!0))}function s(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function l(t,e,r,i,n){if(n){var o=e[t[i].glyph];if(o)for(var a=o.metrics.advance,s=(t[i].x+a)*n,l=r;l<=i;l++)t[l].x-=s}}var u=t("../util/script_detection"),c=t("../util/verticalize_punctuation"),p=t("../source/rtl_text_plugin"),h={horizontal:1,vertical:2,horizontalOnly:3};e.exports={shapeText:function(t,e,r,i,n,o,f,d,m,y){var _=t.trim();y===h.vertical&&(_=c(_));var g=[],v={positionedGlyphs:g,text:_,top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:y},x=p.processBidirectionalText;return function(t,e,r,i,n,o,a,c,p){for(var f=0,d=-17,m=0,y=t.positionedGlyphs,_="right"===o?1:"left"===o?0:.5,g=0,v=r;g<v.length;g+=1){var x=v[g];if((x=x.trim()).length){for(var b=y.length,w=0;w<x.length;w++){var S=x.charCodeAt(w),A=e[S];A&&(u.charHasUprightVerticalOrientation(S)&&a!==h.horizontal?(y.push({glyph:S,x:f,y:0,vertical:!0}),f+=p+c):(y.push({glyph:S,x:f,y:d,vertical:!1}),f+=A.metrics.advance+c))}if(y.length!==b){var T=f-c;m=Math.max(T,m),l(y,e,b,y.length-1,_)}f=0,d+=i}else d+=i}var z=s(n),E=z.horizontalAlign,k=z.verticalAlign;!function(t,e,r,i,n,o,a){for(var s=(e-r)*n,l=(-i*a+.5)*o,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}(y,_,E,k,m,i,r.length);var C=r.length*i;t.top+=-k*C,t.bottom=t.top+C,t.left+=-E*m,t.right=t.left+m}(v,e,x?x(_,a(_,f,r,e)):function(t,e){for(var r=[],i=0,n=0,o=e;n<o.length;n+=1){var a=o[n];r.push(t.substring(i,a)),i=a}return i<t.length&&r.push(t.substring(i,t.length)),r}(_,a(_,f,r,e)),i,n,o,y,f,m),!!g.length&&v},shapeIcon:function(t,e,r){var i=s(r),n=i.horizontalAlign,o=i.verticalAlign,a=e[0],l=e[1],u=a-t.displaySize[0]*n,c=u+t.displaySize[0],p=l-t.displaySize[1]*o;return{image:t,top:p,bottom:p+t.displaySize[1],left:u,right:c}},WritingMode:h};var f={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(t,e,r){"use strict";function i(t,e,r,i,c,p){var h=p.layoutTextSize.evaluate(e),d=p.layoutIconSize.evaluate(e),m=p.textMaxSize.evaluate(e);void 0===m&&(m=h);var v=t.layers[0].layout,A=v.get("text-offset").evaluate(e),T=v.get("icon-offset").evaluate(e),z=h/24,E=t.tilePixelRatio*z,k=t.tilePixelRatio*m/24,C=t.tilePixelRatio*d,I=t.tilePixelRatio*v.get("symbol-spacing"),M=v.get("text-padding")*t.tilePixelRatio,P=v.get("icon-padding")*t.tilePixelRatio,L=v.get("text-max-angle")/180*Math.PI,D="map"===v.get("text-rotation-alignment")&&"line"===v.get("symbol-placement"),B="map"===v.get("icon-rotation-alignment")&&"line"===v.get("symbol-placement"),R=I/2,O=function(o,a){a.x<0||a.x>=w||a.y<0||a.y>=w||t.symbolInstances.push(function(t,e,r,i,o,a,s,l,c,p,h,d,m,v,x,b,w,A,T,z,E,k){var C,I,M=t.addToLineVertexArray(e,r),P=0,L=0,D=0,B=i.horizontal?i.horizontal.text:"",R=[];i.horizontal&&(C=new _(s,r,e,l,c,p,i.horizontal,h,d,m,t.overscaling),L+=n(t,e,i.horizontal,a,m,T,z,v,M,i.vertical?f.horizontal:f.horizontalOnly,R,E,k),i.vertical&&(D+=n(t,e,i.vertical,a,m,T,z,v,M,f.vertical,R,E,k)));var O=C?C.boxStartIndex:t.collisionBoxArray.length,F=C?C.boxEndIndex:t.collisionBoxArray.length;if(o){var V=y(e,o,a,w,i.horizontal,T,z);I=new _(s,r,e,l,c,p,o,x,b,!1,t.overscaling),P=4*V.length;var j=t.iconSizeData,N=null;"source"===j.functionType?N=[10*a.layout.get("icon-size").evaluate(z)]:"composite"===j.functionType&&(N=[10*k.compositeIconSizes[0].evaluate(z),10*k.compositeIconSizes[1].evaluate(z)]),t.addSymbols(t.icon,V,N,A,w,z,!1,e,M.lineStartIndex,M.lineLength)}var U=I?I.boxStartIndex:t.collisionBoxArray.length,q=I?I.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=S.MAX_GLYPHS&&g.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:B,textBoxStartIndex:O,textBoxEndIndex:F,iconBoxStartIndex:U,iconBoxEndIndex:q,textOffset:v,iconOffset:A,anchor:e,line:r,featureIndex:l,feature:z,numGlyphVertices:L,numVerticalGlyphVertices:D,numIconVertices:P,textOpacityState:new u,iconOpacityState:new u,isDuplicate:!1,placedTextSymbolIndices:R,crossTileID:0}}(t,a,o,r,i,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,E,M,D,A,C,P,B,T,{zoom:t.zoom},e,c,p))};if("line"===v.get("symbol-placement"))for(var F=0,V=l(e.geometry,0,0,w,w);F<V.length;F+=1)for(var j=V[F],N=0,U=s(j,I,L,r.vertical||r.horizontal,i,24,k,t.overscaling,w);N<U.length;N+=1){var q=U[N],Z=r.horizontal;Z&&o(t,Z.text,R,q)||O(j,q)}else if("Polygon"===e.type)for(var G=0,W=b(e.geometry,0);G<W.length;G+=1){var X=W[G],H=x(X,16);O(X[0],new a(H.x,H.y,0))}else if("LineString"===e.type)for(var K=0,Y=e.geometry;K<Y.length;K+=1){var J=Y[K];O(J,new a(J[0].x,J[0].y,0))}else if("Point"===e.type)for(var $=0,Q=e.geometry;$<Q.length;$+=1)for(var tt=0,et=Q[$];tt<et.length;tt+=1){var rt=et[tt];O([rt],new a(rt.x,rt.y,0))}}function n(t,e,r,i,n,o,a,s,l,u,c,p,h){var f=m(e,r,i,n,o,a,p),d=t.textSizeData,y=null;return"source"===d.functionType?y=[10*i.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(y=[10*h.compositeTextSizes[0].evaluate(a),10*h.compositeTextSizes[1].evaluate(a)]),t.addSymbols(t.text,f,y,s,n,a,u,e,l.lineStartIndex,l.lineLength),c.push(t.text.placedSymbolArray.length-1),4*f.length}function o(t,e,r,i){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<r)return!0}else n[e]=[];return n[e].push(i),!1}var a=t("./anchor"),s=t("./get_anchors"),l=t("./clip_line"),u=t("./opacity_state"),c=t("./shaping"),p=c.shapeText,h=c.shapeIcon,f=c.WritingMode,d=t("./quads"),m=d.getGlyphQuads,y=d.getIconQuads,_=t("./collision_feature"),g=t("../util/util"),v=t("../util/script_detection"),x=t("../util/find_pole_of_inaccessibility"),b=t("../util/classify_rings"),w=t("../data/extent"),S=t("../data/bucket/symbol_bucket"),A=t("../style/evaluation_parameters");t("@mapbox/point-geometry");e.exports={performSymbolLayout:function(t,e,r,n,o,a){t.createArrays(),t.symbolInstances=[];var s=512*t.overscaling;t.tilePixelRatio=w/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.functionType){var d=t.textSizeData.zoomRange,m=d.min,y=d.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new A(m)),u["text-size"].possiblyEvaluate(new A(y))]}if("composite"===t.iconSizeData.functionType){var _=t.iconSizeData.zoomRange,x=_.min,b=_.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new A(x)),u["icon-size"].possiblyEvaluate(new A(b))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new A(t.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new A(t.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new A(18));for(var S=24*l.get("text-line-height"),T="map"===l.get("text-rotation-alignment")&&"line"===l.get("symbol-placement"),z=l.get("text-keep-upright"),E=0,k=t.features;E<k.length;E+=1){var C=k[E],I=l.get("text-font").evaluate(C).join(","),M=e[I]||{},P=r[I]||{},L={},D=C.text;if(D){var B=v.allowsVerticalWritingMode(D),R=l.get("text-offset").evaluate(C).map(function(t){return 24*t}),O=24*l.get("text-letter-spacing").evaluate(C),F=v.allowsLetterSpacing(D)?O:0,V=l.get("text-anchor").evaluate(C),j=l.get("text-justify").evaluate(C),N="line"!==l.get("symbol-placement")?24*l.get("text-max-width").evaluate(C):0;L.horizontal=p(D,M,N,S,V,j,F,R,24,f.horizontal),B&&T&&z&&(L.vertical=p(D,M,N,S,V,j,F,R,24,f.vertical))}var U=void 0;if(C.icon){var q=n[C.icon];q&&(U=h(o[C.icon],l.get("icon-offset").evaluate(C),l.get("icon-anchor").evaluate(C)),void 0===t.sdfIcons?t.sdfIcons=q.sdf:t.sdfIcons!==q.sdf&&g.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),q.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(L.horizontal||U)&&i(t,C,L,U,P,c)}a&&t.generateCollisionDebugBuffers()}}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(t,e,r){"use strict";var i=t("../style-spec/expression").normalizePropertyExpression,n=t("../style-spec/util/interpolate"),o=t("../util/util");e.exports={getSizeData:function(t,e){var r=e.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate({zoom:t+1})};if("source"===r.kind)return{functionType:"source"};for(var i=r.zoomStops,n=0;n<i.length&&i[n]<=t;)n++;for(var o=n=Math.max(0,n-1);o<i.length&&i[o]<t+1;)o++;o=Math.min(i.length-1,o);var a={min:i[n],max:i[o]};return"composite"===r.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:r.evaluate({zoom:t+1}),zoomRange:a,sizeRange:{min:r.evaluate({zoom:a.min}),max:r.evaluate({zoom:a.max})},propertyValue:e.value}},evaluateSizeForFeature:function(t,e,r){var i=e;return"source"===t.functionType?r.lowerSize/10:"composite"===t.functionType?n.number(r.lowerSize/10,r.upperSize/10,i.uSizeT):i.uSize},evaluateSizeForZoom:function(t,e,r){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var n=t.propertyValue,a=t.zoomRange,s=t.sizeRange,l=i(n,r.specification),u=o.clamp(l.interpolationFactor(e,a.min,a.max),0,1);return{uSizeT:0,uSize:s.min+u*(s.max-s.min)}}var c=t.propertyValue,p=t.zoomRange,h=i(c,r.specification);return{uSizeT:o.clamp(h.interpolationFactor(e,p.min,p.max),0,1),uSize:0}}}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(t,e,r){"use strict";var i=t("../source/rtl_text_plugin");e.exports=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r);return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),i.applyArabicShaping&&(t=i.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":109}],230:[function(t,e,r){"use strict";var i=t("@mapbox/point-geometry"),n=t("../util/dom"),o=t("../util/window"),a=!!o.navigator.platform&&/iPad|iPhone|iPod/.test(o.navigator.platform),s={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function r(){f=null}function o(e,r){var i=n.mousePos(u,r);return t.fire(e,{lngLat:t.unproject(i),point:i,originalEvent:r})}function l(e,r){var o=n.touchPos(u,r),a=o.reduce(function(t,e,r,i){return t.add(e.div(i.length))},new i(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:r})}var u=t.getCanvasContainer(),c=null,p=!1,h=null,f=null;for(var d in s)t[d]=new s[d](t,e),e.interactive&&e[d]&&t[d].enable(e[d]);n.addEventListener(u,"mouseout",function(t){o("mouseout",t)}),n.addEventListener(u,"mousedown",function(e){t.doubleClickZoom.isActive()||t.stop(),h=n.mousePos(u,e),o("mousedown",e),p=!0}),n.addEventListener(u,"mouseup",function(e){var r=t.dragRotate&&t.dragRotate.isActive();c&&!r&&o("contextmenu",c),c=null,p=!1,o("mouseup",e)}),n.addEventListener(u,"mousemove",function(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var r=e.toElement||e.target;r&&r!==u;)r=r.parentNode;r===u&&o("mousemove",e)}}),n.addEventListener(u,"mouseover",function(t){for(var e=t.toElement||t.target;e&&e!==u;)e=e.parentNode;e===u&&o("mouseover",t)}),n.addEventListener(u,"touchstart",function(e){t.stop(),l("touchstart",e),!e.touches||e.touches.length>1||(f?(clearTimeout(f),f=null,o("dblclick",e)):f=setTimeout(r,300))},{passive:!0}),n.addEventListener(u,"touchmove",function(t){l("touchmove",t)},{passive:!a}),n.addEventListener(u,"touchend",function(t){l("touchend",t)}),n.addEventListener(u,"touchcancel",function(t){l("touchcancel",t)}),n.addEventListener(u,"click",function(t){n.mousePos(u,t).equals(h)&&o("click",t)}),n.addEventListener(u,"dblclick",function(t){o("dblclick",t),t.preventDefault()}),n.addEventListener(u,"contextmenu",function(e){var r=t.dragRotate&&t.dragRotate.isActive();p||r?p&&(c=e):o("contextmenu",e),e.preventDefault()})}},{"../util/dom":259,"../util/window":254,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../style-spec/util/interpolate").number,o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),l=t("@mapbox/point-geometry"),u=function(t){function e(e,r){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=r.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,r){return t=l.convert(t).mult(-1),this.panTo(this.transform.center,i.extend({offset:t},e),r)},e.prototype.panTo=function(t,e,r){return this.easeTo(i.extend({center:t},e),r)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,r){return this.easeTo(i.extend({zoom:t},e),r)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,r){return this.easeTo(i.extend({bearing:t},e),r)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,i.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,r){if("number"==typeof(e=i.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var n=e.padding;e.padding={top:n,bottom:n,right:n,left:n}}if(!i.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return i.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=s.convert(t);var o=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],a=Math.min(e.padding.right,e.padding.left),u=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=l.convert(e.offset),p=this.transform,h=p.project(t.getNorthWest()),f=p.project(t.getSouthEast()),d=f.sub(h),m=(p.width-2*a-2*Math.abs(c.x))/d.x,y=(p.height-2*u-2*Math.abs(c.y))/d.y;return y<0||m<0?(i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=p.unproject(h.add(f).div(2)),e.zoom=Math.min(p.scaleZoom(p.scale*Math.min(m,y)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,r):this.flyTo(e,r))},e.prototype.jumpTo=function(t,e){this.stop();var r=this.transform,i=!1,n=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=a.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(n=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),i&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),n&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var r=this;this.stop(),!1===(t=i.extend({offset:[0,0],duration:500,easing:i.ease},t)).animate&&(t.duration=0);var o=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in t?+t.zoom:s,h="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,d=o.centerPoint.add(l.convert(t.offset)),m=o.pointLocation(d),y=a.convert(t.center||m);this._normalizeCenter(y);var _,g,v=o.project(m),x=o.project(y).sub(v),b=o.zoomScale(p-s);return t.around&&(_=a.convert(t.around),g=o.locationPoint(_)),this.zooming=p!==s,this.rotating=u!==h,this.pitching=f!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(r.zooming&&(o.zoom=n(s,p,t)),r.rotating&&(o.bearing=n(u,h,t)),r.pitching&&(o.pitch=n(c,f,t)),_)o.setLocationAtPoint(_,g);else{var i=o.zoomScale(o.zoom-s),a=p>s?Math.min(2,b):Math.max(.5,b),l=Math.pow(a,1-t),m=o.unproject(v.add(x.mult(t*l)).mult(i));o.setLocationAtPoint(o.renderWorldCopies?m.wrap():m,d)}r._fireMoveEvents(e)},function(){t.delayEndEvents?r._onEaseEnd=setTimeout(function(){return r._afterEase(e)},t.delayEndEvents):r._afterEase(e)},t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},e.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},e.prototype._afterEase=function(t){var e=this.zooming,r=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),r&&this.fire("pitchend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function r(t){var e=(T*T-A*A+(t?-1:1)*C*C*z*z)/(2*(t?T:A)*C*z);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}var u=this;this.stop(),t=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},t);var c=this.transform,p=this.getZoom(),h=this.getBearing(),f=this.getPitch(),d="zoom"in t?i.clamp(+t.zoom,c.minZoom,c.maxZoom):p,m="bearing"in t?this._normalizeBearing(t.bearing,h):h,y="pitch"in t?+t.pitch:f,_=c.zoomScale(d-p),g=c.centerPoint.add(l.convert(t.offset)),v=c.pointLocation(g),x=a.convert(t.center||v);this._normalizeCenter(x);var b=c.project(v),w=c.project(x).sub(b),S=t.curve,A=Math.max(c.width,c.height),T=A/_,z=w.mag();if("minZoom"in t){var E=i.clamp(Math.min(t.minZoom,p,d),c.minZoom,c.maxZoom),k=A/c.zoomScale(E-p);S=Math.sqrt(k/z*2)}var C=S*S,I=r(0),M=function(t){return s(I)/s(I+S*t)},P=function(t){return A*((s(I)*function(t){return o(t)/s(t)}(I+S*t)-o(I))/C)/z},L=(r(1)-I)/S;if(Math.abs(z)<1e-6||!isFinite(L)){if(Math.abs(A-T)<1e-6)return this.easeTo(t,e);var D=T<A?-1:1;L=Math.abs(Math.log(T/A))/S,P=function(){return 0},M=function(t){return Math.exp(D*S*t)}}if("duration"in t)t.duration=+t.duration;else{var B="screenSpeed"in t?+t.screenSpeed/S:+t.speed;t.duration=1e3*L/B}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this.zooming=!0,this.rotating=h!==m,this.pitching=y!==f,this._prepareEase(e,!1),this._ease(function(t){var r=t*L,i=1/M(r);c.zoom=p+c.scaleZoom(i),u.rotating&&(c.bearing=n(h,m,t)),u.pitching&&(c.pitch=n(f,y,t));var o=c.unproject(b.add(w.mult(P(r))).mult(i));c.setLocationAtPoint(c.renderWorldCopies?o.wrap():o,g),u._fireMoveEvents(e)},function(){return u._afterEase(e)},t),this},e.prototype.isEasing=function(){return!!this._isEasing},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},e.prototype._ease=function(t,e,r){var i=this;!1===r.animate||0===r.duration?(t(1),e()):(this._easeStart=o.now(),this._isEasing=!0,this._easeOptions=r,this._startAnimation(function(e){var r=Math.min((o.now()-i._easeStart)/i._easeOptions.duration,1);t(i._easeOptions.easing(r)),1===r&&i.stop()},function(){i._isEasing=!1,e()}))},e.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},e.prototype._startAnimation=function(t,e){return void 0===e&&(e=function(){}),this.stop(),this._onFrame=t,this._finishFn=e,this._update(),this},e.prototype._finishAnimation=function(){delete this._onFrame;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=i.wrap(t,-180,180);var r=Math.abs(t-e);return Math.abs(t-360-e)<r&&(t-=360),Math.abs(t+360-e)<r&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},e}(t("../util/evented"));e.exports=u},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/config"),a=function(t){this.options=t,n.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(t){var r=e.reduce(function(t,r,i){return r.value&&(t+=r.key+"="+r.value+(i<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var i in r){var n=r[i].getSource();n.attribution&&t.indexOf(n.attribution)<0&&t.push(n.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,r){for(var i=r+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},e.exports=a},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=function(){this._fullscreen=!1,n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){i.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var t=this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(t,e,r){"use strict";var i,n=t("../../util/evented"),o=t("../../util/dom"),a=t("../../util/window"),s=t("../../util/util"),l=t("../../geo/lng_lat"),u=t("../marker"),c={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},p=function(t){function e(e){t.call(this),this.options=s.extend({},c,e),s.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function(t){void 0!==i?t(i):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(e){i="denied"!==e.state,t(i)}):(i=!!a.navigator.geolocation,t(i))}(this._setupUI),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",t),this._finish()},e.prototype._updateCamera=function(t){var e=new l(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy;this._map.fitBounds(e.toBounds(r),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new u(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire("trackuserlocationend"))}))},e.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(n);e.exports=p},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=function(){n.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o},{"../../util/dom":259,"../../util/util":275}],236:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(t){var e=this;this.options=n.extend({},a,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},s.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){i.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(t,e,r){var n=i.create("button",t,this._container);return n.type="button",n.setAttribute("aria-label",e),n.addEventListener("click",r),n},e.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(t,e,r){"use strict";function i(t,e,r){var i=r&&r.maxWidth||100,o=t._container.clientHeight/2,a=function(t,e){var r=Math.PI/180,i=t.lat*r,n=e.lat*r,o=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((e.lng-t.lng)*r);return 6371e3*Math.acos(Math.min(o,1))}(t.unproject([0,o]),t.unproject([i,o]));if(r&&"imperial"===r.unit){var s=3.2808*a;s>5280?n(e,i,s/5280,"mi"):n(e,i,s,"ft")}else if(r&&"nautical"===r.unit){n(e,i,a/1852,"nm")}else n(e,i,a,"m")}function n(t,e,r,i){var n=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),r=t/e;return e*(r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1)}(r),o=n/r;"m"===i&&n>=1e3&&(n/=1e3,i="km"),t.style.width=e*o+"px",t.innerHTML=n+i}var o=t("../../util/dom"),a=t("../../util/util"),s=function(t){this.options=t,a.bindAll(["_onMove"],this)};s.prototype.getDefaultPosition=function(){return"bottom-left"},s.prototype._onMove=function(){i(this._map,this._container,this.options)},s.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},s.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=s},{"../../util/dom":259,"../../util/util":275}],238:[function(t,e,r){"use strict"},{}],239:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=i.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,r=i.mousePos(this._el,t);this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(e.x,r.x),o=Math.max(e.x,r.x),a=Math.min(e.y,r.y),s=Math.max(e.y,r.y);i.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,r=i.mousePos(this._el,t),o=(new n).extend(this._map.unproject(e)).extend(this._map.unproject(r));this._finish(),e.x===r.x&&e.y===r.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(t,e,r){"use strict";var i=t("../../util/util"),n=function(t){this._map=t,i.bindAll(["_onDblClick","_onZoomEnd"],this)};n.prototype.isEnabled=function(){return!!this._enabled},n.prototype.isActive=function(){return!!this._active},n.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},n.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},n.prototype._onDblClick=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},n.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},e.exports=n},{"../../util/util":275}],241:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=n.bezier(0,0,.3,1),l=function(t){this._map=t,this._el=t.getCanvasContainer(),n.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.isActive=function(){return!!this._active},l.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),i.addEventListener(this._el,"mousedown",this._onDown),i.addEventListener(this._el,"touchstart",this._onDown,{passive:!1}),this._enabled=!0)},l.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),i.removeEventListener(this._el,"mousedown",this._onDown),i.removeEventListener(this._el,"touchstart",this._onDown,{passive:!1}),this._enabled=!1)},l.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(i.addEventListener(o.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(o.document,"touchend",this._onTouchEnd)):(i.addEventListener(o.document,"mousemove",this._onMove),i.addEventListener(o.document,"mouseup",this._onMouseUp)),i.addEventListener(o,"blur",this._onMouseUp),this._active=!1,this._previousPos=i.mousePos(this._el,t),this._inertia=[[a.now(),this._previousPos]])},l.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this._lastMoveEvent=t,t.preventDefault();var e=i.mousePos(this._el,t);if(this._drainInertiaBuffer(),this._inertia.push([a.now(),e]),!this._previousPos)return void(this._previousPos=e);this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},l.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;e&&(t.setLocationAtPoint(t.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",e),this._fireEvent("move",e),this._previousPos=this._pos,delete this._lastMoveEvent)},l.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",t),this._drainInertiaBuffer();var r=function(){e._map.moving=!1,e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void r();var n=i[i.length-1],o=i[0],a=n[1].sub(o[1]),l=(n[0]-o[0])/1e3;if(0===l||n[1].equals(o[1]))return void r();var u=a.mult(.3/l),c=u.mag();c>1400&&(c=1400,u._unit()._mult(c));var p=c/750,h=u.mult(-p/2);this._map.panBy(h,{duration:1e3*p,easing:s,noMoveStart:!0},{originalEvent:t})}},l.prototype._onUp=function(t){this._onDragFinished(t)},l.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),i.removeEventListener(o.document,"mousemove",this._onMove),i.removeEventListener(o.document,"mouseup",this._onMouseUp),i.removeEventListener(o,"blur",this._onMouseUp))},l.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),i.removeEventListener(o.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(o.document,"touchend",this._onTouchEnd))},l.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},l.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||"mousemove"!==t.type&&t.button&&0!==t.button)},l.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=n.bezier(0,0,.25,1),l=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,n.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.isActive=function(){return!!this._active},l.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},l.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},l.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var e=t.ctrlKey?0:2,r=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(r=0),r!==e)return}else if(t.ctrlKey||0!==t.button)return;i.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[a.now(),this._map.getBearing()]],this._previousPos=i.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},l.prototype._onMove=function(t){this._lastMoveEvent=t;var e=i.mousePos(this._el,t);this._previousPos?(this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()):this._previousPos=e},l.prototype._onUp=function(t){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),i.enableDrag(),this._onDragFinished(t)},l.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;if(e){var r=this._previousPos,i=this._pos,n=.8*(r.x-i.x),o=-.5*(r.y-i.y),s=t.bearing-n,l=t.pitch-o,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([a.now(),this._map._normalizeBearing(s,c[1])]),t.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._previousPos=this._pos}},l.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var r=this._map,i=r.getBearing(),n=this._inertia,o=function(){Math.abs(i)<e._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(n.length<2)return void o();var a=n[0],l=n[n.length-1],u=n[n.length-2],c=r._normalizeBearing(i,u[1]),p=l[1]-a[1],h=p<0?-1:1,f=(l[0]-a[0])/1e3;if(0===p||0===f)return void o();var d=Math.abs(p*(.25/f));d>180&&(d=180);var m=d/180;c+=h*d*(m/2),Math.abs(r._normalizeBearing(c,0))<this._bearingSnap&&(c=r._normalizeBearing(0,c)),r.rotateTo(c,{duration:1e3*m,easing:s,noMoveStart:!0},{originalEvent:t})}},l.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},l.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(t,e,r){"use strict";function i(t){return t*(2-t)}var n=t("../../util/util"),o=function(t){this._map=t,this._el=t.getCanvasContainer(),n.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,r=0,n=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(a=1,t.preventDefault());break;default:return}var s=this._map,l=s.getZoom(),u={duration:300,delayEndEvents:500,easing:i,zoom:e?Math.round(l)+e*(t.shiftKey?2:1):l,bearing:s.getBearing()+15*r,pitch:s.getPitch()+10*n,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(u,{originalEvent:t})}},e.exports=o},{"../../util/util":275}],244:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=t("../../style-spec/util/interpolate").number,l=t("../../geo/lng_lat"),u=a.navigator.userAgent.toLowerCase(),c=-1!==u.indexOf("firefox"),p=-1!==u.indexOf("safari")&&-1===u.indexOf("chrom"),h=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,n.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};h.prototype.isEnabled=function(){return!!this._enabled},h.prototype.isActive=function(){return!!this._active},h.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},h.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},h.prototype._onWheel=function(t){var e=0;"wheel"===t.type?(e=t.deltaY,c&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,p&&(e/=3));var r=o.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()},h.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},h.prototype._start=function(t){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:t}),this._map.fire("zoomstart",{originalEvent:t}),clearTimeout(this._finishTimeout);var e=i.mousePos(this._el,t);this._around=l.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},h.prototype._onScrollFrame=function(t){if(this.isActive()){if(0!==this._delta){var e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);var i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var n=Math.min((o.now()-this._lastWheelEventTime)/200,1),a=this._easing(n);t.zoom=s(this._startZoom,this._targetZoom,a),1===n&&this._map.stop()}else t.zoom=this._targetZoom,this._map.stop();t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},h.prototype._onScrollFinished=function(){var t=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.moving=!1,t._map.zooming=!1,t._map.fire("zoomend"),t._map.fire("moveend"),delete t._targetZoom},200))},h.prototype._smoothOutEasing=function(t){var e=n.ease;if(this._prevEase){var r=this._prevEase,i=(o.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),s=.27/Math.sqrt(a*a+1e-4)*.01,l=Math.sqrt(.0729-s*s);e=n.bezier(s,l,.25,1)}return this._prevEase={start:o.now(),duration:t,easing:e},e},e.exports=h},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(t,e,r){"use strict";var i=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=n.bezier(0,0,.15,1),l=function(t){this._map=t,this._el=t.getCanvasContainer(),n.bindAll(["_onStart","_onMove","_onEnd"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),i.addEventListener(this._el,"touchstart",this._onStart,{passive:!1}),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},l.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),i.removeEventListener(this._el,"touchstart",this._onStart,{passive:!1}),this._enabled=!1)},l.prototype.disableRotation=function(){this._rotationDisabled=!0},l.prototype.enableRotation=function(){this._rotationDisabled=!1},l.prototype._onStart=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),r=i.mousePos(this._el,t.touches[1]);this._startVec=e.sub(r),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],i.addEventListener(o.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(o.document,"touchend",this._onEnd)}},l.prototype._onMove=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),r=i.mousePos(this._el,t.touches[1]),n=e.add(r).div(2),o=e.sub(r),s=o.mag()/this._startVec.mag(),l=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var c={duration:0,around:u.unproject(n)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+l),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=u.transform.scaleZoom(this._startScale*s)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([a.now(),s,n]),u.easeTo(c,{originalEvent:t})}else{var p=Math.abs(1-s)>.15;Math.abs(l)>10?this._gestureIntent="rotate":p&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},l.prototype._onEnd=function(t){i.removeEventListener(o.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(o.document,"touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,r=this._map;if(e.length<2)r.snapToNorth({},{originalEvent:t});else{var n=e[e.length-1],a=e[0],l=r.transform.scaleZoom(this._startScale*n[1]),u=r.transform.scaleZoom(this._startScale*a[1]),c=l-u,p=(n[0]-a[0])/1e3,h=n[2];if(0!==p&&l!==u){var f=.15*c/p;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),m=l+f*d/2e3;m<0&&(m=0),r.easeTo({zoom:m,duration:d,easing:s,around:this._aroundCenter?r.getCenter():r.unproject(h)},{originalEvent:t})}else r.snapToNorth({},{originalEvent:t})}},l.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../util/window"),o=t("../util/throttle"),a=function(){i.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(t){return this._map=t,n.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return n.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(t){var e=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,i),o=Math.round(e.lng*n)/n,a=Math.round(e.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+o+"/"+a+"/"+r:"#"+r+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},a.prototype._onHashChange=function(){var t=n.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var t=this.getHashString();n.history.replaceState("","",t)},e.exports=a},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(t,e,r){"use strict";function i(t){t.parentNode&&t.parentNode.removeChild(t)}var n=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/window"),l=s.HTMLImageElement,u=s.HTMLElement,c=t("../util/dom"),p=t("../util/ajax"),h=t("../style/style"),f=t("../style/evaluation_parameters"),d=t("../render/painter"),m=t("../geo/transform"),y=t("./hash"),_=t("./bind_handlers"),g=t("./camera"),v=t("../geo/lng_lat"),x=t("../geo/lng_lat_bounds"),b=t("@mapbox/point-geometry"),w=t("./control/attribution_control"),S=t("./control/logo_control"),A=t("@mapbox/mapbox-gl-supported"),T=t("../util/image").RGBAImage;t("./events");var z={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},E=function(t){function e(e){if(null!=(e=n.extend({},z,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new m(e.minZoom,e.maxZoom,e.renderWorldCopies);t.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming;var i=e.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){var o=a.document.getElementById(e.container);if(!o)throw new Error("Container '"+e.container+"' not found.");this._container=o}else{if(!(e.container instanceof u))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}e.maxBounds&&this.setMaxBounds(e.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),_(this,e),this._hash=e.hash&&(new y).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new w),this.addControl(new S,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var r=t.onAdd(this),i=this._controlPositions[e];return-1!==e.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],r=t[1];return this._resizeCanvas(e,r),this.transform.resize(e,r),this.painter.resize(e,r),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new x(this.transform.pointLocation(new b(0,this.transform.height)),this.transform.pointLocation(new b(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new b(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new b(0,this.transform.size.y)))),t},e.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new x([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},e.prototype.setMaxBounds=function(t){if(t){var e=x.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},e.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(v.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(b.convert(t))},e.prototype.on=function(e,r,i){var o=this;if(void 0===i)return t.prototype.on.call(this,e,r);var a=function(){if("mouseenter"===e||"mouseover"===e){var t=!1;return{layer:r,listener:i,delegates:{mousemove:function(a){var s=o.getLayer(r)?o.queryRenderedFeatures(a.point,{layers:[r]}):[];s.length?t||(t=!0,i.call(o,n.extend({features:s},a,{type:e}))):t=!1},mouseout:function(){t=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:r,listener:i,delegates:{mousemove:function(t){(o.getLayer(r)?o.queryRenderedFeatures(t.point,{layers:[r]}):[]).length?a=!0:a&&(a=!1,i.call(o,n.extend({},t,{type:e})))},mouseout:function(t){a&&(a=!1,i.call(o,n.extend({},t,{type:e})))}}}}var s;return{layer:r,listener:i,delegates:(s={},s[e]=function(t){var e=o.getLayer(r)?o.queryRenderedFeatures(t.point,{layers:[r]}):[];e.length&&i.call(o,n.extend({features:e},t))},s)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)o.on(s,a.delegates[s]);return this},e.prototype.off=function(e,r,i){if(void 0===i)return t.prototype.off.call(this,e,r);if(this._delegatedListeners&&this._delegatedListeners[e])for(var n=this._delegatedListeners[e],o=0;o<n.length;o++){var a=n[o];if(a.layer===r&&a.listener===i){for(var s in a.delegates)this.off(s,a.delegates[s]);return n.splice(o,1),this}}return this},e.prototype.queryRenderedFeatures=function(t,e){return 2===arguments.length?(t=arguments[0],e=arguments[1]):1===arguments.length&&function(t){return t instanceof b||Array.isArray(t)}(arguments[0])?(t=arguments[0],e={}):1===arguments.length?(t=void 0,e=arguments[0]):(t=void 0,e={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e,r=this;if(void 0===t&&(t=[b.convert([0,0]),b.convert([this.transform.width,this.transform.height])]),t instanceof b||"number"==typeof t[0])e=[b.convert(t)];else{var i=[b.convert(t[0]),b.convert(t[1])];e=[i[0],new b(i[1].x,i[0].y),i[1],new b(i[0].x,i[1].y),i[0]]}return e.map(function(t){return r.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){n.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new h(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var i in r){var n=r[i];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,r){return this.style.addSourceType(t,e,r)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var n=r.sdf;if(void 0===n&&(n=!1),e instanceof l){var a=o.getImageData(e),s=a.width,u=a.height,c=a.data;this.style.addImage(t,{data:new T({width:s,height:u},c),pixelRatio:i,sdf:n})}else{if(void 0===e.width||void 0===e.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});var p=e.width,h=e.height,f=e.data;this.style.addImage(t,{data:new T({width:p,height:h},f.slice(0)),pixelRatio:i,sdf:n})}},e.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire("error",{error:new Error("Missing required image id")}),!1)},e.prototype.removeImage=function(t){this.style.removeImage(t)},e.prototype.loadImage=function(t,e){p.getImage(this._transformRequest(t,p.ResourceType.Image),e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,r){return this.style.setPaintProperty(t,e,r),this._update(!0),this},e.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},e.prototype.setLayoutProperty=function(t,e,r){return this.style.setLayoutProperty(t,e,r),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",t)).innerHTML="Missing Mapbox GL JS CSS";var e=this._canvasContainer=c.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=c.create("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){n[t]=c.create("div","mapboxgl-ctrl-"+t,i)})},e.prototype._resizeCanvas=function(t,e){var r=a.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=n.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},A.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new d(e,this.transform):this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},e.prototype._render=function(){this._updateCamera();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,r=o.now();this.style.zoomHistory.update(e,r);var i=new f(e,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),n=i.crossFadingFactor();1===n&&n===this._crossFadingFactor||(t=!0,this._crossFadingFactor=n),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),i(this._canvasContainer),i(this._controlContainer),i(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=o.frame(function(){t._frameId=null,t._render()}))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint=t,this._update()},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,r),e}(g);e.exports=E},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(t,e,r){"use strict";var i=t("../util/dom"),n=t("../geo/lng_lat"),o=t("@mapbox/point-geometry"),a=t("../util/smart_wrap"),s=t("../util/util").bindAll,l=function(t,e){if(s(["_update","_onMapClick"],this),!t){t=i.create("div");var r=i.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var a=i.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var p=c[u],h=i.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),l.appendChild(h)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill","#3FB1CE");var d=i.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var y=i.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(y);var _=i.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=i.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),g.appendChild(v),g.appendChild(x),a.appendChild(l),a.appendChild(f),a.appendChild(m),a.appendChild(_),a.appendChild(g),r.appendChild(a),t.appendChild(r);var b=[0,-14];e&&e.offset||(e?e.offset=b:e={offset:b})}this._offset=o.convert(e&&e.offset||[0,0]),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};l.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},l.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},l.prototype.getLngLat=function(){return this._lngLat},l.prototype.setLngLat=function(t){return this._lngLat=n.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},l.prototype.getElement=function(){return this._element},l.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(t.options.offset=this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},l.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},l.prototype.getPopup=function(){return this._popup},l.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},l.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},l.prototype.getOffset=function(){return this._offset},l.prototype.setOffset=function(t){return this._offset=o.convert(t),this._update(),this},e.exports=l},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(t,e,r){"use strict";var i=t("../util/util"),n=t("../util/evented"),o=t("../util/dom"),a=t("../geo/lng_lat"),s=t("@mapbox/point-geometry"),l=t("../util/window"),u=t("../util/smart_wrap"),c={closeButton:!0,closeOnClick:!0},p=function(t){function e(e){t.call(this),this.options=i.extend(Object.create(c),e),i.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=a.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(l.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,r=l.document.createDocumentFragment(),i=l.document.createElement("body");for(i.innerHTML=t;e=i.firstChild;)r.appendChild(e);return this.setDOMContent(r)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=u(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,r=function t(e){if(e){if("number"==typeof e){var r=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new s(0,e),"top-left":new s(r,r),"top-right":new s(-r,r),bottom:new s(0,-e),"bottom-left":new s(r,-r),"bottom-right":new s(-r,-r),left:new s(e,0),right:new s(-e,0)}}if(e instanceof s||Array.isArray(e)){var i=s.convert(e);return{top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{top:s.convert(e.top||[0,0]),"top-left":s.convert(e["top-left"]||[0,0]),"top-right":s.convert(e["top-right"]||[0,0]),bottom:s.convert(e.bottom||[0,0]),"bottom-left":s.convert(e["bottom-left"]||[0,0]),"bottom-right":s.convert(e["bottom-right"]||[0,0]),left:s.convert(e.left||[0,0]),right:s.convert(e.right||[0,0])}}return t(new s(0,0))}(this.options.offset);if(!e){var i=this._container.offsetWidth,n=this._container.offsetHeight;e=t.y+r.bottom.y<n?["top"]:t.y>this._map.transform.height-n?["bottom"]:[],t.x<i/2?e.push("left"):t.x>this._map.transform.width-i/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var a=t.add(r[e]).round(),l={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},c=this._container.classList;for(var p in l)c.remove("mapboxgl-popup-anchor-"+p);c.add("mapboxgl-popup-anchor-"+e),o.setTransform(this._container,l[e]+" translate("+a.x+"px,"+a.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(n);e.exports=p},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(t,e,r){"use strict";var i=t("./util"),n=t("./web_worker_transfer"),o=n.serialize,a=n.deserialize,s=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.callbackID=0,i.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(t,e,r,i){var n=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[n]=r);var a=[];this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(n),data:o(e,a)},a)},s.prototype.receive=function(t){var e,r=this,i=t.data,n=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var s=function(t,e){var i=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(n),error:t?String(t):null,data:o(e,i)},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&i.error?e(new Error(i.error)):e&&e(null,a(i.data));else if(void 0!==i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,a(i.data),s);else if(void 0!==i.id&&this.parent.getWorkerSource){var l=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,l[0])[l[1]](a(i.data),s)}else this.parent[i.type](a(i.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=s},{"./util":275,"./web_worker_transfer":278}],251:[function(t,e,r){"use strict";function i(t){var e=new o.XMLHttpRequest;for(var r in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(r,t.headers[r]);return e.withCredentials="include"===t.credentials,e}function n(t){var e=o.document.createElement("a");return e.href=t,e.protocol===o.document.location.protocol&&e.host===o.document.location.host}var o=t("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};r.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(t){function e(e,r){t.call(this,e),this.status=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);r.getJSON=function(t,e){var r=i(t);return r.setRequestHeader("Accept","application/json"),r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if(r.status>=200&&r.status<300&&r.response){var t;try{t=JSON.parse(r.response)}catch(t){return e(t)}e(null,t)}else e(new s(r.statusText,r.status))},r.send(),r},r.getArrayBuffer=function(t,e){var r=i(t);return r.responseType="arraybuffer",r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){var t=r.response;if(0===t.byteLength&&200===r.status)return e(new Error("http status 200 returned without content."));r.status>=200&&r.status<300&&r.response?e(null,{data:t,cacheControl:r.getResponseHeader("Cache-Control"),expires:r.getResponseHeader("Expires")}):e(new s(r.statusText,r.status))},r.send(),r};r.getImage=function(t,e){return r.getArrayBuffer(t,function(t,r){if(t)e(t);else if(r){var i=new o.Image,n=o.URL||o.webkitURL;i.onload=function(){e(null,i),n.revokeObjectURL(i.src)};var a=new o.Blob([new Uint8Array(r.data)],{type:"image/png"});i.cacheControl=r.cacheControl,i.expires=r.expires,i.src=r.data.byteLength?n.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},r.getVideo=function(t,e){var r=o.document.createElement("video");r.onloadstart=function(){e(null,r)};for(var i=0;i<t.length;i++){var a=o.document.createElement("source");n(t[i])||(r.crossOrigin="Anonymous"),a.src=t[i],r.appendChild(a)}return r}},{"./window":254}],252:[function(t,e,r){"use strict";var i=t("./window"),n=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now.bind(Date),o=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame,a=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.msCancelAnimationFrame;e.exports={now:n,frame:function(t){return o(t)},cancelFrame:function(t){return a(t)},getImageData:function(t){var e=i.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},hardwareConcurrency:i.navigator.hardwareConcurrency||4,get devicePixelRatio(){return i.devicePixelRatio},supportsWebp:!1};var s=i.document.createElement("img");s.onload=function(){e.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(t,e,r){"use strict";var i=t("webworkify"),n=t("../window"),o=n.URL.createObjectURL(new i(t("../../source/worker"),{bare:!0}));e.exports=function(){return new n.Worker(o)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(t,e,r){"use strict";e.exports=self},{}],255:[function(t,e,r){"use strict";function i(t,e){return e.area-t.area}var n=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var r=t.length;if(r<=1)return[t];for(var a,s,l=[],u=0;u<r;u++){var c=o(t[u]);0!==c&&(t[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&l.push(a),a=[t[u]]):a.push(t[u]))}if(a&&l.push(a),e>1)for(var p=0;p<l.length;p++)l[p].length<=e||(n(l[p],e,1,l[p].length-1,i),l[p]=l[p].slice(0,e));return l}},{"./util":275,quickselect:31}],256:[function(t,e,r){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],257:[function(t,e,r){"use strict";var i=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};i.prototype.encode=function(t){return this._stringToNumber[t]},i.prototype.decode=function(t){return this._numberToString[t]},e.exports=i},{}],258:[function(t,e,r){"use strict";var i=t("./util"),n=t("./actor"),o=function(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var r=this.workerPool.acquire(this.id),o=0;o<r.length;o++){var a=r[o],s=new n(a,e,this.id);s.name="Worker "+o,this.actors.push(s)}};o.prototype.broadcast=function(t,e,r){r=r||function(){},i.asyncAll(this.actors,function(r,i){r.send(t,e,i)},r)},o.prototype.send=function(t,e,r,i){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,r),i},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":250,"./util":275}],259:[function(t,e,r){"use strict";function i(t){for(var e=0;e<t.length;e++)if(t[e]in s)return t[e];return t[0]}var n=t("@mapbox/point-geometry"),o=t("./window");r.create=function(t,e,r){var i=o.document.createElement(t);return e&&(i.className=e),r&&r.appendChild(i),i},r.createNS=function(t,e){return o.document.createElementNS(t,e)};var a,s=o.document.documentElement.style,l=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){l&&(a=s[l],s[l]="none")},r.enableDrag=function(){l&&(s[l]=a)};var u=i(["transform","WebkitTransform"]);r.setTransform=function(t,e){t.style[u]=e};var c=!1;try{var p=Object.defineProperty({},"passive",{get:function(){c=!0}});o.addEventListener("test",p,p),o.removeEventListener("test",p,p)}catch(t){c=!1}r.addEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&c?t.addEventListener(e,r,i):t.addEventListener(e,r,i.capture)},r.removeEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&c?t.removeEventListener(e,r,i):t.removeEventListener(e,r,i.capture)};var h=function(t){t.preventDefault(),t.stopPropagation(),o.removeEventListener("click",h,!0)};r.suppressClick=function(){o.addEventListener("click",h,!0),o.setTimeout(function(){o.removeEventListener("click",h,!0)},0)},r.mousePos=function(t,e){var r=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new n(e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop)},r.touchPos=function(t,e){for(var r=t.getBoundingClientRect(),i=[],o="touchend"===e.type?e.changedTouches:e.touches,a=0;a<o.length;a++)i.push(new n(o[a].clientX-r.left-t.clientLeft,o[a].clientY-r.top-t.clientTop));return i},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(t,e,r){"use strict";function i(t,e,r){r[t]=r[t]||[],r[t].push(e)}function n(t,e,r){if(r&&r[t]){var i=r[t].indexOf(e);-1!==i&&r[t].splice(i,1)}}var o=t("./util"),a=function(){};a.prototype.on=function(t,e){return this._listeners=this._listeners||{},i(t,e,this._listeners),this},a.prototype.off=function(t,e){return n(t,e,this._listeners),n(t,e,this._oneTimeListeners),this},a.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},i(t,e,this._oneTimeListeners),this},a.prototype.fire=function(t,e){var r=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var i=0,a=this._listeners&&this._listeners[t]?this._listeners[t].slice():[];i<a.length;i+=1)a[i].call(r,e);for(var s=0,l=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];s<l.length;s+=1){var u=l[s];n(t,u,r._oneTimeListeners),u.call(r,e)}this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},a.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},a.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=a},{"./util":275}],261:[function(t,e,r){"use strict";function i(t,e){return e.max-t.max}function n(t,e,r,i){this.p=new a(t,e),this.h=r,this.d=function(t,e){for(var r=!1,i=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,l=o.length,u=l-1;a<l;u=a++){var c=o[a],p=o[u];c.y>t.y!=p.y>t.y&&t.x<(p.x-c.x)*(t.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,s(t,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var o=t("tinyqueue"),a=t("@mapbox/point-geometry"),s=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var s=1/0,l=1/0,u=-1/0,c=-1/0,p=t[0],h=0;h<p.length;h++){var f=p[h];(!h||f.x<s)&&(s=f.x),(!h||f.y<l)&&(l=f.y),(!h||f.x>u)&&(u=f.x),(!h||f.y>c)&&(c=f.y)}var d=u-s,m=c-l,y=Math.min(d,m),_=y/2,g=new o(null,i);if(0===y)return new a(s,l);for(var v=s;v<u;v+=y)for(var x=l;x<c;x+=y)g.push(new n(v+_,x+_,_,t));for(var b=function(t){for(var e=0,r=0,i=0,o=t[0],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l],p=u.x*c.y-c.x*u.y;r+=(u.x+c.x)*p,i+=(u.y+c.y)*p,e+=3*p}return new n(r/e,i/e,0,t)}(t),w=g.length;g.length;){var S=g.pop();(S.d>b.d||!b.d)&&(b=S,r&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,w)),S.max-b.d<=e||(_=S.h/2,g.push(new n(S.p.x-_,S.p.y-_,_,t)),g.push(new n(S.p.x+_,S.p.y-_,_,t)),g.push(new n(S.p.x-_,S.p.y+_,_,t)),g.push(new n(S.p.x+_,S.p.y+_,_,t)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+b.d)),b.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(t,e,r){"use strict";var i,n=t("./worker_pool");e.exports=function(){return i||(i=new n),i}},{"./worker_pool":279}],263:[function(t,e,r){"use strict";function i(t,e,r,i){var n=e.width,o=e.height;if(i){if(i.length!==n*o*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(n*o*r);return t.width=n,t.height=o,t.data=i,t}function n(t,e,r){var n=e.width,a=e.height;if(n!==t.width||a!==t.height){var s=i({},{width:n,height:a},r);o(t,s,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,a)},r),t.width=n,t.height=a,t.data=s.data}}function o(t,e,r,i,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<n.height;l++)for(var u=((r.y+l)*t.width+r.x)*o,c=((i.y+l)*e.width+i.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[u+p];return e}var a=t("./web_worker_transfer").register,s=function(t,e){i(this,t,1,e)};s.prototype.resize=function(t){n(this,t,1)},s.prototype.clone=function(){return new s({width:this.width,height:this.height},new Uint8Array(this.data))},s.copy=function(t,e,r,i,n){o(t,e,r,i,n,1)};var l=function(t,e){i(this,t,4,e)};l.prototype.resize=function(t){n(this,t,4)},l.prototype.clone=function(){return new l({width:this.width,height:this.height},new Uint8Array(this.data))},l.copy=function(t,e,r,i,n){o(t,e,r,i,n,4)},a("AlphaImage",s),a("RGBAImage",l),e.exports={AlphaImage:s,RGBAImage:l}},{"./web_worker_transfer":278}],264:[function(t,e,r){"use strict";function i(t,e,r){if(t.length>1){if(n(t,e))return!0;for(var i=0;i<e.length;i++)if(a(e[i],t,r))return!0}for(var o=0;o<t.length;o++)if(a(t[o],e,r))return!0;return!1}function n(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var i=t[r],n=t[r+1],a=0;a<e.length-1;a++){if(o(i,n,e[a],e[a+1]))return!0}return!1}function o(t,e,r,i){return c(t,r,i)!==c(e,r,i)&&c(t,e,r)!==c(t,e,i)}function a(t,e,r){var i=r*r;if(1===e.length)return t.distSqr(e[0])<i;for(var n=1;n<e.length;n++)if(s(t,e[n-1],e[n])<i)return!0;return!1}function s(t,e,r){var i=e.distSqr(r);if(0===i)return t.distSqr(e);var n=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/i;return n<0?t.distSqr(e):n>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(n)._add(e))}function l(t,e){for(var r,i,n,o=!1,a=0;a<t.length;a++)for(var s=0,l=(r=t[a]).length-1;s<r.length;l=s++)i=r[s],n=r[l],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(o=!o);return o}function u(t,e){for(var r=!1,i=0,n=t.length-1;i<t.length;n=i++){var o=t[i],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}var c=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:function(t,e,r){for(var i=0;i<t.length;i++)for(var n=t[i],o=0;o<e.length;o++)for(var s=e[o],l=0;l<s.length;l++){var c=s[l];if(u(n,c))return!0;if(a(c,n,r))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(t,e){if(1===t.length&&1===t[0].length)return l(e,t[0][0]);for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)if(l(t,i[o]))return!0;for(var a=0;a<t.length;a++){for(var s=t[a],u=0;u<s.length;u++)if(l(e,s[u]))return!0;for(var c=0;c<e.length;c++)if(n(s,e[c]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(t,e,r){for(var n=0;n<e.length;n++)for(var o=e[n],a=0;a<t.length;a++){var s=t[a];if(s.length>=3)for(var l=0;l<o.length;l++)if(u(s,o[l]))return!0;if(i(s,o,r))return!0}return!1},polygonIntersectsPolygon:function(t,e){for(var r=0;r<t.length;r++)if(u(e,t[r]))return!0;for(var i=0;i<e.length;i++)if(u(t,e[i]))return!0;return!!n(t,e)},distToSegmentSquared:s}},{"./util":275}],265:[function(t,e,r){"use strict";e.exports={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}}},{}],266:[function(t,e,r){"use strict";var i=function(t,e){this.max=t,this.onRemove=e,this.reset()};i.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},i.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var r=this.getAndRemove(this.order[0]);r&&this.onRemove(r)}return this},i.prototype.has=function(t){return t in this.data},i.prototype.keys=function(){return this.order},i.prototype.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},i.prototype.get=function(t){return this.has(t)?this.data[t]:null},i.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},i.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var r=e.getAndRemove(e.order[0]);r&&e.onRemove(r)}return this},e.exports=i},{}],267:[function(t,e,r){"use strict";function i(t,e){var r=o(s.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!s.REQUIRE_ACCESS_TOKEN)return a(t);if(!(e=e||s.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+u);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+u);return t.params.push("access_token="+e),a(t)}function n(t){return 0===t.indexOf("mapbox:")}function o(t){var e=t.match(p);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var s=t("./config"),l=t("./browser"),u="See https://www.mapbox.com/api-documentation/#access-tokens";r.isMapboxURL=n,r.normalizeStyleURL=function(t,e){if(!n(t))return t;var r=o(t);return r.path="/styles/v1"+r.path,i(r,e)},r.normalizeGlyphsURL=function(t,e){if(!n(t))return t;var r=o(t);return r.path="/fonts/v1"+r.path,i(r,e)},r.normalizeSourceURL=function(t,e){if(!n(t))return t;var r=o(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),i(r,e)},r.normalizeSpriteURL=function(t,e,r,s){var l=o(t);return n(t)?(l.path="/styles/v1"+l.path+"/sprite"+e+r,i(l,s)):(l.path+=""+e+r,a(l))};var c=/(\.(png|jpg)\d*)(?=$)/;r.normalizeTileURL=function(t,e,r){if(!e||!n(e))return t;var i=o(t),u=l.devicePixelRatio>=2||512===r?"@2x":"",p=l.supportsWebp?".webp":"$1";return i.path=i.path.replace(c,""+u+p),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(s.ACCESS_TOKEN||""))}(i.params),a(i)};var p=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(t,e,r){"use strict";e.exports={getEntriesByName:function(t){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(t)}}},{}],269:[function(t,e,r){"use strict";var i=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!r.charAllowsIdeographicBreaking(n.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(r.charHasUprightVerticalOrientation(n.charCodeAt(0)))return!0}return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!r.charAllowsLetterSpacing(n.charCodeAt(0)))return!1}return!0},e.exports.charAllowsLetterSpacing=function(t){return!(i.Arabic(t)||i["Arabic Supplement"](t)||i["Arabic Extended-A"](t)||i["Arabic Presentation Forms-A"](t)||i["Arabic Presentation Forms-B"](t))},e.exports.charAllowsIdeographicBreaking=function(t){return!!(!(t<11904)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||i["CJK Symbols and Punctuation"](t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Halfwidth and Fullwidth Forms"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)||i["Vertical Forms"](t)||i["Yi Radicals"](t)||i["Yi Syllables"](t)))},r.charHasUprightVerticalOrientation=function(t){return!!(746===t||747===t||!(t<4352)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||!(!i["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Hangul Compatibility Jamo"](t)||i["Hangul Jamo Extended-A"](t)||i["Hangul Jamo Extended-B"](t)||i["Hangul Jamo"](t)||i["Hangul Syllables"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i.Kanbun(t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)&&12540!==t||!(!i["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!i["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||i["Unified Canadian Aboriginal Syllabics"](t)||i["Unified Canadian Aboriginal Syllabics Extended"](t)||i["Vertical Forms"](t)||i["Yijing Hexagram Symbols"](t)||i["Yi Syllables"](t)||i["Yi Radicals"](t)))},r.charHasNeutralVerticalOrientation=function(t){return!!(i["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||i["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||i["Letterlike Symbols"](t)||i["Number Forms"](t)||i["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||i["Control Pictures"](t)&&9251!==t||i["Optical Character Recognition"](t)||i["Enclosed Alphanumerics"](t)||i["Geometric Shapes"](t)||i["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||i["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||i["CJK Symbols and Punctuation"](t)||i.Katakana(t)||i["Private Use Area"](t)||i["CJK Compatibility Forms"](t)||i["Small Form Variants"](t)||i["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},r.charHasRotatedVerticalOrientation=function(t){return!(r.charHasUprightVerticalOrientation(t)||r.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":265}],270:[function(t,e,r){"use strict";var i=t("../geo/lng_lat");e.exports=function(t,e,r){if(t=new i(t.lng,t.lat),e){var n=new i(t.lng-360,t.lat),o=new i(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(e);r.locationPoint(n).distSqr(e)<a?t=n:r.locationPoint(o).distSqr(e)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":62}],271:[function(t,e,r){"use strict";function i(t,e){return Math.ceil(t/e)*e}var n={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},o=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};o.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},o.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},o.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},o.prototype.clear=function(){this.length=0},o.prototype.resize=function(t){this.reserve(t),this.length=t},o.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},o.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},e.exports.StructArray=o,e.exports.Struct=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},e.exports.viewTypes=n,e.exports.createLayout=function(t,e){void 0===e&&(e=1);var r=0,o=0;return{members:t.map(function(t){var a=function(t){return n[t].BYTES_PER_ELEMENT}(t.type),s=r=i(r,Math.max(e,a)),l=t.components||1;return o=Math.max(o,a),r+=a*l,{name:t.name,type:t.type,components:l,offset:s}}),size:i(r,Math.max(o,e)),alignment:e}}},{}],272:[function(t,e,r){"use strict";e.exports=function(t,e){var r=!1,i=0,n=function(){i=0,r&&(t(),i=setTimeout(n,e),r=!1)};return function(){return r=!0,i||n(),i}}},{}],273:[function(t,e,r){"use strict";function i(t,e){if(t.row>e.row){var r=t;t=e,e=r}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function n(t,e,r,i,n){var o=Math.max(r,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=l*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=u*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;n(Math.floor(d),Math.ceil(f),h)}}function o(t,e,r,o,a,s){var l,u=i(t,e),c=i(e,r),p=i(r,t);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>p.dy&&(l=u,u=p,p=l),c.dy>p.dy&&(l=c,c=p,p=l),u.dy&&n(p,u,o,a,s),c.dy&&n(p,c,o,a,s)}t("../geo/coordinate");var a=t("../source/tile_id").OverscaledTileID;e.exports=function(t,e,r,i){function n(e,n,o){var u,c,p;if(o>=0&&o<=s)for(u=e;u<n;u++)0!==(c=Math.floor(u/s))&&!0!==i||(p=new a(r,c,t,(u%s+s)%s,o),l[p.key]=p)}void 0===i&&(i=!0);var s=1<<t,l={};return o(e[0],e[1],e[2],0,s,n),o(e[2],e[3],e[0],0,s,n),Object.keys(l).map(function(t){return l[t]})}},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(t,e,r){"use strict";e.exports=function(t,e){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?String(t[r]):""})}},{}],275:[function(t,e,r){"use strict";var i=t("@mapbox/unitbezier"),n=t("../geo/coordinate");t("@mapbox/point-geometry");r.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},r.bezier=function(t,e,r,n){var o=new i(t,e,r,n);return function(t){return o.solve(t)}},r.ease=r.bezier(.25,.1,.25,1),r.clamp=function(t,e,r){return Math.min(r,Math.max(e,t))},r.wrap=function(t,e,r){var i=r-e,n=((t-e)%i+i)%i+e;return n===e?r:n},r.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var i=t.length,n=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),n[a]=e,0==--i&&r(o,n)})})},r.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},r.keysDifference=function(t,e){var r=[];for(var i in t)i in e||r.push(i);return r},r.extend=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t},r.pick=function(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i];n in t&&(r[n]=t[n])}return r};var o=1;r.uniqueId=function(){return o++},r.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},r.getCoordinatesCenter=function(t){for(var e=1/0,r=1/0,i=-1/0,o=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),r=Math.min(r,t[a].row),i=Math.max(i,t[a].column),o=Math.max(o,t[a].row);var s=i-e,l=o-r,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new n((e+i)/2,(r+o)/2,0).zoomTo(c)},r.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},r.mapObject=function(t,e,r){var i={};for(var n in t)i[n]=e.call(r||this,t[n],n,t);return i},r.filterObject=function(t,e,r){var i={};for(var n in t)e.call(r||this,t[n],n,t)&&(i[n]=t[n]);return i},r.deepEqual=t("../style-spec/util/deep_equal"),r.clone=function(t){return Array.isArray(t)?t.map(r.clone):"object"==typeof t&&t?r.mapObject(t,r.clone):t},r.arraysIntersect=function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1};var a={};r.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},r.isCounterClockwise=function(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)},r.calculateSignedArea=function(t){for(var e=0,r=0,i=t.length,n=i-1,o=void 0,a=void 0;r<i;n=r++)o=t[r],e+=((a=t[n]).x-o.x)*(o.y+a.y);return e},r.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],i=t[t.length-1];return!(Math.abs(e.x-i.x)>0||Math.abs(e.y-i.y)>0)&&Math.abs(r.calculateSignedArea(t))>.01},r.sphericalToCartesian=function(t){var e=t[0],r=t[1],i=t[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(i),y:e*Math.sin(r)*Math.sin(i),z:e*Math.cos(i)}},r.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,r,i,n){var o=i||n;return e[r]=!o||o.toLowerCase(),""}),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(t,e,r){"use strict";var i=function(t,e,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},n={geometry:{}};n.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},n.geometry.set=function(t){this._geometry=t},i.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(i.prototype,n),e.exports=i},{}],277:[function(t,e,r){"use strict";var i=t("./script_detection");e.exports=function(t){for(var r="",n=0;n<t.length;n++){var o=t.charCodeAt(n+1)||null,a=t.charCodeAt(n-1)||null;o&&i.charHasRotatedVerticalOrientation(o)&&!e.exports.lookup[t[n+1]]||a&&i.charHasRotatedVerticalOrientation(a)&&!e.exports.lookup[t[n-1]]||!e.exports.lookup[t[n]]?r+=t[n]:r+=e.exports.lookup[t[n]]}return r},e.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":269}],278:[function(t,e,r){"use strict";function i(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),m[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}var n=t("grid-index"),o=t("../style-spec/util/color"),a=t("../style-spec/expression"),s=a.StylePropertyFunction,l=a.StyleExpression,u=a.StyleExpressionWithErrorHandling,c=a.ZoomDependentExpression,p=a.ZoomConstantExpression,h=t("../style-spec/expression/compound_expression").CompoundExpression,f=t("../style-spec/expression/definitions"),d=t("./window").ImageData,m={};for(var y in i("Object",Object),n.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),r},n.deserialize=function(t){return new n(t)},i("Grid",n),i("Color",o),i("StylePropertyFunction",s),i("StyleExpression",l,{omit:["_evaluator"]}),i("StyleExpressionWithErrorHandling",u,{omit:["_evaluator"]}),i("ZoomDependentExpression",c),i("ZoomConstantExpression",p),i("CompoundExpression",h,{omit:["_evaluate"]}),f)f[y]._classRegistryKey||i("Expression_"+y,f[y]);e.exports={register:i,serialize:function t(e,r){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return r&&r.push(i.buffer),i}if(e instanceof d)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var n=[],o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t(s,r))}return n}if("object"==typeof e){var l=e.constructor,u=l._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var c={};if(l.serialize)c._serialized=l.serialize(e,r);else for(var p in e)if(e.hasOwnProperty(p)&&!(m[u].omit.indexOf(p)>=0)){var h=e[p];c[p]=m[u].shallow.indexOf(p)>=0?h:t(h,r)}return{name:u,properties:c}}throw new Error("can't serialize object of type "+typeof e)},deserialize:function t(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof d)return e;if(Array.isArray(e))return e.map(function(e){return t(e)});if("object"==typeof e){var r=e,i=r.name,n=r.properties;if(!i)throw new Error("can't deserialize object of anonymous class");var o=m[i].klass;if(!o)throw new Error("can't deserialize unregistered class "+i);if(o.deserialize)return o.deserialize(n._serialized);for(var a=Object.create(o.prototype),s=0,l=Object.keys(n);s<l.length;s+=1){var u=l[s];a[u]=m[i].shallow.indexOf(u)>=0?n[u]:t(n[u])}return a}throw new Error("can't deserialize object of type "+typeof e)}}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(t,e,r){"use strict";var i=t("./web_worker"),n=function(){this.active={}};n.prototype.acquire=function(e){if(!this.workers){var r=t("../").workerCount;for(this.workers=[];this.workers.length<r;)this.workers.push(new i)}return this.active[e]=!0,this.workers.slice()},n.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=n},{"../":73,"./web_worker":253}]},{},[73])(73)});
},{}],85:[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAccessToken=c;var t=require("prop-types"),i=o(t);function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=!("object"===(void 0===e?"undefined":a(e))&&"[object process]"===String(e)&&!e.browser),s=u?require("mapbox-gl"):null;function p(){}var l={container:i.default.object,mapboxApiAccessToken:i.default.string,attributionControl:i.default.bool,preserveDrawingBuffer:i.default.bool,onLoad:i.default.func,onError:i.default.func,reuseMaps:i.default.bool,transformRequest:i.default.func,mapStyle:i.default.string,visible:i.default.bool,width:i.default.number.isRequired,height:i.default.number.isRequired,longitude:i.default.number.isRequired,latitude:i.default.number.isRequired,zoom:i.default.number.isRequired,bearing:i.default.number,pitch:i.default.number,altitude:i.default.number},d={mapboxApiAccessToken:c(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:p,onError:p,reuseMaps:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5};function c(){var t=null;if("undefined"!=typeof window&&window.location){var i=window.location.search.match(/access_token=([^&\/]*)/);t=i&&i[1]}return t||void 0===e||(t=t||void 0),t||null}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&i.default.checkPropTypes(l,e,"prop",t)}var h=function(){function e(t){if(r(this,e),!s)throw new Error("Mapbox not supported");!e.initialized&&console.debug&&(e.initialized=!0,console.debug("react-map-gl: using mapbox-gl v"+s.version)),this.props={},this._initialize(t)}return n(e,null,[{key:"supported",value:function(){return s&&s.supported()}}]),n(e,[{key:"finalize",value:function(){return s&&this._map?(this._destroy(),this):this}},{key:"setProps",value:function(e){return s&&this._map?(this._update(this.props,e),this):this}},{key:"resize",value:function(){return s&&this._map?(this._map.resize(),this):this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap){this._map=this.map=e.savedMap;var i=this._map.getContainer(),o=t.container;for(o.classList.add("mapboxgl-map");i.childNodes.length>0;)o.appendChild(i.childNodes[0]);this._map._container=o,e.savedMap=null,t.onLoad()}else{var n={container:t.container||document.body,center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,style:t.mapStyle,interactive:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(n.transformRequest=t.transformRequest),this._map=this.map=new s.Map(n),this.map.once("load",t.onLoad),this.map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){e.savedMap?this._map.remove():e.savedMap=this._map}},{key:"_initialize",value:function(e){f(e=Object.assign({},d,e),"Mapbox"),this.accessToken=e.mapboxApiAccessToken||d.mapboxApiAccessToken,s&&(this.accessToken?s.accessToken=this.accessToken:s.accessToken="no-token"),this._create(e);var t=this.map.getCanvas();t&&(t.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){f(t=Object.assign({},this.props,t),"Mapbox"),this._updateMapViewport(e,t),this._updateMapSize(e,t),this.props=t}},{key:"_updateMapViewport",value:function(e,t){(t.latitude!==e.latitude||t.longitude!==e.longitude||t.zoom!==e.zoom||t.pitch!==e.pitch||t.bearing!==e.bearing||t.altitude!==e.altitude)&&(this._map.jumpTo({center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.altitude!==e.altitude&&(this._map.transform.altitude=t.altitude))}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}}]),e}();exports.default=h,h.propTypes=l,h.defaultProps=d;
},{"prop-types":96,"mapbox-gl":106,"process":50}],61:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),a=l(t),r=require("../utils/style-utils"),n=require("../utils/is-immutable-map"),i=l(n),o=require("viewport-mercator-project"),s=l(o),p=require("../mapbox/mapbox"),u=l(p);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f="https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens",m="A valid API access token is required to use Mapbox data";function b(){}var v=401,_=Object.assign({},u.default.propTypes,{mapStyle:a.default.oneOfType([a.default.string,a.default.object]),preventStyleDiffing:a.default.bool,visible:a.default.bool}),g=Object.assign({},u.default.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),k={viewport:a.default.instanceOf(s.default)},M=function(t){function a(e){c(this,a);var t=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t._queryParams={},a.supported()||(t.componentDidMount=b,t.componentWillReceiveProps=b,t.componentDidUpdate=b,t.componentWillUnmount=b),t.state={accessTokenInvalid:!1},t.getMap=t.getMap.bind(t),t.queryRenderedFeatures=t.queryRenderedFeatures.bind(t),t._updateQueryParams=t._updateQueryParams.bind(t),t._updateMapSize=t._updateMapSize.bind(t),t._updateMapStyle=t._updateMapStyle.bind(t),t._mapboxMapLoaded=t._mapboxMapLoaded.bind(t),t._mapboxMapError=t._mapboxMapError.bind(t),t._renderNoTokenWarning=t._renderNoTokenWarning.bind(t),t}return y(a,e.PureComponent),d(a,null,[{key:"supported",value:function(){return u.default&&u.default.supported()}}]),d(a,[{key:"getChildContext",value:function(){return{viewport:new s.default(this.props)}}},{key:"componentDidMount",value:function(){var e=this.props.mapStyle;this._mapbox=new u.default(Object.assign({},this.props,{container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:(0,i.default)(e)?e.toJS():e})),this._map=this._mapbox.getMap(),this._updateQueryParams(e)}},{key:"componentWillReceiveProps",value:function(e){this._mapbox.setProps(e),this._updateMapStyle(this.props,e),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(e,t){var a=t||this._queryParams;return a.layers&&0===a.layers.length?[]:this._map.queryRenderedFeatures(e,a)}},{key:"_updateQueryParams",value:function(e){var t=(0,r.getInteractiveLayerIds)(e);this._queryParams={layers:t}}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(e,t){var a=t.mapStyle,n=e.mapStyle;a!==n&&((0,i.default)(a)?this.props.preventStyleDiffing?this._map.setStyle(a.toJS()):(0,r.setDiffStyle)(n,a,this._map):this._map.setStyle(a),this._updateQueryParams(a))}},{key:"_mapboxMapLoaded",value:function(e){this._mapboxMap=e}},{key:"_mapboxMapError",value:function(e){(e.error&&e.error.status||e.status)!==v||this.state.accessTokenInvalid||(console.error(m),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){if(this.state.accessTokenInvalid){return(0,e.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[(0,e.createElement)("h3",{key:"header"},m),(0,e.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),(0,e.createElement)("a",{key:"link",href:f},"Note on Map Tokens")])}return null}},{key:"render",value:function(){var t=this.props,a=t.className,r=t.width,n=t.height,i=t.style,o=t.visible,s=Object.assign({},i,{width:r,height:n,position:"relative"}),p=Object.assign({},i,{width:r,height:n,visibility:o?"visible":"hidden"}),u={position:"absolute",left:0,top:0,width:r,height:n,overflow:"hidden"};return(0,e.createElement)("div",{key:"map-container",style:s,children:[(0,e.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:p,className:a}),(0,e.createElement)("div",{key:"map-overlays",className:"overlays",style:u,children:this.props.children}),this._renderNoTokenWarning()]})}}]),a}();exports.default=M,M.displayName="StaticMap",M.propTypes=_,M.defaultProps=g,M.childContextTypes=k;
},{"react":8,"prop-types":96,"../utils/style-utils":83,"../utils/is-immutable-map":84,"viewport-mercator-project":97,"../mapbox/mapbox":85}],81:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAPBOX_LIMITS=void 0;var t=require("viewport-mercator-project"),e=r(t),a=require("assert"),i=r(a);function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=exports.MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},l={pitch:0,bearing:0,altitude:1.5};function c(t,e,a){return t<e?e:t>a?a:t}var p=function(){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,r=t.height,n=t.latitude,o=t.longitude,c=t.zoom,p=t.bearing,h=void 0===p?l.bearing:p,m=t.pitch,d=void 0===m?l.pitch:m,v=t.altitude,g=void 0===v?l.altitude:v,f=t.maxZoom,P=void 0===f?u.maxZoom:f,_=t.minZoom,b=void 0===_?u.minZoom:_,L=t.maxPitch,w=void 0===L?u.maxPitch:L,y=t.minPitch,S=void 0===y?u.minPitch:y,Z=t.transitionDuration,k=t.transitionEasing,M=t.transitionInterpolator,x=t.transitionInterruption,j=t.startPanLngLat,z=t.startZoomLngLat,N=t.startBearing,B=t.startPitch,I=t.startZoom;s(this,a),(0,i.default)(Number.isFinite(e),"`width` must be supplied"),(0,i.default)(Number.isFinite(r),"`height` must be supplied"),(0,i.default)(Number.isFinite(o),"`longitude` must be supplied"),(0,i.default)(Number.isFinite(n),"`latitude` must be supplied"),(0,i.default)(Number.isFinite(c),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:e,height:r,latitude:n,longitude:o,zoom:c,bearing:h,pitch:d,altitude:g,maxZoom:P,minZoom:b,maxPitch:w,minPitch:S,transitionDuration:Z,transitionEasing:k,transitionInterpolator:M,transitionInterruption:x}),this._interactiveState={startPanLngLat:j,startZoomLngLat:z,startBearing:N,startPitch:B,startZoom:I}}return o(a,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,a=t.startPos,i=this._interactiveState.startPanLngLat||this._unproject(a);if(!i)return this;var r=this._calculateNewLngLat({startPanLngLat:i,pos:e}),o=n(r,2),s=o[0],u=o[1];return this._getUpdatedMapState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,a=void 0===e?0:e,i=t.deltaScaleY,r=void 0===i?0:i,n=this._interactiveState,o=n.startBearing,s=n.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:a,deltaScaleY:r,startBearing:o,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedMapState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var a=t.pos,r=t.startPos,o=t.scale;(0,i.default)(o>0,"`scale` must be a positive number");var s=this._interactiveState,u=s.startZoom,l=s.startZoomLngLat;Number.isFinite(u)||(u=this._viewportProps.zoom,l=this._unproject(r)||this._unproject(a)),(0,i.default)(l,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var c=this._calculateNewZoom({scale:o,startZoom:u}),p=new e.default(Object.assign({},this._viewportProps,{zoom:c})).getLocationAtPoint({lngLat:l,pos:a}),h=n(p,2),m=h[0],d=h[1];return this._getUpdatedMapState({zoom:c,longitude:m,latitude:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new a(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var a=e.maxZoom,i=e.minZoom,r=e.zoom;e.zoom=c(r,i,a);var n=e.maxPitch,o=e.minPitch,s=e.pitch;return e.pitch=c(s,o,n),Object.assign(e,(0,t.normalizeViewportProps)(e)),e}},{key:"_unproject",value:function(t){var a=new e.default(this._viewportProps);return t&&a.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var a=t.startPanLngLat,i=t.pos;return new e.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:a,pos:i})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,a=t.startZoom,i=this._viewportProps,r=i.maxZoom,n=i.minZoom;return c(a+Math.log2(e),n,r)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,a=t.deltaScaleY,i=t.startBearing,r=t.startPitch;a=c(a,-1,1);var n=this._viewportProps,o=n.minPitch,s=n.maxPitch,u=r;return a>0?u=r+a*(s-r):a<0&&(u=r-a*(o-r)),{pitch:u,bearing:i+180*e}}}]),a}();exports.default=p;
},{"viewport-mercator-project":97,"assert":88}],129:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("math.gl"),r=require("assert"),t=n(r);function n(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var u=function(){function r(){o(this,r)}return a(r,[{key:"arePropsEqual",value:function(r,t){var n=!0,a=!1,o=void 0;try{for(var u,i=(this.propNames||[])[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var l=u.value;if(!(0,e.equals)(r[l],t[l]))return!1}}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return!0}},{key:"initializeProps",value:function(e,r){return{start:e,end:r}}},{key:"interpolateProps",value:function(e,r,n){(0,t.default)(!1,"interpolateProps is not implemented")}}]),r}();exports.default=u;
},{"math.gl":132,"assert":88}],162:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=t,exports.lerp=e,exports.isValid=n,exports.getEndValueByShortestPath=i;var r={longitude:1,bearing:1};function t(r,t){var e=r%t;return e<0?t+e:e}function e(r,t,n){return Array.isArray(r)?r.map(function(r,u){return e(r,t[u],n)}):n*t+(1-n)*r}function n(r){return Number.isFinite(r)||Array.isArray(r)}function u(t){return r[t]}function i(r,t,e){return u(r)&&Math.abs(e-t)>180&&(e=e<0?e+360:e-360),e}
},{}],130:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("assert"),e=a(t),r=require("./transition-interpolator"),n=a(r),o=require("viewport-mercator-project"),i=require("./transition-utils");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=["longitude","latitude","zoom","bearing","pitch"],p=["latitude","longitude","zoom","width","height"],y=["bearing","pitch"],d=function(t){function r(){l(this,r);var t=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.propNames=s,t}return c(r,n.default),u(r,[{key:"initializeProps",value:function(t,r){var n={},o={},a=!0,u=!1,l=void 0;try{for(var f,c=p[Symbol.iterator]();!(a=(f=c.next()).done);a=!0){var s=f.value,d=t[s],v=r[s];(0,e.default)((0,i.isValid)(d)&&(0,i.isValid)(v),s+" must be supplied for transition"),n[s]=d,o[s]=(0,i.getEndValueByShortestPath)(s,d,v)}}catch(t){u=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}var h=!0,b=!1,w=void 0;try{for(var m,_=y[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){var g=m.value,O=t[g]||0,P=r[g]||0;n[g]=O,o[g]=(0,i.getEndValueByShortestPath)(g,O,P)}}catch(t){b=!0,w=t}finally{try{!h&&_.return&&_.return()}finally{if(b)throw w}}return{start:n,end:o}}},{key:"interpolateProps",value:function(t,e,r){var n=(0,o.flyToViewport)(t,e,r),a=!0,u=!1,l=void 0;try{for(var f,c=y[Symbol.iterator]();!(a=(f=c.next()).done);a=!0){var s=f.value;n[s]=(0,i.lerp)(t[s],e[s],r)}}catch(t){u=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}return n}}]),r}();exports.default=d;
},{"assert":88,"./transition-interpolator":129,"viewport-mercator-project":97,"./transition-utils":162}],131:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("assert"),t=i(e),r=require("./transition-interpolator"),n=i(r),o=require("./transition-utils");function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=["longitude","latitude","zoom","bearing","pitch"],c=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;u(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.propNames=e,t}return f(r,n.default),a(r,[{key:"initializeProps",value:function(e,r){var n={},i={},a=!0,u=!1,l=void 0;try{for(var f,s=this.propNames[Symbol.iterator]();!(a=(f=s.next()).done);a=!0){var c=f.value,p=e[c],y=r[c];(0,t.default)((0,o.isValid)(p)&&(0,o.isValid)(y),c+" must be supplied for transition"),n[c]=p,i[c]=(0,o.getEndValueByShortestPath)(c,p,y)}}catch(e){u=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw l}}return{start:n,end:i}}},{key:"interpolateProps",value:function(e,t,r){var n={},i=!0,a=!1,u=void 0;try{for(var l,f=this.propNames[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var s=l.value;n[s]=(0,o.lerp)(e[s],t[s],r)}}catch(e){a=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw u}}return n}}]),r}();exports.default=c;
},{"assert":88,"./transition-interpolator":129,"./transition-utils":162}],114:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./transition-interpolator");Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return o(e).default}});var r=require("./viewport-fly-to-interpolator");Object.defineProperty(exports,"ViewportFlyToInterpolator",{enumerable:!0,get:function(){return o(r).default}});var t=require("./linear-interpolator");function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return o(t).default}});
},{"./transition-interpolator":129,"./viewport-fly-to-interpolator":130,"./linear-interpolator":131}],69:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRANSITION_EVENTS=void 0;var t=require("assert"),n=e(t),i=require("./transition"),r=require("./map-state"),o=e(r);function e(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,i,r){return i&&t(n.prototype,i),r&&t(n,r),n}}();function a(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var p=function(){},u=exports.TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},l={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new i.LinearInterpolator,transitionInterruption:u.BREAK,onTransitionStart:p,onTransitionInterrupt:p,onTransitionEnd:p},h={animation:null,propsInTransition:null,startProps:null,endProps:null},T=function(){function t(n){a(this,t),this.props=n,this.state=h,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return s(t,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(t){var n=!1,i=this.props;if(this.props=t,this._shouldIgnoreViewportChange(i,t))return n;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(t)){var o=Object.assign({},i,this.state.interruption===u.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&i.onTransitionInterrupt(),t.onTransitionStart(),this._triggerTransition(o,t),n=!0}else r&&(i.onTransitionInterrupt(),this._endTransition());return n}},{key:"_isTransitionInProgress",value:function(){return Boolean(this.state.propsInTransition)}},{key:"_isTransitionEnabled",value:function(t){return t.transitionDuration>0&&Boolean(t.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,n){return this._isTransitionInProgress()?this.state.interruption===u.IGNORE||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(t,n)}},{key:"_triggerTransition",value:function(t,i){(0,n.default)(this._isTransitionEnabled(i),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var r=i.transitionInterpolator.initializeProps(t,i);this.state={duration:i.transitionDuration,easing:i.transitionEasing,interpolator:i.transitionInterpolator,interruption:i.transitionInterruption,startTime:Date.now(),startProps:r.start,endProps:r.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=h}},{key:"_updateViewport",value:function(){var t=Date.now(),n=this.state,i=n.startTime,r=n.duration,e=n.easing,s=n.interpolator,a=n.startProps,p=n.endProps,u=!1,l=(t-i)/r;l>=1&&(l=1,u=!0),l=e(l);var h=s.interpolateProps(a,p,l),T=new o.default(Object.assign({},this.props,h));this.state.propsInTransition=T.getViewportProps(),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();exports.default=T,T.defaultProps=l;
},{"assert":88,"./transition":114,"./map-state":81}],70:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./map-state"),e=i(t),a=require("./transition"),n=require("./transition-manager");function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h={transitionDuration:0},u={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new a.LinearInterpolator,transitionInterruption:n.TRANSITION_EVENTS.BREAK},p=5,c=1.2,l=.01,g={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},v=function(){function t(){s(this,t),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}return r(t,[{key:"handleEvent",value:function(t){switch(this.mapState=this.getMapState(),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"setState",value:function(t){Object.assign(this._state,t),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},t.getViewportProps(),e);this.onViewportChange&&Object.keys(i).some(function(t){return n[t]!==i[t]})&&this.onViewportChange(i),this.setState(Object.assign({},t.getInteractiveState(),a))}},{key:"getMapState",value:function(t){return new e.default(Object.assign({},this.mapStateProps,this._state,t))}},{key:"setOptions",value:function(t){var a=t.onChangeViewport,n=t.touchZoomRotate,i=void 0===n||n,o=t.onViewportChange,r=t.onStateChange,s=void 0===r?this.onStateChange:r,h=t.eventManager,u=void 0===h?this.eventManager:h,p=t.scrollZoom,c=void 0===p||p,l=t.dragPan,v=void 0===l||l,d=t.dragRotate,f=void 0===d||d,m=t.doubleClickZoom,S=void 0===m||m,y=t.touchZoom,P=void 0===y||y,w=t.touchRotate,_=void 0!==w&&w,b=t.keyboard,E=void 0===b||b;this.onViewportChange=o||a,this.onStateChange=s,this.mapStateProps&&this.mapStateProps.height!==t.height&&this.updateViewport(new e.default(t)),this.mapStateProps=t,this.eventManager!==u&&(this.eventManager=u,this._events={},this.toggleEvents(this.events,!0));var k=Boolean(this.onViewportChange);this.toggleEvents(g.WHEEL,k&&c),this.toggleEvents(g.PAN,k&&(v||f)),this.toggleEvents(g.PINCH,k&&i),this.toggleEvents(g.DOUBLE_TAP,k&&S),this.toggleEvents(g.KEYBOARD,k&&E),this.scrollZoom=c,this.dragPan=v,this.dragRotate=f,this.doubleClickZoom=S,this.touchZoom=i&&P,this.touchRotate=i&&_,this.keyboard=E}},{key:"toggleEvents",value:function(t,e){var a=this;this.eventManager&&t.forEach(function(t){a._events[t]!==e&&(a._events[t]=e,e?a.eventManager.on(t,a.handleEvent):a.eventManager.off(t,a.handleEvent))})}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t),a=this.mapState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(a,h,{isDragging:!0})}},{key:"_onPan",value:function(t){return this.isFunctionKeyPressed(t)||t.rightButton?this._onPanRotate(t):this._onPanMove(t)}},{key:"_onPanEnd",value:function(t){var e=this.mapState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),a=this.mapState.pan({pos:e});return this.updateViewport(a,h,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,a=t.deltaY,n=this.getCenter(t),i=o(n,2)[1],r=i-a,s=this.mapState.getViewportProps(),u=s.width,l=s.height,g=e/u,v=0;a>0?Math.abs(l-r)>p&&(v=a/(r-l)*c):a<0&&r>p&&(v=1-i/r),v=Math.min(1,Math.max(-1,v));var d=this.mapState.rotate({deltaScaleX:g,deltaScaleY:v});return this.updateViewport(d,h,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();var e=this.getCenter(t),a=t.delta,n=2/(1+Math.exp(-Math.abs(a*l)));a<0&&0!==n&&(n=1/n);var i=this.mapState.zoom({pos:e,scale:n});return this.updateViewport(i,h)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),a=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(a,h,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var a=t.scale,n=this.getCenter(t);e=e.zoom({pos:n,scale:a})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,h,{isDragging:!0})}},{key:"_onPinchEnd",value:function(t){var e=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),a=this.isFunctionKeyPressed(t),n=this.mapState.zoom({pos:e,scale:a?.5:2});return this.updateViewport(n,u)}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e=this.isFunctionKeyPressed(t),a=this.mapStateProps,n=void 0;switch(t.srcEvent.keyCode){case 189:n=e?this.getMapState({zoom:a.zoom-2}):this.getMapState({zoom:a.zoom-1});break;case 187:n=e?this.getMapState({zoom:a.zoom+2}):this.getMapState({zoom:a.zoom+1});break;case 37:n=e?this.getMapState({bearing:a.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:n=e?this.getMapState({bearing:a.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:n=e?this.getMapState({pitch:a.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:n=e?this.getMapState({pitch:a.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(n,u)}}]),t}();exports.default=v;
},{"./map-state":81,"./transition":114,"./transition-manager":69}],101:[function(require,module,exports) {
var define;
var e;!function(i,s,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof e&&e.amd?e("bowser",o):i.bowser=o()}(this,0,function(){var e=!0;function i(i){function s(e){var s=i.match(e);return s&&s.length>1&&s[1]||""}function o(e){var s=i.match(e);return s&&s.length>1&&s[2]||""}var r,n=s(/(ipod|iphone|ipad)/i).toLowerCase(),t=!/like android/i.test(i)&&/android/i.test(i),a=/nexus\s*[0-6]\s*/i.test(i),d=!a&&/nexus\s*[0-9]+/i.test(i),m=/CrOS/.test(i),v=/silk/i.test(i),p=/sailfish/i.test(i),l=/tizen/i.test(i),c=/(web|hpw)os/i.test(i),u=/windows phone/i.test(i),f=(/SamsungBrowser/i.test(i),!u&&/windows/i.test(i)),h=!n&&!v&&/macintosh/i.test(i),w=!t&&!p&&!l&&!c&&/linux/i.test(i),b=o(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),g=s(/version\/(\d+(\.\d+)?)/i),k=/tablet/i.test(i)&&!/tablet pc/i.test(i),x=!k&&/[^-]mobi/i.test(i),y=/xbox/i.test(i);/opera/i.test(i)?r={name:"Opera",opera:e,version:g||s(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(i)?r={name:"Opera",opera:e,version:s(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||g}:/SamsungBrowser/i.test(i)?r={name:"Samsung Internet for Android",samsungBrowser:e,version:g||s(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(i)?r={name:"Opera Coast",coast:e,version:g||s(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(i)?r={name:"Yandex Browser",yandexbrowser:e,version:g||s(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(i)?r={name:"UC Browser",ucbrowser:e,version:s(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(i)?r={name:"Maxthon",maxthon:e,version:s(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(i)?r={name:"Epiphany",epiphany:e,version:s(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(i)?r={name:"Puffin",puffin:e,version:s(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(i)?r={name:"Sleipnir",sleipnir:e,version:s(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(i)?r={name:"K-Meleon",kMeleon:e,version:s(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:u?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(r.msedge=e,r.version=b):(r.msie=e,r.version=s(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(i)?r={name:"Internet Explorer",msie:e,version:s(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:m?r={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:s(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(i)?r={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(i)?r={name:"Vivaldi",vivaldi:e,version:s(/vivaldi\/(\d+(\.\d+)?)/i)||g}:p?r={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:s(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(i)?r={name:"SeaMonkey",seamonkey:e,version:s(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(i)?(r={name:"Firefox",firefox:e,version:s(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(i)&&(r.firefoxos=e,r.osname="Firefox OS")):v?r={name:"Amazon Silk",silk:e,version:s(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(i)?r={name:"PhantomJS",phantom:e,version:s(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(i)?r={name:"SlimerJS",slimer:e,version:s(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(i)||/rim\stablet/i.test(i)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:g||s(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:c?(r={name:"WebOS",osname:"WebOS",webos:e,version:g||s(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(i)&&(r.touchpad=e)):/bada/i.test(i)?r={name:"Bada",osname:"Bada",bada:e,version:s(/dolfin\/(\d+(\.\d+)?)/i)}:l?r={name:"Tizen",osname:"Tizen",tizen:e,version:s(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||g}:/qupzilla/i.test(i)?r={name:"QupZilla",qupzilla:e,version:s(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||g}:/chromium/i.test(i)?r={name:"Chromium",chromium:e,version:s(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||g}:/chrome|crios|crmo/i.test(i)?r={name:"Chrome",chrome:e,version:s(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:t?r={name:"Android",version:g}:/safari|applewebkit/i.test(i)?(r={name:"Safari",safari:e},g&&(r.version=g)):n?(r={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},g&&(r.version=g)):r=/googlebot/i.test(i)?{name:"Googlebot",googlebot:e,version:s(/googlebot\/(\d+(\.\d+))/i)||g}:{name:s(/^(.*)\/(.*) /),version:o(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(i)?(/(apple)?webkit\/537\.36/i.test(i)?(r.name=r.name||"Blink",r.blink=e):(r.name=r.name||"Webkit",r.webkit=e),!r.version&&g&&(r.version=g)):!r.opera&&/gecko\//i.test(i)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||s(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!t&&!r.silk?!r.windowsphone&&n?(r[n]=e,r.ios=e,r.osname="iOS"):h?(r.mac=e,r.osname="macOS"):y?(r.xbox=e,r.osname="Xbox"):f?(r.windows=e,r.osname="Windows"):w&&(r.linux=e,r.osname="Linux"):(r.android=e,r.osname="Android");var S="";r.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(s(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?S=s(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?S=(S=s(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):n?S=(S=s(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):t?S=s(/android[ \/-](\d+(\.\d+)*)/i):r.webos?S=s(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?S=s(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?S=s(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(S=s(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(r.osversion=S);var B=!r.windows&&S.split(".")[0];return k||d||"ipad"==n||t&&(3==B||B>=4&&!x)||r.silk?r.tablet=e:(x||"iphone"==n||"ipod"==n||t||a||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=e:r.x=e,r}var s=i("undefined"!=typeof navigator&&navigator.userAgent||"");function o(e){return e.split(".").length}function r(e,i){var s,o=[];if(Array.prototype.map)return Array.prototype.map.call(e,i);for(s=0;s<e.length;s++)o.push(i(e[s]));return o}function n(e){for(var i=Math.max(o(e[0]),o(e[1])),s=r(e,function(e){var s=i-o(e);return r((e+=new Array(s+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(s[0][i]>s[1][i])return 1;if(s[0][i]!==s[1][i])return-1;if(0===i)return 0}}function t(e,o,r){var t=s;"string"==typeof o&&(r=o,o=void 0),void 0===o&&(o=!1),r&&(t=i(r));var a=""+t.version;for(var d in e)if(e.hasOwnProperty(d)&&t[d]){if("string"!=typeof e[d])throw new Error("Browser version in the minVersion map should be a string: "+d+": "+String(e));return n([a,e[d]])<0}return o}return s.test=function(e){for(var i=0;i<e.length;++i){var o=e[i];if("string"==typeof o&&o in s)return!0}return!1},s.isUnsupportedBrowser=t,s.compareVersions=n,s.check=function(e,i,s){return!t(e,i,s)},s._detect=i,s.detect=i,s});
},{}],80:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("bowser"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var u=t.default.webkit||t.default.blink?"-webkit-":t.default.gecko?"-moz-":"";exports.default={DEFAULTS:{},CURSOR:{GRABBING:u+"grabbing",GRAB:u+"grab",POINTER:"pointer"}};
},{"bowser":101}],82:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}];function o(e){return"react-map-gl: `"+e+"` is deprecated and will be removed in a later version."}function n(e){return"Use `"+e+"` instead."}function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.forEach(function(e){if(t.hasOwnProperty(e.old)){var r=o(e.old);e.new&&(r=r+" "+n(e.new)),console.warn(r)}})}
},{}],60:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=_(t),a=require("./static-map"),i=_(a),r=require("../utils/map-state"),o=require("viewport-mercator-project"),s=_(o),u=require("../utils/transition-manager"),l=_(u),c=require("mjolnir.js"),d=require("../utils/map-controls"),f=_(d),p=require("../config"),g=_(p),h=require("../utils/deprecate-warn"),v=_(h);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=Object.assign({},i.default.propTypes,{maxZoom:n.default.number,minZoom:n.default.number,maxPitch:n.default.number,minPitch:n.default.number,onViewportChange:n.default.func,transitionDuration:n.default.number,transitionInterpolator:n.default.object,transitionInterruption:n.default.number,transitionEasing:n.default.func,onTransitionStart:n.default.func,onTransitionInterrupt:n.default.func,onTransitionEnd:n.default.func,scrollZoom:n.default.bool,dragPan:n.default.bool,dragRotate:n.default.bool,doubleClickZoom:n.default.bool,touchZoom:n.default.bool,touchRotate:n.default.bool,keyboard:n.default.bool,onHover:n.default.func,onClick:n.default.func,clickRadius:n.default.number,getCursor:n.default.func,visibilityConstraints:n.default.shape({minZoom:n.default.number,maxZoom:n.default.number,minPitch:n.default.number,maxPitch:n.default.number}),mapControls:n.default.shape({events:n.default.arrayOf(n.default.string),handleEvent:n.default.func})}),k=function(e){var t=e.isDragging,n=e.isHovering;return t?g.default.CURSOR.GRABBING:n?g.default.CURSOR.POINTER:g.default.CURSOR.GRAB},w=Object.assign({},i.default.defaultProps,r.MAPBOX_LIMITS,l.default.defaultProps,{onViewportChange:null,onClick:null,onHover:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,clickRadius:0,getCursor:k,visibilityConstraints:r.MAPBOX_LIMITS}),O={viewport:n.default.instanceOf(s.default),isDragging:n.default.bool,eventManager:n.default.object},P=function(t){function n(e){m(this,n);var t=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return(0,v.default)(e),t.state={isDragging:!1,isHovering:!1},t._mapControls=e.mapControls||new f.default,t._eventManager=new c.EventManager(null,{rightButton:!0,legacyBlockScroll:!1}),t.getMap=t.getMap.bind(t),t.queryRenderedFeatures=t.queryRenderedFeatures.bind(t),t._checkVisibilityConstraints=t._checkVisibilityConstraints.bind(t),t._getFeatures=t._getFeatures.bind(t),t._onInteractiveStateChange=t._onInteractiveStateChange.bind(t),t._getPos=t._getPos.bind(t),t._onMouseMove=t._onMouseMove.bind(t),t._onMouseClick=t._onMouseClick.bind(t),t._eventCanvasLoaded=t._eventCanvasLoaded.bind(t),t._staticMapLoaded=t._staticMapLoaded.bind(t),t}return C(n,e.PureComponent),b(n,null,[{key:"supported",value:function(){return i.default.supported()}}]),b(n,[{key:"getChildContext",value:function(){return{viewport:new s.default(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var e=this._eventManager;e.on("mousemove",this._onMouseMove),e.on("click",this._onMouseClick),this._mapControls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange,eventManager:e})),this._transitionManager=new l.default(this.props)}},{key:"componentWillUpdate",value:function(e){this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map?this._map.getMap():null}},{key:"queryRenderedFeatures",value:function(e,t){return this._map.queryRenderedFeatures(e,t)}},{key:"_checkVisibilityConstraints",value:function(e){var t,n=e.visibilityConstraints;for(var a in e){var i=(t=a)[0].toUpperCase()+t.slice(1),r="min"+i,o="max"+i;if(r in n&&e[a]<n[r])return!1;if(o in n&&e[a]>n[o])return!1}return!0}},{key:"_getFeatures",value:function(e){var t=e.pos,n=e.radius,a=void 0;if(n){var i=n,r=[[t[0]-i,t[1]+i],[t[0]+i,t[1]-i]];a=this._map.queryRenderedFeatures(r)}else a=this._map.queryRenderedFeatures(t);return a}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"_onMouseMove",value:function(e){if(!this.state.isDragging){var t=this._getPos(e),n=this._getFeatures({pos:t,radius:this.props.clickRadius}),a=n&&n.length>0;if(a!==this.state.isHovering&&this.setState({isHovering:a}),this.props.onHover){var i=new s.default(this.props);e.lngLat=i.unproject(t),e.features=n,this.props.onHover(e)}}}},{key:"_onMouseClick",value:function(e){if(this.props.onClick){var t=this._getPos(e),n=new s.default(this.props);e.lngLat=n.unproject(t),e.features=this._getFeatures({pos:t,radius:this.props.clickRadius}),this.props.onClick(e)}}},{key:"_eventCanvasLoaded",value:function(e){this._eventManager.setElement(e)}},{key:"_staticMapLoaded",value:function(e){this._map=e}},{key:"render",value:function(){var t=this.props,n={width:t.width,height:t.height,position:"relative",cursor:(0,t.getCursor)(this.state)};return(0,e.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:n},(0,e.createElement)(i.default,Object.assign({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{visible:this._checkVisibilityConstraints(this.props),ref:this._staticMapLoaded,children:this.props.children})))}}]),n}();exports.default=P,P.displayName="InteractiveMap",P.propTypes=M,P.defaultProps=w,P.childContextTypes=O;
},{"react":8,"prop-types":96,"./static-map":61,"../utils/map-state":81,"viewport-mercator-project":97,"../utils/transition-manager":69,"mjolnir.js":98,"../utils/map-controls":70,"../config":80,"../utils/deprecate-warn":82}],62:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=a(t),o=require("viewport-mercator-project"),n=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p={captureScroll:r.default.bool,captureDrag:r.default.bool,captureClick:r.default.bool,captureDoubleClick:r.default.bool},f={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},s={viewport:r.default.instanceOf(n.default),isDragging:r.default.bool,eventManager:r.default.object},b={captureScroll:"wheel",captureDrag:"panstart",captureClick:"click",captureDoubleClick:"dblclick"},v=function(t){function r(e){c(this,r);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._events=null,t._onContainerLoad=t._onContainerLoad.bind(t),t}return i(r,e.Component),u(r,[{key:"_onContainerLoad",value:function(e){var t=this.context.eventManager;if(t){var r=this._events;if(r&&(t.off(r),r=null),e){for(var o in r={},b){var n=this.props[o],a=b[o];n&&(r[a]=this._captureEvent)}t.on(r,e)}this._events=r}}},{key:"_captureEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return null}}]),r}();exports.default=v,v.propTypes=p,v.defaultProps=f,v.contextTypes=s;
},{"react":8,"prop-types":96,"viewport-mercator-project":97}],63:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=a(t),n=require("./base-control"),o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=Object.assign({},o.default.propTypes,{className:r.default.string,longitude:r.default.number.isRequired,latitude:r.default.number.isRequired,offsetLeft:r.default.number,offsetTop:r.default.number}),p=Object.assign({},o.default.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),d=function(t){function r(){return f(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return l(r,o.default),u(r,[{key:"render",value:function(){var t=this.props,r=t.className,n=t.longitude,o=t.latitude,a=t.offsetLeft,u=t.offsetTop,f=this.context.viewport.project([n,o]),s=i(f,2),l={position:"absolute",left:s[0]+a,top:s[1]+u};return(0,e.createElement)("div",{className:"mapboxgl-marker "+r,ref:this._onContainerLoad,style:l,children:this.props.children})}}]),r}();exports.default=d,d.displayName="Marker",d.propTypes=c,d.defaultProps=p;
},{"react":8,"prop-types":96,"./base-control":62}],86:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDynamicPosition=e;var t=exports.ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}};function e(e){var o=e.x,r=e.y,i=e.width,f=e.height,x=e.selfWidth,y=e.selfHeight,n=e.anchor,s=e.padding,h=void 0===s?0:s,l=t[n],a=l.x,d=l.y,p=r-d*y,c=p+y;if(p<h)for(;p<h&&d>=.5;)d-=.5,p+=.5*y;else if(c>f-h)for(;c>f-h&&d<=.5;)d+=.5,c-=.5*y;var g=o-a*x,u=g+x,v=.5;if(.5===d&&(a=Math.floor(a),v=1),g<h)for(;g<h&&a>=v;)a-=v,g+=v*x;else if(u>i-h)for(;u>i-h&&a<=1-v;)a+=v,u-=v*x;return Object.keys(t).find(function(e){var o=t[e];return o.x===a&&o.y===d})}
},{}],64:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=a(t),o=require("./base-control"),r=a(o),i=require("../utils/dynamic-position");function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=Object.assign({},r.default.propTypes,{className:n.default.string,longitude:n.default.number.isRequired,latitude:n.default.number.isRequired,offsetLeft:n.default.number,offsetTop:n.default.number,tipSize:n.default.number,closeButton:n.default.bool,closeOnClick:n.default.bool,anchor:n.default.oneOf(Object.keys(i.ANCHOR_POSITION)),dynamicPosition:n.default.bool,onClose:n.default.func}),d=Object.assign({},r.default.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),h=function(t){function n(e){u(this,n);var t=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._getPosition=t._getPosition.bind(t),t._onClose=t._onClose.bind(t),t._contentLoaded=t._contentLoaded.bind(t),t._renderTip=t._renderTip.bind(t),t._renderContent=t._renderContent.bind(t),t}return p(n,r.default),l(n,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(e,t){var n=this.context.viewport,o=this.props,r=o.anchor,a=o.dynamicPosition,s=o.tipSize;return this._content&&a?(0,i.getDynamicPosition)({x:e,y:t,anchor:r,padding:s,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):r}},{key:"_onClose",value:function(){this.props.onClose()}},{key:"_contentLoaded",value:function(e){this._content=e}},{key:"_renderTip",value:function(){var t=this.props.tipSize;return(0,e.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:t}})}},{key:"_renderContent",value:function(){var t=this.props,n=t.closeButton,o=t.children;return(0,e.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[n&&(0,e.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"×"),o])}},{key:"render",value:function(){var t=this.props,n=t.className,o=t.longitude,r=t.latitude,a=t.offsetLeft,l=t.offsetTop,u=t.closeOnClick,c=this.context.viewport.project([o,r]),p=s(c,2),f=p[0],d=p[1],h=this._getPosition(f,d),b=i.ANCHOR_POSITION[h],y={position:"absolute",left:f+a,top:d+l,transform:"translate("+100*-b.x+"%, "+100*-b.y+"%)"};return(0,e.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-"+h+" "+n,style:y,ref:this._onContainerLoad,onClick:u?this._onClose:null},[this._renderTip(),this._renderContent()])}}]),n}();exports.default=h,h.displayName="Popup",h.propTypes=f,h.defaultProps=d;
},{"react":8,"prop-types":96,"./base-control":62,"../utils/dynamic-position":86}],65:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),o=c(t),n=require("./base-control"),r=c(n),a=require("../utils/map-state"),i=c(a),s=require("../utils/transition-manager"),u=c(s),p=require("../utils/deprecate-warn"),l=c(p);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=Object.assign({},u.default.defaultProps,{transitionDuration:300}),_=Object.assign({},r.default.propTypes,{className:o.default.string,onViewportChange:o.default.func.isRequired,showCompass:o.default.bool,showZoom:o.default.bool}),w=Object.assign({},r.default.defaultProps,{className:"",onViewportChange:function(){},showCompass:!0,showZoom:!0}),y=function(t){function o(e){d(this,o);var t=m(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return(0,l.default)(e),t._updateViewport=t._updateViewport.bind(t),t._onZoomIn=t._onZoomIn.bind(t),t._onZoomOut=t._onZoomOut.bind(t),t._onResetNorth=t._onResetNorth.bind(t),t._renderCompass=t._renderCompass.bind(t),t._renderButton=t._renderButton.bind(t),t}return h(o,r.default),f(o,[{key:"shouldComponentUpdate",value:function(e,t,o){return this.context.viewport.bearing!==o.viewport.bearing}},{key:"_updateViewport",value:function(e){var t=this.context.viewport,o=new i.default(Object.assign({},t,e));(this.props.onChangeViewport||this.props.onViewportChange)(Object.assign({},o.getViewportProps(),b))}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var t=this.context.viewport.bearing;return(0,e.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate("+t+"deg)"}})}},{key:"_renderButton",value:function(t,o,n,r){return(0,e.createElement)("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-"+t,type:"button",title:o,onClick:n,children:r})}},{key:"render",value:function(){var t=this.props,o=t.className,n=t.showCompass,r=t.showZoom;return(0,e.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group "+o,ref:this._onContainerLoad},[r&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),r&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),o}();exports.default=y,y.displayName="NavigationControl",y.propTypes=_,y.defaultProps=w;
},{"react":8,"prop-types":96,"./base-control":62,"../utils/map-state":81,"../utils/transition-manager":69,"../utils/deprecate-warn":82}],87:[function(require,module,exports) {
var global = arguments[3];
var d=arguments[3];module.exports={window:"undefined"!=typeof window?window:d,global:void 0!==d?d:window,document:"undefined"!=typeof document?document:{}};
},{}],66:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=i(t),n=require("../components/base-control"),o=i(n),a=require("../utils/globals");function i(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign({},o.default.propTypes,{redraw:r.default.func.isRequired}),d={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},f=function(t){function r(e){u(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._redraw=t._redraw.bind(t),t._canvasLoaded=t._canvasLoaded.bind(t),t}return p(r,o.default),c(r,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var e=a.window.devicePixelRatio||1,t=this._canvas.getContext("2d");t.save(),t.scale(e,e);var r=this.context,n=r.viewport,o=r.isDragging;this.props.redraw({width:n.width,height:n.height,ctx:t,isDragging:o,project:n.project.bind(n),unproject:n.unproject.bind(n)}),t.restore()}},{key:"_canvasLoaded",value:function(e){this._canvas=e,this._onContainerLoad(e)}},{key:"render",value:function(){var t=a.window.devicePixelRatio||1,r=this.context.viewport,n=r.width,o=r.height;return(0,e.createElement)("canvas",{ref:this._canvasLoaded,width:n*t,height:o*t,style:{width:n+"px",height:o+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})}}]),r}();exports.default=f,f.displayName="CanvasOverlay",f.propTypes=l,f.defaultProps=d;
},{"react":8,"prop-types":96,"../components/base-control":62,"../utils/globals":87}],67:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=i(t),n=require("../components/base-control"),o=i(n);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign({},o.default.propTypes,{redraw:r.default.func.isRequired,style:r.default.object}),l={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},f=function(t){function r(){return a(this,r),p(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return c(r,o.default),u(r,[{key:"render",value:function(){var t=this.context,r=t.viewport,n=t.isDragging,o=Object.assign({position:"absolute",pointerEvents:"none",left:0,top:0,width:r.width,height:r.height},this.props.style);return(0,e.createElement)("div",{ref:this._onContainerLoad,style:o},this.props.redraw({width:r.width,height:r.height,isDragging:n,project:r.project.bind(r),unproject:r.unproject.bind(r)}))}}]),r}();exports.default=f,f.displayName="HTMLOverlay",f.propTypes=s,f.defaultProps=l;
},{"react":8,"prop-types":96,"../components/base-control":62}],68:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=i(t),n=require("../components/base-control"),o=i(n);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign({},o.default.propTypes,{redraw:r.default.func.isRequired,style:r.default.object}),l={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},f=function(t){function r(){return a(this,r),p(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return c(r,o.default),u(r,[{key:"render",value:function(){var t=this.context,r=t.viewport,n=t.isDragging,o=Object.assign({pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style);return(0,e.createElement)("svg",{width:r.width,height:r.height,ref:this._onContainerLoad,style:o},this.props.redraw({width:r.width,height:r.height,isDragging:n,project:r.project.bind(r),unproject:r.unproject.bind(r)}))}}]),r}();exports.default=f,f.displayName="SVGOverlay",f.propTypes=s,f.defaultProps=l;
},{"react":8,"prop-types":96,"../components/base-control":62}],55:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.experimental=exports.FlyToInterpolator=exports.LinearInterpolator=exports.TransitionInterpolator=exports.TRANSITION_EVENTS=exports.SVGOverlay=exports.HTMLOverlay=exports.CanvasOverlay=exports.NavigationControl=exports.Popup=exports.Marker=exports.BaseControl=exports.StaticMap=exports.InteractiveMap=exports.default=void 0;var e=require("./components/interactive-map");Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return v(e).default}}),Object.defineProperty(exports,"InteractiveMap",{enumerable:!0,get:function(){return v(e).default}});var r=require("./components/static-map");Object.defineProperty(exports,"StaticMap",{enumerable:!0,get:function(){return v(r).default}});var t=require("./components/base-control");Object.defineProperty(exports,"BaseControl",{enumerable:!0,get:function(){return v(t).default}});var o=require("./components/marker");Object.defineProperty(exports,"Marker",{enumerable:!0,get:function(){return v(o).default}});var n=require("./components/popup");Object.defineProperty(exports,"Popup",{enumerable:!0,get:function(){return v(n).default}});var a=require("./components/navigation-control");Object.defineProperty(exports,"NavigationControl",{enumerable:!0,get:function(){return v(a).default}});var u=require("./overlays/canvas-overlay");Object.defineProperty(exports,"CanvasOverlay",{enumerable:!0,get:function(){return v(u).default}});var p=require("./overlays/html-overlay");Object.defineProperty(exports,"HTMLOverlay",{enumerable:!0,get:function(){return v(p).default}});var i=require("./overlays/svg-overlay");Object.defineProperty(exports,"SVGOverlay",{enumerable:!0,get:function(){return v(i).default}});var l=require("./utils/transition-manager");Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return l.TRANSITION_EVENTS}});var s=require("./utils/transition");Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return s.TransitionInterpolator}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return s.LinearInterpolator}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return s.ViewportFlyToInterpolator}});var c=require("./utils/map-controls"),f=v(c);function v(e){return e&&e.__esModule?e:{default:e}}var x=exports.experimental={MapControls:f.default};
},{"./components/interactive-map":60,"./components/static-map":61,"./components/base-control":62,"./components/marker":63,"./components/popup":64,"./components/navigation-control":65,"./overlays/canvas-overlay":66,"./overlays/html-overlay":67,"./overlays/svg-overlay":68,"./utils/transition-manager":69,"./utils/transition":114,"./utils/map-controls":70}],54:[function(require,module,exports) {

},{}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t=require("react"),r=n(t),a=require("deck.gl"),o=n(a),s=require("react-map-gl"),i=n(s);function n(e){return e&&e.__esModule?e:{default:e}}require("mapbox-gl/dist/mapbox-gl.css");const l="pk.eyJ1IjoieWRhaSIsImEiOiJjajN1aHl3aGkwMTBrMnFvNHN1djBzN2FvIn0.lK8o98Efn5-tQR0qcJiwvw";let u=class extends r.default.Component{constructor(e){super(e),this.state={viewport:{width:660,height:330,longitude:-73.99486,latitude:40.729496,zoom:12}}}render(){return r.default.createElement(i.default,e({},this.state.viewport,{onViewportChange:e=>this.setState({viewport:e}),mapStyle:"mapbox://styles/kud360/cj9t2r3tc2l6k2rru9mgz31g3",mapboxApiAccessToken:l}))}};exports.default=u;
},{"react":8,"deck.gl":53,"react-map-gl":55,"mapbox-gl/dist/mapbox-gl.css":54}],49:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),a=t(e);function t(e){return e&&e.__esModule?e:{default:e}}const l=[{text:"Safe Location",color:"#8bd5b8"},{text:"1 - 2 mi",color:"#f8e71c"},{text:".5 - 1 mi",color:"#f6a364"},{text:"Near area (0 - .5 mi)",color:"#cb2d2d"}],r=e=>a.default.createElement("div",{className:"legend-section"},a.default.createElement("h4",null,"Legend"),a.default.createElement("div",{className:"exclamation-marker"},a.default.createElement("i",{className:"fa fa-map-marker"}),a.default.createElement("i",{className:"fa fa-exclamation"})),a.default.createElement("h5",null,"Reported high frequency of opioid or heroin sales"),a.default.createElement("p",null,"Distance from exposure area"),l.map((e,t)=>a.default.createElement("div",{className:"legend-entry",key:`legend_${t}`},a.default.createElement("span",{style:{background:e.color},className:"legend-box"}),a.default.createElement("span",{className:"legend-text"},e.text))));exports.default=r;
},{"react":8}],42:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=l(e);function l(e){return e&&e.__esModule?e:{default:e}}exports.default=(e=>{const{title:l,children:a,className:r}=e;let u=r?"box "+r:"box";return t.default.createElement("div",{className:u},t.default.createElement("p",null,l),t.default.createElement("div",{className:"box-content"},a))});
},{"react":8}],32:[function(require,module,exports) {
module.exports="humi-chat.ada4fa5d.png";
},{}],26:[function(require,module,exports) {
module.exports="humi.3f123918.svg";
},{}],33:[function(require,module,exports) {
module.exports="map-image.cb4b5895.png";
},{}],34:[function(require,module,exports) {
module.exports="map-chart.8ab41149.png";
},{}],23:[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var e=require("process"),t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var s={},u={};function c(e,t){var n=t?s:u;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return l(this),this[e]},set:function(t){l(this),this[e]=t}})}function l(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in $t(e,"__mobxDidRunLazyInitializers",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function f(e,t){return function(){var n,r=function(r,i,a,s){if(!0===s)return t(r,i,a,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var u=r.__mobxDecorators;$t(r,"__mobxDecorators",o({},u))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:a,decoratorTarget:r,decoratorArguments:n},c(i,e)};return p(arguments)?(n=At,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function p(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function h(){return!!tn.spyListeners.length}function d(e){if(tn.spyListeners.length)for(var t=tn.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function v(e){d(o({},e,{spyReportStart:!0}))}var y={spyReportEnd:!0};function b(e){d(e?o({},e,{spyReportEnd:!0}):y)}function m(e){return tn.spyListeners.push(e),Ct(function(){tn.spyListeners=tn.spyListeners.filter(function(t){return t!==e})})}function g(e,t){var n=function(){return x(e,t,this,arguments)};return n.isMobxAction=!0,n}function x(e,t,n,r){var o=O(e,t,n,r);try{return t.apply(n,r)}finally{w(o)}}function O(e,t,n,r){var o=h()&&!!e,i=0;if(o){i=Date.now();var a=r&&r.length||0,s=new Array(a);if(a>0)for(var u=0;u<a;u++)s[u]=r[u];v({type:"action",name:e,object:n,arguments:s})}var c=Rn();return bn(),{prevDerivation:c,prevAllowStateChanges:S(!0),notifySpy:o,startTime:i}}function w(e){A(e.prevAllowStateChanges),mn(),In(e.prevDerivation),e.notifySpy&&b({time:Date.now()-e.startTime})}function _(e,t){var n,r=S(e);try{n=t()}finally{A(r)}return n}function S(e){var t=tn.allowStateChanges;return tn.allowStateChanges=e,t}function A(e){tn.allowStateChanges=e}function E(){kt(!1)}function j(e){return function(t,n,r){if(r){if(r.value)return{value:g(e,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return g(e,o.call(this))}}}return T(e).apply(this,arguments)}}function T(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){$t(this,n,D(e,t))}})}}function k(e,t,n,r){return!0===r?(C(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return C(this,t,n.value||n.initializer.call(this)),this[t]},set:E}:{enumerable:!1,configurable:!0,set:function(e){C(this,t,e)},get:function(){}}}var D=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?g(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?g(e,t):1===arguments.length&&"string"==typeof e?j(e):!0!==r?j(t).apply(null,arguments):void(e[t]=g(e.name||t,n.value))};function V(e,t){var n="string"==typeof e?e:e.name||"<unnamed action>",r="function"==typeof e?e:t;return x(n,r,this,void 0)}function P(e){return"function"==typeof e&&!0===e.isMobxAction}function C(e,t,n){$t(e,t,g(t,n.bind(e)))}D.bound=k;var R=Object.prototype.toString;function I(e,t){return L(e,t)}function L(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&N(e,t,n,r)}function N(e,t,n,r){e=B(e),t=B(t);var o=R.call(e);if(o!==R.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!("function"==typeof a&&a instanceof a&&"function"==typeof s&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),i){if((u=e.length)!==t.length)return!1;for(;u--;)if(!L(e[u],t[u],n,r))return!1}else{var c,l=Object.keys(e);if(u=l.length,Object.keys(t).length!==u)return!1;for(;u--;)if(!$(t,c=l[u])||!L(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0}function B(e){return _t(e)?e.peek():Ht(e)||nt(e)?qt(e.entries()):e}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return e===t}function U(e,t){return I(e,t)}function G(e,t){return Wt(e,t)||M(e,t)}var K={identity:M,structural:U,default:G};function W(e,t){void 0===t&&(t=Et);var n,r=t&&t.name||e.name||"Autorun@"+Tt();if(!t.scheduler&&!t.delay)n=new $n(r,function(){this.track(a)},t.onError);else{var o=H(t),i=!1;n=new $n(r,function(){i||(i=!0,o(function(){i=!1,n.isDisposed||n.track(a)}))},t.onError)}function a(){e(n)}return n.schedule(),n.getDisposer()}var z=function(e){return e()};function H(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:z}function J(e,t,n){void 0===n&&(n=Et),"boolean"==typeof n&&(n={fireImmediately:n},Pt("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead"));var r,o=n.name||"Reaction@"+Tt(),i=D(o,n.onError?q(n.onError,t):t),a=!n.scheduler&&!n.delay,s=H(n),u=!0,c=!1,l=n.compareStructural?K.structural:n.equals||K.default,f=new $n(o,function(){u||a?p():c||(c=!0,s(p))},n.onError);function p(){if(c=!1,!f.isDisposed){var t=!1;f.track(function(){var n=e(f);t=u||!l(r,n),r=n}),u&&n.fireImmediately&&i(r,f),u||!0!==t||i(r,f),u&&(u=!1)}}return f.schedule(),f.getDisposer()}function q(e,t){return function(){try{return t.apply(this,arguments)}catch(t){e.call(this,t)}}}var Y=function(){function e(e){var t=this;this.dependenciesState=Ft.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Ft.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Tt(),this.value=new An(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Qt.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+Tt(),e.set&&(this.setter=g(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?K.structural:K.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,!0===e.keepAlive&&W(function(){return t.get()})}return e.prototype.onBecomeStale=function(){wn(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&kt("Cycle detected in computation "+this.name+": "+this.derivation),0===tn.inBatch&&0===this.observers.length?jn(this)&&(this.warnAboutUntrackedRead(),bn(),this.value=this.computeValue(!1),mn()):(gn(this),jn(this)&&this.trackAndCompute()&&On(this));var e=this.value;if(En(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(En(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){Dt(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else Dt(!1,!1)},e.prototype.trackAndCompute=function(){h()&&d({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===Ft.NOT_TRACKING,n=this.computeValue(!0),r=t||En(e)||En(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,tn.computationDepth++,e)t=Dn(this,this.derivation,this.scope);else if(!0===tn.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new An(e)}return tn.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){Pn(this),this.value=void 0},e.prototype.observe=function(e,t){var n=this,r=!0,o=void 0;return W(function(){var i=n.get();if(!r||t){var a=Rn();e({type:"update",object:n,newValue:i,oldValue:o}),In(a)}r=!1,o=i})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return Xt(this.get())},e}();Y.prototype[Yt()]=Y.prototype.valueOf;var X=Kt("ComputedValue",Y);function F(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Q(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),Ct(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function Z(e,t){var n=Rn();try{var r=e.interceptors;if(r)for(var o=0,i=r.length;o<i&&(Dt(!(t=r[o](t))||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{In(n)}}function ee(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function te(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),Ct(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function ne(e,t){var n=Rn(),r=e.changeListeners;if(r){for(var o=0,i=(r=r.slice()).length;o<i;o++)r[o](t);In(n)}}var re={};ct();var oe=function(e){function t(t,n,r,o){void 0===r&&(r="ObservableValue@"+Tt()),void 0===o&&(o=!0);var i=e.call(this,r)||this;return i.enhancer=n,i.hasUnreportedChange=!1,i.value=n(t,void 0,r),o&&h()&&d({type:"create",name:i.name,newValue:""+i.value}),i}return r(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==re){var n=h();n&&v({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&b()}},t.prototype.prepareNewValue=function(e){if(kn(this),F(this)){var t=Z(this,{object:this,type:"update",newValue:e});if(!t)return re;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:re},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),ee(this)&&ne(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return Q(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),te(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return Xt(this.get())},t}(et);oe.prototype[Yt()]=oe.prototype.valueOf;var ie=Kt("ObservableValue",oe),ae=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof Y)i.set(n);else{if(F(this)){if(!(u=Z(this,{type:"update",object:r,name:t,newValue:n})))return;n=u.newValue}if((n=i.prepareNewValue(n))!==re){var a=ee(this),s=h(),u=a||s?{type:"update",object:r,oldValue:i.value,name:t,newValue:n}:null;s&&v(o({},u,{name:this.name,key:t})),i.setNewValue(n),a&&ne(this,u),s&&b()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(F(this))if(!(a=Z(this,{object:t,name:e,type:"remove"})))return;try{bn();var n=ee(this),r=h(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var a=n||r?{type:"remove",object:t,oldValue:i,name:e}:null;r&&v(o({},a,{name:this.name,key:e})),n&&ne(this,a),r&&b()}finally{mn()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return te(this,e)},e.prototype.intercept=function(e){return Q(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new bt(Object.keys(this.values).filter(function(t){return e.values[t]instanceof oe}),ze,"keys("+this.name+")",!0)),this.keys.slice()},e}();function se(e,t,n){void 0===t&&(t=""),void 0===n&&(n=Ke);var r=e.$mobx;return r||(Nt(e)||(t=(e.constructor.name||"ObservableObject")+"@"+Tt()),t||(t="ObservableObject@"+Tt()),Mt(e,"$mobx",r=new ae(e,t,n)),r)}function ue(e,t,n,r){var o=se(e);if(Gt(e,t),F(o)){var i=Z(o,{object:e,name:t,type:"add",newValue:n});if(!i)return;n=i.newValue}n=(o.values[t]=new oe(n,r,o.name+"."+t,!1)).value,Object.defineProperty(e,t,pe(t)),o.keys&&o.keys.push(t),ve(o,e,t,n)}function ce(e,t,n){var r=se(e);n.name=r.name+"."+t,n.context=e,r.values[t]=new Y(n),Object.defineProperty(e,t,de(t))}var le={},fe={};function pe(e){return le[e]||(le[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}function he(e){var t=e.$mobx;return t||(l(e),e.$mobx)}function de(e){return fe[e]||(fe[e]={configurable:!0,enumerable:!1,get:function(){return he(this).read(this,e)},set:function(t){he(this).write(this,e,t)}})}function ve(e,t,n,r){var i=ee(e),a=h(),s=i||a?{type:"add",object:t,name:n,newValue:r}:null;a&&v(o({},s,{name:e.name,key:n})),i&&ne(e,s),a&&b()}var ye=Kt("ObservableObjectAdministration",ae);function be(e){return!!Lt(e)&&(l(e),ye(e.$mobx))}function me(t){var n=f(!0,function(e,n,r,o,i){ue(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)}),r=(void 0!==e&&e.env,n);return r.enhancer=t,r}function ge(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(be(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return be(e)||!!e.$mobx||tt(e)||zn(e)||X(e)}function xe(e){return 1!==arguments.length&&kt(!1),ge(e)}function Oe(e,t){return"string"!=typeof t?kt(!1):ge(e,t)}function we(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(!1===be(e))return!1;if(!e.$mobx.values[t])return!1;var n=rt(e,t);return X(n)}return X(e)}function _e(e){return arguments.length>1?kt(!1):we(e)}function Se(e,t){return"string"!=typeof t?kt(!1):we(e,t)}var Ae=f(!1,function(e,t,n,r,i){var a=n.get,s=n.set,u=i[0]||{};ce(e,t,o({get:a,set:s},u))}),Ee=Ae({equals:K.structural}),je=function(e,t,n){if("string"==typeof t)return Ae.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return Ae.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new Y(r)};function Te(e,t,n){return Pt("'extendShallowObservable' is deprecated, use 'extendObservable(target, props, { deep: false })' instead"),ke(e,t,n,Ve)}function ke(e,t,n,r){var o=(r=Ce(r)).defaultDecorator||(!1===r.deep?Ne:Ie);se(e,r.name,o.enhancer),bn();try{for(var i in t){var a=Object.getOwnPropertyDescriptor(t,i);0;var s=n&&i in n?n[i]:a.get?Ae:o;0;var u=s(e,i,a,!0);u&&Object.defineProperty(e,i,u)}}finally{mn()}return e}je.struct=Ee;var De={deep:!0,name:void 0,defaultDecorator:void 0},Ve={deep:!1,name:void 0,defaultDecorator:void 0};function Pe(e){/^(deep|name|defaultDecorator)$/.test(e)||kt("invalid option for (extend)observable: "+e)}function Ce(e){return null===e||void 0===e?De:"string"==typeof e?{name:e,deep:!0}:e}function Re(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?ze:Ke}Object.freeze(De),Object.freeze(Ve);var Ie=me(Ke),Le=me(We),Ne=me(ze),Be=me(He);function $e(e,t,n){if("string"==typeof arguments[1])return Ie.apply(null,arguments);if(xe(e))return e;var r=Nt(e)?Ue.object(e,t,n):Array.isArray(e)?Ue.array(e,t):Ht(e)?Ue.map(e,t):e;if(r!==e)return r;kt(!1)}var Me={box:function(e,t){arguments.length>2&&Ge("box");var n=Ce(t);return new oe(e,Re(n),n.name)},shallowBox:function(e,t){return arguments.length>2&&Ge("shallowBox"),Pt("observable.shallowBox","observable.box(value, { deep: false })"),Ue.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&Ge("array");var n=Ce(t);return new bt(e,Re(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&Ge("shallowArray"),Pt("observable.shallowArray","observable.array(values, { deep: false })"),Ue.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&Ge("map");var n=Ce(t);return new Ze(e,Re(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&Ge("shallowMap"),Pt("observable.shallowMap","observable.map(values, { deep: false })"),Ue.map(e,{name:t,deep:!1})},object:function(e,t,n){return"string"==typeof arguments[1]&&Ge("object"),ke({},e,t,Ce(n))},shallowObject:function(e,t){return"string"==typeof arguments[1]&&Ge("shallowObject"),Pt("observable.shallowObject","observable.object(values, {}, { deep: false })"),Ue.object(e,{},{name:t,deep:!1})},ref:Ne,shallow:Le,deep:Ie,struct:Be},Ue=$e;function Ge(e){kt("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}function Ke(e,t,n){return xe(e)?e:Array.isArray(e)?Ue.array(e,{name:n}):Nt(e)?Ue.object(e,void 0,{name:n}):Ht(e)?Ue.map(e,{name:n}):e}function We(e,t,n){return void 0===e||null===e?e:be(e)||_t(e)||nt(e)?e:Array.isArray(e)?Ue.array(e,{name:n,deep:!1}):Nt(e)?Ue.object(e,void 0,{name:n,deep:!1}):Ht(e)?Ue.map(e,{name:n,deep:!1}):kt(!1)}function ze(e){return e}function He(e,t,n){return I(e,t)?t:e}function Je(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function qe(e,t){Mt(e,Je(),t)}function Ye(e){return e[Je()]=Xe,e}function Xe(){return this}function Fe(e,t){void 0===t&&(t=void 0),bn();try{return e.apply(t)}finally{mn()}}Object.keys(Me).forEach(function(e){return Ue[e]=Me[e]});var Qe={},Ze=function(){function e(e,t,n){if(void 0===t&&(t=Ke),void 0===n&&(n="ObservableMap@"+Tt()),this.enhancer=t,this.name=n,this.$mobx=Qe,this._keys=new bt(void 0,ze,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(F(this)){var r=Z(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(F(this)&&!(i=Z(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=h(),r=ee(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&v(o({},i,{name:this.name,key:e})),Fe(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),r&&ne(this,i),n&&b(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new oe(t,ze,this.name+"."+e+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==re){var r=h(),i=ee(this),a=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&v(o({},a,{name:this.name,key:e})),n.setNewValue(t),i&&ne(this,a),r&&b()}},e.prototype._addValue=function(e,t){var n=this;Fe(function(){var r=new oe(t,n.enhancer,n.name+"."+e,!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var r=h(),i=ee(this),a=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&v(o({},a,{name:this.name,key:e})),i&&ne(this,a),r&&b()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[Je()]()},e.prototype.values=function(){var e=this,t=0;return Ye({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return Ye({next:function(){if(t<e._keys.length){var n=e._keys[t++];return{value:[n,e.get(n)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var n=this;this._keys.forEach(function(r){return e.call(t,n.get(r),r,n)})},e.prototype.merge=function(e){var t=this;return nt(e)&&(e=e.toJS()),Fe(function(){Nt(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=i(e,2),r=n[0],o=n[1];return t.set(r,o)}):Ht(e)?e.forEach(function(e,n){return t.set(n,e)}):null!==e&&void 0!==e&&kt("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;Fe(function(){Cn(function(){e._keys.slice().forEach(function(t){return e.delete(t)})})})},e.prototype.replace=function(e){var t=this;return Fe(function(){var n=Jt(e);t._keys.filter(function(e){return-1===n.indexOf(e)}).forEach(function(e){return t.delete(e)}),t.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach(function(n){return t[""+n]=e.get(n)}),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach(function(n){return t.set(n,e.get(n))}),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return te(this,e)},e.prototype.intercept=function(e){return Q(this,e)},e}();qe(Ze.prototype,function(){return this.entries()}),Mt(Ze.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Map");var et,tt,nt=Kt("ObservableMap",Ze);function rt(e,t){if("object"==typeof e&&null!==e){if(_t(e))return void 0!==t&&kt(!1),e.$mobx.atom;if(nt(e)){var n=e;return void 0===t?rt(n._keys):((r=n._data.get(t)||n._hasMap.get(t))||kt(!1),r)}var r;if(l(e),t&&!e.$mobx&&e[t],be(e))return t?((r=e.$mobx.values[t])||kt(!1),r):kt(!1);if(tt(e)||X(e)||zn(e))return e}else if("function"==typeof e&&zn(e.$mobx))return e.$mobx;return kt(!1)}function ot(e,t){return e||kt("Expecting some object"),void 0!==t?ot(rt(e,t)):tt(e)||X(e)||zn(e)?e:nt(e)?e:(l(e),e.$mobx?e.$mobx:void kt(!1))}function it(e,t){return(void 0!==t?rt(e,t):be(e)||nt(e)?ot(e):rt(e)).name}function at(e,t,n){return ut("onBecomeObserved",e,t,n)}function st(e,t,n){return ut("onBecomeUnobserved",e,t,n)}function ut(e,t,n,r){var o="string"==typeof n?rt(t,n):rt(t),i="string"==typeof n?r:n,a=o[e];return"function"!=typeof a?kt(!1):(o[e]=function(){a.call(this),i.call(this)},function(){o[e]=a})}function ct(){et||(et=function(){function e(e){void 0===e&&(e="Atom@"+Tt()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Ft.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return gn(this)},e.prototype.reportChanged=function(){bn(),xn(this),mn()},e.prototype.toString=function(){return this.name},e}(),tt=Kt("Atom",et))}function lt(e,t,n){void 0===t&&(t=Rt),void 0===n&&(n=Rt);var r=new et(e);return at(r,t),st(r,n),r}var ft=1e4,pt=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),ht=0,dt=function(){return function(){}}();function vt(e,t){void 0!==Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}vt(dt,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(dt.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var yt=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new et(e||"ObservableArray@"+Tt()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&this.values.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Q(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),te(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>ht&&Ot(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;kn(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:void 0===t||null===t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=At),F(this)){var i=Z(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!i)return At;t=i.removedCount,n=i.added}var a=(n=0===n.length?n:n.map(function(e){return r.enhancer(e,void 0)})).length-t;this.updateArrayLength(o,a);var s=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<ft)return(r=this.values).splice.apply(r,a([e,t],n));var r,o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&h(),i=ee(this),a=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&v(o({},a,{name:this.atom.name})),this.atom.reportChanged(),i&&ne(this,a),r&&b()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&h(),i=ee(this),a=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&v(o({},a,{name:this.atom.name})),this.atom.reportChanged(),i&&ne(this,a),r&&b()},e}(),bt=function(e){function t(t,n,r,o){void 0===r&&(r="ObservableArray@"+Tt()),void 0===o&&(o=!1);var i=e.call(this)||this,a=new yt(r,n,i,o);return Mt(i,"$mobx",a),t&&t.length&&i.spliceWithArray(0,0,t),pt&&Object.defineProperty(a.array,"0",mt),i}return r(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(e){return _t(e)?e.peek():e}))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0),3===arguments.length&&Pt("The array.find fromIndex argument to find will not be supported anymore in the next major");var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0),3===arguments.length&&Pt("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var r=this.peek(),o=r.length,i=n;i<o;i++)if(e.call(t,r[i],i,this))return i;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(Pt("observableArray.move is deprecated, use .slice() & .replace() instead"),n.call(this,e),n.call(this,t),e!==t){var r,o=this.$mobx.values;r=e<t?a(o.slice(0,e),o.slice(e+1,t+1),[o[e]],o.slice(t+1)):a(o.slice(0,t),[o[e]],o.slice(t,e),o.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){kn(n.atom);var o=r[e];if(F(n)){var i=Z(n,{type:"update",object:this,index:e,newValue:t});if(!i)return;t=i.newValue}(t=n.enhancer(t,o))!==o&&(r[e]=t,n.notifyArrayChildUpdate(e,t,o))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}},t}(dt);qe(bt.prototype,function(){this.$mobx.atom.reportObserved();var e=this,t=0;return Ye({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(bt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&$t(bt.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];Dt("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),$t(bt.prototype,e,function(){return t.apply(this.peek(),arguments)})}),Bt(bt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var mt=gt(0);function gt(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function xt(e){Object.defineProperty(bt.prototype,""+e,gt(e))}function Ot(e){for(var t=ht;t<e;t++)xt(t);ht=e}Ot(1e3);var wt=Kt("ObservableArrayAdministration",yt);function _t(e){return Lt(e)&&wt(e.$mobx)}var St="An invariant failed, however the error is obfuscated because this is an production build.",At=[];Object.freeze(At);var Et={};function jt(){return"undefined"!=typeof window?window:t}function Tt(){return++tn.mobxGuid}function kt(e){throw Dt(!1,e),"X"}function Dt(e,t){if(!e)throw new Error("[mobx] "+(t||St))}Object.freeze(Et);var Vt=[];function Pt(e,t){return!1}function Ct(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Rt=function(){};function It(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}function Lt(e){return null!==e&&"object"==typeof e}function Nt(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Bt(e,t){for(var n=0;n<t.length;n++)$t(e,t[n],e[t[n]])}function $t(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Mt(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ut(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||!1!==n.configurable&&!1!==n.writable}function Gt(e,t){0}function Kt(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Lt(e)&&!0===e[n]}}function Wt(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function zt(e){return Array.isArray(e)||_t(e)}function Ht(e){return void 0!==jt().Map&&e instanceof jt().Map}function Jt(e){return Nt(e)?Object.keys(e):Array.isArray(e)?e.map(function(e){return i(e,1)[0]}):Ht(e)||nt(e)?qt(e.keys()):kt("Cannot get keys from '"+e+"'")}function qt(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function Yt(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function Xt(e){return null===e?null:"object"==typeof e?""+e:e}var Ft,Qt,Zt=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"],en=function(){return function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),tn=new en,nn=!1,rn=jt();function on(){nn=!0,jt().__mobxInstanceCount--}function an(){return tn}function sn(){var e=new en;for(var t in e)-1===Zt.indexOf(t)&&(tn[t]=e[t]);tn.allowStateChanges=!tn.enforceActions}function un(e,t){return cn(rt(e,t))}function cn(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=It(e.observing).map(cn)),t}function ln(e,t){return fn(rt(e,t))}function fn(e){var t={name:e.name};return pn(e)&&(t.observers=hn(e).map(fn)),t}function pn(e){return e.observers&&e.observers.length>0}function hn(e){return e.observers}function dn(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function vn(e,t){if(1===e.observers.length)e.observers.length=0,yn(e);else{var n=e.observers,r=e.observersIndexes,o=n.pop();if(o!==t){var i=r[t.__mapid]||0;i?r[o.__mapid]=i:delete r[o.__mapid],n[i]=o}delete r[t.__mapid]}}function yn(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,tn.pendingUnobservations.push(e))}function bn(){tn.inBatch++}function mn(){if(0==--tn.inBatch){Kn();for(var e=tn.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Y&&n.suspend())}tn.pendingUnobservations=[]}}function gn(e){var t=tn.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&tn.inBatch>0&&yn(e),!1)}function xn(e){if(e.lowestObserverState!==Ft.STALE){e.lowestObserverState=Ft.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Ft.UP_TO_DATE&&(r.isTracing!==Qt.NONE&&_n(r,e),r.onBecomeStale()),r.dependenciesState=Ft.STALE}}}function On(e){if(e.lowestObserverState!==Ft.STALE){e.lowestObserverState=Ft.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Ft.POSSIBLY_STALE?r.dependenciesState=Ft.STALE:r.dependenciesState===Ft.UP_TO_DATE&&(e.lowestObserverState=Ft.UP_TO_DATE)}}}function wn(e){if(e.lowestObserverState===Ft.UP_TO_DATE){e.lowestObserverState=Ft.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===Ft.UP_TO_DATE&&(r.dependenciesState=Ft.POSSIBLY_STALE,r.isTracing!==Qt.NONE&&_n(r,e),r.onBecomeStale())}}}function _n(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===Qt.BREAK){var n=[];Sn(un(e),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof Y?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function Sn(e,t,n){t.length>=1e3?t.push("(and many more)"):(t.push(""+new Array(n).join("\t")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return Sn(e,t,n+1)}))}rn.__mobxInstanceCount?(rn.__mobxInstanceCount++,setTimeout(function(){nn||kt(!1)},1)):rn.__mobxInstanceCount=1,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(Ft||(exports.IDerivationState=Ft={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Qt||(Qt={}));var An=function(){return function(e){this.cause=e}}();function En(e){return e instanceof An}function jn(e){switch(e.dependenciesState){case Ft.UP_TO_DATE:return!1;case Ft.NOT_TRACKING:case Ft.STALE:return!0;case Ft.POSSIBLY_STALE:for(var t=Rn(),n=e.observing,r=n.length,o=0;o<r;o++){var i=n[o];if(X(i)){if(tn.disableErrorBoundaries)i.get();else try{i.get()}catch(e){return In(t),!0}if(e.dependenciesState===Ft.STALE)return In(t),!0}}return Ln(e),In(t),!1}}function Tn(){return null!==tn.trackingDerivation}function kn(e){var t=e.observers.length>0;tn.computationDepth>0&&t&&kt(!1),tn.allowStateChanges||!t&&"strict"!==tn.enforceActions||kt(!1)}function Dn(e,t,n){Ln(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++tn.runId;var r,o=tn.trackingDerivation;if(tn.trackingDerivation=e,!0===tn.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new An(e)}return tn.trackingDerivation=o,Vn(e),r}function Vn(e){for(var t=e.observing,n=e.observing=e.newObserving,r=Ft.UP_TO_DATE,o=0,i=e.unboundDepsCount,a=0;a<i;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,o!==a&&(n[o]=s),o++),s.dependenciesState>r&&(r=s.dependenciesState)}for(n.length=o,e.newObserving=null,i=t.length;i--;){0===(s=t[i]).diffValue&&vn(s,e),s.diffValue=0}for(;o--;){var s;1===(s=n[o]).diffValue&&(s.diffValue=0,dn(s,e))}r!==Ft.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}function Pn(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)vn(t[n],e);e.dependenciesState=Ft.NOT_TRACKING}function Cn(e){var t=Rn(),n=e();return In(t),n}function Rn(){var e=tn.trackingDerivation;return tn.trackingDerivation=null,e}function In(e){tn.trackingDerivation=e}function Ln(e){if(e.dependenciesState!==Ft.UP_TO_DATE){e.dependenciesState=Ft.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=Ft.UP_TO_DATE}}function Nn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=Bn(e);if(!r)return kt(!1);r.isTracing===Qt.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Qt.BREAK:Qt.LOG}function Bn(e){switch(e.length){case 0:return tn.trackingDerivation;case 1:return rt(e[0]);case 2:return rt(e[0],e[1])}}var $n=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+Tt()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=Ft.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Tt(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Qt.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,tn.pendingReactions.push(this),Kn())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(bn(),this._isScheduled=!1,jn(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&h()&&d({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}mn()}},e.prototype.track=function(e){bn();var t,n=h();n&&(t=Date.now(),v({name:this.name,type:"reaction"})),this._isRunning=!0;var r=Dn(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Pn(this),En(r)&&this.reportExceptionInDerivation(r.cause),n&&b({time:Date.now()-t}),mn()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(tn.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,e),h()&&d({type:"error",name:this.name,message:n,error:""+e}),tn.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(bn(),Pn(this),mn()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),Nn(this,e)},e}();function Mn(e){return tn.globalReactionErrorHandlers.push(e),function(){var t=tn.globalReactionErrorHandlers.indexOf(e);t>=0&&tn.globalReactionErrorHandlers.splice(t,1)}}var Un=100,Gn=function(e){return e()};function Kn(){tn.inBatch>0||tn.isRunningReactions||Gn(Wn)}function Wn(){tn.isRunningReactions=!0;for(var e=tn.pendingReactions,t=0;e.length>0;){++t===Un&&(console.error("Reaction doesn't converge to a stable state after "+Un+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction()}tn.isRunningReactions=!1}var zn=Kt("Reaction",$n);function Hn(e){var t=Gn;Gn=function(n){return e(function(){return t(n)})}}function Jn(e,t,n,r){return"function"==typeof n?Yn(e,t,n,r):qn(e,t,n)}function qn(e,t,n){return ot(e).observe(t,n)}function Yn(e,t,n,r){return ot(e,t).observe(n,r)}function Xn(e,t,n){return"function"==typeof n?Qn(e,t,n):Fn(e,t)}function Fn(e,t){return ot(e).intercept(t)}function Qn(e,t,n){return ot(e,t).intercept(n)}function Zn(e,t,n){return 1===arguments.length||t&&"object"==typeof t?tr(e,t):er(e,t,n||{})}function er(e,t,n){var r;"number"==typeof n.timeout&&(r=setTimeout(function(){if(!i.$mobx.isDisposed){i();var e=new Error("WHEN_TIMEOUT");if(!n.onError)throw e;n.onError(e)}},n.timeout)),n.name=n.name||"When@"+Tt();var o=g(n.name+"-effect",t),i=W(function(t){e()&&(t.dispose(),r&&clearTimeout(r),o())},n);return i}function tr(e,t){var n;var r=new Promise(function(r,i){var a=er(e,r,o({},t,{onError:i}));n=function(){a(),i("WHEN_CANCELLED")}});return r.cancel=n,r}function nr(e){return be(e)?e.$mobx.getKeys():nt(e)?e._keys.slice():kt(!1)}function rr(e){return be(e)?nr(e).map(function(t){return e[t]}):nt(e)?nr(e).map(function(t){return e.get(t)}):_t(e)?e.slice():kt(!1)}function or(e){return be(e)?nr(e).map(function(t){return[t,e[t]]}):nt(e)?nr(e).map(function(t){return[t,e.get(t)]}):_t(e)?e.map(function(e,t){return[t,e]}):kt(!1)}function ir(e,t,n){if(2!==arguments.length)if(be(e)){var r=e.$mobx;r.values[t]?r.write(e,t,n):ue(e,t,n,r.defaultEnhancer)}else if(nt(e))e.set(t,n);else{if(!_t(e))return kt(!1);"number"!=typeof t&&(t=parseInt(t,10)),Dt(t>=0,"Not a valid index: '"+t+"'"),bn(),t>=e.length&&(e.length=t+1),e[t]=n,mn()}else{bn();var o=t;try{for(var i in o)ir(e,i,o[i])}finally{mn()}}}function ar(e,t){if(be(e))e.$mobx.remove(t);else if(nt(e))e.delete(t);else{if(!_t(e))return kt(!1);"number"!=typeof t&&(t=parseInt(t,10)),Dt(t>=0,"Not a valid index: '"+t+"'"),e.splice(t,1)}}function sr(e,t){if(be(e)){var n=ot(e);return n.getKeys(),n.values[t]instanceof oe}return nt(e)?e.has(t):_t(e)?t>=0&&t<e.length:kt(!1)}function ur(e,t){if(sr(e,t))return be(e)?e[t]:nt(e)?e.get(t):_t(e)?e[t]:kt(!1)}function cr(e,t){var n="function"==typeof e?e.prototype:e;for(var r in t){var o=t[r],i=o(n,r,Object.getOwnPropertyDescriptor(n,r));i&&Object.defineProperty(n,r,i)}return e}function lr(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.disableErrorBoundaries,o=e.arrayBuffer,i=e.reactionScheduler;if(void 0!==t){if("boolean"!=typeof t&&"strict"!==t)return fail("Invalid configuration for 'enforceActions': "+t);tn.enforceActions=t,tn.allowStateChanges=!0!==t&&"strict"!==t}void 0!==n&&(tn.computedRequiresReaction=!!n),!0===e.isolateGlobalState&&on(),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),tn.disableErrorBoundaries=!!r),"number"==typeof o&&Ot(o),i&&Hn(i)}var fr=0;function pr(e){1!==arguments.length&&kt("Flow expects one 1 argument and cannot be used as decorator");var t=e.name||"<unnamed flow>";return function(){var n,r=arguments,o=++fr,i=D(t+" - runid: "+o+" - init",e).apply(this,r),a=void 0,s=new Promise(function(e,r){var s=0;function u(e){var n;a=void 0;try{n=D(t+" - runid: "+o+" - yield "+s++,i.next).call(i,e)}catch(e){return r(e)}l(n)}function c(e){var n;a=void 0;try{n=D(t+" - runid: "+o+" - yield "+s++,i.throw).call(i,e)}catch(e){return r(e)}l(n)}function l(t){if(!t||"function"!=typeof t.then)return t.done?e(t.value):(a=Promise.resolve(t.value)).then(u,c);t.then(l,r)}n=r,u(void 0)});return s.cancel=D(t+" - runid: "+o+" - cancel",function(){try{a&&hr(a);var e=i.return(),t=Promise.resolve(e.value);t.then(Rt,Rt),hr(t),n(new Error("FLOW_CANCELLED"))}catch(e){n(e)}}),s}}function hr(e){"function"==typeof e.cancel&&e.cancel()}var dr,vr,yr={detectCycles:!0,exportMapsAsObjects:!0};function br(e,t,n,r){return r.detectCycles&&e.set(t,n),n}function mr(e,t,n){if(!xe(e))return e;if(!0===t.detectCycles&&null!==e&&"object"==typeof e&&n.has(e))return n.get(e);if(_t(e)){var r=br(n,e,[],t),o=e.map(function(e){return mr(e,t,n)});r.length=o.length;for(var i=0,a=o.length;i<a;i++)r[i]=o[i];return r}if(be(e)){r=br(n,e,{},t);for(var s in nr(e),e)r[s]=mr(e[s],t,n);return r}if(nt(e)){if(!1===t.exportMapsAsObjects){var u=br(n,e,new Map,t);return e.forEach(function(e,r){u.set(r,mr(e,t,n))}),u}var c=br(n,e,{},t);return e.forEach(function(e,r){c[r]=mr(e,t,n)}),c}return ie(e)?mr(e.get(),t,n):e}function gr(e,t){return xe(e)?("boolean"==typeof t&&(t={detectCycles:t}),t||(t=yr),!0===t.detectCycles&&(n=new Map),mr(e,t,n)):e;var n}function xr(e,t,n){var r;if(nt(e)||_t(e)||ie(e))r=ot(e);else{if(!be(e))return kt(!1);if("string"!=typeof t)return kt(!1);r=ot(e,t)}return void 0!==r.dehancer?kt(!1):(r.dehancer="function"==typeof t?t:n,function(){r.dehancer=void 0})}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:m,extras:{getDebugName:it}}),exports.Reaction=$n,exports.untracked=Cn,exports.IDerivationState=Ft,exports.createAtom=lt,exports.spy=m,exports.comparer=K,exports.isObservableObject=be,exports.isBoxedObservable=ie,exports.isObservableArray=_t,exports.ObservableMap=Ze,exports.isObservableMap=nt,exports.transaction=Fe,exports.observable=Ue,exports.computed=je,exports.isObservable=xe,exports.isObservableProp=Oe,exports.isComputed=_e,exports.isComputedProp=Se,exports.extendObservable=ke,exports.extendShallowObservable=Te,exports.observe=Jn,exports.intercept=Xn,exports.autorun=W,exports.reaction=J,exports.when=Zn,exports.action=D,exports.isAction=P,exports.runInAction=V,exports.keys=nr,exports.values=rr,exports.entries=or,exports.set=ir,exports.remove=ar,exports.has=sr,exports.get=ur,exports.decorate=cr,exports.configure=lr,exports.onBecomeObserved=at,exports.onBecomeUnobserved=st,exports.flow=pr,exports.toJS=gr,exports.trace=Nn,exports.getDependencyTree=un,exports.getObserverTree=ln,exports._resetGlobalState=sn,exports._getGlobalState=an,exports.getDebugName=it,exports.getAtom=rt,exports._getAdministration=ot,exports._allowStateChanges=_,exports.isArrayLike=zt,exports._isComputingDerivation=Tn,exports.onReactionError=Mn,exports._interceptReads=xr;
},{"process":50}],10:[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.inject=exports.Provider=exports.useStaticRendering=exports.trackComponents=exports.componentByNodeRegistry=exports.componentByNodeRegistery=exports.renderReporter=exports.Observer=exports.observer=exports.onError=exports.PropTypes=exports.propTypes=void 0;var t=require("mobx"),n=require("react"),r=i(n),o=require("react-dom");function i(e){return e&&e.__esModule?e:{default:e}}var a=void 0,s="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function c(e,t){return e(t={exports:{}},t.exports),t.exports}var p=c(function(e,t){e.exports=function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,i=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function c(p,u,l){if("string"!=typeof u){if(s){var f=a(u);f&&f!==s&&c(p,f,l)}var d=r(u);o&&(d=d.concat(o(u)));for(var h=0;h<d.length;++h){var y=d[h];if(!(e[y]||t[y]||l&&l[y])){var v=i(u,y);try{n(p,y,v)}catch(e){}}}return p}return p}}()}),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e){this.value=e}function t(t){var n,r;function o(n,r){try{var a=t[n](r),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){o("next",e)},function(e){o("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(i,a){var s={key:e,arg:t,resolve:i,reject:a,next:null};r?r=r.next=s:(n=r=s,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){function e(){f(this,e),this.listeners=[]}return d(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}();function b(e){function n(n,r,o,i,a,s){for(var c=arguments.length,p=Array(c>6?c-6:0),u=6;u<c;u++)p[u-6]=arguments[u];return(0,t.untracked)(function(){if(i=i||"<<anonymous>>",s=s||o,null==r[o]){if(n){var t=null===r[o]?"null":"undefined";return new Error("The "+a+" `"+s+"` is marked as required in `"+i+"`, but its value is `"+t+"`.")}return null}return e.apply(void 0,[r,o,i,a,s].concat(p))})}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function m(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function g(e){var t=void 0===e?"undefined":u(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":m(t,e)?"symbol":t}function _(e){var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e,n){return b(function(r,o,i,a,s){return(0,t.untracked)(function(){if(e&&g(r[o])===n.toLowerCase())return null;var a=void 0;switch(n){case"Array":a=t.isObservableArray;break;case"Object":a=t.isObservableObject;break;case"Map":a=t.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+n)}var c=r[o];if(!a(c)){var p=_(c),u=e?" or javascript `"+n.toLowerCase()+"`":"";return new Error("Invalid prop `"+s+"` of type `"+p+"` supplied to `"+i+"`, expected `mobx.Observable"+n+"`"+u+".")}return null})})}function x(e,n){return b(function(r,o,i,a,s){for(var c=arguments.length,p=Array(c>5?c-5:0),u=5;u<c;u++)p[u-5]=arguments[u];return(0,t.untracked)(function(){if("function"!=typeof n)return new Error("Property `"+s+"` of component `"+i+"` has invalid PropType notation.");var t=w(e,"Array")(r,o,i);if(t instanceof Error)return t;for(var c=r[o],u=0;u<c.length;u++)if((t=n.apply(void 0,[c,u,i,a,s+"["+u+"]"].concat(p)))instanceof Error)return t;return null})})}var O=w(!1,"Array"),S=x.bind(null,!1),j=w(!1,"Map"),P=w(!1,"Object"),C=w(!0,"Array"),k=x.bind(null,!0),U=w(!0,"Object"),E=Object.freeze({observableArray:O,observableArrayOf:S,observableMap:j,observableObject:P,arrayOrObservableArray:C,arrayOrObservableArrayOf:k,objectOrObservableObject:U});function R(e){return!(e.prototype&&e.prototype.render)}var M={mobxStores:U};Object.seal(M);var D={contextTypes:{get:function(){return M},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function T(e,t,r){var o,i,a="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");r&&(a+="-with-"+r);var s=(i=o=function(r){function o(){var e,t,n;f(this,o);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=n=y(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(i))),n.storeRef=function(e){n.wrappedInstance=e},y(n,t)}return h(o,r),d(o,[{key:"render",value:function(){var r={};for(var o in this.props)this.props.hasOwnProperty(o)&&(r[o]=this.props[o]);var i=e(this.context.mobxStores||{},r,this.context)||{};for(var a in i)r[a]=i[a];return R(t)||(r.ref=this.storeRef),(0,n.createElement)(t,r)}}]),o}(n.Component),o.displayName=a,i);return p(s,t),s.wrappedComponent=t,Object.defineProperties(s,D),s}function I(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}function A(){var e=void 0;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=T(e,t);return n.isMobxInjector=!1,(n=Q(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=I(t),function(n){return T(e,n,t.join("-"))}}var N=!1,W=!1,F=!1,B="undefined"!=typeof WeakMap?new WeakMap:void 0,L=new v;function $(e){if(o.findDOMNode)try{return(0,o.findDOMNode)(e)}catch(e){return null}return null}function q(e){var t=$(e);t&&B&&B.set(t,e),L.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function X(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");N||(N=!0)}function H(e){W=e}var G=new v;function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e[t],o=J[t],i=r?!0===n?function(){o.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),o.apply(this,arguments)}:o;e[t]=i}function V(e,t){if(Y(e,t))return!0;if("object"!==(void 0===e?"undefined":u(e))||null===e||"object"!==(void 0===t?"undefined":u(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!hasOwnProperty.call(t,n[o])||!Y(e[n[o]],t[n[o]]))return!1;return!0}function Y(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function z(e){var r=this;if(!0===W)return e.call(this);function o(e){var n=this[e],r=(0,t.createAtom)("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return r.reportObserved(),n},set:function(e){p||V(n,e)?n=e:(n=e,c=!0,r.reportChanged(),c=!1)}})}function i(){var e=this;l=!1;var n=void 0,r=void 0;if(f.track(function(){N&&(e.__$mobRenderStart=Date.now());try{r=(0,t._allowStateChanges)(!1,u)}catch(e){n=e}N&&(e.__$mobRenderEnd=Date.now())}),n)throw G.emit(n),n;return r}var a=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",s=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalFiber&&this._reactInternalFiber._debugID,c=!1,p=!1;o.call(this,"props"),o.call(this,"state");var u=e.bind(this),l=!1,f=new t.Reaction(a+"#"+s+".render()",function(){if(!l&&(l=!0,"function"==typeof r.componentWillReact&&r.componentWillReact(),!0!==r.__$mobxIsUnmounted)){var e=!0;try{p=!0,c||n.Component.prototype.forceUpdate.call(r),e=!1}finally{p=!1,e&&f.dispose()}}});return f.reactComponent=this,i.$mobx=f,this.render=i,i.call(this)}var J={componentWillUnmount:function(){if(!0!==W&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,N)){var e=$(this);e&&B&&B.delete(e),L.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){N&&q(this)},componentDidUpdate:function(){N&&q(this)},shouldComponentUpdate:function(e,t){return W&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!V(this.props,e)}};function Q(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return F||(F=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?A.apply(null,e)(Q(t)):function(t){return Q(e,t)};var r=e;if(!0===r.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),r.__proto__===n.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),!("function"!=typeof r||r.prototype&&r.prototype.render||r.isReactClass||n.Component.isPrototypeOf(r))){var o,i,a=Q((i=o=function(e){function t(){return f(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),d(t,[{key:"render",value:function(){return r.call(this,this.props,this.context)}}]),t}(n.Component),o.displayName=r.displayName||r.name,o.contextTypes=r.contextTypes,o.propTypes=r.propTypes,o.defaultProps=r.defaultProps,i));return p(a,r),a}if(!r)throw new Error("Please pass a valid component to 'observer'");var s=r.prototype||r;Z(s),r.isMobXReactObserver=!0;var c=s.render;return s.render=function(){return z.call(this,c)},r}function Z(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){K(e,t)}),e.shouldComponentUpdate?console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=J.shouldComponentUpdate}var ee=Q(function(e){var t=e.children,n=e.inject,o=e.render,i=t||o;if(void 0===i)return null;if(!n)return i();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var a=A(n)(i);return r.default.createElement(a,null)});ee.displayName="Observer";var te,ne,re=function(e,t,n,r,o){var i="children"===t?"render":"children";return"function"==typeof e[t]&&"function"==typeof e[i]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof e[t]&&"function"!=typeof e[i]?new Error("Invalid prop `"+o+"` of type `"+u(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};function oe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ie(e){var t=this.constructor.getDerivedStateFromProps(e,this.state);null!==t&&void 0!==t&&this.setState(t)}function ae(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function se(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=oe,t.componentWillReceiveProps=ie),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ae;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}return e}ee.propTypes={render:re,children:re},oe.__suppressDeprecationWarning=!0,ie.__suppressDeprecationWarning=!0,ae.__suppressDeprecationWarning=!0;var ce={children:!0,key:!0,ref:!0},pe=(ne=te=function(e){function t(e,n){f(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state=e||{},r}return h(t,e),d(t,[{key:"render",value:function(){return n.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var r in this.state)ce[r]||"suppressChangedStoreWarning"===r||(e[r]=this.props[r]);return{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e)return null;if(!t)return e;if(Object.keys(e).length!==Object.keys(t).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var n in e)ce[n]||t[n]===e[n]||console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),t}(n.Component),te.contextTypes={mobxStores:U},te.childContextTypes={mobxStores:U.isRequired},ne);if(se(pe),!n.Component)throw new Error("mobx-react requires React to be available");if(!t.spy)throw new Error("mobx-react requires mobx to be available");"function"==typeof o.unstable_batchedUpdates?(0,t.configure)({reactionScheduler:o.unstable_batchedUpdates}):"function"==typeof a&&(0,t.configure)({reactionScheduler:a});var ue=function(e){return G.on(e)};if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":u(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var le={spy:t.spy,extras:{getDebugName:t.getDebugName}},fe={renderReporter:L,componentByNodeRegistry:B,componentByNodeRegistery:B,trackComponents:X};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(fe,le)}exports.propTypes=E,exports.PropTypes=E,exports.onError=ue,exports.observer=Q,exports.Observer=ee,exports.renderReporter=L,exports.componentByNodeRegistery=B,exports.componentByNodeRegistry=B,exports.trackComponents=X,exports.useStaticRendering=H,exports.Provider=pe,exports.inject=A;
},{"mobx":23,"react":8,"react-dom":9}],17:[function(require,module,exports) {
"use strict";var e,a;Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=q(t),s=require("./components/map"),l=q(s),n=require("./components/legend"),i=q(n);require("../../styles/map.scss");var o=require("../components/box"),u=q(o),c=require("../../assets/map/humi-chat.png"),d=q(c),m=require("../../assets/humi.svg"),f=q(m),p=require("../../assets/map/map-image.png"),h=q(p),g=require("../../assets/map/map-chart.png"),E=q(g),v=require("mobx-react");function q(e){return e&&e.__esModule?e:{default:e}}let N=(e=(0,v.inject)("chat"))(a=(0,v.observer)(a=class extends r.default.Component{constructor(...e){var a;return a=super(...e),this.handleClick=(e=>{e.preventDefault(),this.props.chat.toggleOpen(!0),this.props.chat.toggleOpenBox("nyssa",!0)}),a}render(){return r.default.createElement(u.default,{title:"Location data",className:"map-page"},r.default.createElement("div",{className:"map-row"},r.default.createElement("div",{className:"left"},r.default.createElement("div",{className:"humi-header"},r.default.createElement("img",{src:f.default,className:"humi"}),r.default.createElement("div",null,r.default.createElement("img",{className:"chat",src:d.default}),r.default.createElement("p",null,"If Nyssa has entered an area that is known for a high frequency of opioid or heroin sales and has dwelled in that area for a significant period of time, may indicate that Nyssa has been exposed to opioids/heroin, or has purchased some for use."))),r.default.createElement("img",{src:h.default}),r.default.createElement("img",{src:E.default}),r.default.createElement("div",{className:"info-box"},r.default.createElement("h5",null,r.default.createElement("i",{className:"fa fa-exclamation-circle"}),"Potential Exposure"),r.default.createElement("p",null,"Nyssa was dwelling for a significant period of time in an area known for a high frequency of opioid or heroin sales."),r.default.createElement("button",{onClick:this.handleClick},"Ask Nysssa how she's doing"))),r.default.createElement(i.default,null)))}})||a)||a;exports.default=N;
},{"react":8,"./components/map":48,"./components/legend":49,"../../styles/map.scss":54,"../components/box":42,"../../assets/map/humi-chat.png":32,"../../assets/humi.svg":26,"../../assets/map/map-image.png":33,"../../assets/map/map-chart.png":34,"mobx-react":10}],524:[function(require,module,exports) {
module.exports="boredom.a63a5cf6.svg";
},{}],525:[function(require,module,exports) {
module.exports="craving.673be471.svg";
},{}],526:[function(require,module,exports) {
module.exports="impulsivity.18ff9f22.svg";
},{}],527:[function(require,module,exports) {
module.exports="negativeMood.6625ad6c.svg";
},{}],528:[function(require,module,exports) {
module.exports="pain.207effd0.svg";
},{}],529:[function(require,module,exports) {
module.exports="pessimism.c124b59c.svg";
},{}],530:[function(require,module,exports) {
module.exports="riskTolerance.aecb1e0a.svg";
},{}],531:[function(require,module,exports) {
module.exports="stress.88868f90.svg";
},{}],532:[function(require,module,exports) {
module.exports="susceptibility.a71f4779.svg";
},{}],455:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}const i=require("./boredom.svg"),s=require("./craving.svg"),a=require("./impulsivity.svg"),u=require("./negativeMood.svg"),l=require("./pain.svg"),n=require("./pessimism.svg"),c=require("./riskTolerance.svg"),d=require("./stress.svg"),m=require("./susceptibility.svg");exports.default={boredom:e=>t.default.createElement(i,{key:e}),craving:e=>t.default.createElement(s,{key:e}),mpulsivity:e=>t.default.createElement(a,{key:e}),negativeMood:e=>t.default.createElement(u,{key:e}),pain:e=>t.default.createElement(l,{key:e}),pessimism:e=>t.default.createElement(n,{key:e}),riskTolerance:e=>t.default.createElement(c,{key:e}),stress:e=>t.default.createElement(d,{key:e}),susceptibility:e=>t.default.createElement(m,{key:e})};
},{"react":8,"./boredom.svg":524,"./craving.svg":525,"./impulsivity.svg":526,"./negativeMood.svg":527,"./pain.svg":528,"./pessimism.svg":529,"./riskTolerance.svg":530,"./stress.svg":531,"./susceptibility.svg":532}],24:[function(require,module,exports) {
module.exports={hotlineInfo:[{name:"Bronx Outpatient Center",number:"(224) 223 - 3842",link:null,address:"953 Southern Blvd Bronx, NY 10459",local:!0,content:"Family Support helps people and their families better understand the progression of addiction, provide guidance on how to navigate insurance issues, and offer information on how to access treatment services."},{name:"Brooklyn Community Recovery Center",number:"(224) 213 - 3843",link:null,address:"20 New York Ave Brooklyn, NY 11216",local:!0,content:"The centers provide health, wellness and other supports to people who are recovering from a substance use disorder or seeking recovery services for a family member or friend."},{name:"Substance Abuse and Mental Health Services Administration (SAMHSA)",number:"(224) 213 - 3843",link:"samhsa.gov",address:null,local:!1,content:"SAMHSA's National Helpline is a confidential, free, 24-hour-a-day, 365-day-a-year, information service, in English and Spanish."},{name:"Partnership for Drug Free Kids (PDFK)",number:"(884) 123 - 3841",link:"drugfree.org",address:null,local:!1,content:"PDFK has trained and caring master's-level specialists ready to help any parent struggling with a son or daughter's drug or alcohol use. "}],meetingInfo:[{title:"NY Nar Anon",schedule:"Meets 2nd & 4th Thursday\n        6:00 - 7:00 pm",location:"My Serenity Place",location_sub:"Greenpoint Outreach Services",address:"960 Manhattan Ave, 2nd Fl\n        Brooklyn, NY 11222"},{title:"Brooklyn Area Narcotics Anonymous",schedule:"Meets on Mondays\n        6:30 pm - 8:00 pm",location:"Lets Get Real",location_sub:"Fort Green Community Center",address:"177 Myrtle Ave \n        Brooklyn, NY 11201"}],articleInfo:[{date:"April 28, 2018",title:"Navigating the Substance Use Disorder System of Care",content:"Watch brief educational videos that provide information about navigating the substance use disorder system of care. This video series describes the types of substance use disorder treatment services available and answers common questions people and their families may have about treatment and recovery."},{date:"April 28, 2018",title:"What Science Says To Do If Your Loved One Has An Opioid Addiction",content:"Families are often given guidance that bears no resemblance to what the research evidence shows - and patients are commonly subjected to treatment that is known to do harm. For nearly three decades, I've been writing about addiction and drug policy. To try to help sort fact from fiction, I've put together an evidence-based guide about what the science of opioid addiction recommends for people trying to help a loved one suffering from addiction."},{date:"April 28, 2018",title:"Skills To Help Your Child And Family Heal",content:"If your teen or young adult child is experimenting with alcohol and drugs or has a full-blown substance use disorder, you likely feel frustrated, overwhelmed and helpless. Community Reinforcement and Family Training, or CRAFT, is a scientifically proven approach to help parents change their child's substance use by staying involved in a positive, ongoing way. CRAFT, created by Dr. Robert Meyers and expanded upon by the psychologists at the Center for Motivation & Change, is an approach to help family members change the way they have been interacting with their child to influence choices around substance use."}],preventionInfo:[{title:"Find Naloxone Near You",content:"Naloxone is a medication that reverses overdoses from opioids such as heroin and prescription painkillers. New Yorkers can get this life-saving medication without prescription at certain community-based organizations (for free) and at pharmacies that have agreed to participate in our voluntary standing order program (with insurance or out-of-pocket) including Duane Reade, Walgreens, Rite Aid and CVS.",link:"…more information on how to use naloxone, including free training",filelinks:["Participating pharmacies (PDF) ","Community-based programs offering naloxone (PDF)"]},{title:"There's an App for That!",content:"Learn more about fentanyl, opioids, and how to save a life with naloxone. If you know someone who takes these or other drugs, they are at risk of overdose. Help prevent someone from dying of an overdose. \n      \n      (NYC Dept. of Health and Mental Hygiene)",link:null,filelinks:[]}],chartData:[{flat:0,name:"Sun 10",idx:0,pain:4,impulsivity:3,riskTolerance:3,negativeMood:0,boredom:1,pessimism:1,stress:0,susceptibility:4,craving:1,loneliness:1},{flat:0,name:"Sun 11",idx:1,pain:0,impulsivity:5,riskTolerance:3,negativeMood:2,boredom:3,pessimism:3,stress:7,susceptibility:3,craving:1,loneliness:0},{flat:0,name:"Sun 12",idx:2,pain:0,impulsivity:1,riskTolerance:4,negativeMood:3,boredom:0,pessimism:0,stress:3,susceptibility:4,craving:0,loneliness:2},{flat:0,name:"Sun 13",idx:3,pain:0,impulsivity:1,riskTolerance:2,negativeMood:4,boredom:6,pessimism:0,stress:0,susceptibility:5,craving:2,loneliness:1},{flat:0,name:"Sun 14",idx:4,pain:0,impulsivity:3,riskTolerance:2,negativeMood:1,boredom:8,pessimism:2,stress:1,susceptibility:7,craving:7,loneliness:2},{flat:0,name:"Sun 15",idx:5,pain:0,impulsivity:1,riskTolerance:5,negativeMood:2,boredom:5,pessimism:4,stress:1,susceptibility:7,craving:6,loneliness:2},{flat:0,name:"Sun 16",idx:6,pain:0,impulsivity:1,riskTolerance:3,negativeMood:5,boredom:1,pessimism:2,stress:3,susceptibility:6,craving:3,loneliness:2},{flat:0,name:"Sun 17",idx:7,pain:1,impulsivity:3,riskTolerance:3,negativeMood:3,boredom:2,pessimism:6,stress:5,susceptibility:5,craving:2,loneliness:3},{flat:0,name:"Sun 18",idx:8,pain:2,impulsivity:1,riskTolerance:3,negativeMood:5,boredom:2,pessimism:6,stress:6,susceptibility:6,craving:3,loneliness:5},{flat:0,name:"Sun 19",idx:9,pain:2,impulsivity:2,riskTolerance:1,negativeMood:4,boredom:3,pessimism:6,stress:9,susceptibility:5,craving:7,loneliness:10},{flat:0,name:"Sun 20",idx:10,pain:2,impulsivity:2,riskTolerance:2,negativeMood:4,boredom:2,pessimism:4,stress:6,susceptibility:4,craving:9,loneliness:10},{flat:0,name:"Sun 21",idx:11,pain:3,impulsivity:3,riskTolerance:4,negativeMood:3,boredom:3,pessimism:6,stress:9,susceptibility:7,craving:9,loneliness:8}],mockSuggestions:{"Sun 10 - Sun 17":{intro:"Nyssa reported using opioids this week. It's unfortunate but remember: recovery is a process! There are two things you can do right now to be an all-star supporter.\n        First, try to understand what the warning signs might be for next time. This way, you can identify when Nyssa might be struggling, and you can offer support when it is most needed. The data shows that Nyssa used opioids following a day on which she was feeling bored and susceptible.\n        Second, stay positive and focus on goals. You could encourage Nyssa to go for a longer stretch of abstinence next time. She went 4 days without using this time. Can she go 8 days next time? That would be an accomplishment.",other:"Support Nyssa not only when she's struggling but also when she's doing well! Offer your encouragement and celebrate the small wins along the way. \n        Separate your feelings toward the disease and your love for Nyssa.\n        Remember that being a support person is also a struggle. It can be difficult to see your loved one \"fall off the horse\". If you feel like YOU need support at a time like this, that is totally valid and normal. Local meetups like NarAnon can be great for meeting other family and friends of individuals with addictions. You can learn a lot by sharing your experiences!",categories:{boredom:"Nyssa reported high levels of boredom on some days this week. Boredom is a sign that she needs stimulation and excitement. If left unaddressed, it could lead to cravings and eventually opioid use.\n          If you can, make plans with Nyssa to do something that she likes. Maybe ride bikes in the park, cook, or explore a new neighborhood!\n          If you can't be with Nyssa physically, encourage her to go do something she used to enjoy. Remind her to practice mindfulness and be fully aware of their experience-sensations, thoughts, and emotions.",susceptibility:" Nyssa is high in susceptibility to opioids this week. Susceptibility is an important factor in risk of relapse, which is sometimes made worse by related factors, such as boredom, pain, or stress.",pain:"Nyssa has reported feeling very little pain this week. If she's used opioids to treat pain in the past, then this would be a sign of resilience. Encouraging!"}},"Sun 17 - Sun 24":{intro:"Nyssa was off to a great start this week, but right now it looks like she is struggling with stress and loneliness-this may explain her high craving stats. ",other:"Support Nyssa not only when she's struggling but also when she's doing well! Offer your encouragement and celebrate the small wins along the way. \n        Offer support when Nyssa is trying to do the right thing, but remind her you don't support the use of opioids. Separate your feeling toward the disease and the love for Nyssa.",categories:{stress:"Nyssa is feeling exceptionally stressed right now. It might help to talk through what's stressing her out-try to locate the source of her stress. If possible, come up with a strategy to reduce it, or put some distance between her and the source of her stress. Sometimes stress and anxiety is caused by worrying about the future. Remind her that life can feel overwhelming at times and to focus on what's happening now. ",loneliness:"It's hard to battle an addiction when you feel like you're going at it alone. Nyssa is lucky to have you by her side; don't forget to remind her of that every now and then!",cravings:"It looks like Nyssa has strong cravings this week. Cravings are a perfectly normal part of recovery, but they can lead to opioid use if left unchecked. Help Nyssa keep some distance between herself and anything that might trigger a relapse. Often it is the environment we're in that causes us to fall back into old routines habits. If environment is a trigger for Nyssa, encourage her to go somewhere else.",pessimism:"Although we all experience different moods day to day, Nyssa is feeling pessimistic about her ability to stay clean. This goes hand-in-hand with stress. See if there is something that's been bothering her this week and try to come up with a plan together to combat it. "}}}};
},{}],745:[function(require,module,exports) {

var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e);
},{}],550:[function(require,module,exports) {
var e=module.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e);
},{}],960:[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],936:[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":960}],670:[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(r){return!0}};
},{}],884:[function(require,module,exports) {
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});
},{"./_fails":670}],961:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_global").document,t=e(r)&&e(r.createElement);module.exports=function(e){return t?r.createElement(e):{}};
},{"./_is-object":960,"./_global":745}],937:[function(require,module,exports) {
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});
},{"./_descriptors":884,"./_fails":670,"./_dom-create":961}],938:[function(require,module,exports) {
var t=require("./_is-object");module.exports=function(r,e){if(!t(r))return r;var o,n;if(e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;if("function"==typeof(o=r.valueOf)&&!t(n=o.call(r)))return n;if(!e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":960}],882:[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_ie8-dom-define"),t=require("./_to-primitive"),i=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(o,n,u){if(e(o),n=t(n,!0),e(u),r)try{return i(o,n,u)}catch(e){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[n]=u.value),o};
},{"./_an-object":936,"./_ie8-dom-define":937,"./_to-primitive":938,"./_descriptors":884}],883:[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],746:[function(require,module,exports) {
var r=require("./_object-dp"),e=require("./_property-desc");module.exports=require("./_descriptors")?function(t,u,o){return r.f(t,u,e(1,o))}:function(r,e,t){return r[e]=t,r};
},{"./_object-dp":882,"./_property-desc":883,"./_descriptors":884}],885:[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],886:[function(require,module,exports) {
var o=0,t=Math.random();module.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++o+t).toString(36))};
},{}],747:[function(require,module,exports) {

var e=require("./_global"),r=require("./_hide"),t=require("./_has"),i=require("./_uid")("src"),n="toString",o=Function[n],u=(""+o).split(n);require("./_core").inspectSource=function(e){return o.call(e)},(module.exports=function(n,o,c,l){var a="function"==typeof c;a&&(t(c,"name")||r(c,"name",o)),n[o]!==c&&(a&&(t(c,i)||r(c,i,n[o]?""+n[o]:u.join(String(o)))),n===e?n[o]=c:l?n[o]?n[o]=c:r(n,o,c):(delete n[o],r(n,o,c)))})(Function.prototype,n,function(){return"function"==typeof this&&this[i]||o.call(this)});
},{"./_global":745,"./_hide":746,"./_has":885,"./_uid":886,"./_core":550}],887:[function(require,module,exports) {
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],748:[function(require,module,exports) {
var r=require("./_a-function");module.exports=function(n,t,u){if(r(n),void 0===t)return n;switch(u){case 1:return function(r){return n.call(t,r)};case 2:return function(r,u){return n.call(t,r,u)};case 3:return function(r,u,e){return n.call(t,r,u,e)}}return function(){return n.apply(t,arguments)}};
},{"./_a-function":887}],665:[function(require,module,exports) {

var e=require("./_global"),r=require("./_core"),o=require("./_hide"),i=require("./_redefine"),u=require("./_ctx"),n="prototype",t=function(c,f,l){var q,_,a,d,p=c&t.F,v=c&t.G,F=c&t.S,x=c&t.P,y=c&t.B,B=v?e:F?e[f]||(e[f]={}):(e[f]||{})[n],G=v?r:r[f]||(r[f]={}),P=G[n]||(G[n]={});for(q in v&&(l=f),l)a=((_=!p&&B&&void 0!==B[q])?B:l)[q],d=y&&_?u(a,e):x&&"function"==typeof a?u(Function.call,a):a,B&&i(B,q,a,c&t.U),G[q]!=a&&o(G,q,d),x&&P[q]!=a&&(P[q]=a)};e.core=r,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,module.exports=t;
},{"./_global":745,"./_core":550,"./_hide":746,"./_redefine":747,"./_ctx":748}],667:[function(require,module,exports) {
module.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)};
},{}],533:[function(require,module,exports) {
var a=require("./_export"),r=require("./_math-log1p"),t=Math.sqrt,h=Math.acosh;a(a.S+a.F*!(h&&710==Math.floor(h(Number.MAX_VALUE))&&h(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:r(a-1+t(a-1)*t(a+1))}});
},{"./_export":665,"./_math-log1p":667}],534:[function(require,module,exports) {
var t=require("./_export"),a=Math.asinh;function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}t(t.S+t.F*!(a&&1/a(0)>0),"Math",{asinh:i});
},{"./_export":665}],535:[function(require,module,exports) {
var a=require("./_export"),t=Math.atanh;a(a.S+a.F*!(t&&1/t(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}});
},{"./_export":665}],666:[function(require,module,exports) {
module.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1};
},{}],536:[function(require,module,exports) {
var r=require("./_export"),t=require("./_math-sign");r(r.S,"Math",{cbrt:function(r){return t(r=+r)*Math.pow(Math.abs(r),1/3)}});
},{"./_export":665,"./_math-sign":666}],537:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}});
},{"./_export":665}],538:[function(require,module,exports) {
var r=require("./_export"),e=Math.exp;r(r.S,"Math",{cosh:function(r){return(e(r=+r)+e(-r))/2}});
},{"./_export":665}],668:[function(require,module,exports) {
var e=Math.expm1;module.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:e;
},{}],539:[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1");e(e.S+e.F*(r!=Math.expm1),"Math",{expm1:r});
},{"./_export":665,"./_math-expm1":668}],669:[function(require,module,exports) {
var r=require("./_math-sign"),t=Math.pow,n=t(2,-52),a=t(2,-23),u=t(2,127)*(2-a),e=t(2,-126),o=function(r){return r+1/n-1/n};module.exports=Math.fround||function(t){var h,i,f=Math.abs(t),s=r(t);return f<e?s*o(f/e/a)*e*a:(i=(h=(1+a/n)*f)-(h-f))>u||i!=i?s*(1/0):s*i};
},{"./_math-sign":666}],540:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{fround:require("./_math-fround")});
},{"./_export":665,"./_math-fround":669}],541:[function(require,module,exports) {
var r=require("./_export"),t=Math.abs;r(r.S,"Math",{hypot:function(r,a){for(var e,h,n=0,o=0,u=arguments.length,M=0;o<u;)M<(e=t(arguments[o++]))?(n=n*(h=M/e)*h+1,M=e):n+=e>0?(h=e/M)*h:e;return M===1/0?1/0:M*Math.sqrt(n)}});
},{"./_export":665}],543:[function(require,module,exports) {
var r=require("./_export"),e=Math.imul;r(r.S+r.F*require("./_fails")(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(r,e){var t=+r,u=+e,i=65535&t,n=65535&u;return 0|i*n+((65535&t>>>16)*n+i*(65535&u>>>16)<<16>>>0)}});
},{"./_export":665,"./_fails":670}],542:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}});
},{"./_export":665}],544:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log1p:require("./_math-log1p")});
},{"./_export":665,"./_math-log1p":667}],545:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}});
},{"./_export":665}],546:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{sign:require("./_math-sign")});
},{"./_export":665,"./_math-sign":666}],548:[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1"),t=Math.exp;e(e.S+e.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(t(e-1)-t(-e-1))*(Math.E/2)}});
},{"./_export":665,"./_math-expm1":668,"./_fails":670}],547:[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-expm1"),t=Math.exp;r(r.S,"Math",{tanh:function(r){var a=e(r=+r),h=e(-r);return a==1/0?1:h==1/0?-1:(a-h)/(t(r)+t(-r))}});
},{"./_export":665,"./_math-expm1":668}],549:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}});
},{"./_export":665}],477:[function(require,module,exports) {
require("../modules/es6.math.acosh"),require("../modules/es6.math.asinh"),require("../modules/es6.math.atanh"),require("../modules/es6.math.cbrt"),require("../modules/es6.math.clz32"),require("../modules/es6.math.cosh"),require("../modules/es6.math.expm1"),require("../modules/es6.math.fround"),require("../modules/es6.math.hypot"),require("../modules/es6.math.imul"),require("../modules/es6.math.log10"),require("../modules/es6.math.log1p"),require("../modules/es6.math.log2"),require("../modules/es6.math.sign"),require("../modules/es6.math.sinh"),require("../modules/es6.math.tanh"),require("../modules/es6.math.trunc"),module.exports=require("../modules/_core").Math;
},{"../modules/es6.math.acosh":533,"../modules/es6.math.asinh":534,"../modules/es6.math.atanh":535,"../modules/es6.math.cbrt":536,"../modules/es6.math.clz32":537,"../modules/es6.math.cosh":538,"../modules/es6.math.expm1":539,"../modules/es6.math.fround":540,"../modules/es6.math.hypot":541,"../modules/es6.math.imul":543,"../modules/es6.math.log10":542,"../modules/es6.math.log1p":544,"../modules/es6.math.log2":545,"../modules/es6.math.sign":546,"../modules/es6.math.sinh":548,"../modules/es6.math.tanh":547,"../modules/es6.math.trunc":549,"../modules/_core":550}],337:[function(require,module,exports) {
"use strict";require("core-js/es6/math");var t={};if(!Object.setPrototypeOf&&!t.__proto__){var e=Object.getPrototypeOf;Object.getPrototypeOf=function(t){return t.__proto__?t.__proto__:e.call(Object,t)}}
},{"core-js/es6/math":477}],495:[function(require,module,exports) {
var define;
var e;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],o=0;o<arguments.length;o++){var t=arguments[o];if(t){var s=typeof t;if("string"===s||"number"===s)e.push(t);else if(Array.isArray(t))e.push(n.apply(null,t));else if("object"===s)for(var a in t)r.call(t,a)&&t[a]&&e.push(a)}}return e.join(" ")}"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return n}):window.classNames=n}();
},{}],497:[function(require,module,exports) {
function n(n){return null==n}module.exports=n;
},{}],727:[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],656:[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":727}],647:[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":656}],648:[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(r){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":647}],649:[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],555:[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":647,"./_getRawTag":648,"./_objectToString":649}],502:[function(require,module,exports) {
var r=Array.isArray;module.exports=r;
},{}],569:[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],554:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isArray"),i=require("./isObjectLike"),t="[object String]";function u(u){return"string"==typeof u||!r(u)&&i(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":555,"./isArray":502,"./isObjectLike":569}],500:[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],498:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObject"),t="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function u(u){if(!r(u))return!1;var i=e(u);return i==n||i==o||i==t||i==c}module.exports=u;
},{"./_baseGetTag":555,"./isObject":500}],651:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":555,"./isObjectLike":569}],732:[function(require,module,exports) {
var e=require("./isArray"),r=require("./isSymbol"),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function u(u,l){if(e(u))return!1;var o=typeof u;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=u&&!r(u))||(n.test(u)||!t.test(u)||null!=l&&u in Object(l))}module.exports=u;
},{"./isArray":502,"./isSymbol":651}],972:[function(require,module,exports) {
var r=require("./_root"),e=r["__core-js_shared__"];module.exports=e;
},{"./_root":656}],965:[function(require,module,exports) {
var e=require("./_coreJsData"),r=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(e){return!!r&&r in e}module.exports=n;
},{"./_coreJsData":972}],870:[function(require,module,exports) {
var t=Function.prototype,r=t.toString;function n(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}module.exports=n;
},{}],952:[function(require,module,exports) {
var e=require("./isFunction"),r=require("./_isMasked"),t=require("./isObject"),o=require("./_toSource"),n=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,p=i.toString,s=u.hasOwnProperty,a=RegExp("^"+p.call(s).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(n){return!(!t(n)||r(n))&&(e(n)?a:c).test(o(n))}module.exports=l;
},{"./isFunction":498,"./_isMasked":965,"./isObject":500,"./_toSource":870}],953:[function(require,module,exports) {
function n(n,o){return null==n?void 0:n[o]}module.exports=n;
},{}],916:[function(require,module,exports) {
var e=require("./_baseIsNative"),r=require("./_getValue");function u(u,a){var i=r(u,a);return e(i)?i:void 0}module.exports=u;
},{"./_baseIsNative":952,"./_getValue":953}],973:[function(require,module,exports) {
var e=require("./_getNative"),r=e(Object,"create");module.exports=r;
},{"./_getNative":916}],966:[function(require,module,exports) {
var e=require("./_nativeCreate");function t(){this.__data__=e?e(null):{},this.size=0}module.exports=t;
},{"./_nativeCreate":973}],967:[function(require,module,exports) {
function t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}module.exports=t;
},{}],968:[function(require,module,exports) {
var e=require("./_nativeCreate"),r="__lodash_hash_undefined__",t=Object.prototype,a=t.hasOwnProperty;function _(t){var _=this.__data__;if(e){var o=_[t];return o===r?void 0:o}return a.call(_,t)?_[t]:void 0}module.exports=_;
},{"./_nativeCreate":973}],969:[function(require,module,exports) {
var e=require("./_nativeCreate"),r=Object.prototype,t=r.hasOwnProperty;function a(r){var a=this.__data__;return e?void 0!==a[r]:t.call(a,r)}module.exports=a;
},{"./_nativeCreate":973}],970:[function(require,module,exports) {
var e=require("./_nativeCreate"),_="__lodash_hash_undefined__";function i(i,t){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&void 0===t?_:t,this}module.exports=i;
},{"./_nativeCreate":973}],963:[function(require,module,exports) {
var e=require("./_hashClear"),r=require("./_hashDelete"),t=require("./_hashGet"),h=require("./_hashHas"),o=require("./_hashSet");function a(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var h=e[r];this.set(h[0],h[1])}}a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=h,a.prototype.set=o,module.exports=a;
},{"./_hashClear":966,"./_hashDelete":967,"./_hashGet":968,"./_hashHas":969,"./_hashSet":970}],906:[function(require,module,exports) {
function t(){this.__data__=[],this.size=0}module.exports=t;
},{}],722:[function(require,module,exports) {
function e(e,n){return e===n||e!=e&&n!=n}module.exports=e;
},{}],945:[function(require,module,exports) {
var r=require("./eq");function e(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}module.exports=e;
},{"./eq":722}],907:[function(require,module,exports) {
var e=require("./_assocIndexOf"),r=Array.prototype,t=r.splice;function a(r){var a=this.__data__,o=e(a,r);return!(o<0)&&(o==a.length-1?a.pop():t.call(a,o,1),--this.size,!0)}module.exports=a;
},{"./_assocIndexOf":945}],908:[function(require,module,exports) {
var r=require("./_assocIndexOf");function e(e){var a=this.__data__,o=r(a,e);return o<0?void 0:a[o][1]}module.exports=e;
},{"./_assocIndexOf":945}],909:[function(require,module,exports) {
var e=require("./_assocIndexOf");function r(r){return e(this.__data__,r)>-1}module.exports=r;
},{"./_assocIndexOf":945}],910:[function(require,module,exports) {
var s=require("./_assocIndexOf");function e(e,r){var t=this.__data__,i=s(t,e);return i<0?(++this.size,t.push([e,r])):t[i][1]=r,this}module.exports=e;
},{"./_assocIndexOf":945}],846:[function(require,module,exports) {
var e=require("./_listCacheClear"),t=require("./_listCacheDelete"),r=require("./_listCacheGet"),l=require("./_listCacheHas"),o=require("./_listCacheSet");function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=l,a.prototype.set=o,module.exports=a;
},{"./_listCacheClear":906,"./_listCacheDelete":907,"./_listCacheGet":908,"./_listCacheHas":909,"./_listCacheSet":910}],866:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Map");module.exports=o;
},{"./_getNative":916,"./_root":656}],946:[function(require,module,exports) {
var e=require("./_Hash"),i=require("./_ListCache"),r=require("./_Map");function a(){this.size=0,this.__data__={hash:new e,map:new(r||i),string:new e}}module.exports=a;
},{"./_Hash":963,"./_ListCache":846,"./_Map":866}],971:[function(require,module,exports) {
function o(o){var n=typeof o;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o}module.exports=o;
},{}],964:[function(require,module,exports) {
var r=require("./_isKeyable");function e(e,a){var t=e.__data__;return r(a)?t["string"==typeof a?"string":"hash"]:t.map}module.exports=e;
},{"./_isKeyable":971}],947:[function(require,module,exports) {
var e=require("./_getMapData");function t(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}module.exports=t;
},{"./_getMapData":964}],948:[function(require,module,exports) {
var e=require("./_getMapData");function t(t){return e(this,t).get(t)}module.exports=t;
},{"./_getMapData":964}],949:[function(require,module,exports) {
var e=require("./_getMapData");function r(r){return e(this,r).has(r)}module.exports=r;
},{"./_getMapData":964}],950:[function(require,module,exports) {
var e=require("./_getMapData");function t(t,i){var s=e(this,t),r=s.size;return s.set(t,i),this.size+=s.size==r?0:1,this}module.exports=t;
},{"./_getMapData":964}],911:[function(require,module,exports) {
var e=require("./_mapCacheClear"),r=require("./_mapCacheDelete"),t=require("./_mapCacheGet"),a=require("./_mapCacheHas"),p=require("./_mapCacheSet");function o(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=t,o.prototype.has=a,o.prototype.set=p,module.exports=o;
},{"./_mapCacheClear":946,"./_mapCacheDelete":947,"./_mapCacheGet":948,"./_mapCacheHas":949,"./_mapCacheSet":950}],941:[function(require,module,exports) {
var e=require("./_MapCache"),r="Expected a function";function t(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new TypeError(r);var c=function(){var e=arguments,r=a?a.apply(this,e):e[0],t=c.cache;if(t.has(r))return t.get(r);var o=n.apply(this,e);return c.cache=t.set(r,o)||t,o};return c.cache=new(t.Cache||e),c}t.Cache=e,module.exports=t;
},{"./_MapCache":911}],898:[function(require,module,exports) {
var e=require("./memoize"),r=500;function n(n){var u=e(n,function(e){return c.size===r&&c.clear(),e}),c=u.cache;return u}module.exports=n;
},{"./memoize":941}],819:[function(require,module,exports) {
var e=require("./_memoizeCapped"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,u=e(function(e){var u=[];return 46===e.charCodeAt(0)&&u.push(""),e.replace(r,function(e,r,a,o){u.push(a?o.replace(p,"$1"):r||e)}),u});module.exports=u;
},{"./_memoizeCapped":898}],717:[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=Array(l);++e<l;)o[e]=n(r[e],e,r);return o}module.exports=r;
},{}],899:[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./_arrayMap"),i=require("./isArray"),t=require("./isSymbol"),o=1/0,u=r?r.prototype:void 0,n=u?u.toString:void 0;function a(r){if("string"==typeof r)return r;if(i(r))return e(r,a)+"";if(t(r))return n?n.call(r):"";var u=r+"";return"0"==u&&1/r==-o?"-0":u}module.exports=a;
},{"./_Symbol":647,"./_arrayMap":717,"./isArray":502,"./isSymbol":651}],820:[function(require,module,exports) {
var r=require("./_baseToString");function e(e){return null==e?"":r(e)}module.exports=e;
},{"./_baseToString":899}],713:[function(require,module,exports) {
var r=require("./isArray"),e=require("./_isKey"),i=require("./_stringToPath"),t=require("./toString");function u(u,n){return r(u)?u:e(u,n)?[u]:i(t(u))}module.exports=u;
},{"./isArray":502,"./_isKey":732,"./_stringToPath":819,"./toString":820}],714:[function(require,module,exports) {
var r=require("./isSymbol"),e=1/0;function t(t){if("string"==typeof t||r(t))return t;var i=t+"";return"0"==i&&1/t==-e?"-0":i}module.exports=t;
},{"./isSymbol":651}],650:[function(require,module,exports) {
var r=require("./_castPath"),e=require("./_toKey");function t(t,o){for(var u=0,n=(o=r(o,t)).length;null!=t&&u<n;)t=t[e(o[u++])];return u&&u==n?t:void 0}module.exports=t;
},{"./_castPath":713,"./_toKey":714}],552:[function(require,module,exports) {
var e=require("./_baseGet");function r(r,o,u){var i=null==r?void 0:e(r,o);return void 0===i?u:i}module.exports=r;
},{"./_baseGet":650}],553:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Number]";function u(u){return"number"==typeof u||r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":555,"./isObjectLike":569}],511:[function(require,module,exports) {
var r=require("./isNumber");function e(e){return r(e)&&e!=+e}module.exports=e;
},{"./isNumber":553}],458:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLinearRegression=exports.findEntryInArray=exports.interpolateNumber=exports.hasDuplicate=exports.getAnyElementOfObject=exports.getPercentValue=exports.uniqueId=exports.isNumOrStr=exports.isNumber=exports.isPercent=exports.mathSign=void 0;var e=require("lodash/get"),r=f(e),t=require("lodash/isArray"),n=f(t),u=require("lodash/isNaN"),i=f(u),o=require("lodash/isNumber"),s=f(o),a=require("lodash/isString"),l=f(a);function f(e){return e&&e.__esModule?e:{default:e}}var c=exports.mathSign=function(e){return 0===e?0:e>0?1:-1},x=exports.isPercent=function(e){return(0,l.default)(e)&&e.indexOf("%")===e.length-1},p=exports.isNumber=function(e){return(0,s.default)(e)&&!(0,i.default)(e)},d=exports.isNumOrStr=function(e){return p(e)||(0,l.default)(e)},g=0,h=exports.uniqueId=function(e){var r=++g;return""+(e||"")+r},m=exports.getPercentValue=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!p(e)&&!(0,l.default)(e))return t;var u=void 0;if(x(e)){var o=e.indexOf("%");u=r*parseFloat(e.slice(0,o))/100}else u=+e;return(0,i.default)(u)&&(u=t),n&&u>r&&(u=r),u},v=exports.getAnyElementOfObject=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},y=exports.hasDuplicate=function(e){if(!(0,n.default)(e))return!1;for(var r=e.length,t={},u=0;u<r;u++){if(t[e[u]])return!0;t[e[u]]=!0}return!1},b=exports.interpolateNumber=function(e,r){return p(e)&&p(r)?function(t){return e+t*(r-e)}:function(){return r}},O=exports.findEntryInArray=function(e,t,n){return e&&e.length?e.find(function(e){return e&&(0,r.default)(e,t)===n}):null},N=exports.getLinearRegression=function(e){if(!e||!e.length)return null;for(var r=e.length,t=0,n=0,u=0,i=0,o=1/0,s=-1/0,a=0;a<r;a++)t+=e[a].cx,n+=e[a].cy,u+=e[a].cx*e[a].cy,i+=e[a].cx*e[a].cx,o=Math.min(o,e[a].cx),s=Math.max(s,e[a].cx);var l=r*i!=t*t?(r*u-t*n)/(r*i-t*t):0;return{xmin:o,xmax:s,a:l,b:(n-l*t)/r}};
},{"lodash/get":552,"lodash/isArray":502,"lodash/isNaN":511,"lodash/isNumber":553,"lodash/isString":554}],456:[function(require,module,exports) {
"use strict";function r(r,t){for(var e in r)if({}.hasOwnProperty.call(r,e)&&(!{}.hasOwnProperty.call(t,e)||r[e]!==t[e]))return!1;for(var o in t)if({}.hasOwnProperty.call(t,o)&&!{}.hasOwnProperty.call(r,o))return!1;return!0}function t(t,e){return!r(t,this.props)||!r(e,this.state)}function e(r){r.prototype.shouldComponentUpdate=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shallowEqual=r,exports.default=e;
},{}],459:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseChildIndex=exports.getReactEventByType=exports.renderByOrder=exports.isChildrenEqual=exports.isSingleChildEqual=exports.filterSvgElements=exports.isSsr=exports.validateWidthHeight=exports.filterEventsOfChild=exports.filterEventAttributes=exports.getPresentationAttributes=exports.withoutType=exports.findChildByType=exports.findAllByType=exports.getDisplayName=exports.LEGEND_TYPES=exports.SCALE_TYPES=exports.EVENT_ATTRIBUTES=exports.PRESENTATION_ATTRIBUTES=void 0;var e=require("lodash/isNil"),t=m(e),n=require("lodash/isString"),r=m(n),i=require("lodash/isObject"),l=m(i),o=require("lodash/isFunction"),u=m(o),a=require("lodash/isArray"),f=m(a),d=require("react"),s=m(d),p=require("prop-types"),c=m(p),h=require("./DataUtils"),g=require("./PureRender");function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var O=exports.PRESENTATION_ATTRIBUTES={alignmentBaseline:c.default.string,angle:c.default.number,baselineShift:c.default.string,clip:c.default.string,clipPath:c.default.string,clipRule:c.default.string,color:c.default.string,colorInterpolation:c.default.string,colorInterpolationFilters:c.default.string,colorProfile:c.default.string,colorRendering:c.default.string,cursor:c.default.string,direction:c.default.oneOf(["ltr","rtl","inherit"]),display:c.default.string,dominantBaseline:c.default.string,enableBackground:c.default.string,fill:c.default.string,fillOpacity:c.default.oneOfType([c.default.string,c.default.number]),fillRule:c.default.oneOf(["nonzero","evenodd","inherit"]),filter:c.default.string,floodColor:c.default.string,floodOpacity:c.default.oneOfType([c.default.string,c.default.number]),font:c.default.string,fontFamily:c.default.string,fontSize:c.default.oneOfType([c.default.number,c.default.string]),fontSizeAdjust:c.default.oneOfType([c.default.number,c.default.string]),fontStretch:c.default.oneOf(["normal","wider","narrower","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","inherit"]),fontStyle:c.default.oneOf(["normal","italic","oblique","inherit"]),fontVariant:c.default.oneOf(["normal","small-caps","inherit"]),fontWeight:c.default.oneOf(["normal","bold","bolder","lighter",100,200,300,400,500,600,700,800,900,"inherit"]),glyphOrientationHorizontal:c.default.string,glyphOrientationVertical:c.default.string,imageRendering:c.default.oneOf(["auto","optimizeSpeed","optimizeQuality","inherit"]),kerning:c.default.oneOfType([c.default.number,c.default.string]),letterSpacing:c.default.oneOfType([c.default.number,c.default.string]),lightingColor:c.default.string,markerEnd:c.default.string,markerMid:c.default.string,markerStart:c.default.string,mask:c.default.string,opacity:c.default.oneOfType([c.default.number,c.default.string]),overflow:c.default.oneOf(["visible","hidden","scroll","auto","inherit"]),pointerEvents:c.default.oneOf(["visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit"]),shapeRendering:c.default.oneOf(["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit"]),stopColor:c.default.string,stopOpacity:c.default.oneOfType([c.default.number,c.default.string]),stroke:c.default.oneOfType([c.default.number,c.default.string]),strokeDasharray:c.default.string,strokeDashoffset:c.default.oneOfType([c.default.number,c.default.string]),strokeLinecap:c.default.oneOf(["butt","round","square","inherit"]),strokeLinejoin:c.default.oneOf(["miter","round","bevel","inherit"]),strokeMiterlimit:c.default.oneOfType([c.default.number,c.default.string]),strokeOpacity:c.default.oneOfType([c.default.number,c.default.string]),strokeWidth:c.default.oneOfType([c.default.number,c.default.string]),textAnchor:c.default.oneOf(["start","middle","end","inherit"]),textDecoration:c.default.oneOf(["none","underline","overline","line-through","blink","inherit"]),textRendering:c.default.oneOf(["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit"]),unicodeBidi:c.default.oneOf(["normal","embed","bidi-override","inherit"]),visibility:c.default.oneOf(["visible","hidden","collapse","inherit"]),wordSpacing:c.default.oneOfType([c.default.number,c.default.string]),writingMode:c.default.oneOf(["lr-tb","rl-tb","tb-rl","lr","rl","tb","inherit"]),transform:c.default.string,style:c.default.object,width:c.default.number,height:c.default.number,dx:c.default.number,dy:c.default.number,x:c.default.number,y:c.default.number,r:c.default.number,radius:c.default.oneOfType([c.default.number,c.default.array])},x=exports.EVENT_ATTRIBUTES={onClick:c.default.func,onMouseDown:c.default.func,onMouseUp:c.default.func,onMouseOver:c.default.func,onMouseMove:c.default.func,onMouseOut:c.default.func,onMouseEnter:c.default.func,onMouseLeave:c.default.func,onTouchEnd:c.default.func,onTouchMove:c.default.func,onTouchStart:c.default.func,onTouchCancel:c.default.func},b={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},T=exports.SCALE_TYPES=["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utcTime","sequential","threshold"],E=exports.LEGEND_TYPES=["plainline","line","square","rect","circle","cross","diamond","star","triangle","wye","none"],S=exports.getDisplayName=function(e){return e?"string"==typeof e?e:e.displayName||e.name||"Component":""},C=exports.findAllByType=function(e,t){var n=[],r=[];return r=(0,f.default)(t)?t.map(function(e){return S(e)}):[S(t)],s.default.Children.forEach(e,function(e){var t=e&&e.type&&(e.type.displayName||e.type.name);-1!==r.indexOf(t)&&n.push(e)}),n},w=exports.findChildByType=function(e,t){var n=C(e,t);return n&&n[0]},M=exports.withoutType=function(e,t){var n=[],r=void 0;return r=(0,f.default)(t)?t.map(function(e){return S(e)}):[S(t)],s.default.Children.forEach(e,function(e){e&&e.type&&e.type.displayName&&-1!==r.indexOf(e.type.displayName)||n.push(e)}),n},k=exports.getPresentationAttributes=function(e){if(!e||(0,u.default)(e))return null;var t=s.default.isValidElement(e)?e.props:e;if(!(0,l.default)(t))return null;var n=null;for(var r in t)({}).hasOwnProperty.call(t,r)&&O[r]&&(n||(n={}),n[r]=t[r]);return n},q=function(e,t){return function(n){return e(t,n),null}},A=exports.filterEventAttributes=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||(0,u.default)(e))return null;var r=s.default.isValidElement(e)?e.props:e;if(!(0,l.default)(r))return null;var i=null;for(var o in r)({}).hasOwnProperty.call(r,o)&&x[o]&&(i||(i={}),i[o]=t||(n?q(r[o],r):r[o]));return i},P=function(e,t,n){return function(r){return e(t,n,r),null}},B=exports.filterEventsOfChild=function(e,t,n){if(!(0,l.default)(e))return null;var r=null;for(var i in e)({}).hasOwnProperty.call(e,i)&&x[i]&&(0,u.default)(e[i])&&(r||(r={}),r[i]=P(e[i],t,n));return r},N=exports.validateWidthHeight=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!(0,h.isNumber)(n)||n<=0||!(0,h.isNumber)(r)||r<=0)},R=exports.isSsr=function(){return!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout)},D=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],L=function(e){return e&&e.type&&(0,r.default)(e.type)&&D.indexOf(e.type)>=0},I=exports.filterSvgElements=function(e){var t=[];return s.default.Children.forEach(e,function(e){e&&e.type&&(0,r.default)(e.type)&&D.indexOf(e.type)>=0&&t.push(e)}),t},_=function(e,n){if((0,t.default)(e)&&(0,t.default)(n))return!0;if(!(0,t.default)(e)&&!(0,t.default)(n)){var r=e.props||{},i=r.children,l=v(r,["children"]),o=n.props||{},u=o.children,a=v(o,["children"]);return i&&u?(0,g.shallowEqual)(l,a)&&z(i,u):!i&&!u&&(0,g.shallowEqual)(l,a)}return!1};exports.isSingleChildEqual=_;var z=exports.isChildrenEqual=function e(t,n){if(t===n)return!0;if(d.Children.count(t)!==d.Children.count(n))return!1;var r=d.Children.count(t);if(0===r)return!0;if(1===r)return _((0,f.default)(t)?t[0]:t,(0,f.default)(n)?n[0]:n);for(var i=0;i<r;i++){var l=t[i],o=n[i];if((0,f.default)(l)||(0,f.default)(o)){if(!e(l,o))return!1}else if(!_(l,o))return!1}return!0},F=exports.renderByOrder=function(e,t){var n=[],r={};return d.Children.forEach(e,function(e,i){if(e&&L(e))n.push(e);else if(e&&t[S(e.type)]){var l=S(e.type),o=t[l],u=o.handler,a=o.once;if(a&&!r[l]||!a){var d=u(e,l,i);(0,f.default)(d)?n=[n].concat(y(d)):n.push(d),r[l]=!0}}}),n},G=exports.getReactEventByType=function(e){var t=e&&e.type;return t&&b[t]?b[t]:null},j=exports.parseChildIndex=function(e,t){var n=-1;return d.Children.forEach(t,function(t,r){t===e&&(n=r)}),n};
},{"lodash/isNil":497,"lodash/isString":554,"lodash/isObject":500,"lodash/isFunction":498,"lodash/isArray":502,"react":8,"prop-types":96,"./DataUtils":458,"./PureRender":456}],340:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=n(e),r=require("prop-types"),a=n(r),i=require("classnames"),u=n(i),l=require("../util/ReactUtils");function n(e){return e&&e.__esModule?e:{default:e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function d(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var o={width:a.default.number.isRequired,height:a.default.number.isRequired,viewBox:a.default.shape({x:a.default.number,y:a.default.number,width:a.default.number,height:a.default.number}),className:a.default.string,style:a.default.object,children:a.default.oneOfType([a.default.arrayOf(a.default.node),a.default.node])};function f(e){var r=e.children,a=e.width,i=e.height,n=e.viewBox,o=e.className,f=e.style,h=d(e,["children","width","height","viewBox","className","style"]),c=n||{width:a,height:i,x:0,y:0},p=(0,u.default)("recharts-surface",o),v=(0,l.getPresentationAttributes)(h);return t.default.createElement("svg",s({},v,{className:p,width:a,height:i,style:f,viewBox:c.x+" "+c.y+" "+c.width+" "+c.height,version:"1.1"}),r)}f.propTypes=o,exports.default=f;
},{"react":8,"prop-types":96,"classnames":495,"../util/ReactUtils":459}],341:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=s(e),a=require("prop-types"),t=s(a),n=require("classnames"),l=s(n);function s(e){return e&&e.__esModule?e:{default:e}}var u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e};function o(e,r){var a={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a}var c={className:t.default.string,children:t.default.oneOfType([t.default.arrayOf(t.default.node),t.default.node])};function f(e){var a=e.children,t=e.className,n=o(e,["children","className"]),s=(0,l.default)("recharts-layer",t);return r.default.createElement("g",u({className:s},n),a)}f.propTypes=c,exports.default=f;
},{"react":8,"prop-types":96,"classnames":495}],757:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Math.PI,i=2*t,s=1e-6,h=i-s;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new _}_.prototype=n.prototype={constructor:_,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,h){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+h)},bezierCurveTo:function(t,i,s,h,_,n){this._+="C"+ +t+","+ +i+","+ +s+","+ +h+","+(this._x1=+_)+","+(this._y1=+n)},arcTo:function(i,h,_,n,e){i=+i,h=+h,_=+_,n=+n,e=+e;var r=this._x1,o=this._y1,a=_-i,u=n-h,c=r-i,x=o-h,y=c*c+x*x;if(e<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=h);else if(y>s)if(Math.abs(x*a-u*c)>s&&e){var f=_-r,M=n-o,l=a*a+u*u,v=f*f+M*M,p=Math.sqrt(l),b=Math.sqrt(y),d=e*Math.tan((t-Math.acos((l+y-v)/(2*p*b)))/2),w=d/b,T=d/p;Math.abs(w-1)>s&&(this._+="L"+(i+w*c)+","+(h+w*x)),this._+="A"+e+","+e+",0,0,"+ +(x*f>c*M)+","+(this._x1=i+T*a)+","+(this._y1=h+T*u)}else this._+="L"+(this._x1=i)+","+(this._y1=h);else;},arc:function(_,n,e,r,o,a){_=+_,n=+n;var u=(e=+e)*Math.cos(r),c=e*Math.sin(r),x=_+u,y=n+c,f=1^a,M=a?r-o:o-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+x+","+y:(Math.abs(this._x1-x)>s||Math.abs(this._y1-y)>s)&&(this._+="L"+x+","+y),e&&(M<0&&(M=M%i+i),M>h?this._+="A"+e+","+e+",0,1,"+f+","+(_-u)+","+(n-c)+"A"+e+","+e+",0,1,"+f+","+(this._x1=x)+","+(this._y1=y):M>s&&(this._+="A"+e+","+e+",0,"+ +(M>=t)+","+f+","+(this._x1=_+e*Math.cos(o))+","+(this._y1=n+e*Math.sin(o))))},rect:function(t,i,s,h){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +h+"h"+-s+"Z"},toString:function(){return this._}},exports.default=n;
},{}],696:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/path");function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"path",{enumerable:!0,get:function(){return t(e).default}});
},{"./src/path":757}],671:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return function(){return e}};
},{}],675:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=M,exports.asin=c;var t=exports.abs=Math.abs,s=exports.atan2=Math.atan2,a=exports.cos=Math.cos,e=exports.max=Math.max,r=exports.min=Math.min,o=exports.sin=Math.sin,p=exports.sqrt=Math.sqrt,n=exports.epsilon=1e-12,x=exports.pi=Math.PI,i=exports.halfPi=x/2,h=exports.tau=2*x;function M(t){return t>1?0:t<-1?x:Math.acos(t)}function c(t){return t>=1?i:t<=-1?-i:Math.asin(t)}
},{}],572:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=r,i=o,f=(0,e.default)(0),y=null,x=c,d=u,h=l,v=null;function g(){var e,r,o=+t.apply(this,arguments),c=+i.apply(this,arguments),u=x.apply(this,arguments)-a.halfPi,l=d.apply(this,arguments)-a.halfPi,g=(0,a.abs)(l-u),m=l>u;if(v||(v=e=(0,n.path)()),c<o&&(r=c,c=o,o=r),c>a.epsilon)if(g>a.tau-a.epsilon)v.moveTo(c*(0,a.cos)(u),c*(0,a.sin)(u)),v.arc(0,0,c,u,l,!m),o>a.epsilon&&(v.moveTo(o*(0,a.cos)(l),o*(0,a.sin)(l)),v.arc(0,0,o,l,u,m));else{var q,T,A=u,R=l,P=u,_=l,b=g,M=g,j=h.apply(this,arguments)/2,O=j>a.epsilon&&(y?+y.apply(this,arguments):(0,a.sqrt)(o*o+c*c)),k=(0,a.min)((0,a.abs)(c-o)/2,+f.apply(this,arguments)),w=k,z=k;if(O>a.epsilon){var B=(0,a.asin)(O/o*(0,a.sin)(j)),C=(0,a.asin)(O/c*(0,a.sin)(j));(b-=2*B)>a.epsilon?(P+=B*=m?1:-1,_-=B):(b=0,P=_=(u+l)/2),(M-=2*C)>a.epsilon?(A+=C*=m?1:-1,R-=C):(M=0,A=R=(u+l)/2)}var D=c*(0,a.cos)(A),E=c*(0,a.sin)(A),F=o*(0,a.cos)(_),G=o*(0,a.sin)(_);if(k>a.epsilon){var H=c*(0,a.cos)(R),I=c*(0,a.sin)(R),J=o*(0,a.cos)(P),K=o*(0,a.sin)(P);if(g<a.pi){var L=b>a.epsilon?s(D,E,J,K,H,I,F,G):[F,G],N=D-L[0],Q=E-L[1],S=H-L[0],U=I-L[1],V=1/(0,a.sin)((0,a.acos)((N*S+Q*U)/((0,a.sqrt)(N*N+Q*Q)*(0,a.sqrt)(S*S+U*U)))/2),W=(0,a.sqrt)(L[0]*L[0]+L[1]*L[1]);w=(0,a.min)(k,(o-W)/(V-1)),z=(0,a.min)(k,(c-W)/(V+1))}}M>a.epsilon?z>a.epsilon?(q=p(J,K,D,E,c,z,m),T=p(H,I,F,G,c,z,m),v.moveTo(q.cx+q.x01,q.cy+q.y01),z<k?v.arc(q.cx,q.cy,z,(0,a.atan2)(q.y01,q.x01),(0,a.atan2)(T.y01,T.x01),!m):(v.arc(q.cx,q.cy,z,(0,a.atan2)(q.y01,q.x01),(0,a.atan2)(q.y11,q.x11),!m),v.arc(0,0,c,(0,a.atan2)(q.cy+q.y11,q.cx+q.x11),(0,a.atan2)(T.cy+T.y11,T.cx+T.x11),!m),v.arc(T.cx,T.cy,z,(0,a.atan2)(T.y11,T.x11),(0,a.atan2)(T.y01,T.x01),!m))):(v.moveTo(D,E),v.arc(0,0,c,A,R,!m)):v.moveTo(D,E),o>a.epsilon&&b>a.epsilon?w>a.epsilon?(q=p(F,G,H,I,o,-w,m),T=p(D,E,J,K,o,-w,m),v.lineTo(q.cx+q.x01,q.cy+q.y01),w<k?v.arc(q.cx,q.cy,w,(0,a.atan2)(q.y01,q.x01),(0,a.atan2)(T.y01,T.x01),!m):(v.arc(q.cx,q.cy,w,(0,a.atan2)(q.y01,q.x01),(0,a.atan2)(q.y11,q.x11),!m),v.arc(0,0,o,(0,a.atan2)(q.cy+q.y11,q.cx+q.x11),(0,a.atan2)(T.cy+T.y11,T.cx+T.x11),m),v.arc(T.cx,T.cy,w,(0,a.atan2)(T.y11,T.x11),(0,a.atan2)(T.y01,T.x01),!m))):v.arc(0,0,o,_,P,m):v.lineTo(F,G)}else v.moveTo(0,0);if(v.closePath(),e)return v=null,e+""||null}return g.centroid=function(){var n=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+x.apply(this,arguments)+ +d.apply(this,arguments))/2-a.pi/2;return[(0,a.cos)(e)*n,(0,a.sin)(e)*n]},g.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:(0,e.default)(+n),g):t},g.outerRadius=function(n){return arguments.length?(i="function"==typeof n?n:(0,e.default)(+n),g):i},g.cornerRadius=function(n){return arguments.length?(f="function"==typeof n?n:(0,e.default)(+n),g):f},g.padRadius=function(n){return arguments.length?(y=null==n?null:"function"==typeof n?n:(0,e.default)(+n),g):y},g.startAngle=function(n){return arguments.length?(x="function"==typeof n?n:(0,e.default)(+n),g):x},g.endAngle=function(n){return arguments.length?(d="function"==typeof n?n:(0,e.default)(+n),g):d},g.padAngle=function(n){return arguments.length?(h="function"==typeof n?n:(0,e.default)(+n),g):h},g.context=function(n){return arguments.length?(v=null==n?null:n,g):v},g};var n=require("d3-path"),t=require("./constant"),e=i(t),a=require("./math");function i(n){return n&&n.__esModule?n:{default:n}}function r(n){return n.innerRadius}function o(n){return n.outerRadius}function c(n){return n.startAngle}function u(n){return n.endAngle}function l(n){return n&&n.padAngle}function s(n,t,e,a,i,r,o,c){var u=e-n,l=a-t,s=o-i,p=c-r,f=(s*(t-r)-p*(n-i))/(p*u-s*l);return[n+f*u,t+f*l]}function p(n,t,e,i,r,o,c){var u=n-e,l=t-i,s=(c?o:-o)/(0,a.sqrt)(u*u+l*l),p=s*l,f=-s*u,y=n+p,x=t+f,d=e+p,h=i+f,v=(y+d)/2,g=(x+h)/2,m=d-y,q=h-x,T=m*m+q*q,A=r-o,R=y*h-d*x,P=(q<0?-1:1)*(0,a.sqrt)((0,a.max)(0,A*A*T-R*R)),_=(R*q-m*P)/T,b=(-R*m-q*P)/T,M=(R*q+m*P)/T,j=(-R*m+q*P)/T,O=_-v,k=b-g,w=M-v,z=j-g;return O*O+k*k>w*w+z*z&&(_=M,b=j),{cx:_,cy:b,x01:-p,y01:-f,x11:_*(r/A-1),y11:b*(r/A-1)}}
},{"d3-path":696,"./constant":671,"./math":675}],625:[function(require,module,exports) {
"use strict";function t(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return new t(i)},t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};
},{}],672:[function(require,module,exports) {
"use strict";function e(e){return e[0]}function t(e){return e[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.x=e,exports.y=t;
},{}],574:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=l.x,u=l.y,f=(0,t.default)(!0),i=null,o=r.default,c=null;function a(t){var r,l,a,d=t.length,p=!1;for(null==i&&(c=o(a=(0,n.path)())),r=0;r<=d;++r)!(r<d&&f(l=t[r],r,t))===p&&((p=!p)?c.lineStart():c.lineEnd()),p&&c.point(+e(l,r,t),+u(l,r,t));if(a)return c=null,a+""||null}return a.x=function(n){return arguments.length?(e="function"==typeof n?n:(0,t.default)(+n),a):e},a.y=function(n){return arguments.length?(u="function"==typeof n?n:(0,t.default)(+n),a):u},a.defined=function(n){return arguments.length?(f="function"==typeof n?n:(0,t.default)(!!n),a):f},a.curve=function(n){return arguments.length?(o=n,null!=i&&(c=o(i)),a):o},a.context=function(n){return arguments.length?(null==n?i=c=null:c=o(i=n),a):i},a};var n=require("d3-path"),e=require("./constant"),t=f(e),u=require("./curve/linear"),r=f(u),l=require("./point");function f(n){return n&&n.__esModule?n:{default:n}}
},{"d3-path":696,"./constant":671,"./curve/linear":625,"./point":672}],573:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=i.x,u=null,r=(0,t.default)(0),o=i.y,c=(0,t.default)(!0),a=null,d=l.default,y=null;function p(t){var l,f,i,p,h,x=t.length,g=!1,s=new Array(x),v=new Array(x);for(null==a&&(y=d(h=(0,n.path)())),l=0;l<=x;++l){if(!(l<x&&c(p=t[l],l,t))===g)if(g=!g)f=l,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),i=l-1;i>=f;--i)y.point(s[i],v[i]);y.lineEnd(),y.areaEnd()}g&&(s[l]=+e(p,l,t),v[l]=+r(p,l,t),y.point(u?+u(p,l,t):s[l],o?+o(p,l,t):v[l]))}if(h)return y=null,h+""||null}function h(){return(0,f.default)().defined(c).curve(d).context(a)}return p.x=function(n){return arguments.length?(e="function"==typeof n?n:(0,t.default)(+n),u=null,p):e},p.x0=function(n){return arguments.length?(e="function"==typeof n?n:(0,t.default)(+n),p):e},p.x1=function(n){return arguments.length?(u=null==n?null:"function"==typeof n?n:(0,t.default)(+n),p):u},p.y=function(n){return arguments.length?(r="function"==typeof n?n:(0,t.default)(+n),o=null,p):r},p.y0=function(n){return arguments.length?(r="function"==typeof n?n:(0,t.default)(+n),p):r},p.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:(0,t.default)(+n),p):o},p.lineX0=p.lineY0=function(){return h().x(e).y(r)},p.lineY1=function(){return h().x(e).y(o)},p.lineX1=function(){return h().x(u).y(r)},p.defined=function(n){return arguments.length?(c="function"==typeof n?n:(0,t.default)(!!n),p):c},p.curve=function(n){return arguments.length?(d=n,null!=a&&(y=d(a)),p):d},p.context=function(n){return arguments.length?(null==n?a=y=null:y=d(a=n),p):a},p};var n=require("d3-path"),e=require("./constant"),t=o(e),u=require("./curve/linear"),l=o(u),r=require("./line"),f=o(r),i=require("./point");function o(n){return n&&n.__esModule?n:{default:n}}
},{"d3-path":696,"./constant":671,"./curve/linear":625,"./line":574,"./point":672}],673:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};
},{}],674:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e};
},{}],575:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=l.default,e=u.default,r=null,f=(0,n.default)(0),o=(0,n.default)(a.tau),i=(0,n.default)(0);function d(n){var u,l,d,c,s,h=n.length,p=0,g=new Array(h),y=new Array(h),A=+f.apply(this,arguments),v=Math.min(a.tau,Math.max(-a.tau,o.apply(this,arguments)-A)),M=Math.min(Math.abs(v)/h,i.apply(this,arguments)),m=M*(v<0?-1:1);for(u=0;u<h;++u)(s=y[g[u]=u]=+t(n[u],u,n))>0&&(p+=s);for(null!=e?g.sort(function(t,n){return e(y[t],y[n])}):null!=r&&g.sort(function(t,e){return r(n[t],n[e])}),u=0,d=p?(v-h*m)/p:0;u<h;++u,A=c)l=g[u],c=A+((s=y[l])>0?s*d:0)+m,y[l]={data:n[l],index:u,value:s,startAngle:A,endAngle:c,padAngle:M};return y}return d.value=function(e){return arguments.length?(t="function"==typeof e?e:(0,n.default)(+e),d):t},d.sortValues=function(t){return arguments.length?(e=t,r=null,d):e},d.sort=function(t){return arguments.length?(r=t,e=null,d):r},d.startAngle=function(t){return arguments.length?(f="function"==typeof t?t:(0,n.default)(+t),d):f},d.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:(0,n.default)(+t),d):o},d.padAngle=function(t){return arguments.length?(i="function"==typeof t?t:(0,n.default)(+t),d):i},d};var t=require("./constant"),n=f(t),e=require("./descending"),u=f(e),r=require("./identity"),l=f(r),a=require("./math");function f(t){return t&&t.__esModule?t:{default:t}}
},{"./constant":671,"./descending":673,"./identity":674,"./math":675}],689:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.curveRadialLinear=void 0,exports.default=u;var e=require("./linear"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var n=exports.curveRadialLinear=u(t.default);function i(e){this._curve=e}function u(e){function t(t){return new i(e(t))}return t._curve=e,t}i.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};
},{"./linear":625}],577:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineRadial=a,exports.default=function(){return a((0,t.default)().curve(e.curveRadialLinear))};var e=require("./curve/radial"),r=n(e),u=require("./line"),t=n(u);function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var u=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?u((0,r.default)(e)):u()._curve},e}
},{"./curve/radial":689,"./line":574}],576:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var l=(0,i.default)().curve(e.curveRadialLinear),t=l.curve,u=l.lineX0,a=l.lineX1,d=l.lineY0,c=l.lineY1;return l.angle=l.x,delete l.x,l.startAngle=l.x0,delete l.x0,l.endAngle=l.x1,delete l.x1,l.radius=l.y,delete l.y,l.innerRadius=l.y0,delete l.y0,l.outerRadius=l.y1,delete l.y1,l.lineStartAngle=function(){return(0,r.lineRadial)(u())},delete l.lineX0,l.lineEndAngle=function(){return(0,r.lineRadial)(a())},delete l.lineX1,l.lineInnerRadius=function(){return(0,r.lineRadial)(d())},delete l.lineY0,l.lineOuterRadius=function(){return(0,r.lineRadial)(c())},delete l.lineY1,l.curve=function(e){return arguments.length?t((0,n.default)(e)):t()._curve},l};var e=require("./curve/radial"),n=t(e),l=require("./area"),i=t(l),r=require("./lineRadial");function t(e){return e&&e.__esModule?e:{default:e}}
},{"./curve/radial":689,"./area":573,"./lineRadial":577}],578:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]};
},{}],676:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.slice=Array.prototype.slice;
},{}],606:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linkHorizontal=y,exports.linkVertical=h,exports.linkRadial=v;var e=require("d3-path"),t=require("../array"),n=require("../constant"),r=o(n),u=require("../point"),i=require("../pointRadial"),l=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.source}function f(e){return e.target}function c(n){var i=a,l=f,o=u.x,c=u.y,p=null;function s(){var r,u=t.slice.call(arguments),a=i.apply(this,u),f=l.apply(this,u);if(p||(p=r=(0,e.path)()),n(p,+o.apply(this,(u[0]=a,u)),+c.apply(this,u),+o.apply(this,(u[0]=f,u)),+c.apply(this,u)),r)return p=null,r+""||null}return s.source=function(e){return arguments.length?(i=e,s):i},s.target=function(e){return arguments.length?(l=e,s):l},s.x=function(e){return arguments.length?(o="function"==typeof e?e:(0,r.default)(+e),s):o},s.y=function(e){return arguments.length?(c="function"==typeof e?e:(0,r.default)(+e),s):c},s.context=function(e){return arguments.length?(p=null==e?null:e,s):p},s}function p(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,u,r,u)}function s(e,t,n,r,u){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+u)/2,r,n,r,u)}function d(e,t,n,r,u){var i=(0,l.default)(t,n),o=(0,l.default)(t,n=(n+u)/2),a=(0,l.default)(r,n),f=(0,l.default)(r,u);e.moveTo(i[0],i[1]),e.bezierCurveTo(o[0],o[1],a[0],a[1],f[0],f[1])}function y(){return c(p)}function h(){return c(s)}function v(){var e=c(d);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}
},{"d3-path":696,"../array":676,"../constant":671,"../point":672,"../pointRadial":578}],607:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../math");exports.default={draw:function(r,t){var a=Math.sqrt(t/e.pi);r.moveTo(a,0),r.arc(0,0,a,0,e.tau)}};
},{"../math":675}],608:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={draw:function(e,o){var l=Math.sqrt(o/5)/2;e.moveTo(-3*l,-l),e.lineTo(-l,-l),e.lineTo(-l,-3*l),e.lineTo(l,-3*l),e.lineTo(l,-l),e.lineTo(3*l,-l),e.lineTo(3*l,l),e.lineTo(l,l),e.lineTo(l,3*l),e.lineTo(-l,3*l),e.lineTo(-l,l),e.lineTo(-3*l,l),e.closePath()}};
},{}],609:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math.sqrt(1/3),t=2*e;exports.default={draw:function(o,r){var a=Math.sqrt(r/t),s=a*e;o.moveTo(0,-a),o.lineTo(s,0),o.lineTo(0,a),o.lineTo(-s,0),o.closePath()}};
},{}],611:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../math"),a=.8908130915292852,e=Math.sin(t.pi/10)/Math.sin(7*t.pi/10),o=Math.sin(t.tau/10)*e,r=-Math.cos(t.tau/10)*e;exports.default={draw:function(e,i){var s=Math.sqrt(i*a),n=o*s,h=r*s;e.moveTo(0,-s),e.lineTo(n,h);for(var u=1;u<5;++u){var M=t.tau*u/5,l=Math.cos(M),c=Math.sin(M);e.lineTo(c*s,-l*s),e.lineTo(l*n-c*h,c*n+l*h)}e.closePath()}};
},{"../math":675}],610:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={draw:function(e,t){var r=Math.sqrt(t),s=-r/2;e.rect(s,s,r,r)}};
},{}],612:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math.sqrt(3);exports.default={draw:function(t,o){var r=-Math.sqrt(o/(3*e));t.moveTo(0,2*r),t.lineTo(-e*r,-r),t.lineTo(e*r,-r),t.closePath()}};
},{}],613:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=-.5,o=Math.sqrt(3)/2,t=1/Math.sqrt(12),l=3*(t/2+1);exports.default={draw:function(i,n){var r=Math.sqrt(n/l),a=r/2,s=r*t,T=a,u=r*t+r,c=-T,d=u;i.moveTo(a,s),i.lineTo(T,u),i.lineTo(c,d),i.lineTo(e*a-o*s,o*a+e*s),i.lineTo(e*T-o*u,o*T+e*u),i.lineTo(e*c-o*d,o*c+e*d),i.lineTo(e*a+o*s,e*s-o*a),i.lineTo(e*T+o*u,e*u-o*T),i.lineTo(e*c+o*d,e*d-o*c),i.closePath()}};
},{}],579:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.symbols=void 0,exports.default=function(){var t=(0,m.default)(r.default),u=(0,m.default)(64),l=null;function n(){var r;if(l||(l=r=(0,e.path)()),t.apply(this,arguments).draw(l,+u.apply(this,arguments)),r)return l=null,r+""||null}return n.type=function(e){return arguments.length?(t="function"==typeof e?e:(0,m.default)(e),n):t},n.size=function(e){return arguments.length?(u="function"==typeof e?e:(0,m.default)(+e),n):u},n.context=function(e){return arguments.length?(l=null==e?null:e,n):l},n};var e=require("d3-path"),t=require("./symbol/circle"),r=q(t),u=require("./symbol/cross"),l=q(u),n=require("./symbol/diamond"),o=q(n),a=require("./symbol/star"),i=q(a),s=require("./symbol/square"),f=q(s),d=require("./symbol/triangle"),y=q(d),c=require("./symbol/wye"),p=q(c),b=require("./constant"),m=q(b);function q(e){return e&&e.__esModule?e:{default:e}}var h=exports.symbols=[r.default,l.default,o.default,f.default,i.default,y.default,p.default];
},{"d3-path":696,"./symbol/circle":607,"./symbol/cross":608,"./symbol/diamond":609,"./symbol/star":611,"./symbol/square":610,"./symbol/triangle":612,"./symbol/wye":613,"./constant":671}],690:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){};
},{}],616:[function(require,module,exports) {
"use strict";function t(t,i,s){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+s)/6)}function i(t){this._context=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Basis=i,exports.default=function(t){return new i(t)},i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}};
},{}],615:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return new _(t)};var t=require("../noop"),i=h(t),s=require("./basis");function h(t){return t&&t.__esModule?t:{default:t}}function _(t){this._context=t}_.prototype={areaStart:i.default,areaEnd:i.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:(0,s.point)(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};
},{"../noop":690,"./basis":616}],614:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return new i(t)};var t=require("./basis");function i(t){this._context=t}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+i)/6,n=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 3:this._point=4;default:(0,t.point)(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}};
},{"./basis":616}],617:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./basis");function i(i,s){this._basis=new t.Basis(i),this._beta=s}i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,s=t.length-1;if(s>0)for(var e,n=t[0],a=i[0],h=t[s]-n,r=i[s]-a,_=-1;++_<=s;)e=_/s,this._basis.point(this._beta*t[_]+(1-this._beta)*(n+e*h),this._beta*i[_]+(1-this._beta)*(a+e*r));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}},exports.default=function s(e){function n(s){return 1===e?new t.Basis(s):new i(s,e)}return n.beta=function(t){return s(+t)},n}(.85);
},{"./basis":616}],620:[function(require,module,exports) {
"use strict";function t(t,i,_){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-_),t._x2,t._y2)}function i(t,i){this._context=t,this._k=(1-i)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=t,exports.Cardinal=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:t(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,_){switch(i=+i,_=+_,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,_):this._context.moveTo(i,_);break;case 1:this._point=2,this._x1=i,this._y1=_;break;case 2:this._point=3;default:t(this,i,_)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=_}},exports.default=function t(_){function s(t){return new i(t,_)}return s.tension=function(i){return t(+i)},s}(0);
},{}],618:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalClosed=e;var t=require("../noop"),i=h(t),s=require("./cardinal");function h(t){return t&&t.__esModule?t:{default:t}}function e(t,i){this._context=t,this._k=(1-i)/6}e.prototype={areaStart:i.default,areaEnd:i.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:(0,s.point)(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function t(i){function s(t){return new e(t,i)}return s.tension=function(i){return t(+i)},s}(0);
},{"../noop":690,"./cardinal":620}],619:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardinalOpen=i;var t=require("./cardinal");function i(t,i){this._context=t,this._k=(1-i)/6}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,n){switch(i=+i,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,t.point)(this,i,n)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=n}},exports.default=function t(n){function s(t){return new i(t,n)}return s.tension=function(i){return t(+i)},s}(0);
},{"./cardinal":620}],623:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.point=i;var _=require("../math"),t=require("./cardinal");function i(t,i,s){var a=t._x1,h=t._y1,l=t._x2,n=t._y2;if(t._l01_a>_.epsilon){var e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,o=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/o,h=(h*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/o}if(t._l23_a>_.epsilon){var r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*r+t._x1*t._l23_2a-i*t._l12_2a)/c,n=(n*r+t._y1*t._l23_2a-s*t._l12_2a)/c}t._context.bezierCurveTo(a,h,l,n,t._x2,t._y2)}function s(_,t){this._context=_,this._alpha=t}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_,t){if(_=+_,t=+t,this._point){var s=this._x2-_,a=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,t):this._context.moveTo(_,t);break;case 1:this._point=2;break;case 2:this._point=3;default:i(this,_,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=t}},exports.default=function _(i){function a(_){return i?new s(_,i):new t.Cardinal(_,0)}return a.alpha=function(t){return _(+t)},a}(.5);
},{"../math":675,"./cardinal":620}],621:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./cardinalClosed"),i=require("../noop"),s=h(i),_=require("./catmullRom");function h(t){return t&&t.__esModule?t:{default:t}}function e(t,i){this._context=t,this._alpha=i}e.prototype={areaStart:s.default,areaEnd:s.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){if(t=+t,i=+i,this._point){var s=this._x2-t,h=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:(0,_.point)(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}},exports.default=function i(s){function _(i){return s?new e(i,s):new t.CardinalClosed(i,0)}return _.alpha=function(t){return i(+t)},_}(.5);
},{"./cardinalClosed":618,"../noop":690,"./catmullRom":623}],622:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./cardinalOpen"),i=require("./catmullRom");function _(t,i){this._context=t,this._alpha=i}_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,_){if(t=+t,_=+_,this._point){var s=this._x2-t,h=this._y2-_;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(s*s+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.point)(this,t,_)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=_}},exports.default=function i(s){function h(i){return s?new _(i,s):new t.CardinalOpen(i,0)}return h.alpha=function(t){return i(+t)},h}(.5);
},{"./cardinalOpen":619,"./catmullRom":623}],624:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return new o(t)};var t=require("../noop"),e=n(t);function n(t){return t&&t.__esModule?t:{default:t}}function o(t){this._context=t}o.prototype={areaStart:e.default,areaEnd:e.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};
},{"../noop":690}],626:[function(require,module,exports) {
"use strict";function t(t){return t<0?-1:1}function i(i,n,e){var o=i._x1-i._x0,s=n-i._x1,h=(i._y1-i._y0)/(o||s<0&&-0),_=(e-i._y1)/(s||o<0&&-0),c=(h*s+_*o)/(o+s);return(t(h)+t(_))*Math.min(Math.abs(h),Math.abs(_),.5*Math.abs(c))||0}function n(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function e(t,i,n){var e=t._x0,o=t._y0,s=t._x1,h=t._y1,_=(s-e)/3;t._context.bezierCurveTo(e+_,o+_*i,s-_,h-_*n,s,h)}function o(t){this._context=t}function s(t){this._context=new h(t)}function h(t){this._context=t}function _(t){return new o(t)}function c(t){return new s(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.monotoneX=_,exports.monotoneY=c,o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e(this,this._t0,n(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,o){var s=NaN;if(o=+o,(t=+t)!==this._x1||o!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,o):this._context.moveTo(t,o);break;case 1:this._point=2;break;case 2:this._point=3,e(this,n(this,s=i(this,t,o)),s);break;default:e(this,this._t0,s=i(this,t,o))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=o,this._t0=s}}},(s.prototype=Object.create(o.prototype)).point=function(t,i){o.prototype.point.call(this,i,t)},h.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,o,s){this._context.bezierCurveTo(i,t,e,n,s,o)}};
},{}],627:[function(require,module,exports) {
"use strict";function t(t){this._context=t}function e(t){var e,i,n=t.length-1,o=new Array(n),r=new Array(n),s=new Array(n);for(o[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=o[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(o[n-1]=s[n-1]/r[n-1],e=n-2;e>=0;--e)o[e]=(s[e]-o[e+1])/r[e];for(r[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return new t(e)},t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),2===n)this._context.lineTo(t[1],i[1]);else for(var o=e(t),r=e(i),s=0,h=1;h<n;++s,++h)this._context.bezierCurveTo(o[0][s],r[0][s],o[1][s],r[1][s],t[h],i[h]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};
},{}],628:[function(require,module,exports) {
"use strict";function t(t,i){this._context=t,this._t=i}function i(i){return new t(i,0)}function e(i){return new t(i,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){return new t(i,.5)},exports.stepBefore=i,exports.stepAfter=e,t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,i)}}this._x=t,this._y=i}};
},{}],631:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((f=e.length)>1)for(var r,o,f,s=1,i=e[t[0]],l=i.length;s<f;++s)for(o=i,i=e[t[s]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]};
},{}],637:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var r=e.length,t=new Array(r);--r>=0;)t[r]=r;return t};
},{}],580:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=(0,n.default)([]),r=l.default,f=u.default,o=a;function i(e){var n,u,l=t.apply(this,arguments),a=e.length,i=l.length,c=new Array(i);for(n=0;n<i;++n){for(var d,s=l[n],y=c[n]=new Array(a),p=0;p<a;++p)y[p]=d=[0,+o(e[p],s,p,e)],d.data=e[p];y.key=s}for(n=0,u=r(c);n<i;++n)c[u[n]].index=n;return f(c,u),c}return i.keys=function(r){return arguments.length?(t="function"==typeof r?r:(0,n.default)(e.slice.call(r)),i):t},i.value=function(e){return arguments.length?(o="function"==typeof e?e:(0,n.default)(+e),i):o},i.order=function(t){return arguments.length?(r=null==t?l.default:"function"==typeof t?t:(0,n.default)(e.slice.call(t)),i):r},i.offset=function(e){return arguments.length?(f=null==e?u.default:e,i):f},i};var e=require("./array"),t=require("./constant"),n=o(t),r=require("./offset/none"),u=o(r),f=require("./order/none"),l=o(f);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e[t]}
},{"./array":676,"./constant":671,"./offset/none":631,"./order/none":637}],629:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((o=e.length)>0){for(var f,o,u,n=0,l=e[0].length;n<l;++n){for(u=f=0;f<o;++f)u+=e[f][n][1]||0;if(u)for(f=0;f<o;++f)e[f][n][1]/=u}(0,r.default)(e,t)}};var e=require("./none"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./none":631}],630:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((s=e.length)>1)for(var r,o,f,l,n,s,u=0,i=e[t[0]].length;u<i;++u)for(l=n=0,r=0;r<s;++r)(f=(o=e[t[r]][u])[1]-o[0])>=0?(o[0]=l,o[1]=l+=f):f<0?(o[1]=n,o[0]=n+=f):o[0]=l};
},{}],632:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((u=e.length)>0){for(var u,n=0,o=e[t[0]],f=o.length;n<f;++n){for(var l=0,a=0;l<u;++l)a+=e[l][n][1]||0;o[n][1]+=o[n][0]=-a/2}(0,r.default)(e,t)}};var e=require("./none"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./none":631}],633:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((f=e.length)>0&&(u=(o=e[t[0]]).length)>0){for(var o,u,f,n=0,a=1;a<u;++a){for(var l=0,d=0,i=0;l<f;++l){for(var s=e[t[l]],v=s[a][1]||0,c=(v-(s[a-1][1]||0))/2,_=0;_<l;++_){var p=e[t[_]];c+=(p[a][1]||0)-(p[a-1][1]||0)}d+=v,i+=c*v}o[a-1][1]+=o[a-1][0]=n,d&&(n-=i/d)}o[a-1][1]+=o[a-1][0]=n,(0,r.default)(e,t)}};var e=require("./none"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./none":631}],634:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.map(u);return(0,r.default)(e).sort(function(e,r){return t[e]-t[r]})},exports.sum=u;var e=require("./none"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var r,t=0,u=-1,n=e.length;++u<n;)(r=+e[u][1])&&(t+=r);return t}
},{"./none":637}],635:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,r.default)(e).reverse()};var e=require("./ascending"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./ascending":634}],636:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var u,n,o=e.length,s=e.map(t.sum),a=(0,r.default)(e).sort(function(e,r){return s[r]-s[e]}),c=0,f=0,i=[],d=[];for(u=0;u<o;++u)n=a[u],c<f?(c+=s[n],i.push(n)):(f+=s[n],d.push(n));return d.reverse().concat(i)};var e=require("./none"),r=u(e),t=require("./ascending");function u(e){return e&&e.__esModule?e:{default:e}}
},{"./none":637,"./ascending":634}],638:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,r.default)(e).reverse()};var e=require("./none"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./none":637}],510:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/arc");Object.defineProperty(exports,"arc",{enumerable:!0,get:function(){return Y(e).default}});var r=require("./src/area");Object.defineProperty(exports,"area",{enumerable:!0,get:function(){return Y(r).default}});var t=require("./src/line");Object.defineProperty(exports,"line",{enumerable:!0,get:function(){return Y(t).default}});var n=require("./src/pie");Object.defineProperty(exports,"pie",{enumerable:!0,get:function(){return Y(n).default}});var u=require("./src/areaRadial");Object.defineProperty(exports,"areaRadial",{enumerable:!0,get:function(){return Y(u).default}}),Object.defineProperty(exports,"radialArea",{enumerable:!0,get:function(){return Y(u).default}});var o=require("./src/lineRadial");Object.defineProperty(exports,"lineRadial",{enumerable:!0,get:function(){return Y(o).default}}),Object.defineProperty(exports,"radialLine",{enumerable:!0,get:function(){return Y(o).default}});var a=require("./src/pointRadial");Object.defineProperty(exports,"pointRadial",{enumerable:!0,get:function(){return Y(a).default}});var i=require("./src/link/index");Object.defineProperty(exports,"linkHorizontal",{enumerable:!0,get:function(){return i.linkHorizontal}}),Object.defineProperty(exports,"linkVertical",{enumerable:!0,get:function(){return i.linkVertical}}),Object.defineProperty(exports,"linkRadial",{enumerable:!0,get:function(){return i.linkRadial}});var c=require("./src/symbol");Object.defineProperty(exports,"symbol",{enumerable:!0,get:function(){return Y(c).default}}),Object.defineProperty(exports,"symbols",{enumerable:!0,get:function(){return c.symbols}});var l=require("./src/symbol/circle");Object.defineProperty(exports,"symbolCircle",{enumerable:!0,get:function(){return Y(l).default}});var s=require("./src/symbol/cross");Object.defineProperty(exports,"symbolCross",{enumerable:!0,get:function(){return Y(s).default}});var f=require("./src/symbol/diamond");Object.defineProperty(exports,"symbolDiamond",{enumerable:!0,get:function(){return Y(f).default}});var d=require("./src/symbol/square");Object.defineProperty(exports,"symbolSquare",{enumerable:!0,get:function(){return Y(d).default}});var b=require("./src/symbol/star");Object.defineProperty(exports,"symbolStar",{enumerable:!0,get:function(){return Y(b).default}});var p=require("./src/symbol/triangle");Object.defineProperty(exports,"symbolTriangle",{enumerable:!0,get:function(){return Y(p).default}});var m=require("./src/symbol/wye");Object.defineProperty(exports,"symbolWye",{enumerable:!0,get:function(){return Y(m).default}});var v=require("./src/curve/basisClosed");Object.defineProperty(exports,"curveBasisClosed",{enumerable:!0,get:function(){return Y(v).default}});var y=require("./src/curve/basisOpen");Object.defineProperty(exports,"curveBasisOpen",{enumerable:!0,get:function(){return Y(y).default}});var O=require("./src/curve/basis");Object.defineProperty(exports,"curveBasis",{enumerable:!0,get:function(){return Y(O).default}});var g=require("./src/curve/bundle");Object.defineProperty(exports,"curveBundle",{enumerable:!0,get:function(){return Y(g).default}});var x=require("./src/curve/cardinalClosed");Object.defineProperty(exports,"curveCardinalClosed",{enumerable:!0,get:function(){return Y(x).default}});var j=require("./src/curve/cardinalOpen");Object.defineProperty(exports,"curveCardinalOpen",{enumerable:!0,get:function(){return Y(j).default}});var P=require("./src/curve/cardinal");Object.defineProperty(exports,"curveCardinal",{enumerable:!0,get:function(){return Y(P).default}});var q=require("./src/curve/catmullRomClosed");Object.defineProperty(exports,"curveCatmullRomClosed",{enumerable:!0,get:function(){return Y(q).default}});var k=require("./src/curve/catmullRomOpen");Object.defineProperty(exports,"curveCatmullRomOpen",{enumerable:!0,get:function(){return Y(k).default}});var C=require("./src/curve/catmullRom");Object.defineProperty(exports,"curveCatmullRom",{enumerable:!0,get:function(){return Y(C).default}});var R=require("./src/curve/linearClosed");Object.defineProperty(exports,"curveLinearClosed",{enumerable:!0,get:function(){return Y(R).default}});var B=require("./src/curve/linear");Object.defineProperty(exports,"curveLinear",{enumerable:!0,get:function(){return Y(B).default}});var S=require("./src/curve/monotone");Object.defineProperty(exports,"curveMonotoneX",{enumerable:!0,get:function(){return S.monotoneX}}),Object.defineProperty(exports,"curveMonotoneY",{enumerable:!0,get:function(){return S.monotoneY}});var A=require("./src/curve/natural");Object.defineProperty(exports,"curveNatural",{enumerable:!0,get:function(){return Y(A).default}});var M=require("./src/curve/step");Object.defineProperty(exports,"curveStep",{enumerable:!0,get:function(){return Y(M).default}}),Object.defineProperty(exports,"curveStepAfter",{enumerable:!0,get:function(){return M.stepAfter}}),Object.defineProperty(exports,"curveStepBefore",{enumerable:!0,get:function(){return M.stepBefore}});var _=require("./src/stack");Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return Y(_).default}});var D=require("./src/offset/expand");Object.defineProperty(exports,"stackOffsetExpand",{enumerable:!0,get:function(){return Y(D).default}});var L=require("./src/offset/diverging");Object.defineProperty(exports,"stackOffsetDiverging",{enumerable:!0,get:function(){return Y(L).default}});var N=require("./src/offset/none");Object.defineProperty(exports,"stackOffsetNone",{enumerable:!0,get:function(){return Y(N).default}});var h=require("./src/offset/silhouette");Object.defineProperty(exports,"stackOffsetSilhouette",{enumerable:!0,get:function(){return Y(h).default}});var w=require("./src/offset/wiggle");Object.defineProperty(exports,"stackOffsetWiggle",{enumerable:!0,get:function(){return Y(w).default}});var z=require("./src/order/ascending");Object.defineProperty(exports,"stackOrderAscending",{enumerable:!0,get:function(){return Y(z).default}});var H=require("./src/order/descending");Object.defineProperty(exports,"stackOrderDescending",{enumerable:!0,get:function(){return Y(H).default}});var V=require("./src/order/insideOut");Object.defineProperty(exports,"stackOrderInsideOut",{enumerable:!0,get:function(){return Y(V).default}});var W=require("./src/order/none");Object.defineProperty(exports,"stackOrderNone",{enumerable:!0,get:function(){return Y(W).default}});var X=require("./src/order/reverse");function Y(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"stackOrderReverse",{enumerable:!0,get:function(){return Y(X).default}});
},{"./src/arc":572,"./src/area":573,"./src/line":574,"./src/pie":575,"./src/areaRadial":576,"./src/lineRadial":577,"./src/pointRadial":578,"./src/link/index":606,"./src/symbol":579,"./src/symbol/circle":607,"./src/symbol/cross":608,"./src/symbol/diamond":609,"./src/symbol/square":610,"./src/symbol/star":611,"./src/symbol/triangle":612,"./src/symbol/wye":613,"./src/curve/basisClosed":615,"./src/curve/basisOpen":614,"./src/curve/basis":616,"./src/curve/bundle":617,"./src/curve/cardinalClosed":618,"./src/curve/cardinalOpen":619,"./src/curve/cardinal":620,"./src/curve/catmullRomClosed":621,"./src/curve/catmullRomOpen":622,"./src/curve/catmullRom":623,"./src/curve/linearClosed":624,"./src/curve/linear":625,"./src/curve/monotone":626,"./src/curve/natural":627,"./src/curve/step":628,"./src/stack":580,"./src/offset/expand":629,"./src/offset/diverging":630,"./src/offset/none":631,"./src/offset/silhouette":632,"./src/offset/wiggle":633,"./src/order/ascending":634,"./src/order/descending":635,"./src/order/insideOut":636,"./src/order/none":637,"./src/order/reverse":638}],355:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=c(e),r=require("prop-types"),a=c(r),n=require("d3-shape"),s=require("classnames"),o=c(s),i=require("../util/PureRender"),u=c(i),l=require("../util/ReactUtils");function c(e){return e&&e.__esModule?e:{default:e}}var p,f,y,b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O={symbolCircle:n.symbolCircle,symbolCross:n.symbolCross,symbolDiamond:n.symbolDiamond,symbolSquare:n.symbolSquare,symbolStar:n.symbolStar,symbolTriangle:n.symbolTriangle,symbolWye:n.symbolWye},g=Math.PI/180,P=function(e){var t="symbol"+e.slice(0,1).toUpperCase()+e.slice(1);return O[t]||n.symbolCircle},q=function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*g;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.pow(Math.tan(a),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},w=(0,u.default)((y=f=function(r){function a(){return h(this,a),d(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return v(a,e.Component),m(a,[{key:"getPath",value:function(){var e=this.props,t=e.size,r=e.sizeType,a=e.type,s=P(a);return(0,n.symbol)().type(s).size(q(t,r,a))()}},{key:"render",value:function(){var e=this.props,r=e.className,a=e.cx,n=e.cy,s=e.size;return a===+a&&n===+n&&s===+s?t.default.createElement("path",b({},(0,l.getPresentationAttributes)(this.props),(0,l.filterEventAttributes)(this.props),{className:(0,o.default)("recharts-symbols",r),transform:"translate("+a+", "+n+")",d:this.getPath()})):null}}]),a}(),f.displayName="Symbols",f.propTypes=b({},l.PRESENTATION_ATTRIBUTES,{className:a.default.string,type:a.default.oneOf(["circle","cross","diamond","square","star","triangle","wye"]),cx:a.default.number,cy:a.default.number,size:a.default.number,sizeType:a.default.oneOf(["area","diameter"])}),f.defaultProps={type:"circle",size:64,sizeType:"area"},p=y))||p;exports.default=w;
},{"react":8,"prop-types":96,"d3-shape":510,"classnames":495,"../util/PureRender":456,"../util/ReactUtils":459}],457:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=p(e),n=require("prop-types"),r=p(n),a=require("classnames"),l=p(a),i=require("../util/PureRender"),o=p(i),u=require("../container/Surface"),c=p(u),f=require("../shape/Symbols"),s=p(f),d=require("../util/ReactUtils");function p(e){return e&&e.__esModule?e:{default:e}}var y,h,m,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=32,w=d.LEGEND_TYPES.filter(function(e){return"none"!==e}),P=(0,o.default)((m=h=function(n){function r(){return O(this,r),E(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return k(r,e.Component),g(r,[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=_/2,a=_/6,l=_/3,i=e.inactive?n:e.color;return"plainline"===e.type?t.default.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:_,y2:r,className:"recharts-legend-icon"}):"line"===e.type?t.default.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,"+r+"h"+l+"\n            A"+a+","+a+",0,1,1,"+2*l+","+r+"\n            H"+_+"M"+2*l+","+r+"\n            A"+a+","+a+",0,1,1,"+l+","+r,className:"recharts-legend-icon"}):"rect"===e.type?t.default.createElement("path",{stroke:"none",fill:i,d:"M0,"+_/8+"h"+_+"v"+3*_/4+"h"+-_+"z",className:"recharts-legend-icon"}):t.default.createElement(s.default,{fill:i,cx:r,cy:r,size:_,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,a=n.iconSize,i=n.layout,o=n.formatter,u={x:0,y:0,width:_,height:_},f={display:"horizontal"===i?"inline-block":"block",marginRight:10},s={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(n,r){var i,p=n.formatter||o,y=(0,l.default)((b(i={"recharts-legend-item":!0},"legend-item-"+r,!0),b(i,"inactive",n.inactive),i));return"none"===n.type?null:t.default.createElement("li",v({className:y,style:f,key:"legend-item-"+r},(0,d.filterEventsOfChild)(e.props,n,r)),t.default.createElement(c.default,{width:a,height:a,viewBox:u,style:s},e.renderIcon(n)),t.default.createElement("span",{className:"recharts-legend-item-text"},p?p(n.value,n,r):n.value))})}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,a=e.align;if(!n||!n.length)return null;var l={padding:0,margin:0,textAlign:"horizontal"===r?a:"left"};return t.default.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(),h.displayName="Legend",h.propTypes={content:r.default.element,iconSize:r.default.number,iconType:r.default.oneOf(w),layout:r.default.oneOf(["horizontal","vertical"]),align:r.default.oneOf(["center","left","right"]),verticalAlign:r.default.oneOf(["top","bottom","middle"]),payload:r.default.arrayOf(r.default.shape({value:r.default.any,id:r.default.any,type:r.default.oneOf(d.LEGEND_TYPES)})),inactiveColor:r.default.string,formatter:r.default.func,onMouseEnter:r.default.func,onMouseLeave:r.default.func,onClick:r.default.func},h.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"},y=m))||y;exports.default=P;
},{"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../container/Surface":340,"../shape/Symbols":355,"../util/ReactUtils":459}],342:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("lodash/isFunction"),e=p(t),o=require("react"),n=p(o),r=require("prop-types"),i=p(r),a=require("../util/PureRender"),u=p(a),l=require("./DefaultLegendContent"),f=p(l),h=require("../util/DataUtils"),d=require("../util/ReactUtils");function p(t){return t&&t.__esModule?t:{default:t}}var c,s,g,b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},v=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var x=function(t,o){return n.default.isValidElement(t)?n.default.cloneElement(t,o):(0,e.default)(t)?t(o):n.default.createElement(f.default,o)},O=1,B=d.LEGEND_TYPES.filter(function(t){return"none"!==t}),E=(0,u.default)((g=s=function(t){function e(){var t,o,n;y(this,e);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return o=n=m(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),n.state={boxWidth:-1,boxHeight:-1},m(n,o)}return w(e,o.Component),v(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){var t=this.state,e=t.boxWidth,o=t.boxHeight;return e>=0&&o>=0?{width:e,height:o}:null}},{key:"getDefaultPosition",value:function(t){var e=this.props,o=e.layout,n=e.align,r=e.verticalAlign,i=e.margin,a=e.chartWidth,u=e.chartHeight,l=void 0,f=void 0;if(!t||(void 0===t.left||null===t.left)&&(void 0===t.right||null===t.right))if("center"===n&&"vertical"===o){var h=this.getBBox()||{width:0};l={left:((a||0)-h.width)/2}}else l="right"===n?{right:i&&i.right||0}:{left:i&&i.left||0};if(!t||(void 0===t.top||null===t.top)&&(void 0===t.bottom||null===t.bottom))if("middle"===r){var d=this.getBBox()||{height:0};f={top:((u||0)-d.height)/2}}else f="bottom"===r?{bottom:i&&i.bottom||0}:{top:i&&i.top||0};return b({},l,f)}},{key:"updateBBox",value:function(){var t=this.state,e=t.boxWidth,o=t.boxHeight,n=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-e)>O||Math.abs(r.height-o)>O)&&this.setState({boxWidth:r.width,boxHeight:r.height},function(){n&&n(r)})}else-1===e&&-1===o||this.setState({boxWidth:-1,boxHeight:-1},function(){n&&n(null)})}},{key:"render",value:function(){var t=this,e=this.props,o=e.content,r=e.width,i=e.height,a=e.wrapperStyle,u=b({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(a),a);return n.default.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(e){t.wrapperNode=e}},x(o,this.props))}}],[{key:"getWithHeight",value:function(t,e){var o=t.props.layout;return"vertical"===o&&(0,h.isNumber)(t.props.height)?{height:t.props.height}:"horizontal"===o?{width:t.props.width||e}:null}}]),e}(),s.displayName="Legend",s.propTypes={content:i.default.oneOfType([i.default.element,i.default.func]),wrapperStyle:i.default.object,chartWidth:i.default.number,chartHeight:i.default.number,width:i.default.number,height:i.default.number,iconSize:i.default.number,iconType:i.default.oneOf(B),layout:i.default.oneOf(["horizontal","vertical"]),align:i.default.oneOf(["center","left","right"]),verticalAlign:i.default.oneOf(["top","bottom","middle"]),margin:i.default.shape({top:i.default.number,left:i.default.number,bottom:i.default.number,right:i.default.number}),payload:i.default.arrayOf(i.default.shape({value:i.default.any,id:i.default.any,type:i.default.oneOf(d.LEGEND_TYPES)})),formatter:i.default.func,onMouseEnter:i.default.func,onMouseLeave:i.default.func,onClick:i.default.func,onBBoxUpdate:i.default.func},s.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"},c=g))||c;exports.default=E;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"../util/PureRender":456,"./DefaultLegendContent":457,"../util/DataUtils":458,"../util/ReactUtils":459}],847:[function(require,module,exports) {
var e=require("./_ListCache");function i(){this.__data__=new e,this.size=0}module.exports=i;
},{"./_ListCache":846}],848:[function(require,module,exports) {
function e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}module.exports=e;
},{}],849:[function(require,module,exports) {
function t(t){return this.__data__.get(t)}module.exports=t;
},{}],850:[function(require,module,exports) {
function t(t){return this.__data__.has(t)}module.exports=t;
},{}],851:[function(require,module,exports) {
var e=require("./_ListCache"),i=require("./_Map"),t=require("./_MapCache"),s=200;function _(_,a){var r=this.__data__;if(r instanceof e){var h=r.__data__;if(!i||h.length<s-1)return h.push([_,a]),this.size=++r.size,this;r=this.__data__=new t(h)}return r.set(_,a),this.size=r.size,this}module.exports=_;
},{"./_ListCache":846,"./_Map":866,"./_MapCache":911}],736:[function(require,module,exports) {
var e=require("./_ListCache"),t=require("./_stackClear"),r=require("./_stackDelete"),a=require("./_stackGet"),s=require("./_stackHas"),o=require("./_stackSet");function i(t){var r=this.__data__=new e(t);this.size=r.size}i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=s,i.prototype.set=o,module.exports=i;
},{"./_ListCache":846,"./_stackClear":847,"./_stackDelete":848,"./_stackGet":849,"./_stackHas":850,"./_stackSet":851}],912:[function(require,module,exports) {
var _="__lodash_hash_undefined__";function t(t){return this.__data__.set(t,_),this}module.exports=t;
},{}],852:[function(require,module,exports) {
var e=require("./_MapCache"),t=require("./_setCacheAdd"),r=require("./_setCacheHas");function a(t){var r=-1,a=null==t?0:t.length;for(this.__data__=new e;++r<a;)this.add(t[r])}a.prototype.add=a.prototype.push=t,a.prototype.has=r,module.exports=a;
},{"./_MapCache":911,"./_setCacheAdd":912,"./_setCacheHas":850}],853:[function(require,module,exports) {
function r(r,n){for(var e=-1,t=null==r?0:r.length;++e<t;)if(n(r[e],e,r))return!0;return!1}module.exports=r;
},{}],854:[function(require,module,exports) {
function e(e,n){return e.has(n)}module.exports=e;
},{}],737:[function(require,module,exports) {
var e=require("./_SetCache"),r=require("./_arraySome"),i=require("./_cacheHas"),t=1,a=2;function n(n,f,u,o,v,c){var l=u&t,s=n.length,d=f.length;if(s!=d&&!(l&&d>s))return!1;var h=c.get(n);if(h&&c.get(f))return h==f;var g=-1,b=!0,k=u&a?new e:void 0;for(c.set(n,f),c.set(f,n);++g<s;){var q=n[g],_=f[g];if(o)var m=l?o(_,q,g,f,n,c):o(q,_,g,n,f,c);if(void 0!==m){if(m)continue;b=!1;break}if(k){if(!r(f,function(e,r){if(!i(k,r)&&(q===e||v(q,e,u,o,c)))return k.push(r)})){b=!1;break}}else if(q!==_&&!v(q,_,u,o,c)){b=!1;break}}return c.delete(n),c.delete(f),b}module.exports=n;
},{"./_SetCache":852,"./_arraySome":853,"./_cacheHas":854}],855:[function(require,module,exports) {
var r=require("./_root"),e=r.Uint8Array;module.exports=e;
},{"./_root":656}],856:[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r,e){o[++n]=[e,r]}),o}module.exports=r;
},{}],857:[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r){o[++n]=r}),o}module.exports=r;
},{}],738:[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_Uint8Array"),t=require("./eq"),a=require("./_equalArrays"),c=require("./_mapToArray"),o=require("./_setToArray"),s=1,u=2,n="[object Boolean]",b="[object Date]",i="[object Error]",f="[object Map]",y="[object Number]",j="[object RegExp]",l="[object Set]",g="[object String]",m="[object Symbol]",q="[object ArrayBuffer]",v="[object DataView]",p=e?e.prototype:void 0,h=p?p.valueOf:void 0;function A(e,p,A,_,d,w,L){switch(A){case v:if(e.byteLength!=p.byteLength||e.byteOffset!=p.byteOffset)return!1;e=e.buffer,p=p.buffer;case q:return!(e.byteLength!=p.byteLength||!w(new r(e),new r(p)));case n:case b:case y:return t(+e,+p);case i:return e.name==p.name&&e.message==p.message;case j:case g:return e==p+"";case f:var S=c;case l:var O=_&s;if(S||(S=o),e.size!=p.size&&!O)return!1;var x=L.get(e);if(x)return x==p;_|=u,L.set(e,p);var z=a(S(e),S(p),_,d,w,L);return L.delete(e),z;case m:if(h)return h.call(e)==h.call(p)}return!1}module.exports=A;
},{"./_Symbol":647,"./_Uint8Array":855,"./eq":722,"./_equalArrays":737,"./_mapToArray":856,"./_setToArray":857}],715:[function(require,module,exports) {
function e(e,n){for(var r=-1,t=n.length,o=e.length;++r<t;)e[o+r]=n[r];return e}module.exports=e;
},{}],914:[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./isArray");function u(u,a,i){var n=a(u);return e(u)?n:r(n,i(u))}module.exports=u;
},{"./_arrayPush":715,"./isArray":502}],892:[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=0,t=[];++e<l;){var u=r[e];n(u,e,r)&&(t[o++]=u)}return t}module.exports=r;
},{}],951:[function(require,module,exports) {
function e(){return[]}module.exports=e;
},{}],915:[function(require,module,exports) {
var r=require("./_arrayFilter"),e=require("./stubArray"),t=Object.prototype,u=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(e){return null==e?[]:(e=Object(e),r(n(e),function(r){return u.call(e,r)}))}:e;module.exports=o;
},{"./_arrayFilter":892,"./stubArray":951}],944:[function(require,module,exports) {
function r(r,o){for(var e=-1,n=Array(r);++e<r;)n[e]=o(e);return n}module.exports=r;
},{}],897:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Arguments]";function u(u){return r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":555,"./isObjectLike":569}],818:[function(require,module,exports) {
var e=require("./_baseIsArguments"),r=require("./isObjectLike"),t=Object.prototype,l=t.hasOwnProperty,n=t.propertyIsEnumerable,u=e(function(){return arguments}())?e:function(e){return r(e)&&l.call(e,"callee")&&!n.call(e,"callee")};module.exports=u;
},{"./_baseIsArguments":897,"./isObjectLike":569}],859:[function(require,module,exports) {
function e(){return!1}module.exports=e;
},{}],740:[function(require,module,exports) {

var e=require("./_root"),o=require("./stubFalse"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=r&&"object"==typeof module&&module&&!module.nodeType&&module,p=t&&t.exports===r,u=p?e.Buffer:void 0,d=u?u.isBuffer:void 0,s=d||o;module.exports=s;
},{"./_root":656,"./stubFalse":859}],724:[function(require,module,exports) {
var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(t,n){var o=typeof t;return!!(n=null==n?e:n)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<n}module.exports=t;
},{}],824:[function(require,module,exports) {
var e=9007199254740991;function r(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=e}module.exports=r;
},{}],863:[function(require,module,exports) {
var e=require("./_baseGetTag"),t=require("./isLength"),r=require("./isObjectLike"),o="[object Arguments]",b="[object Array]",c="[object Boolean]",j="[object Date]",a="[object Error]",n="[object Function]",i="[object Map]",A="[object Number]",y="[object Object]",u="[object RegExp]",g="[object Set]",l="[object String]",p="[object WeakMap]",s="[object ArrayBuffer]",m="[object DataView]",U="[object Float32Array]",f="[object Float64Array]",q="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",d="[object Uint8Array]",h="[object Uint8ClampedArray]",k="[object Uint16Array]",x="[object Uint32Array]",B={};function D(o){return r(o)&&t(o.length)&&!!B[e(o)]}B[U]=B[f]=B[q]=B[F]=B[I]=B[d]=B[h]=B[k]=B[x]=!0,B[o]=B[b]=B[s]=B[c]=B[m]=B[j]=B[a]=B[n]=B[i]=B[A]=B[y]=B[u]=B[g]=B[l]=B[p]=!1,module.exports=D;
},{"./_baseGetTag":555,"./isLength":824,"./isObjectLike":569}],720:[function(require,module,exports) {
function n(n){return function(r){return n(r)}}module.exports=n;
},{}],864:[function(require,module,exports) {
var e=require("./_freeGlobal"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof module&&module&&!module.nodeType&&module,t=r&&r.exports===o,p=t&&e.process,u=function(){try{var e=r&&r.require&&r.require("util").types;return e||p&&p.binding&&p.binding("util")}catch(e){}}();module.exports=u;
},{"./_freeGlobal":727}],742:[function(require,module,exports) {
var e=require("./_baseIsTypedArray"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isTypedArray,s=i?r(i):e;module.exports=s;
},{"./_baseIsTypedArray":863,"./_baseUnary":720,"./_nodeUtil":864}],904:[function(require,module,exports) {
var e=require("./_baseTimes"),r=require("./isArguments"),t=require("./isArray"),i=require("./isBuffer"),n=require("./_isIndex"),s=require("./isTypedArray"),u=Object.prototype,f=u.hasOwnProperty;function a(u,a){var o=t(u),p=!o&&r(u),y=!o&&!p&&i(u),g=!o&&!p&&!y&&s(u),h=o||p||y||g,l=h?e(u.length,String):[],q=l.length;for(var b in u)!a&&!f.call(u,b)||h&&("length"==b||y&&("offset"==b||"parent"==b)||g&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||n(b,q))||l.push(b);return l}module.exports=a;
},{"./_baseTimes":944,"./isArguments":818,"./isArray":502,"./isBuffer":740,"./_isIndex":724,"./isTypedArray":742}],942:[function(require,module,exports) {
var t=Object.prototype;function o(o){var r=o&&o.constructor;return o===("function"==typeof r&&r.prototype||t)}module.exports=o;
},{}],662:[function(require,module,exports) {
function n(n,r){return function(t){return n(r(t))}}module.exports=n;
},{}],943:[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.keys,Object);module.exports=r;
},{"./_overArg":662}],905:[function(require,module,exports) {
var r=require("./_isPrototype"),e=require("./_nativeKeys"),t=Object.prototype,o=t.hasOwnProperty;function n(t){if(!r(t))return e(t);var n=[];for(var u in Object(t))o.call(t,u)&&"constructor"!=u&&n.push(u);return n}module.exports=n;
},{"./_isPrototype":942,"./_nativeKeys":943}],723:[function(require,module,exports) {
var e=require("./isFunction"),n=require("./isLength");function r(r){return null!=r&&n(r.length)&&!e(r)}module.exports=r;
},{"./isFunction":498,"./isLength":824}],827:[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeys"),i=require("./isArrayLike");function u(u){return i(u)?e(u):r(u)}module.exports=u;
},{"./_arrayLikeKeys":904,"./_baseKeys":905,"./isArrayLike":723}],858:[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbols"),u=require("./keys");function s(s){return e(s,u,r)}module.exports=s;
},{"./_baseGetAllKeys":914,"./_getSymbols":915,"./keys":827}],739:[function(require,module,exports) {
var r=require("./_getAllKeys"),t=1,e=Object.prototype,n=e.hasOwnProperty;function o(e,o,c,i,a,f){var u=c&t,s=r(e),v=s.length;if(v!=r(o).length&&!u)return!1;for(var l=v;l--;){var p=s[l];if(!(u?p in o:n.call(o,p)))return!1}var g=f.get(e);if(g&&f.get(o))return g==o;var y=!0;f.set(e,o),f.set(o,e);for(var d=u;++l<v;){var h=e[p=s[l]],b=o[p];if(i)var O=u?i(b,h,p,o,e,f):i(h,b,p,e,o,f);if(!(void 0===O?h===b||a(h,b,c,i,f):O)){y=!1;break}d||(d="constructor"==p)}if(y&&!d){var j=e.constructor,k=o.constructor;j!=k&&"constructor"in e&&"constructor"in o&&!("function"==typeof j&&j instanceof j&&"function"==typeof k&&k instanceof k)&&(y=!1)}return f.delete(e),f.delete(o),y}module.exports=o;
},{"./_getAllKeys":858}],865:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"DataView");module.exports=t;
},{"./_getNative":916,"./_root":656}],867:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Promise");module.exports=o;
},{"./_getNative":916,"./_root":656}],868:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"Set");module.exports=t;
},{"./_getNative":916,"./_root":656}],869:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),a=e(r,"WeakMap");module.exports=a;
},{"./_getNative":916,"./_root":656}],741:[function(require,module,exports) {
var e=require("./_DataView"),r=require("./_Map"),t=require("./_Promise"),a=require("./_Set"),u=require("./_WeakMap"),c=require("./_baseGetTag"),o=require("./_toSource"),i="[object Map]",n="[object Object]",s="[object Promise]",b="[object Set]",w="[object WeakMap]",j="[object DataView]",q=o(e),_=o(r),p=o(t),f=o(a),v=o(u),M=c;(e&&M(new e(new ArrayBuffer(1)))!=j||r&&M(new r)!=i||t&&M(t.resolve())!=s||a&&M(new a)!=b||u&&M(new u)!=w)&&(M=function(e){var r=c(e),t=r==n?e.constructor:void 0,a=t?o(t):"";if(a)switch(a){case q:return j;case _:return i;case p:return s;case f:return b;case v:return w}return r}),module.exports=M;
},{"./_DataView":865,"./_Map":866,"./_Promise":867,"./_Set":868,"./_WeakMap":869,"./_baseGetTag":555,"./_toSource":870}],661:[function(require,module,exports) {
var e=require("./_Stack"),r=require("./_equalArrays"),a=require("./_equalByTag"),u=require("./_equalObjects"),t=require("./_getTag"),i=require("./isArray"),_=require("./isBuffer"),n=require("./isTypedArray"),q=1,c="[object Arguments]",l="[object Array]",o="[object Object]",p=Object.prototype,f=p.hasOwnProperty;function s(p,s,y,b,j,v){var w=i(p),A=i(s),d=w?l:t(p),g=A?l:t(s),O=(d=d==c?o:d)==o,T=(g=g==c?o:g)==o,m=d==g;if(m&&_(p)){if(!_(s))return!1;w=!0,O=!1}if(m&&!O)return v||(v=new e),w||n(p)?r(p,s,y,b,j,v):a(p,s,d,y,b,j,v);if(!(y&q)){var B=O&&f.call(p,"__wrapped__"),h=T&&f.call(s,"__wrapped__");if(B||h){var k=B?p.value():p,x=h?s.value():s;return v||(v=new e),j(k,x,y,b,v)}}return!!m&&(v||(v=new e),u(p,s,y,b,j,v))}module.exports=s;
},{"./_Stack":736,"./_equalArrays":737,"./_equalByTag":738,"./_equalObjects":739,"./_getTag":741,"./isArray":502,"./isBuffer":740,"./isTypedArray":742}],565:[function(require,module,exports) {
var e=require("./_baseIsEqualDeep"),r=require("./isObjectLike");function u(l,i,n,s,t){return l===i||(null==l||null==i||!r(l)&&!r(i)?l!=l&&i!=i:e(l,i,n,s,u,t))}module.exports=u;
},{"./_baseIsEqualDeep":661,"./isObjectLike":569}],507:[function(require,module,exports) {
var e=require("./_baseIsEqual");function r(r,u){return e(r,u)}module.exports=r;
},{"./_baseIsEqual":565}],934:[function(require,module,exports) {
var process = require("process");
var e=require("process");(function(){var n,r,t,o,u,i;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(module.exports=function(){return(n()-u)/1e6},r=e.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),i=1e9*e.uptime(),u=o-i):Date.now?(module.exports=function(){return Date.now()-t},t=Date.now()):(module.exports=function(){return(new Date).getTime()-t},t=(new Date).getTime())}).call(this);
},{"process":50}],843:[function(require,module,exports) {
var global = arguments[3];
for(var e=arguments[3],n=require("performance-now"),t="undefined"==typeof window?e:window,a=["moz","webkit"],l="AnimationFrame",c=t["request"+l],o=t["cancel"+l]||t["cancelRequest"+l],r=0;!c&&r<a.length;r++)c=t[a[r]+"Request"+l],o=t[a[r]+"Cancel"+l]||t[a[r]+"CancelRequest"+l];if(!c||!o){var i=0,u=0,f=[],m=1e3/60;c=function(e){if(0===f.length){var t=n(),a=Math.max(0,m-(t-i));i=a+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(i)}catch(e){setTimeout(function(){throw e},0)}},Math.round(a))}return f.push({handle:++u,callback:e,cancelled:!1}),u},o=function(e){for(var n=0;n<f.length;n++)f[n].handle===e&&(f[n].cancelled=!0)}}module.exports=function(e){return c.call(t,e)},module.exports.cancel=function(){o.apply(t,arguments)},module.exports.polyfill=function(e){e||(e=t),e.requestAnimationFrame=c,e.cancelAnimationFrame=o};
},{"performance-now":934}],749:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("raf"),t=u(e);function u(e){return e&&e.__esModule?e:{default:e}}function r(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;(0,t.default)(function f(n){r<0&&(r=n),n-r>u?(e(n),r=-1):(0,t.default)(f)})}
},{"raf":843}],685:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.default=u;var n=require("./setRafTimeout"),r=e(n);function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return Array.isArray(t)?t:Array.from(t)}function u(){var n=function(){return null},e=!1;return{stop:function(){e=!0},start:function(u){e=!1,function u(f){if(!e){if(Array.isArray(f)){if(!f.length)return;var i=o(f),l=i[0],c=i.slice(1);return"number"==typeof l?void(0,r.default)(u.bind(null,c),l):(u(l),void(0,r.default)(u.bind(null,c)))}"object"===(void 0===f?"undefined":t(f))&&n(f),"function"==typeof f&&f()}}(u)},subscribe:function(t){return n=t,function(){n=function(){return null}}}}}
},{"./setRafTimeout":749}],568:[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.getPrototypeOf,Object);module.exports=r;
},{"./_overArg":662}],508:[function(require,module,exports) {
var t=require("./_baseGetTag"),e=require("./_getPrototype"),r=require("./isObjectLike"),o="[object Object]",c=Function.prototype,n=Object.prototype,u=c.toString,i=n.hasOwnProperty,a=u.call(Object);function l(c){if(!r(c)||t(c)!=o)return!1;var n=e(c);if(null===n)return!0;var l=i.call(n,"constructor")&&n.constructor;return"function"==typeof l&&l instanceof l&&u.call(l)==a}module.exports=l;
},{"./_baseGetTag":555,"./_getPrototype":568,"./isObjectLike":569}],686:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shallowEqual=void 0;var e=require("lodash/isPlainObject"),t=f(e),r=require("lodash/isEqual"),o=f(r),n=require("lodash/isArray"),u=f(n),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function f(e){return e&&e.__esModule?e:{default:e}}function i(e,r){if(e===r)return!0;if("object"!==(void 0===e?"undefined":l(e))||null===e||"object"!==(void 0===r?"undefined":l(r))||null===r)return!1;var n=Object.keys(e),f=Object.keys(r);if(n.length!==f.length)return!1;for(var i=hasOwnProperty.bind(r),s=0;s<n.length;s++){var a=n[s];if(e[a]!==r[a])if((0,u.default)(e[a])){if(!(0,u.default)(r[a])||e[a].length!==r[a].length)return!1;if(!(0,o.default)(e[a],r[a]))return!1}else if((0,t.default)(e[a])){if(!(0,t.default)(r[a])||!(0,o.default)(e[a],r[a]))return!1}else if(!i(n[s])||e[n[s]]!==r[n[s]])return!1}return!0}function s(e,t,r){return!i(e.props,t)||!i(e.state,r)}function a(e,t){return s(this,e,t)}function d(e){e.prototype.shouldComponentUpdate=a}exports.shallowEqual=i,exports.default=d;
},{"lodash/isPlainObject":508,"lodash/isEqual":507,"lodash/isArray":502}],956:[function(require,module,exports) {
function r(r,e,n,t){for(var o=r.length,u=n+(t?1:-1);t?u--:++u<o;)if(e(r[u],u,r))return u;return-1}module.exports=r;
},{}],957:[function(require,module,exports) {
function e(e){return e!=e}module.exports=e;
},{}],958:[function(require,module,exports) {
function r(r,e,n){for(var t=n-1,o=r.length;++t<o;)if(r[t]===e)return t;return-1}module.exports=r;
},{}],935:[function(require,module,exports) {
var e=require("./_baseFindIndex"),r=require("./_baseIsNaN"),i=require("./_strictIndexOf");function n(n,u,s){return u==u?i(n,u,s):e(n,r,s)}module.exports=n;
},{"./_baseFindIndex":956,"./_baseIsNaN":957,"./_strictIndexOf":958}],889:[function(require,module,exports) {
var e=require("./_baseIndexOf");function n(n,r){return!!(null==n?0:n.length)&&e(n,r,0)>-1}module.exports=n;
},{"./_baseIndexOf":935}],890:[function(require,module,exports) {
function r(r,n,e){for(var t=-1,u=null==r?0:r.length;++t<u;)if(e(n,r[t]))return!0;return!1}module.exports=r;
},{}],750:[function(require,module,exports) {
var r=require("./_SetCache"),e=require("./_arrayIncludes"),a=require("./_arrayIncludesWith"),n=require("./_arrayMap"),u=require("./_baseUnary"),i=require("./_cacheHas"),t=Math.min;function h(h,l,o){for(var c=o?a:e,s=h[0].length,v=h.length,f=v,q=Array(v),_=1/0,g=[];f--;){var y=h[f];f&&l&&(y=n(y,u(l))),_=t(y.length,_),q[f]=!o&&(l||s>=120&&y.length>=120)?new r(f&&y):void 0}y=h[0];var d=-1,p=q[0];r:for(;++d<s&&g.length<_;){var m=y[d],I=l?l(m):m;if(m=o||0!==m?m:0,!(p?i(p,I):c(g,I,o))){for(f=v;--f;){var M=q[f];if(!(M?i(M,I):c(h[f],I,o)))continue r}p&&p.push(I),g.push(m)}}return g}module.exports=h;
},{"./_SetCache":852,"./_arrayIncludes":889,"./_arrayIncludesWith":890,"./_arrayMap":717,"./_baseUnary":720,"./_cacheHas":854}],570:[function(require,module,exports) {
function e(e){return e}module.exports=e;
},{}],823:[function(require,module,exports) {
function e(e,l,r){switch(r.length){case 0:return e.call(l);case 1:return e.call(l,r[0]);case 2:return e.call(l,r[0],r[1]);case 3:return e.call(l,r[0],r[1],r[2])}return e.apply(l,r)}module.exports=e;
},{}],725:[function(require,module,exports) {
var r=require("./_apply"),t=Math.max;function a(a,e,n){return e=t(void 0===e?a.length-1:e,0),function(){for(var o=arguments,u=-1,i=t(o.length-e,0),f=Array(i);++u<i;)f[u]=o[e+u];u=-1;for(var h=Array(e+1);++u<e;)h[u]=o[u];return h[e]=n(f),r(a,this,h)}}module.exports=a;
},{"./_apply":823}],902:[function(require,module,exports) {
function n(n){return function(){return n}}module.exports=n;
},{}],903:[function(require,module,exports) {
var e=require("./_getNative"),r=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch(e){}}();module.exports=r;
},{"./_getNative":916}],825:[function(require,module,exports) {
var e=require("./constant"),r=require("./_defineProperty"),t=require("./identity"),i=r?function(t,i){return r(t,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;module.exports=i;
},{"./constant":902,"./_defineProperty":903,"./identity":570}],826:[function(require,module,exports) {
var r=800,e=16,n=Date.now;function t(t){var o=0,u=0;return function(){var a=n(),i=e-(a-u);if(u=a,i>0){if(++o>=r)return arguments[0]}else o=0;return t.apply(void 0,arguments)}}module.exports=t;
},{}],726:[function(require,module,exports) {
var e=require("./_baseSetToString"),r=require("./_shortOut"),t=r(e);module.exports=t;
},{"./_baseSetToString":825,"./_shortOut":826}],654:[function(require,module,exports) {
var e=require("./identity"),r=require("./_overRest"),t=require("./_setToString");function i(i,u){return t(r(i,u,e),i+"")}module.exports=i;
},{"./identity":570,"./_overRest":725,"./_setToString":726}],888:[function(require,module,exports) {
var e=require("./isArrayLike"),r=require("./isObjectLike");function i(i){return r(i)&&e(i)}module.exports=i;
},{"./isArrayLike":723,"./isObjectLike":569}],751:[function(require,module,exports) {
var r=require("./isArrayLikeObject");function e(e){return r(e)?e:[]}module.exports=e;
},{"./isArrayLikeObject":888}],693:[function(require,module,exports) {
var e=require("./_arrayMap"),r=require("./_baseIntersection"),a=require("./_baseRest"),t=require("./_castArrayLikeObject"),i=a(function(a){var i=e(a,t);return i.length&&i[0]===a[0]?r(i):[]});module.exports=i;
},{"./_arrayMap":717,"./_baseIntersection":750,"./_baseRest":654,"./_castArrayLikeObject":751}],603:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warn=exports.getTransitionVal=exports.compose=exports.translateStyle=exports.mapObject=exports.debugf=exports.debug=exports.log=exports.generatePrefixStyle=exports.getDashCase=exports.identity=exports.getIntersectionKeys=void 0;var e=require("lodash/intersection"),r=t(e),n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};function t(e){return e&&e.__esModule?e:{default:e}}function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var i=["Webkit","Moz","O","ms"],s=["-webkit-","-moz-","-o-","-ms-"],u=["transform","transformOrigin","transition"],a=exports.getIntersectionKeys=function(e,n){return(0,r.default)(Object.keys(e),Object.keys(n))},c=exports.identity=function(e){return e},f=exports.getDashCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},p=exports.generatePrefixStyle=function(e,r){if(-1===u.indexOf(e))return o({},e,r);var t="transition"===e,a=e.replace(/(\w)/,function(e){return e.toUpperCase()}),c=r;return i.reduce(function(e,i,u){return t&&(c=r.replace(/(transform|transform-origin)/gim,s[u]+"$1")),n({},e,o({},i+a,c))},{})},l=exports.log=function(){var e;(e=console).log.apply(e,arguments)},g=exports.debug=function(e){return function(r){return l(e,r),r}},d=exports.debugf=function(e,r){return function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];var i=r.apply(void 0,t),s=e||r.name||"anonymous function",u="("+t.map(JSON.stringify).join(", ")+")";return l(s+": "+u+" => "+JSON.stringify(i)),i}},x=exports.mapObject=function(e,r){return Object.keys(r).reduce(function(t,i){return n({},t,o({},i,e(i,r[i])))},{})},y=exports.translateStyle=function(e){return Object.keys(e).reduce(function(e,r){return n({},e,p(r,e[r]))},e)},m=exports.compose=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return c;var t=r.reverse(),o=t[0],i=t.slice(1);return function(){return i.reduce(function(e,r){return r(e)},o.apply(void 0,arguments))}},v=exports.getTransitionVal=function(e,r,n){return e.map(function(e){return f(e)+" "+r+"ms "+n}).join(",")},b=!1,O=exports.warn=function(e,r,n,t,o,i,s,u){if(b&&"undefined"!=typeof console&&console.warn&&(void 0===r&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===r)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,t,o,i,s,u],c=0;console.warn(r.replace(/%s/g,function(){return a[c++]}))}};
},{"lodash/intersection":693}],602:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configEasing=exports.configSpring=exports.configBezier=void 0;var e=require("./util");function r(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)}var n=1e-4,t=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},a=function(e,r){return e.map(function(e,n){return e*Math.pow(r,n)}).reduce(function(e,r){return e+r})},i=function(e,r){return function(n){var i=t(e,r);return a(i,n)}},o=function(e,n){return function(i){var o=t(e,n),s=[].concat(r(o.map(function(e,r){return e*r}).slice(1)),[0]);return a(s,i)}},s=exports.configBezier=function(){for(var r=arguments.length,t=Array(r),a=0;a<r;a++)t[a]=arguments[a];var s=t[0],u=t[1],c=t[2],f=t[3];if(1===t.length)switch(t[0]){case"linear":s=0,u=0,c=1,f=1;break;case"ease":s=.25,u=.1,c=.25,f=1;break;case"ease-in":s=.42,u=0,c=1,f=1;break;case"ease-out":s=.42,u=0,c=.58,f=1;break;case"ease-in-out":s=0,u=0,c=.58,f=1;break;default:(0,e.warn)(!1,"[configBezier]: arguments should be one of oneOf 'linear', 'ease', 'ease-in', 'ease-out', 'ease-in-out', instead received %s",t)}(0,e.warn)([s,c,u,f].every(function(e){return"number"==typeof e&&e>=0&&e<=1}),"[configBezier]: arguments should be x1, y1, x2, y2 of [0, 1] instead received %s",t);var g=i(s,c),d=i(u,f),v=o(s,c),p=function(e){for(var r,t=e>1?1:e,a=t,i=0;i<8;++i){var o=g(a)-t,s=v(a);if(Math.abs(o-t)<n||s<n)return d(a);a=(r=a-o/s)>1?1:r<0?0:r}return d(a)};return p.isStepper=!1,p},u=exports.configSpring=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.stiff,t=void 0===r?100:r,a=e.damping,i=void 0===a?8:a,o=e.dt,s=void 0===o?17:o,u=function(e,r,a){var o=a+(-(e-r)*t-a*i)*s/1e3,u=a*s/1e3+e;return Math.abs(u-r)<n&&Math.abs(o)<n?[r,0]:[u,o]};return u.isStepper=!0,u.dt=s,u},c=exports.configEasing=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];var a=n[0];if("string"==typeof a)switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return s(a);case"spring":return u();default:(0,e.warn)(!1,"[configEasing]: first argument should be one of 'ease', 'ease-in', 'ease-out', 'ease-in-out', 'linear' and 'spring', instead  received %s",n)}return"function"==typeof a?a:((0,e.warn)(!1,"[configEasing]: first argument type should be function or string, instead received %s",n),null)};
},{"./util":603}],962:[function(require,module,exports) {
function r(r){return function(e,n,t){for(var o=-1,u=Object(e),f=t(e),a=f.length;a--;){var c=f[r?a:++o];if(!1===n(u[c],c,u))break}return e}}module.exports=r;
},{}],940:[function(require,module,exports) {
var e=require("./_createBaseFor"),r=e();module.exports=r;
},{"./_createBaseFor":962}],900:[function(require,module,exports) {
var e=require("./_baseFor"),r=require("./keys");function u(u,o){return u&&e(u,o,r)}module.exports=u;
},{"./_baseFor":940,"./keys":827}],901:[function(require,module,exports) {
var r=require("./isArrayLike");function e(e,n){return function(t,u){if(null==t)return t;if(!r(t))return e(t,u);for(var i=t.length,f=n?i:-1,o=Object(t);(n?f--:++f<i)&&!1!==u(o[f],f,o););return t}}module.exports=e;
},{"./isArrayLike":723}],822:[function(require,module,exports) {
var e=require("./_baseForOwn"),r=require("./_createBaseEach"),a=r(e);module.exports=a;
},{"./_baseForOwn":900,"./_createBaseEach":901}],893:[function(require,module,exports) {
var r=require("./_baseEach");function e(e,u){var n=[];return r(e,function(r,e,a){u(r,e,a)&&n.push(r)}),n}module.exports=e;
},{"./_baseEach":822}],728:[function(require,module,exports) {
var r=require("./_Stack"),e=require("./_baseIsEqual"),i=1,n=2;function u(u,t,a,f){var v=a.length,o=v,l=!f;if(null==u)return!o;for(u=Object(u);v--;){var s=a[v];if(l&&s[2]?s[1]!==u[s[0]]:!(s[0]in u))return!1}for(;++v<o;){var c=(s=a[v])[0],d=u[c],q=s[1];if(l&&s[2]){if(void 0===d&&!(c in u))return!1}else{var b=new r;if(f)var _=f(d,q,c,u,t,b);if(!(void 0===_?e(q,d,i|n,f,b):_))return!1}}return!0}module.exports=u;
},{"./_Stack":736,"./_baseIsEqual":565}],733:[function(require,module,exports) {
var e=require("./isObject");function r(r){return r==r&&!e(r)}module.exports=r;
},{"./isObject":500}],729:[function(require,module,exports) {
var r=require("./_isStrictComparable"),e=require("./keys");function t(t){for(var a=e(t),i=a.length;i--;){var o=a[i],u=t[o];a[i]=[o,u,r(u)]}return a}module.exports=t;
},{"./_isStrictComparable":733,"./keys":827}],730:[function(require,module,exports) {
function n(n,t){return function(u){return null!=u&&(u[n]===t&&(void 0!==t||n in Object(u)))}}module.exports=n;
},{}],658:[function(require,module,exports) {
var e=require("./_baseIsMatch"),r=require("./_getMatchData"),t=require("./_matchesStrictComparable");function a(a){var u=r(a);return 1==u.length&&u[0][2]?t(u[0][0],u[0][1]):function(r){return r===a||e(r,a,u)}}module.exports=a;
},{"./_baseIsMatch":728,"./_getMatchData":729,"./_matchesStrictComparable":730}],844:[function(require,module,exports) {
function n(n,e){return null!=n&&e in Object(n)}module.exports=n;
},{}],845:[function(require,module,exports) {
var r=require("./_castPath"),e=require("./isArguments"),i=require("./isArray"),u=require("./_isIndex"),n=require("./isLength"),t=require("./_toKey");function a(a,l,s){for(var q=-1,o=(l=r(l,a)).length,g=!1;++q<o;){var h=t(l[q]);if(!(g=null!=a&&s(a,h)))break;a=a[h]}return g||++q!=o?g:!!(o=null==a?0:a.length)&&n(o)&&u(h,o)&&(i(a)||e(a))}module.exports=a;
},{"./_castPath":713,"./isArguments":818,"./isArray":502,"./_isIndex":724,"./isLength":824,"./_toKey":714}],731:[function(require,module,exports) {
var e=require("./_baseHasIn"),r=require("./_hasPath");function u(u,a){return null!=u&&r(u,a,e)}module.exports=u;
},{"./_baseHasIn":844,"./_hasPath":845}],659:[function(require,module,exports) {
var e=require("./_baseIsEqual"),r=require("./get"),i=require("./hasIn"),u=require("./_isKey"),t=require("./_isStrictComparable"),a=require("./_matchesStrictComparable"),o=require("./_toKey"),q=1,n=2;function s(s,c){return u(s)&&t(c)?a(o(s),c):function(u){var t=r(u,s);return void 0===t&&t===c?i(u,s):e(c,t,q|n)}}module.exports=s;
},{"./_baseIsEqual":565,"./get":552,"./hasIn":731,"./_isKey":732,"./_isStrictComparable":733,"./_matchesStrictComparable":730,"./_toKey":714}],734:[function(require,module,exports) {
function n(n){return function(u){return null==u?void 0:u[n]}}module.exports=n;
},{}],735:[function(require,module,exports) {
var e=require("./_baseGet");function r(r){return function(n){return e(n,r)}}module.exports=r;
},{"./_baseGet":650}],660:[function(require,module,exports) {
var e=require("./_baseProperty"),r=require("./_basePropertyDeep"),u=require("./_isKey"),i=require("./_toKey");function o(o){return u(o)?e(i(o)):r(o)}module.exports=o;
},{"./_baseProperty":734,"./_basePropertyDeep":735,"./_isKey":732,"./_toKey":714}],561:[function(require,module,exports) {
var e=require("./_baseMatches"),r=require("./_baseMatchesProperty"),t=require("./identity"),i=require("./isArray"),u=require("./property");function o(o){return"function"==typeof o?o:null==o?t:"object"==typeof o?i(o)?r(o[0],o[1]):e(o):u(o)}module.exports=o;
},{"./_baseMatches":658,"./_baseMatchesProperty":659,"./identity":570,"./isArray":502,"./property":660}],754:[function(require,module,exports) {
var r=require("./_arrayFilter"),e=require("./_baseFilter"),i=require("./_baseIteratee"),a=require("./isArray");function t(t,u){return(a(t)?r:e)(t,i(u,3))}module.exports=t;
},{"./_arrayFilter":892,"./_baseFilter":893,"./_baseIteratee":561,"./isArray":502}],687:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("lodash/filter"),t=a(r),e=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},n=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],n=!0,o=!1,u=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(r){o=!0,u=r}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=require("raf"),u=a(o),i=require("./util");function a(r){return r&&r.__esModule?r:{default:r}}function c(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}function f(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var l=function(r,t,e){return r+(t-r)*e},v=function(r){return r.from!==r.to},y=function r(t,o,u){var a=(0,i.mapObject)(function(r,o){if(v(o)){var u=t(o.from,o.to,o.velocity),i=n(u,2),a=i[0],c=i[1];return e({},o,{from:a,velocity:c})}return o},o);return u<1?(0,i.mapObject)(function(r,t){return v(t)?e({},t,{velocity:l(t.velocity,a[r].velocity,u),from:l(t.from,a[r].from,u)}):t},o):r(t,a,u-1)};exports.default=function(r,n,a,d,p){var s=(0,i.getIntersectionKeys)(r,n),m=s.reduce(function(t,o){return e({},t,f({},o,[r[o],n[o]]))},{}),b=s.reduce(function(t,o){return e({},t,f({},o,{from:r[o],velocity:0,to:n[o]}))},{}),h=-1,O=void 0,j=void 0,g=function(){return null};return g=a.isStepper?function(o){O||(O=o);var c=(o-O)/a.dt;b=y(a,b,c),p(e({},r,n,(0,i.mapObject)(function(r,t){return t.from},b))),O=o,(0,t.default)(b,v).length&&(h=(0,u.default)(g))}:function(t){j||(j=t);var o=(t-j)/d,f=(0,i.mapObject)(function(r,t){return l.apply(void 0,c(t).concat([a(o)]))},m);if(p(e({},r,n,f)),o<1)h=(0,u.default)(g);else{var v=(0,i.mapObject)(function(r,t){return l.apply(void 0,c(t).concat([a(1)]))},m);p(e({},r,n,v))}},function(){return(0,u.default)(g),function(){(0,o.cancel)(h)}}};
},{"lodash/filter":754,"raf":843,"./util":603}],601:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e,n,i=require("lodash/isEqual"),a=v(i),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=require("react"),u=v(s),l=require("prop-types"),f=v(l),c=require("./AnimateManager"),d=v(c),p=require("./PureRender"),h=v(p),m=require("./easing"),y=require("./configUpdate"),g=v(y),b=require("./util");function v(t){return t&&t.__esModule?t:{default:t}}function A(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function S(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var R=(0,h.default)((n=e=function(t){function e(t,n){j(this,e);var i=E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=i.props,r=a.isActive,o=a.attributeName,s=a.from,u=a.to,l=a.steps,f=a.children;if(i.handleStyleChange=i.handleStyleChange.bind(i),i.changeStyle=i.changeStyle.bind(i),!r)return i.state={style:{}},"function"==typeof f&&(i.state={style:u}),E(i);if(l&&l.length)i.state={style:l[0].style};else if(s){if("function"==typeof f)return i.state={style:s},E(i);i.state={style:o?O({},o,s):s}}else i.state={style:{}};return i}return k(e,s.Component),o(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.isActive,n=t.canBegin;this.mounted=!0,e&&n&&this.runAnimation(this.props)}},{key:"componentWillReceiveProps",value:function(t){var e=t.isActive,n=t.canBegin,i=t.attributeName,o=t.shouldReAnimate;if(n)if(e){if(!((0,a.default)(this.props.to,t.to)&&this.props.canBegin&&this.props.isActive)){var s=!this.props.canBegin||!this.props.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=s||o?t.from:this.props.to;this.setState({style:i?O({},i,u):u}),this.runAnimation(r({},t,{from:u,begin:0}))}}else this.setState({style:i?O({},i,t.to):t.to})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(t){var e=this,n=t.from,i=t.to,a=t.duration,r=t.easing,o=t.begin,s=t.onAnimationEnd,u=t.onAnimationStart,l=(0,g.default)(n,i,(0,m.configEasing)(r),a,this.changeStyle);this.manager.start([u,o,function(){e.stopJSAnimation=l()},a,s])}},{key:"runStepAnimation",value:function(t){var e=this,n=t.steps,i=t.begin,a=t.onAnimationStart,o=n[0],s=o.style,u=o.duration,l=void 0===u?0:u;return this.manager.start([a].concat(S(n.reduce(function(t,i,a){if(0===a)return t;var o=i.duration,s=i.easing,u=void 0===s?"ease":s,l=i.style,f=i.properties,c=i.onAnimationEnd,d=a>0?n[a-1]:i,p=f||Object.keys(l);if("function"==typeof u||"spring"===u)return[].concat(S(t),[e.runJSAnimation.bind(e,{from:d.style,to:l,duration:o,easing:u}),o]);var h=(0,b.getTransitionVal)(p,o,u),m=r({},d.style,l,{transition:h});return[].concat(S(t),[m,o,c]).filter(b.identity)},[s,Math.max(l,i)])),[t.onAnimationEnd]))}},{key:"runAnimation",value:function(t){this.manager||(this.manager=(0,d.default)());var e=t.begin,n=t.duration,i=t.attributeName,a=(t.from,t.to),o=t.easing,s=t.onAnimationStart,u=t.onAnimationEnd,l=t.steps,f=t.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!=typeof o&&"function"!=typeof f&&"spring"!==o)if(l.length>1)this.runStepAnimation(t);else{var p=i?O({},i,a):a,h=(0,b.getTransitionVal)(Object.keys(p),n,o);c.start([s,e,r({},p,{transition:h}),n,u])}else this.runJSAnimation(t)}},{key:"handleStyleChange",value:function(t){this.changeStyle(t)}},{key:"changeStyle",value:function(t){this.mounted&&this.setState({style:t})}},{key:"render",value:function(){var t=this.props,e=t.children,n=(t.begin,t.duration,t.attributeName,t.easing,t.isActive),i=(t.steps,t.from,t.to,t.canBegin,t.onAnimationEnd,t.shouldReAnimate,t.onAnimationReStart,A(t,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),a=s.Children.count(e),o=(0,b.translateStyle)(this.state.style);if("function"==typeof e)return e(o);if(!n||0===a)return e;var l=function(t){var e=t.props,n=e.style,a=void 0===n?{}:n,u=e.className;return(0,s.cloneElement)(t,r({},i,{style:r({},a,o),className:u}))};if(1===a){s.Children.only(e);return l(s.Children.only(e))}return u.default.createElement("div",null,s.Children.map(e,function(t){return l(t)}))}}]),e}(),e.displayName="Animate",e.propTypes={from:f.default.oneOfType([f.default.object,f.default.string]),to:f.default.oneOfType([f.default.object,f.default.string]),attributeName:f.default.string,duration:f.default.number,begin:f.default.number,easing:f.default.oneOfType([f.default.string,f.default.func]),steps:f.default.arrayOf(f.default.shape({duration:f.default.number.isRequired,style:f.default.object.isRequired,easing:f.default.oneOfType([f.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),f.default.func]),properties:f.default.arrayOf("string"),onAnimationEnd:f.default.func})),children:f.default.oneOfType([f.default.node,f.default.func]),isActive:f.default.bool,canBegin:f.default.bool,onAnimationEnd:f.default.func,shouldReAnimate:f.default.bool,onAnimationStart:f.default.func,onAnimationReStart:f.default.func},e.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},t=n))||t;exports.default=R;
},{"lodash/isEqual":507,"react":8,"prop-types":96,"./AnimateManager":685,"./PureRender":686,"./easing":602,"./configUpdate":687,"./util":603}],872:[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.getChildMapping=e,exports.mergeChildMappings=n;var r=require("react");function e(e,n){var t=Object.create(null);return e&&r.Children.map(e,function(r){return r}).forEach(function(e){t[e.key]=function(e){return n&&(0,r.isValidElement)(e)?n(e):e}(e)}),t}function n(r,e){function n(n){return n in e?e[n]:r[n]}r=r||{},e=e||{};var t=Object.create(null),i=[];for(var u in r)u in e?i.length&&(t[u]=i,i=[]):i.push(u);var o=void 0,a={};for(var c in e){if(t[c])for(o=0;o<t[c].length;o++){var l=t[c][o];a[t[c][o]]=n(l)}a[c]=n(c)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}
},{"react":8}],704:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=require("prop-types"),n=p(t),r=require("react"),o=p(r),i=require("./utils/ChildMapping");function p(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},s={component:n.default.any,children:n.default.node,appear:n.default.bool,enter:n.default.bool,exit:n.default.bool,childFactory:n.default.func},f={component:"div",childFactory:function(e){return e}},h=function(t){function n(e,o){l(this,n);var p=c(this,t.call(this,e,o));return p.state={children:(0,i.getChildMapping)(e.children,function(e){return(0,r.cloneElement)(e,{onExited:p.handleExited.bind(p,e),in:!0,appear:p.getProp(e,"appear"),enter:p.getProp(e,"enter"),exit:p.getProp(e,"exit")})})},p}return u(n,t),n.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},n.prototype.getProp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;return null!=n[t]?n[t]:e.props[t]},n.prototype.componentDidMount=function(){this.appeared=!0},n.prototype.componentWillReceiveProps=function(e){var t=this,n=this.state.children,o=(0,i.getChildMapping)(e.children),p=(0,i.mergeChildMappings)(n,o);Object.keys(p).forEach(function(i){var a=p[i];if((0,r.isValidElement)(a)){var l=i in n,c=i in o,u=n[i],d=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,r.isValidElement)(u)&&(p[i]=(0,r.cloneElement)(a,{onExited:t.handleExited.bind(t,a),in:u.props.in,exit:t.getProp(a,"exit",e),enter:t.getProp(a,"enter",e)})):p[i]=(0,r.cloneElement)(a,{in:!1}):p[i]=(0,r.cloneElement)(a,{onExited:t.handleExited.bind(t,a),in:!0,exit:t.getProp(a,"exit",e),enter:t.getProp(a,"enter",e)})}}),this.setState({children:p})},n.prototype.handleExited=function(t,n){var r=(0,i.getChildMapping)(this.props.children);t.key in r||(t.props.onExited&&t.props.onExited(n),this.setState(function(n){var r=e({},n.children);return delete r[t.key],{children:r}}))},n.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=a(e,["component","childFactory"]),i=d(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i:o.default.createElement(t,r,i)},n}(o.default.Component);h.childContextTypes={transitionGroup:n.default.object.isRequired},h.propTypes={},h.defaultProps=f,exports.default=h,module.exports=exports.default;
},{"prop-types":96,"react":8,"./utils/ChildMapping":872}],896:[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.classNamesShape=exports.timeoutsShape=void 0,exports.transitionTimeout=n;var e=require("prop-types"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function n(e){var t="transition"+e+"Timeout",r="transition"+e;return function(e){if(e[r]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}var i=exports.timeoutsShape=t.default.oneOfType([t.default.number,t.default.shape({enter:t.default.number,exit:t.default.number}).isRequired]),a=exports.classNamesShape=t.default.oneOfType([t.default.string,t.default.shape({enter:t.default.string,exit:t.default.string,active:t.default.string}),t.default.shape({enter:t.default.string,enterDone:t.default.string,enterActive:t.default.string,exit:t.default.string,exitDone:t.default.string,exitActive:t.default.string})]);
},{"prop-types":96}],753:[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.EXITING=exports.ENTERED=exports.ENTERING=exports.EXITED=exports.UNMOUNTED=void 0;var t=require("prop-types"),e=u(t),n=require("react"),o=a(n),i=require("react-dom"),r=a(i),s=require("./utils/PropTypes");function a(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=exports.UNMOUNTED="unmounted",h=exports.EXITED="exited",E=exports.ENTERING="entering",x=exports.ENTERED="entered",y=exports.EXITING="exiting",b=function(t){function e(n,o){l(this,e);var i=c(this,t.call(this,n,o)),r=o.transitionGroup,s=r&&!r.isMounting?n.enter:n.appear,a=void 0;return i.nextStatus=null,n.in?s?(a=h,i.nextStatus=E):a=x:a=n.unmountOnExit||n.mountOnEnter?d:h,i.state={status:a},i.nextCallback=null,i}return f(e,t),e.prototype.getChildContext=function(){return{transitionGroup:null}},e.prototype.componentDidMount=function(){this.updateStatus(!0)},e.prototype.componentWillReceiveProps=function(t){var e=(this.pendingState||this.state).status;t.in?(e===d&&this.setState({status:h}),e!==E&&e!==x&&(this.nextStatus=E)):e!==E&&e!==x||(this.nextStatus=y)},e.prototype.componentDidUpdate=function(){this.updateStatus()},e.prototype.componentWillUnmount=function(){this.cancelNextCallback()},e.prototype.getTimeouts=function(){var t=this.props.timeout,e=void 0,n=void 0,o=void 0;return e=n=o=t,null!=t&&"number"!=typeof t&&(e=t.exit,n=t.enter,o=t.appear),{exit:e,enter:n,appear:o}},e.prototype.updateStatus=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nextStatus;if(null!==e){this.nextStatus=null,this.cancelNextCallback();var n=r.default.findDOMNode(this);e===E?this.performEnter(n,t):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===h&&this.setState({status:d})},e.prototype.performEnter=function(t,e){var n=this,o=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:e,r=this.getTimeouts();e||o?(this.props.onEnter(t,i),this.safeSetState({status:E},function(){n.props.onEntering(t,i),n.onTransitionEnd(t,r.enter,function(){n.safeSetState({status:x},function(){n.props.onEntered(t,i)})})})):this.safeSetState({status:x},function(){n.props.onEntered(t)})},e.prototype.performExit=function(t){var e=this,n=this.props.exit,o=this.getTimeouts();n?(this.props.onExit(t),this.safeSetState({status:y},function(){e.props.onExiting(t),e.onTransitionEnd(t,o.exit,function(){e.safeSetState({status:h},function(){e.props.onExited(t)})})})):this.safeSetState({status:h},function(){e.props.onExited(t)})},e.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},e.prototype.safeSetState=function(t,e){var n=this;this.pendingState=t,e=this.setNextCallback(e),this.setState(t,function(){n.pendingState=null,e()})},e.prototype.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,e.nextCallback=null,t(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},e.prototype.onTransitionEnd=function(t,e,n){this.setNextCallback(n),t?(this.props.addEndListener&&this.props.addEndListener(t,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},e.prototype.render=function(){var t=this.state.status;if(t===d)return null;var e=this.props,n=e.children,i=p(e,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"==typeof n)return n(t,i);var r=o.default.Children.only(n);return o.default.cloneElement(r,i)},e}(o.default.Component);function m(){}b.contextTypes={transitionGroup:e.object},b.childContextTypes={transitionGroup:function(){}},b.propTypes={},b.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},b.UNMOUNTED=0,b.EXITED=1,b.ENTERING=2,b.ENTERED=3,b.EXITING=4,exports.default=b;
},{"prop-types":96,"react":8,"react-dom":9,"./utils/PropTypes":896}],688:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n=require("lodash/isNumber"),r=h(n),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=require("react"),u=h(a),p=require("react-transition-group/Transition"),l=h(p),s=require("prop-types"),c=h(s),f=require("./Animate"),d=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce(function(e,t){return e+((0,r.default)(t.duration)&&t.duration>0?t.duration:0)},0):(0,r.default)(n)?n:0},E=(t=e=function(e){function t(){var e,n,r;y(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isActive:!1},r.handleEnter=function(e,t){var n=r.props,o=n.appearOptions,i=n.enterOptions;r.handleStyleActive(t?o:i)},r.handleExit=function(){r.handleStyleActive(r.props.leaveOptions)},O(r,n)}return b(t,a.Component),i(t,[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(o({},e,{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return m(t)+m(n)+m(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,v(t,["children","appearOptions","enterOptions","leaveOptions"]));return u.default.createElement(l.default,o({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),function(t){return u.default.createElement(d.default,e.state,a.Children.only(n))})}}]),t}(),e.propTypes={appearOptions:c.default.object,enterOptions:c.default.object,leaveOptions:c.default.object,children:c.default.element},t);exports.default=E;
},{"lodash/isNumber":553,"react":8,"react-transition-group/Transition":753,"prop-types":96,"./Animate":601}],604:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=require("react"),o=f(n),a=require("react-transition-group/TransitionGroup"),u=f(a),i=require("prop-types"),p=f(i),l=require("./AnimateGroupChild"),c=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(t=e=function(e){function t(){return s(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,n.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.component,r=e.children,a=e.appear,i=e.enter,p=e.leave;return o.default.createElement(u.default,{component:t},n.Children.map(r,function(e,t){return o.default.createElement(c.default,{appearOptions:a,enterOptions:i,leaveOptions:p,key:"child-"+t},e)}))}}]),t}(),e.propTypes={appear:p.default.object,enter:p.default.object,leave:p.default.object,children:p.default.oneOfType([p.default.array,p.default.element]),component:p.default.any},e.defaultProps={component:"span"},t);exports.default=b;
},{"react":8,"react-transition-group/TransitionGroup":704,"prop-types":96,"./AnimateGroupChild":688}],506:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.translateStyle=exports.AnimateGroup=exports.configBezier=exports.configSpring=void 0;var e=require("./Animate"),r=s(e),t=require("./easing"),i=require("./util"),o=require("./AnimateGroup"),n=s(o);function s(e){return e&&e.__esModule?e:{default:e}}exports.configSpring=t.configSpring,exports.configBezier=t.configBezier,exports.AnimateGroup=n.default,exports.translateStyle=i.translateStyle,exports.default=r.default;
},{"./Animate":601,"./easing":602,"./util":603,"./AnimateGroup":604}],460:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isArray"),t=s(e),r=require("react"),a=s(r),l=require("prop-types"),n=s(l),o=require("../util/PureRender"),u=s(o),i=require("../util/DataUtils");function s(e){return e&&e.__esModule?e:{default:e}}var f,p,c,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){return(0,t.default)(e)&&(0,i.isNumOrStr)(e[0])&&(0,i.isNumOrStr)(e[1])?e.join(" ~ "):e},O=(0,u.default)((c=p=function(e){function t(){return y(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,r.Component),m(t,[{key:"renderContent",value:function(){var e=this.props,t=e.payload,r=e.separator,l=e.formatter,n=e.itemStyle,o=e.itemSorter;if(t&&t.length){var u=t.sort(o).map(function(e,t){var o=d({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n),u=(0,i.isNumOrStr)(e.name),s=e.formatter||l||v;return a.default.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-"+t,style:o},u?a.default.createElement("span",{className:"recharts-tooltip-item-name"},e.name):null,u?a.default.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,a.default.createElement("span",{className:"recharts-tooltip-item-value"},s?s(e.value,e.name,e,t):e.value),a.default.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return a.default.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},u)}return null}},{key:"render",value:function(){var e=this.props,t=e.labelStyle,r=e.label,l=e.labelFormatter,n=e.wrapperStyle,o=d({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),u=d({margin:0},t),s=(0,i.isNumOrStr)(r),f=s?r:"";return s&&l&&(f=l(r)),a.default.createElement("div",{className:"recharts-default-tooltip",style:o},a.default.createElement("p",{className:"recharts-tooltip-label",style:u},f),this.renderContent())}}]),t}(),p.displayName="DefaultTooltipContent",p.propTypes={separator:n.default.string,formatter:n.default.func,wrapperStyle:n.default.object,itemStyle:n.default.object,labelStyle:n.default.object,labelFormatter:n.default.func,label:n.default.any,payload:n.default.arrayOf(n.default.shape({name:n.default.any,value:n.default.oneOfType([n.default.number,n.default.string,n.default.array]),unit:n.default.any})),itemSorter:n.default.func},p.defaultProps={separator:" : ",itemStyle:{},labelStyle:{}},f=c))||f;exports.default=O;
},{"lodash/isArray":502,"react":8,"prop-types":96,"../util/PureRender":456,"../util/DataUtils":458}],343:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isNil"),t=y(e),a=require("lodash/isFunction"),r=y(a),n=require("react"),i=y(n),o=require("prop-types"),l=y(o),u=require("react-smooth"),s=require("./DefaultTooltipContent"),f=y(s),d=require("../util/ReactUtils"),p=require("../util/DataUtils"),c=require("../util/PureRender"),h=y(c);function y(e){return e&&e.__esModule?e:{default:e}}var b,m,x,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},g=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=1,j={content:l.default.oneOfType([l.default.element,l.default.func]),viewBox:l.default.shape({x:l.default.number,y:l.default.number,width:l.default.number,height:l.default.number}),active:l.default.bool,separator:l.default.string,formatter:l.default.func,offset:l.default.number,itemStyle:l.default.object,labelStyle:l.default.object,wrapperStyle:l.default.object,cursor:l.default.oneOfType([l.default.bool,l.default.element,l.default.object]),coordinate:l.default.shape({x:l.default.number,y:l.default.number}),position:l.default.shape({x:l.default.number,y:l.default.number}),label:l.default.any,payload:l.default.arrayOf(l.default.shape({name:l.default.any,value:l.default.oneOfType([l.default.number,l.default.string,l.default.array]),unit:l.default.any})),isAnimationActive:l.default.bool,animationDuration:l.default.number,animationEasing:l.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),itemSorter:l.default.func,filterNull:l.default.bool,useTranslate3d:l.default.bool},_={active:!1,offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},itemStyle:{},labelStyle:{},cursor:!0,isAnimationActive:!(0,d.isSsr)(),animationEasing:"ease",animationDuration:400,itemSorter:function(){return-1},filterNull:!0,useTranslate3d:!1},B=function(e,t){return i.default.isValidElement(e)?i.default.cloneElement(e,t):(0,r.default)(e)?e(t):i.default.createElement(f.default,t)},E=(0,h.default)((x=m=function(e){function a(){var e,t,r;w(this,a);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r=O(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),r.state={boxWidth:-1,boxHeight:-1},O(r,t)}return S(a,n.Component),g(a,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,a=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>N||Math.abs(r.height-a)>N)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===a||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e=this,a=this.props,r=a.payload,n=a.isAnimationActive,o=a.animationDuration,l=a.animationEasing,s=a.filterNull&&r&&r.length?r.filter(function(e){return!(0,t.default)(e.value)}):r,f=s&&s.length,d=this.props,c=d.content,h=d.viewBox,y=d.coordinate,b=d.position,m=d.active,x=d.offset,g=d.wrapperStyle,w=v({pointerEvents:"none",visibility:m&&f?"visible":"hidden",position:"absolute",top:0},g),O=void 0,S=void 0;if(b&&(0,p.isNumber)(b.x)&&(0,p.isNumber)(b.y))O=b.x,S=b.y;else{var N=this.state,j=N.boxWidth,_=N.boxHeight;j>0&&_>0&&y?(O=b&&(0,p.isNumber)(b.x)?b.x:Math.max(y.x+j+x>h.x+h.width?y.x-j-x:y.x+x,h.x),S=b&&(0,p.isNumber)(b.y)?b.y:Math.max(y.y+_+x>h.y+h.height?y.y-_-x:y.y+x,h.y)):w.visibility="hidden"}return w=v({},w,(0,u.translateStyle)({transform:this.props.useTranslate3d?"translate3d("+O+"px, "+S+"px, 0)":"translate("+O+"px, "+S+"px)"})),n&&m&&(w=v({},w,(0,u.translateStyle)({transition:"transform "+o+"ms "+l}))),i.default.createElement("div",{className:"recharts-tooltip-wrapper",style:w,ref:function(t){e.wrapperNode=t}},B(c,v({},this.props,{payload:s})))}}]),a}(),m.displayName="Tooltip",m.propTypes=j,m.defaultProps=_,b=x))||b;exports.default=E;
},{"lodash/isNil":497,"lodash/isFunction":498,"react":8,"prop-types":96,"react-smooth":506,"./DefaultTooltipContent":460,"../util/ReactUtils":459,"../util/DataUtils":458,"../util/PureRender":456}],559:[function(require,module,exports) {
var r=require("./_root"),e=function(){return r.Date.now()};module.exports=e;
},{"./_root":656}],560:[function(require,module,exports) {
var e=require("./isObject"),r=require("./isSymbol"),t=NaN,i=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,n=/^0o[0-7]+$/i,s=parseInt;function a(a){if("number"==typeof a)return a;if(r(a))return t;if(e(a)){var o="function"==typeof a.valueOf?a.valueOf():a;a=e(o)?o+"":o}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var l=u.test(a);return l||n.test(a)?s(a.slice(2),l?2:8):f.test(a)?t:+a}module.exports=a;
},{"./isObject":500,"./isSymbol":651}],503:[function(require,module,exports) {
var i=require("./isObject"),t=require("./now"),n=require("./toNumber"),r="Expected a function",e=Math.max,u=Math.min;function o(o,a,f){var c,v,d,m,l,s,p=0,T=!1,h=!1,x=!0;if("function"!=typeof o)throw new TypeError(r);function g(i){var t=c,n=v;return c=v=void 0,p=i,m=o.apply(n,t)}function q(i){var t=i-s;return void 0===s||t>=a||t<0||h&&i-p>=d}function w(){var i=t();if(q(i))return y(i);l=setTimeout(w,function(i){var t=a-(i-s);return h?u(t,d-(i-p)):t}(i))}function y(i){return l=void 0,x&&c?g(i):(c=v=void 0,m)}function b(){var i=t(),n=q(i);if(c=arguments,v=this,s=i,n){if(void 0===l)return function(i){return p=i,l=setTimeout(w,a),T?g(i):m}(s);if(h)return l=setTimeout(w,a),g(s)}return void 0===l&&(l=setTimeout(w,a)),m}return a=n(a)||0,i(f)&&(T=!!f.leading,d=(h="maxWait"in f)?e(n(f.maxWait)||0,a):d,x="trailing"in f?!!f.trailing:x),b.cancel=function(){void 0!==l&&clearTimeout(l),p=0,c=s=v=l=void 0},b.flush=function(){return void 0===l?m:y(t())},b}module.exports=o;
},{"./isObject":500,"./now":559,"./toNumber":560}],694:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=exports.parentStyle={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden"},e=exports.shrinkChildStyle={position:"absolute",left:0,top:0,width:"200%",height:"200%"},i=exports.expandChildStyle={position:"absolute",left:0,top:0,width:"100%",height:"100%"};
},{}],605:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=require("react"),i=s(r),o=require("prop-types"),l=s(o),a=require("../helpers/resizeDetectorStyles");function s(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(o){function l(){h(this,l);var e=u(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return e.state={expandChildHeight:0,expandChildWidth:0,expandScrollLeft:0,expandScrollTop:0,shrinkScrollTop:0,shrinkScrollLeft:0,lastWidth:0,lastHeight:0},e.reset=e.reset.bind(e),e.handleScroll=e.handleScroll.bind(e),e}return c(l,r.Component),n(l,[{key:"componentWillMount",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.containerSize(),n=t(e,2),r=n[0],i=n[1];this.reset(r,i),this.props.onResize(r,i)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(){this.expand.scrollLeft=this.expand.scrollWidth,this.expand.scrollTop=this.expand.scrollHeight,this.shrink.scrollLeft=this.shrink.scrollWidth,this.shrink.scrollTop=this.shrink.scrollHeight}},{key:"containerSize",value:function(){return[this.props.handleWidth&&this.container.parentElement.offsetWidth,this.props.handleHeight&&this.container.parentElement.offsetHeight]}},{key:"reset",value:function(e,t){if("undefined"!=typeof window){var n=this.container.parentElement,r="static";n.currentStyle?r=n.currentStyle.position:window.getComputedStyle&&(r=window.getComputedStyle(n).position),"static"===r&&(n.style.position="relative"),this.setState({expandChildHeight:this.expand.offsetHeight+10,expandChildWidth:this.expand.offsetWidth+10,lastWidth:e,lastHeight:t})}}},{key:"handleScroll",value:function(e){if("undefined"!=typeof window){e.preventDefault(),e.stopPropagation();var n=this.state,r=this.containerSize(),i=t(r,2),o=i[0],l=i[1];o===n.lastWidth&&l===n.lastHeight||this.props.onResize(o,l),this.reset(o,l)}}},{key:"render",value:function(){var t=this,n=this.state,r=e({},a.expandChildStyle,{width:n.expandChildWidth,height:n.expandChildHeight});return i.default.createElement("div",{style:a.parentStyle,ref:function(e){t.container=e}},i.default.createElement("div",{style:a.parentStyle,onScroll:this.handleScroll,ref:function(e){t.expand=e}},i.default.createElement("div",{style:r})),i.default.createElement("div",{style:a.parentStyle,onScroll:this.handleScroll,ref:function(e){t.shrink=e}},i.default.createElement("div",{style:a.shrinkChildStyle})))}}]),l}();exports.default=d,d.propTypes={handleWidth:l.default.bool,handleHeight:l.default.bool,onResize:l.default.func},d.defaultProps={handleWidth:!1,handleHeight:!1,onResize:function(e){return e}};
},{"react":8,"prop-types":96,"../helpers/resizeDetectorStyles":694}],496:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./components/ResizeDetector"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}exports.default=t.default;
},{"./components/ResizeDetector":605}],463:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=!1,n=exports.warn=function(n,r,o,i,s,a,t,l){if(e&&"undefined"!=typeof console&&console.warn&&(void 0===r&&console.warn("LogUtils requires an error message argument"),!n))if(void 0===r)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[o,i,s,a,t,l],d=0;console.warn(r.replace(/%s/g,function(){return c[d++]}))}};
},{}],344:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/debounce"),t=c(e),n=require("react"),i=c(n),r=require("prop-types"),a=c(r),o=require("classnames"),u=c(o),s=require("react-resize-detector"),h=c(s),d=require("../util/DataUtils"),l=require("../util/LogUtils");function c(e){return e&&e.__esModule?e:{default:e}}var f,p,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(p=f=function(e){function r(e){g(this,r);var n=b(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.updateDimensionsImmediate=function(){if(n.mounted){var e=n.getContainerSize();if(e){var t=n.state,i=t.containerWidth,r=t.containerHeight,a=e.containerWidth,o=e.containerHeight;a===i&&o===r||n.setState({containerWidth:a,containerHeight:o})}}},n.state={containerWidth:-1,containerHeight:-1},n.handleResize=e.debounce>0?(0,t.default)(n.updateDimensionsImmediate,e.debounce):n.updateDimensionsImmediate,n}return y(r,n.Component),m(r,[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.getContainerSize();e&&this.setState(e)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getContainerSize",value:function(){return this.container?{containerWidth:this.container.clientWidth,containerHeight:this.container.clientHeight}:null}},{key:"renderChart",value:function(){var e=this.state,t=e.containerWidth,n=e.containerHeight;if(t<0||n<0)return null;var r=this.props,a=r.aspect,o=r.width,u=r.height,s=r.minWidth,h=r.minHeight,c=r.maxHeight,f=r.children;(0,l.warn)((0,d.isPercent)(o)||(0,d.isPercent)(u),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,u),(0,l.warn)(!a||a>0,"The aspect(%s) must be greater than zero.",a);var p=(0,d.isPercent)(o)?t:o,m=(0,d.isPercent)(u)?n:u;return a&&a>0&&(m=p/a,c&&m>c&&(m=c)),(0,l.warn)(p>0||m>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",p,m,o,u,s,h,a),i.default.cloneElement(f,{width:p,height:m})}},{key:"render",value:function(){var e=this,t=this.props,n=t.minWidth,r=t.minHeight,a=t.width,o=t.height,s=t.maxHeight,d=t.id,l=t.className,c={width:a,height:o,minWidth:n,minHeight:r,maxHeight:s};return i.default.createElement("div",{id:d,className:(0,u.default)("recharts-responsive-container",l),style:c,ref:function(t){e.container=t}},this.renderChart(),i.default.createElement(h.default,{handleWidth:!0,handleHeight:!0,onResize:this.handleResize}))}}]),r}(),f.displayName="ResponsiveContainer",f.propTypes={aspect:a.default.number,width:a.default.oneOfType([a.default.string,a.default.number]),height:a.default.oneOfType([a.default.string,a.default.number]),minHeight:a.default.oneOfType([a.default.string,a.default.number]),minWidth:a.default.oneOfType([a.default.string,a.default.number]),maxHeight:a.default.oneOfType([a.default.string,a.default.number]),children:a.default.node.isRequired,debounce:a.default.number,id:a.default.oneOfType([a.default.string,a.default.number]),className:a.default.oneOfType([a.default.string,a.default.number])},f.defaultProps={width:"100%",height:"100%",debounce:0},p);exports.default=v;
},{"lodash/debounce":503,"react":8,"prop-types":96,"classnames":495,"react-resize-detector":496,"../util/DataUtils":458,"../util/LogUtils":463}],346:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=u(e),t=require("../util/ReactUtils");function u(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e};function l(){return null}l.propTypes=a({},t.PRESENTATION_ATTRIBUTES),l.displayName="Cell",exports.default=l;
},{"react":8,"../util/ReactUtils":459}],643:[function(require,module,exports) {
function n(n,r,i){n instanceof RegExp&&(n=e(n,i)),r instanceof RegExp&&(r=e(r,i));var o=t(n,r,i);return o&&{start:o[0],end:o[1],pre:i.slice(0,o[0]),body:i.slice(o[0]+n.length,o[1]),post:i.slice(o[1]+r.length)}}function e(n,e){var t=e.match(n);return t?t[0]:null}function t(n,e,t){var r,i,o,f,l,p=t.indexOf(n),c=t.indexOf(e,p+1),s=p;if(p>=0&&c>0){for(r=[],o=t.length;s>=0&&!l;)s==p?(r.push(s),p=t.indexOf(n,s+1)):1==r.length?l=[r.pop(),c]:((i=r.pop())<o&&(o=i,f=c),c=t.indexOf(e,s+1)),s=p<c&&p>=0?p:c;r.length&&(l=[o,f])}return l}module.exports=n,n.range=t;
},{}],646:[function(require,module,exports) {
var e=require("balanced-match");function t(e,t,i){var o=e;return n(e,t).reduce(function(e,n){return e.replace(n.functionIdentifier+"("+n.matches.body+")",r(n.matches.body,n.functionIdentifier,i,o,t))},e)}function n(t,n){var r=[],i="string"==typeof n?new RegExp("\\b("+n+")\\("):n;do{var o=i.exec(t);if(!o)return r;if(void 0===o[1])throw new Error("Missing the first couple of parenthesis to get the function identifier in "+n);var u=o[1],s=o.index,c=e("(",")",t.substring(s));if(!c||c.start!==o[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+t+"'");r.push({matches:c,functionIdentifier:u}),t=c.post}while(i.test(t));return r}function r(e,n,r,i,o){return r(t(e,o,r),n,i)}module.exports=t;
},{"balanced-match":643}],939:[function(require,module,exports) {
var t=function(t){this.value=t};t.math={isDegree:!0,acos:function(n){return t.math.isDegree?180/Math.PI*Math.acos(n):Math.acos(n)},add:function(t,n){return t+n},asin:function(n){return t.math.isDegree?180/Math.PI*Math.asin(n):Math.asin(n)},atan:function(n){return t.math.isDegree?180/Math.PI*Math.atan(n):Math.atan(n)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(n,a){var r=1,o=n-a,u=a;u<o&&(u=o,o=a);for(var e=u+1;e<=n;e++)r*=e;return r/t.math.fact(o)},changeSign:function(t){return-t},cos:function(n){return t.math.isDegree&&(n=t.math.toRadian(n)),Math.cos(n)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!=0)return"NAN";for(var n=1,a=2;a<=t;a++)n*=a;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var a=1,r=Math.floor(t)-Math.floor(n)+1;r<=Math.floor(t);r++)a*=r;return a},Pi:function(t,n,a){for(var r=1,o=t;o<=n;o++)r*=Number(a.postfixEval({n:o}));return r},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,a){for(var r=0,o=t;o<=n;o++)r+=Number(a.postfixEval({n:o}));return r},sin:function(n){return t.math.isDegree&&(n=t.math.toRadian(n)),Math.sin(n)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(n){return t.math.isDegree&&(n=t.math.toRadian(n)),Math.tan(n)},tanh:function(n){return t.sinha(n)/t.cosha(n)},toRadian:function(t){return t*Math.PI/180}},t.exception=function(t){this.message=t},module.exports=t;
},{}],891:[function(require,module,exports) {
var e=require("./math_function.js");function t(e,t){for(var h=0;h<e.length;h++)e[h]+=t;return e}var h=["sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],a=["sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],n=[e.math.sin,e.math.cos,e.math.tan,"PI","(",")",e.math.P,e.math.C,e.math.asin,e.math.acos,e.math.atan,"7","8","9",Math.floor,e.math.cosh,e.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",e.math.div,e.math.fact,e.math.tanh,e.math.atanh,e.math.mod,"1","2","3",e.math.mul,e.math.sinh,e.math.asinh,"E",e.math.log,"0",".",e.math.add,e.math.sub,",",e.math.sigma,"n",e.math.Pi,Math.pow],o={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},s=[0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],p={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},l={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},u={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},r={},f={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},m={1:!0},w=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function c(e,t,h,a){for(var n=0;n<a;n++)if(e[h+n]!==t[n])return!1;return!0}e.addToken=function(e){for(i=0;i<e.length;i++){x=e[i].token.length;var t=-1;if(x<w.length)for(y=0;y<w[x].length;y++)if(e[i].token===w[x][y]){t=h.indexOf(w[x][y]);break}-1===t?(h.push(e[i].token),s.push(e[i].type),w.length<=e[i].token.length&&(w[e[i].token.length]=[]),w[e[i].token.length].push(e[i].token),n.push(e[i].value),a.push(e[i].show)):(h[t]=e[i].token,s[t]=e[i].type,n[t]=e[i].value,a[t]=e[i].show)}},e.lex=function(i,g){"use strict";var v,d,y,x,k=[{type:4,value:"(",show:"(",pre:0}],P=[],M=i,C=0,b=p,S=0,D=r,O="";void 0!==g&&e.addToken(g);var T={};for(d=0;d<M.length;d++)if(" "!=M[d]){v="";e:for(y=M.length-d>w.length-2?w.length-1:M.length-d;y>0;y--)for(x=0;x<w[y].length;x++)if(c(M,w[y][x],d,y)){v=w[y][x];break e}if(d+=v.length-1,""===v)throw new e.exception("Can't understand after "+M.slice(d));var q=h.indexOf(v),I=v,j=s[q],E=n[q],W=o[j],_=a[q],z=k[k.length-1];for(A=P.length;A--;)if(0===P[A]&&-1!==[0,2,3,5,9,11,12,13].indexOf(j)){if(!0!==b[j])throw new e.exception(v+" is not allowed after "+O);k.push({value:")",type:5,pre:0,show:")"}),b=l,D=f,t(P,-1).pop()}if(!0!==b[j])throw new e.exception(v+" is not allowed after "+O);if(!0===D[j]&&(j=2,E=e.math.mul,_="&times;",W=3,d-=v.length),T={value:E,type:j,pre:W,show:_},0===j)b=p,D=r,t(P,2).push(2),k.push(T),k.push({value:"(",type:4,pre:0,show:"("});else if(1===j)1===z.type?(z.value+=E,t(P,1)):k.push(T),b=l,D=u;else if(2===j)b=p,D=r,t(P,2),k.push(T);else if(3===j)k.push(T),b=l,D=f;else if(4===j)C+=P.length,P=[],S++,b=p,D=r,k.push(T);else if(5===j){if(!S)throw new e.exception("Closing parenthesis are more than opening one, wait What!!!");for(;C--;)k.push({value:")",type:5,pre:0,show:")"});C=0,S--,b=l,D=f,k.push(T)}else if(6===j){if(z.hasDec)throw new e.exception("Two decimals are not allowed in one number");1!==z.type&&(z={value:0,type:1,pre:0},k.push(z),t(P,-1)),b=m,t(P,1),D=r,z.value+=E,z.hasDec=!0}else 7===j&&(b=l,D=f,t(P,1),k.push(T));8===j?(b=p,D=r,t(P,4).push(4),k.push(T),k.push({value:"(",type:4,pre:0,show:"("})):9===j?(9===z.type?z.value===e.math.add?(z.value=E,z.show=_,t(P,1)):z.value===e.math.sub&&"-"===_&&(z.value=e.math.add,z.show="+",t(P,1)):5!==z.type&&7!==z.type&&1!==z.type&&3!==z.type&&13!==z.type?"-"===I&&(b=p,D=r,t(P,2).push(2),k.push({value:e.math.changeSign,type:0,pre:21,show:"-"}),k.push({value:"(",type:4,pre:0,show:"("})):(k.push(T),t(P,2)),b=p,D=r):10===j?(b=p,D=r,t(P,2),k.push(T)):11===j?(b=p,D=r,k.push(T)):12===j?(b=p,D=r,t(P,6).push(6),k.push(T),k.push({value:"(",type:4,pre:0})):13===j&&(b=l,D=f,k.push(T)),t(P,-1),O=v}for(var A=P.length;A--;)0===P[A]&&(k.push({value:")",show:")",type:5,pre:3}),t(P,-1).pop());if(!0!==b[5])throw new e.exception("complete the expression");for(;S--;)k.push({value:")",show:")",type:5,pre:3});return k.push({type:5,value:")",show:")",pre:0}),new e(k)},module.exports=e;
},{"./math_function.js":939}],752:[function(require,module,exports) {
var e=require("./lexer.js");e.prototype.toPostfix=function(){"use strict";for(var p,t,u,r,s,l=[],o=[{value:"(",type:4,pre:0}],h=this.value,a=1;a<h.length;a++)if(1===h[a].type||3===h[a].type||13===h[a].type)1===h[a].type&&(h[a].value=Number(h[a].value)),l.push(h[a]);else if(4===h[a].type)o.push(h[a]);else if(5===h[a].type)for(;4!==(t=o.pop()).type;)l.push(t);else if(11===h[a].type){for(;4!==(t=o.pop()).type;)l.push(t);o.push(t)}else{r=(p=h[a]).pre,u=(s=o[o.length-1]).pre;var f="Math.pow"==s.value&&"Math.pow"==p.value;if(r>u)o.push(p);else{for(;u>=r&&!f||f&&r<u;)t=o.pop(),s=o[o.length-1],l.push(t),u=s.pre,f="Math.pow"==p.value&&"Math.pow"==s.value;o.push(p)}}return new e(l)},module.exports=e;
},{"./lexer.js":891}],691:[function(require,module,exports) {
var e=require("./postfix.js");e.prototype.postfixEval=function(t){"use strict";(t=t||{}).PI=Math.PI,t.E=Math.E;for(var p,u,l,v=[],a=this.value,o=void 0!==t.n,s=0;s<a.length;s++)1===a[s].type?v.push({value:a[s].value,type:1}):3===a[s].type?v.push({value:t[a[s].value],type:1}):0===a[s].type?void 0===v[v.length-1].type?v[v.length-1].value.push(a[s]):v[v.length-1].value=a[s].value(v[v.length-1].value):7===a[s].type?void 0===v[v.length-1].type?v[v.length-1].value.push(a[s]):v[v.length-1].value=a[s].value(v[v.length-1].value):8===a[s].type?(p=v.pop(),u=v.pop(),v.push({type:1,value:a[s].value(u.value,p.value)})):10===a[s].type?(p=v.pop(),void 0===(u=v.pop()).type?(u.value=u.concat(p),u.value.push(a[s]),v.push(u)):void 0===p.type?(p.unshift(u),p.push(a[s]),v.push(p)):v.push({type:1,value:a[s].value(u.value,p.value)})):2===a[s].type||9===a[s].type?(p=v.pop(),void 0===(u=v.pop()).type?(console.log(u),(u=u.concat(p)).push(a[s]),v.push(u)):void 0===p.type?(p.unshift(u),p.push(a[s]),v.push(p)):v.push({type:1,value:a[s].value(u.value,p.value)})):12===a[s].type?(void 0!==(p=v.pop()).type&&(p=[p]),u=v.pop(),l=v.pop(),v.push({type:1,value:a[s].value(l.value,u.value,new e(p))})):13===a[s].type&&(o?v.push({value:t[a[s].value],type:3}):v.push([a[s]]));if(v.length>1)throw new e.exception("Uncaught Syntax error");return v[0].value>1e15?"Infinity":parseFloat(v[0].value.toFixed(15))},e.eval=function(e,t,p){return void 0===t?this.lex(e).toPostfix().postfixEval():void 0===p?void 0!==t.length?this.lex(e,t).toPostfix().postfixEval():this.lex(e).toPostfix().postfixEval(t):this.lex(e,t).toPostfix().postfixEval(p)},module.exports=e;
},{"./postfix.js":752}],644:[function(require,module,exports) {
var e=require("./postfix_evaluator.js");e.prototype.formulaEval=function(){"use strict";for(var e,p,t,u=[],l=this.value,s=0;s<l.length;s++)1===l[s].type||3===l[s].type?u.push({value:3===l[s].type?l[s].show:l[s].value,type:1}):13===l[s].type?u.push({value:l[s].show,type:1}):0===l[s].type?u[u.length-1]={value:l[s].show+("-"!=l[s].show?"(":"")+u[u.length-1].value+("-"!=l[s].show?")":""),type:0}:7===l[s].type?u[u.length-1]={value:(1!=u[u.length-1].type?"(":"")+u[u.length-1].value+(1!=u[u.length-1].type?")":"")+l[s].show,type:7}:10===l[s].type?(e=u.pop(),p=u.pop(),"P"===l[s].show||"C"===l[s].show?u.push({value:"<sup>"+p.value+"</sup>"+l[s].show+"<sub>"+e.value+"</sub>",type:10}):u.push({value:(1!=p.type?"(":"")+p.value+(1!=p.type?")":"")+"<sup>"+e.value+"</sup>",type:1})):2===l[s].type||9===l[s].type?(e=u.pop(),p=u.pop(),u.push({value:(1!=p.type?"(":"")+p.value+(1!=p.type?")":"")+l[s].show+(1!=e.type?"(":"")+e.value+(1!=e.type?")":""),type:l[s].type})):12===l[s].type&&(e=u.pop(),p=u.pop(),t=u.pop(),u.push({value:l[s].show+"("+t.value+","+p.value+","+e.value+")",type:12}));return u[0].value},module.exports=e;
},{"./postfix_evaluator.js":691}],499:[function(require,module,exports) {
var r,e=require("balanced-match"),n=require("reduce-function-call"),a=require("math-expression-evaluator"),t=100,o=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g;function i(i,u){function s(n,i,l){if(r++>t)throw r=0,new Error("Call stack overflow for "+l);if(""===n)throw new Error(i+"(): '"+l+"' must contain a non-whitespace string");var f=c(n=function(r,n){var a,t="",i=r=r.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(;a=o.exec(i);){a[0].index>0&&(t+=i.substring(0,a[0].index));var c=e("(",")",i.substring([0].index));if(""===c.body)throw new Error("'"+r+"' must contain a non-whitespace string");var u=s(c.body,"",n);t+=c.pre+u,i=c.post}return t+i}(n,l));if(f.length>1||n.indexOf("var(")>-1)return i+"("+n+")";var p=f[0]||"";"%"===p&&(n=n.replace(/\b[0-9\.]+%/g,function(r){return.01*parseFloat(r.slice(0,-1))}));var h,g=n.replace(new RegExp(p,"gi"),"");try{h=a.eval(g)}catch(r){return i+"("+n+")"}return"%"===p&&(h*=100),(i.length||"%"===p)&&(h=Math.round(h*u)/u),h+=p}return r=0,u=Math.pow(10,void 0===u?5:u),i=i.replace(/\n+/g," "),n(i,/((?:\-[a-z]+\-)?calc)\(/,s)}function c(r){for(var e=[],n=[],a=/[\.0-9]([%a-z]+)/gi,t=a.exec(r);t;)t&&t[1]&&(-1===n.indexOf(t[1].toLowerCase())&&(e.push(t[1]),n.push(t[1].toLowerCase())),t=a.exec(r));return e}module.exports=i;
},{"balanced-match":643,"reduce-function-call":646,"math-expression-evaluator":644}],461:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateChartCoordinate=exports.getOffset=exports.getStringSize=exports.getStyleString=void 0;var t=require("./ReactUtils"),e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var r={widthCache:{},cacheCount:0},i=2e3,o={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},a=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],c="recharts_measurement_span";function d(t,e){return a.indexOf(t)>=0&&e===+e?e+"px":e}function u(t){return t.split("").reduce(function(t,e){return e===e.toUpperCase()?[].concat(n(t),["-",e.toLowerCase()]):[].concat(n(t),[e])},[]).join("")}var h=exports.getStyleString=function(t){return Object.keys(t).reduce(function(e,n){return""+e+u(n)+":"+d(n,t[n])+";"},"")},g=exports.getStringSize=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n||null===n||(0,t.isSsr)())return{width:0,height:0};var d=""+n,u=d+"-"+h(a);if(r.widthCache[u])return r.widthCache[u];try{var g=document.getElementById(c);g||((g=document.createElement("span")).setAttribute("id",c),document.body.appendChild(g));var p=e({},o,a);Object.keys(p).map(function(t){return g.style[t]=p[t],t}),g.textContent=d;var f=g.getBoundingClientRect(),l={width:f.width,height:f.height};return r.widthCache[u]=l,++r.cacheCount>i&&(r.cacheCount=0,r.widthCache={}),l}catch(t){return{width:0,height:0}}},p=exports.getOffset=function(t){var e=t.ownerDocument.documentElement,n={top:0,left:0};return void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{top:n.top+window.pageYOffset-e.clientTop,left:n.left+window.pageXOffset-e.clientLeft}},f=exports.calculateChartCoordinate=function(t,e){return{chartX:Math.round(t.pageX-e.left),chartY:Math.round(t.pageY-e.top)}};
},{"./ReactUtils":459}],345:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("lodash/isNil"),e=p(t),r=require("react"),i=p(r),n=require("prop-types"),a=p(n),o=require("reduce-css-calc"),s=p(o),l=require("classnames"),u=p(l),c=require("../util/DataUtils"),d=require("../util/ReactUtils"),h=require("../util/DOMUtils");function p(t){return t&&t.__esModule?t:{default:t}}var f,y,v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},w=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function m(t,e){var r={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function W(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var O=/[ \f\n\r\t\v\u2028\u2029]+/,x=function(t){try{return{wordsWithComputedWidth:((0,e.default)(t.children)?[]:t.children.toString().split(O)).map(function(e){return{word:e,width:(0,h.getStringSize)(e,t.style).width}}),spaceWidth:(0,h.getStringSize)(" ",t.style).width}}catch(t){return null}},S=(y=f=function(t){function n(){var t,e,r;b(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=r=g(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))),r.state={wordsByLines:[]},g(r,e)}return W(n,r.Component),w(n,[{key:"componentWillMount",value:function(){this.updateWordsByLines(this.props,!0)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props.children!==t.children||this.props.style!==t.style;this.updateWordsByLines(t,e)}},{key:"updateWordsByLines",value:function(t,e){if(!t.width&&!t.scaleToFit||(0,d.isSsr)())this.updateWordsWithoutCalculate(t);else{if(e){var r=x(t);if(!r)return void this.updateWordsWithoutCalculate(t);var i=r.wordsWithComputedWidth,n=r.spaceWidth;this.wordsWithComputedWidth=i,this.spaceWidth=n}var a=this.calculateWordsByLines(this.wordsWithComputedWidth,this.spaceWidth,t.width);this.setState({wordsByLines:a})}}},{key:"updateWordsWithoutCalculate",value:function(t){var r=(0,e.default)(t.children)?[]:t.children.toString().split(O);this.setState({wordsByLines:[{words:r}]})}},{key:"calculateWordsByLines",value:function(t,e,r){var i=this.props.scaleToFit;return t.reduce(function(t,n){var a=n.word,o=n.width,s=t[t.length-1];if(s&&(null==r||i||s.width+o+e<r))s.words.push(a),s.width+=o+e;else{var l={words:[a],width:o};t.push(l)}return t},[])}},{key:"render",value:function(){var t=this.props,e=t.dx,r=t.dy,n=t.textAnchor,a=t.verticalAnchor,o=t.scaleToFit,l=t.angle,h=t.lineHeight,p=t.capHeight,f=t.className,y=m(t,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className"]),w=this.state.wordsByLines;if(!(0,c.isNumOrStr)(y.x)||!(0,c.isNumOrStr)(y.y))return null;var b=y.x+((0,c.isNumber)(e)?e:0),g=y.y+((0,c.isNumber)(r)?r:0),W=void 0;switch(a){case"start":W=(0,s.default)("calc("+p+")");break;case"middle":W=(0,s.default)("calc("+(w.length-1)/2+" * -"+h+" + ("+p+" / 2))");break;default:W=(0,s.default)("calc("+(w.length-1)+" * -"+h+")")}var O=[];if(o){var x=w[0].width;O.push("scale("+this.props.width/x+")")}return l&&O.push("rotate("+l+", "+b+", "+g+")"),O.length&&(y.transform=O.join(" ")),i.default.createElement("text",v({},(0,d.getPresentationAttributes)(y),{x:b,y:g,className:(0,u.default)("recharts-text",f),textAnchor:n}),w.map(function(t,e){return i.default.createElement("tspan",{x:b,dy:0===e?W:h,key:e},t.words.join(" "))}))}}]),n}(),f.propTypes=v({},d.PRESENTATION_ATTRIBUTES,{scaleToFit:a.default.bool,angle:a.default.number,textAnchor:a.default.oneOf(["start","middle","end","inherit"]),verticalAnchor:a.default.oneOf(["start","middle","end"]),style:a.default.object}),f.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"},y);exports.default=S;
},{"lodash/isNil":497,"react":8,"prop-types":96,"reduce-css-calc":499,"classnames":495,"../util/DataUtils":458,"../util/ReactUtils":459,"../util/DOMUtils":461}],716:[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./isArguments"),i=require("./isArray"),u=r?r.isConcatSpreadable:void 0;function o(r){return i(r)||e(r)||!!(u&&r&&r[u])}module.exports=o;
},{"./_Symbol":647,"./isArguments":818,"./isArray":502}],652:[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./_isFlattenable");function a(t,n,u,l,i){var o=-1,h=t.length;for(u||(u=e),i||(i=[]);++o<h;){var s=t[o];n>0&&u(s)?n>1?a(s,n-1,u,l,i):r(i,s):l||(i[i.length]=s)}return i}module.exports=a;
},{"./_arrayPush":715,"./_isFlattenable":716}],718:[function(require,module,exports) {
var r=require("./_baseEach"),e=require("./isArrayLike");function a(a,i){var n=-1,u=e(a)?Array(a.length):[];return r(a,function(r,e,a){u[++n]=i(r,e,a)}),u}module.exports=a;
},{"./_baseEach":822,"./isArrayLike":723}],719:[function(require,module,exports) {
function r(r,e){var o=r.length;for(r.sort(e);o--;)r[o]=r[o].value;return r}module.exports=r;
},{}],821:[function(require,module,exports) {
var r=require("./isSymbol");function i(i,u){if(i!==u){var e=void 0!==i,n=null===i,l=i==i,o=r(i),t=void 0!==u,f=null===u,v=u==u,d=r(u);if(!f&&!d&&!o&&i>u||o&&t&&v&&!f&&!d||n&&t&&v||!e&&v||!l)return 1;if(!n&&!o&&!d&&i<u||d&&e&&l&&!n&&!o||f&&e&&l||!t&&l||!v)return-1}return 0}module.exports=i;
},{"./isSymbol":651}],721:[function(require,module,exports) {
var r=require("./_compareAscending");function e(e,i,n){for(var t=-1,a=e.criteria,c=i.criteria,d=a.length,o=n.length;++t<d;){var u=r(a[t],c[t]);if(u)return t>=o?u:u*("desc"==n[t]?-1:1)}return e.index-i.index}module.exports=e;
},{"./_compareAscending":821}],653:[function(require,module,exports) {
var e=require("./_arrayMap"),r=require("./_baseIteratee"),u=require("./_baseMap"),i=require("./_baseSortBy"),t=require("./_baseUnary"),a=require("./_compareMultiple"),n=require("./identity");function o(o,q,c){var _=-1;q=e(q.length?q:[n],t(r));var l=u(o,function(r,u,i){return{criteria:e(q,function(e){return e(r)}),index:++_,value:r}});return i(l,function(e,r){return a(e,r,c)})}module.exports=o;
},{"./_arrayMap":717,"./_baseIteratee":561,"./_baseMap":718,"./_baseSortBy":719,"./_baseUnary":720,"./_compareMultiple":721,"./identity":570}],655:[function(require,module,exports) {
var e=require("./eq"),r=require("./isArrayLike"),i=require("./_isIndex"),n=require("./isObject");function u(u,t,q){if(!n(q))return!1;var s=typeof t;return!!("number"==s?r(q)&&i(t,q.length):"string"==s&&t in q)&&e(q[t],u)}module.exports=u;
},{"./eq":722,"./isArrayLike":723,"./_isIndex":724,"./isObject":500}],556:[function(require,module,exports) {
var e=require("./_baseFlatten"),r=require("./_baseOrderBy"),t=require("./_baseRest"),u=require("./_isIterateeCall"),a=t(function(t,a){if(null==t)return[];var i=a.length;return i>1&&u(t,a[0],a[1])?a=[]:i>2&&u(a[0],a[1],a[2])&&(a=[a[0]]),r(t,e(a,1),[])});module.exports=a;
},{"./_baseFlatten":652,"./_baseOrderBy":653,"./_baseRest":654,"./_isIterateeCall":655}],562:[function(require,module,exports) {
var r=require("./isSymbol");function e(e,o,i){for(var l=-1,n=e.length;++l<n;){var u=e[l],v=o(u);if(null!=v&&(void 0===a?v==v&&!r(v):i(v,a)))var a=v,t=u}return t}module.exports=e;
},{"./isSymbol":651}],564:[function(require,module,exports) {
function e(e,n){return e>n}module.exports=e;
},{}],557:[function(require,module,exports) {
var e=require("./_baseExtremum"),r=require("./_baseGt"),t=require("./identity");function i(i){return i&&i.length?e(i,t,r):void 0}module.exports=i;
},{"./_baseExtremum":562,"./_baseGt":564,"./identity":570}],563:[function(require,module,exports) {
function e(e,n){return e<n}module.exports=e;
},{}],513:[function(require,module,exports) {
var e=require("./_baseExtremum"),r=require("./_baseLt"),t=require("./identity");function i(i){return i&&i.length?e(i,t,r):void 0}module.exports=i;
},{"./_baseExtremum":562,"./_baseLt":563,"./identity":570}],657:[function(require,module,exports) {
var r=require("./_arrayMap"),e=require("./_baseIteratee"),a=require("./_baseMap"),u=require("./isArray");function i(i,t){return(u(i)?r:a)(i,e(t,3))}module.exports=i;
},{"./_arrayMap":717,"./_baseIteratee":561,"./_baseMap":718,"./isArray":502}],558:[function(require,module,exports) {
var e=require("./_baseFlatten"),r=require("./map");function t(t,u){return e(r(t,u),1)}module.exports=t;
},{"./_baseFlatten":652,"./map":657}],755:[function(require,module,exports) {
"use strict";function r(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(r){return r},e=exports.PLACE_HOLDER={"@@functional/placeholder":!0},t=function(r){return r===e},u=function(r){return function n(){return 0===arguments.length||1===arguments.length&&t(arguments.length<=0?void 0:arguments[0])?n:r.apply(void 0,arguments)}},o=function n(o,i){return 1===o?i:u(function(){for(var a=arguments.length,f=Array(a),c=0;c<a;c++)f[c]=arguments[c];var l=f.filter(function(r){return r!==e}).length;return l>=o?i.apply(void 0,f):n(o-l,u(function(){for(var n=arguments.length,e=Array(n),u=0;u<n;u++)e[u]=arguments[u];var o=f.map(function(r){return t(r)?e.shift():r});return i.apply(void 0,r(o).concat(e))}))})},i=exports.curry=function(r){return o(r.length,r)},a=exports.range=function(r,n){for(var e=[],t=r;t<n;++t)e[t-r]=t;return e},f=exports.map=i(function(r,n){return Array.isArray(n)?n.map(r):Object.keys(n).map(function(r){return n[r]}).map(r)}),c=exports.compose=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];if(!e.length)return n;var u=e.reverse(),o=u[0],i=u.slice(1);return function(){return i.reduce(function(r,n){return n(r)},o.apply(void 0,arguments))}},l=exports.reverse=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},p=exports.memoize=function(r){var n=null,e=null;return function(){for(var t=arguments.length,u=Array(t),o=0;o<t;o++)u[o]=arguments[o];return n&&u.every(function(r,e){return r===n[e]})?e:(n=u,e=r.apply(void 0,u))}};
},{}],756:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./utils");function r(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return+parseFloat(t.toPrecision(r))}function e(t){return/^([+-]?)\d*\.\d+$/.test(t)}function n(t){var r=Math.abs(t);return 0===t?1:Math.floor(Math.log(r)/Math.log(10))+1}function a(t){var r=t?""+t:"";if(r.indexOf("e")>=0)return Math.abs(parseInt(r.slice(r.indexOf("e")+1),10));var e=r.split(".");return e.length>1?e[1].length:0}function u(t,r){var e=parseInt((""+t).replace(".",""),10),n=parseInt((""+r).replace(".",""),10),u=a(t)+a(r);return e*n/Math.pow(10,u)}function i(t,r){var e=Math.max(a(t),a(r));return(u(t,e=Math.pow(10,e))+u(r,e))/e}function o(t,r){return i(t,-r)}function c(t,r){var e=a(t),n=a(r);return parseInt((""+t).replace(".",""),10)/parseInt((""+r).replace(".",""),10)*Math.pow(10,n-e)}function l(t,r){var e=Math.abs(r);return r<=0?t:o(t,u(e,Math.floor(t/e)))}function p(t,r,e){for(var n=t,a=[];n<r;)a.push(n),n=i(n,e);return a}var s=(0,t.curry)(function(t,r,e){var n=+t;return n+e*(+r-n)}),f=(0,t.curry)(function(t,r,e){var n=r-+t;return(e-t)/(n=n||1/0)}),h=(0,t.curry)(function(t,r,e){var n=r-+t;return n=n||1/0,Math.max(0,Math.min(1,(e-t)/n))});exports.default={rangeStep:p,isFloat:e,getDigitCount:n,getDecimalDigitCount:a,sum:i,minus:o,multiply:u,divide:c,modulo:l,strip:r,interpolateNumber:s,uninterpolateNumber:f,uninterpolateTruncation:h};
},{"./utils":755}],692:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTickValuesFixedDomain=exports.getTickValues=exports.getNiceTickValues=void 0;var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,i=!1,u=void 0;try{for(var n,l=t[Symbol.iterator]();!(a=(n=l.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){i=!0,u=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw u}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=require("./util/utils"),r=require("./util/arithmetic"),a=i(r);function i(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(e){var r=t(e,2),a=r[0],i=r[1],u=a,n=i;return a>i&&(u=i,n=a),[u,n]}function l(t,e,r){if(t<=0)return 0;var i=a.default.getDigitCount(t),u=t/Math.pow(10,i),n=1!==i?a.default.multiply(Math.ceil(u/.05)+r,.05):a.default.multiply(Math.ceil(u/.1)+r,.1),l=a.default.multiply(n,Math.pow(10,i));return e?l:Math.ceil(l)}function o(t,r,i){var u=1,n=t;if(a.default.isFloat(t)&&i){var l=Math.abs(t);l<1?(u=Math.pow(10,a.default.getDigitCount(t)-1),n=a.default.multiply(Math.floor(t/u),u)):l>1&&(n=Math.floor(t))}else 0===t?n=Math.floor((r-1)/2):i||(n=Math.floor(t));var o=Math.floor((r-1)/2);return(0,e.compose)((0,e.map)(function(t){return a.default.sum(n,a.default.multiply(t-o,u))}),e.range)(0,r)}function f(t,e,r,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=l((e-t)/(r-1),i,u),o=void 0;t<=0&&e>=0?o=0:(o=a.default.divide(a.default.sum(t,e),2),o=a.default.minus(o,a.default.modulo(o,n)),o=a.default.strip(o,16));var c=Math.ceil((o-t)/n),d=Math.ceil((e-o)/n),s=c+d+1;return s>r?f(t,e,r,i,u+1):(s<r&&(d=e>0?d+(r-s):d,c=e>0?c:c+(r-s)),{step:n,tickMin:a.default.minus(o,a.default.multiply(c,n)),tickMax:a.default.sum(o,a.default.multiply(d,n))})}function c(r){var i=t(r,2),u=i[0],l=i[1],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(c,2),v=n([u,l]),m=t(v,2),h=m[0],p=m[1];if(h===p)return o(h,c,d);var g=f(h,p,s,d),M=g.step,y=g.tickMin,x=g.tickMax,k=a.default.rangeStep(y,x+.1*M,M);return u>l?(0,e.reverse)(k):k}function d(r){var a=t(r,2),i=a[0],u=a[1],f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=Math.max(f,2),s=n([i,u]),v=t(s,2),m=v[0],h=v[1];if(m===h)return o(m,f,c);var p=l((h-m)/(d-1),c,0),g=(0,e.compose)((0,e.map)(function(t){return m+t*p}),e.range)(0,d).filter(function(t){return t>=m&&t<=h});return i>u?(0,e.reverse)(g):g}function s(r,i){var o=t(r,2),f=o[0],c=o[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=n([f,c]),v=t(s,2),m=v[0],h=v[1];if(m===h)return[m];var p=l((h-m)/(Math.max(i,2)-1),d,0),g=[].concat(u(a.default.rangeStep(m,h-.99*p,p)),[h]);return f>c?(0,e.reverse)(g):g}var v=exports.getNiceTickValues=(0,e.memoize)(c),m=exports.getTickValues=(0,e.memoize)(d),h=exports.getTickValuesFixedDomain=(0,e.memoize)(s);
},{"./util/utils":755,"./util/arithmetic":756}],640:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./getNiceTickValues");Object.defineProperty(exports,"getTickValues",{enumerable:!0,get:function(){return e.getTickValues}}),Object.defineProperty(exports,"getNiceTickValues",{enumerable:!0,get:function(){return e.getNiceTickValues}}),Object.defineProperty(exports,"getTickValuesFixedDomain",{enumerable:!0,get:function(){return e.getTickValuesFixedDomain}});
},{"./getNiceTickValues":692}],759:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};
},{}],760:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return 1===e.length&&(e=r(e)),{left:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)<0?r=l+1:u=l}return r},right:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)>0?u=l:r=l+1}return r}}};var e=require("./ascending"),n=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,r){return(0,n.default)(e(t),r)}}
},{"./ascending":759}],758:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bisectLeft=exports.bisectRight=void 0;var e=require("./ascending"),t=i(e),r=require("./bisector"),s=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,s.default)(t.default),u=exports.bisectRight=o.right,c=exports.bisectLeft=o.left;exports.default=u;
},{"./ascending":759,"./bisector":760}],771:[function(require,module,exports) {
"use strict";function e(e,r){return[e,r]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t){null==t&&(t=e);for(var n=0,u=r.length-1,o=r[0],l=new Array(u<0?0:u);n<u;)l[n]=t(o,o=r[++n]);return l},exports.pair=e;
},{}],761:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,t,n){var u,a,l,o,i=r.length,s=t.length,f=new Array(i*s);for(null==n&&(n=e.pair),u=l=0;u<i;++u)for(o=r[u],a=0;a<s;++a,++l)f[l]=n(o,t[a]);return f};var e=require("./pairs");
},{"./pairs":771}],919:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return null===e?NaN:+e};
},{}],780:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var u,f,l=e.length,n=0,a=-1,i=0,o=0;if(null==t)for(;++a<l;)isNaN(u=(0,r.default)(e[a]))||(o+=(f=u-i)*(u-(i+=f/++n)));else for(;++a<l;)isNaN(u=(0,r.default)(t(e[a],a,e)))||(o+=(f=u-i)*(u-(i+=f/++n)));if(n>1)return o/(n-1)};var e=require("./number"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./number":919}],763:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var u=(0,r.default)(e,t);return u?Math.sqrt(u):u};var e=require("./variance"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./variance":780}],764:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f,n=e.length,t=-1;if(null==l){for(;++t<n;)if(null!=(r=e[t])&&r>=r)for(u=f=r;++t<n;)null!=(r=e[t])&&(u>r&&(u=r),f<r&&(f=r))}else for(;++t<n;)if(null!=(r=l(e[t],t,e))&&r>=r)for(u=f=r;++t<n;)null!=(r=l(e[t],t,e))&&(u>r&&(u=r),f<r&&(f=r));return[u,f]};
},{}],920:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Array.prototype,r=exports.slice=e.slice,t=exports.map=e.map;
},{}],774:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(n);++a<n;)o[a]=e+a*r;return o};
},{}],778:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,r,a){var o,M,h,i,n=-1;if(a=+a,(t=+t)===(r=+r)&&a>0)return[t];if((o=r<t)&&(M=t,t=r,r=M),0===(i=e(t,r,a))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),r=Math.floor(r/i),h=new Array(M=Math.ceil(r-t+1));++n<M;)h[n]=(t+n)*i;else for(t=Math.floor(t*i),r=Math.ceil(r*i),h=new Array(M=Math.ceil(t-r+1));++n<M;)h[n]=(t-n)/i;return o&&h.reverse(),h},exports.tickIncrement=e,exports.tickStep=o;var t=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2);function e(e,o,M){var h=(o-e)/Math.max(0,M),i=Math.floor(Math.log(h)/Math.LN10),n=h/Math.pow(10,i);return i>=0?(n>=t?10:n>=r?5:n>=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=t?10:n>=r?5:n>=a?2:1)}function o(e,o,M){var h=Math.abs(o-e)/Math.max(0,M),i=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),n=h/i;return n>=t?i*=10:n>=r?i*=5:n>=a&&(i*=2),o<e?-i:i}
},{}],862:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1};
},{}],765:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var r=o.default,u=f.default,a=h.default;function i(e){var n,f,i=e.length,o=new Array(i);for(n=0;n<i;++n)o[n]=r(e[n],n,e);var l=u(o),d=l[0],h=l[1],y=a(o,d,h);Array.isArray(y)||(y=(0,c.tickStep)(d,h,y),y=(0,s.default)(Math.ceil(d/y)*y,Math.floor(h/y)*y,y));for(var p=y.length;y[0]<=d;)y.shift(),--p;for(;y[p-1]>h;)y.pop(),--p;var q,v=new Array(p+1);for(n=0;n<=p;++n)(q=v[n]=[]).x0=n>0?y[n-1]:d,q.x1=n<p?y[n]:h;for(n=0;n<i;++n)d<=(f=o[n])&&f<=h&&v[(0,t.default)(y,f,0,p)].push(e[n]);return v}return i.value=function(e){return arguments.length?(r="function"==typeof e?e:(0,n.default)(e),i):r},i.domain=function(e){return arguments.length?(u="function"==typeof e?e:(0,n.default)([e[0],e[1]]),i):u},i.thresholds=function(r){return arguments.length?(a="function"==typeof r?r:Array.isArray(r)?(0,n.default)(e.slice.call(r)):(0,n.default)(r),i):a},i};var e=require("./array"),r=require("./bisect"),t=y(r),u=require("./constant"),n=y(u),a=require("./extent"),f=y(a),i=require("./identity"),o=y(i),l=require("./range"),s=y(l),c=require("./ticks"),d=require("./threshold/sturges"),h=y(d);function y(e){return e&&e.__esModule?e:{default:e}}
},{"./array":920,"./bisect":758,"./constant":671,"./extent":764,"./identity":674,"./range":774,"./ticks":778,"./threshold/sturges":862}],773:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,u){if(null==u&&(u=r.default),n=e.length){if((t=+t)<=0||n<2)return+u(e[0],0,e);if(t>=1)return+u(e[n-1],n-1,e);var n,f=(n-1)*t,l=Math.floor(f),o=+u(e[l],l,e);return o+(+u(e[l+1],l+1,e)-o)*(f-l)}};var e=require("./number"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./number":919}],860:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,u,l){return r=e.map.call(r,a.default).sort(t.default),Math.ceil((l-u)/(2*((0,n.default)(r,.75)-(0,n.default)(r,.25))*Math.pow(r.length,-1/3)))};var e=require("../array"),r=require("../ascending"),t=i(r),u=require("../number"),a=i(u),l=require("../quantile"),n=i(l);function i(e){return e&&e.__esModule?e:{default:e}}
},{"../array":920,"../ascending":759,"../number":919,"../quantile":773}],861:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r,u){return Math.ceil((u-r)/(3.5*(0,t.default)(e)*Math.pow(e.length,-1/3)))};var e=require("../deviation"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"../deviation":763}],766:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&r>u&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&r>u&&(u=r);return u};
},{}],767:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var u,f=e.length,l=f,n=-1,a=0;if(null==t)for(;++n<f;)isNaN(u=(0,r.default)(e[n]))?--l:a+=u;else for(;++n<f;)isNaN(u=(0,r.default)(t(e[n],n,e)))?--l:a+=u;if(l)return a/l};var e=require("./number"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./number":919}],768:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var l,n=e.length,s=-1,f=[];if(null==r)for(;++s<n;)isNaN(l=(0,t.default)(e[s]))||f.push(l);else for(;++s<n;)isNaN(l=(0,t.default)(r(e[s],s,e)))||f.push(l);return(0,a.default)(f.sort(u.default),.5)};var e=require("./ascending"),u=n(e),r=require("./number"),t=n(r),l=require("./quantile"),a=n(l);function n(e){return e&&e.__esModule?e:{default:e}}
},{"./ascending":759,"./number":919,"./quantile":773}],769:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){for(var r,t,n,o=e.length,f=-1,l=0;++f<o;)l+=e[f].length;for(t=new Array(l);--o>=0;)for(r=(n=e[o]).length;--r>=0;)t[--l]=n[r];return t};
},{}],770:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,l){var r,u,f=e.length,n=-1;if(null==l){for(;++n<f;)if(null!=(r=e[n])&&r>=r)for(u=r;++n<f;)null!=(r=e[n])&&u>r&&(u=r)}else for(;++n<f;)if(null!=(r=l(e[n],n,e))&&r>=r)for(u=r;++n<f;)null!=(r=l(e[n],n,e))&&u>r&&(u=r);return u};
},{}],772:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){for(var t=r.length,n=new Array(t);t--;)n[t]=e[r[t]];return n};
},{}],775:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if(u=e.length){var u,n,l=0,o=0,d=e[o];for(null==t&&(t=r.default);++l<u;)(t(n=e[l],d)<0||0!==t(d,d))&&(d=n,o=l);return 0===t(d,d)?o:void 0}};var e=require("./ascending"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./ascending":759}],776:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,r){for(var l,n,u=(null==r?e.length:r)-(t=null==t?0:+t);u;)n=Math.random()*u--|0,l=e[u+t],e[u+t]=e[n+t],e[n+t]=l;return e};
},{}],777:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var t,l=e.length,o=-1,u=0;if(null==r)for(;++o<l;)(t=+e[o])&&(u+=t);else for(;++o<l;)(t=+r(e[o],o,e))&&(u+=t);return u};
},{}],779:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){if(!(o=e.length))return[];for(var t=-1,u=(0,r.default)(e,n),f=new Array(u);++t<u;)for(var o,a=-1,i=f[t]=new Array(o);++a<o;)i[a]=e[a][t];return f};var e=require("./min"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return e.length}
},{"./min":770}],781:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return(0,t.default)(arguments)};var e=require("./transpose"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"./transpose":779}],697:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/bisect");Object.defineProperty(exports,"bisect",{enumerable:!0,get:function(){return _(e).default}}),Object.defineProperty(exports,"bisectRight",{enumerable:!0,get:function(){return e.bisectRight}}),Object.defineProperty(exports,"bisectLeft",{enumerable:!0,get:function(){return e.bisectLeft}});var r=require("./src/ascending");Object.defineProperty(exports,"ascending",{enumerable:!0,get:function(){return _(r).default}});var t=require("./src/bisector");Object.defineProperty(exports,"bisector",{enumerable:!0,get:function(){return _(t).default}});var n=require("./src/cross");Object.defineProperty(exports,"cross",{enumerable:!0,get:function(){return _(n).default}});var u=require("./src/descending");Object.defineProperty(exports,"descending",{enumerable:!0,get:function(){return _(u).default}});var i=require("./src/deviation");Object.defineProperty(exports,"deviation",{enumerable:!0,get:function(){return _(i).default}});var c=require("./src/extent");Object.defineProperty(exports,"extent",{enumerable:!0,get:function(){return _(c).default}});var o=require("./src/histogram");Object.defineProperty(exports,"histogram",{enumerable:!0,get:function(){return _(o).default}});var a=require("./src/threshold/freedmanDiaconis");Object.defineProperty(exports,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return _(a).default}});var s=require("./src/threshold/scott");Object.defineProperty(exports,"thresholdScott",{enumerable:!0,get:function(){return _(s).default}});var f=require("./src/threshold/sturges");Object.defineProperty(exports,"thresholdSturges",{enumerable:!0,get:function(){return _(f).default}});var d=require("./src/max");Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return _(d).default}});var p=require("./src/mean");Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return _(p).default}});var l=require("./src/median");Object.defineProperty(exports,"median",{enumerable:!0,get:function(){return _(l).default}});var b=require("./src/merge");Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return _(b).default}});var m=require("./src/min");Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return _(m).default}});var g=require("./src/pairs");Object.defineProperty(exports,"pairs",{enumerable:!0,get:function(){return _(g).default}});var x=require("./src/permute");Object.defineProperty(exports,"permute",{enumerable:!0,get:function(){return _(x).default}});var j=require("./src/quantile");Object.defineProperty(exports,"quantile",{enumerable:!0,get:function(){return _(j).default}});var v=require("./src/range");Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return _(v).default}});var y=require("./src/scan");Object.defineProperty(exports,"scan",{enumerable:!0,get:function(){return _(y).default}});var O=require("./src/shuffle");Object.defineProperty(exports,"shuffle",{enumerable:!0,get:function(){return _(O).default}});var P=require("./src/sum");Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return _(P).default}});var q=require("./src/ticks");Object.defineProperty(exports,"ticks",{enumerable:!0,get:function(){return _(q).default}}),Object.defineProperty(exports,"tickIncrement",{enumerable:!0,get:function(){return q.tickIncrement}}),Object.defineProperty(exports,"tickStep",{enumerable:!0,get:function(){return q.tickStep}});var h=require("./src/transpose");Object.defineProperty(exports,"transpose",{enumerable:!0,get:function(){return _(h).default}});var k=require("./src/variance");Object.defineProperty(exports,"variance",{enumerable:!0,get:function(){return _(k).default}});var S=require("./src/zip");function _(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return _(S).default}});
},{"./src/bisect":758,"./src/ascending":759,"./src/bisector":760,"./src/cross":761,"./src/descending":673,"./src/deviation":763,"./src/extent":764,"./src/histogram":765,"./src/threshold/freedmanDiaconis":860,"./src/threshold/scott":861,"./src/threshold/sturges":862,"./src/max":766,"./src/mean":767,"./src/median":768,"./src/merge":769,"./src/min":770,"./src/pairs":771,"./src/permute":772,"./src/quantile":773,"./src/range":774,"./src/scan":775,"./src/shuffle":776,"./src/sum":777,"./src/ticks":778,"./src/transpose":779,"./src/variance":780,"./src/zip":781}],807:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=exports.prefix="$";function r(){}function e(t,e){var i=new r;if(t instanceof r)t.each(function(t,r){i.set(r,t)});else if(Array.isArray(t)){var n,s=-1,o=t.length;if(null==e)for(;++s<o;)i.set(s,t[s]);else for(;++s<o;)i.set(e(n=t[s],s,t),n)}else if(t)for(var u in t)i.set(u,t[u]);return i}r.prototype=e.prototype={constructor:r,has:function(r){return t+r in this},get:function(r){return this[t+r]},set:function(r,e){return this[t+r]=e,this},remove:function(r){var e=t+r;return e in this&&delete this[e]},clear:function(){for(var r in this)r[0]===t&&delete this[r]},keys:function(){var r=[];for(var e in this)e[0]===t&&r.push(e.slice(1));return r},values:function(){var r=[];for(var e in this)e[0]===t&&r.push(this[e]);return r},entries:function(){var r=[];for(var e in this)e[0]===t&&r.push({key:e.slice(1),value:this[e]});return r},size:function(){var r=0;for(var e in this)e[0]===t&&++r;return r},empty:function(){for(var r in this)if(r[0]===t)return!1;return!0},each:function(r){for(var e in this)e[0]===t&&r(this[e],e.slice(1),this)}},exports.default=e;
},{}],805:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var n,e,i,l=[],c=[];function s(u,r,o,f){if(r>=l.length)return null!=n&&u.sort(n),null!=e?e(u):u;for(var i,c,a,h=-1,p=u.length,d=l[r++],g=(0,t.default)(),v=o();++h<p;)(a=g.get(i=d(c=u[h])+""))?a.push(c):g.set(i,[c]);return g.each(function(n,t){f(v,t,s(n,r,o,f))}),v}return i={object:function(n){return s(n,0,u,r)},map:function(n){return s(n,0,o,f)},entries:function(n){return function n(t,u){if(++u>l.length)return t;var r,o=c[u-1];return null!=e&&u>=l.length?r=t.entries():(r=[],t.each(function(t,e){r.push({key:e,values:n(t,u)})})),null!=o?r.sort(function(n,t){return o(n.key,t.key)}):r}(s(n,0,o,f),0)},key:function(n){return l.push(n),i},sortKeys:function(n){return c[l.length-1]=n,i},sortValues:function(t){return n=t,i},rollup:function(n){return e=n,i}}};var n=require("./map"),t=e(n);function e(n){return n&&n.__esModule?n:{default:n}}function u(){return{}}function r(n,t,e){n[t]=e}function o(){return(0,t.default)()}function f(n,t,e){n.set(t,e)}
},{"./map":807}],806:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./map"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function o(){}var a=t.default.prototype;function n(e,t){var r=new o;if(e instanceof o)e.each(function(e){r.add(e)});else if(e){var a=-1,n=e.length;if(null==t)for(;++a<n;)r.add(e[a]);else for(;++a<n;)r.add(t(e[a],a,e))}return r}o.prototype=n.prototype={constructor:o,has:a.has,add:function(t){return t+="",this[e.prefix+t]=t,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each},exports.default=n;
},{"./map":807}],808:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push(t);return r};
},{}],809:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push(e[t]);return r};
},{}],810:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var r=[];for(var t in e)r.push({key:t,value:e[t]});return r};
},{}],700:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/nest");Object.defineProperty(exports,"nest",{enumerable:!0,get:function(){return a(e).default}});var r=require("./src/set");Object.defineProperty(exports,"set",{enumerable:!0,get:function(){return a(r).default}});var t=require("./src/map");Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return a(t).default}});var u=require("./src/keys");Object.defineProperty(exports,"keys",{enumerable:!0,get:function(){return a(u).default}});var n=require("./src/values");Object.defineProperty(exports,"values",{enumerable:!0,get:function(){return a(n).default}});var s=require("./src/entries");function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"entries",{enumerable:!0,get:function(){return a(s).default}});
},{"./src/nest":805,"./src/set":806,"./src/map":807,"./src/keys":808,"./src/values":809,"./src/entries":810}],677:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Array.prototype,r=exports.map=e.map,t=exports.slice=e.slice;
},{}],585:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.implicit=void 0,exports.default=t;var e=require("d3-collection"),n=require("./array"),r=exports.implicit={name:"implicit"};function t(i){var u=(0,e.map)(),l=[],o=r;function c(e){var n=e+"",t=u.get(n);if(!t){if(o!==r)return o;u.set(n,t=l.push(e))}return i[(t-1)%i.length]}return i=null==i?[]:n.slice.call(i),c.domain=function(n){if(!arguments.length)return l.slice();l=[],u=(0,e.map)();for(var r,t,i=-1,o=n.length;++i<o;)u.has(t=(r=n[i])+"")||u.set(t,l.push(r));return c},c.range=function(e){return arguments.length?(i=n.slice.call(e),c):i.slice()},c.unknown=function(e){return arguments.length?(o=e,c):o},c.copy=function(){return t().domain(l).range(i).unknown(o)},c}
},{"d3-collection":700,"./array":677}],581:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.point=i;var n=require("d3-array"),t=require("./ordinal"),r=e(t);function e(n){return n&&n.__esModule?n:{default:n}}function u(){var t,e,a=(0,r.default)().unknown(void 0),i=a.domain,d=a.range,o=[0,1],g=!1,c=0,f=0,l=.5;function h(){var r=i().length,u=o[1]<o[0],a=o[u-0],h=o[1-u];t=(h-a)/Math.max(1,r-c+2*f),g&&(t=Math.floor(t)),a+=(h-a-t*(r-c))*l,e=t*(1-c),g&&(a=Math.round(a),e=Math.round(e));var p=(0,n.range)(r).map(function(n){return a+t*n});return d(u?p.reverse():p)}return delete a.unknown,a.domain=function(n){return arguments.length?(i(n),h()):i()},a.range=function(n){return arguments.length?(o=[+n[0],+n[1]],h()):o.slice()},a.rangeRound=function(n){return o=[+n[0],+n[1]],g=!0,h()},a.bandwidth=function(){return e},a.step=function(){return t},a.round=function(n){return arguments.length?(g=!!n,h()):g},a.padding=function(n){return arguments.length?(c=f=Math.max(0,Math.min(1,n)),h()):c},a.paddingInner=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),h()):c},a.paddingOuter=function(n){return arguments.length?(f=Math.max(0,Math.min(1,n)),h()):f},a.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),h()):l},a.copy=function(){return u().domain(i()).range(o).round(g).paddingInner(c).paddingOuter(f).align(l)},h()}function a(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return a(t())},n}function i(){return a(u().paddingInner(1))}
},{"d3-array":697,"./ordinal":585}],930:[function(require,module,exports) {
"use strict";function t(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t},exports.extend=t;
},{}],811:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.brighter=exports.darker=void 0,exports.Color=n,exports.default=w,exports.rgbConvert=x,exports.rgb=v,exports.Rgb=N,exports.hslConvert=E,exports.hsl=$;var e=require("./define"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function n(){}var i=exports.darker=.7,a=exports.brighter=1/i,s="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3})$/,u=/^#([0-9a-f]{6})$/,g=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),c=new RegExp("^rgba\\("+[s,s,s,o]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,o]+"\\)$"),b=new RegExp("^hsl\\("+[o,l,l]+"\\)$"),y=new RegExp("^hsla\\("+[o,l,l,o]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w(e){var t;return e=(e+"").trim().toLowerCase(),(t=h.exec(e))?new N((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=u.exec(e))?f(parseInt(t[1],16)):(t=g.exec(e))?new N(t[1],t[2],t[3],1):(t=d.exec(e))?new N(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=c.exec(e))?k(t[1],t[2],t[3],t[4]):(t=p.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=b.exec(e))?q(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?q(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?f(m[e]):"transparent"===e?new N(NaN,NaN,NaN,0):null}function f(e){return new N(e>>16&255,e>>8&255,255&e,1)}function k(e,t,r,n){return n<=0&&(e=t=r=NaN),new N(e,t,r,n)}function x(e){return e instanceof n||(e=w(e)),e?new N((e=e.rgb()).r,e.g,e.b,e.opacity):new N}function v(e,t,r,n){return 1===arguments.length?x(e):new N(e,t,r,null==n?1:n)}function N(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function q(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new R(e,t,r,n)}function E(e){if(e instanceof R)return new R(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=w(e)),!e)return new R;if(e instanceof R)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),s=Math.max(t,r,i),o=NaN,l=s-a,h=(s+a)/2;return l?(o=t===s?(r-i)/l+6*(r<i):r===s?(i-t)/l+2:(t-r)/l+4,l/=h<.5?s+a:2-s-a,o*=60):l=h>0&&h<1?0:o,new R(o,l,h,e.opacity)}function $(e,t,r,n){return 1===arguments.length?E(e):new R(e,t,r,null==n?1:n)}function R(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function C(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}(0,t.default)(n,w,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),(0,t.default)(N,v,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+M(this.r)+M(this.g)+M(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),(0,t.default)(R,$,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new R(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new R(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new N(C(e>=240?e-240:e+120,i,n),C(e,i,n),C(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));
},{"./define":930}],931:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.deg2rad=Math.PI/180,r=exports.rad2deg=180/Math.PI;
},{}],812:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gray=b,exports.default=w,exports.Lab=d,exports.lch=N,exports.hcl=q,exports.Hcl=_;var t=require("./define"),n=i(t),r=require("./color"),e=require("./math");function i(t){return t&&t.__esModule?t:{default:t}}var a=18,u=.96422,o=1,s=.82521,h=4/29,c=6/29,l=3*c*c,f=c*c*c;function p(t){if(t instanceof d)return new d(t.l,t.a,t.b,t.opacity);if(t instanceof _){if(isNaN(t.h))return new d(t.l,0,0,t.opacity);var n=t.h*e.deg2rad;return new d(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof r.Rgb||(t=(0,r.rgbConvert)(t));var i,a,h=M(t.r),c=M(t.g),l=M(t.b),f=y((.2225045*h+.7168786*c+.0606169*l)/o);return h===c&&c===l?i=a=f:(i=y((.4360747*h+.3850649*c+.1430804*l)/u),a=y((.0139322*h+.0971045*c+.7141733*l)/s)),new d(116*f-16,500*(i-f),200*(f-a),t.opacity)}function b(t,n){return new d(t,0,0,null==n?1:n)}function w(t,n,r,e){return 1===arguments.length?p(t):new d(t,n,r,null==e?1:e)}function d(t,n,r,e){this.l=+t,this.a=+n,this.b=+r,this.opacity=+e}function y(t){return t>f?Math.pow(t,1/3):t/l+h}function g(t){return t>c?t*t*t:l*(t-h)}function x(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function M(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function v(t){if(t instanceof _)return new _(t.h,t.c,t.l,t.opacity);if(t instanceof d||(t=p(t)),0===t.a&&0===t.b)return new _(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*e.rad2deg;return new _(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function N(t,n,r,e){return 1===arguments.length?v(t):new _(r,n,t,null==e?1:e)}function q(t,n,r,e){return 1===arguments.length?v(t):new _(t,n,r,null==e?1:e)}function _(t,n,r,e){this.h=+t,this.c=+n,this.l=+r,this.opacity=+e}(0,n.default)(d,w,(0,t.extend)(r.Color,{brighter:function(t){return new d(this.l+a*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new d(this.l-a*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=u*g(n),t=o*g(t),e=s*g(e),new r.Rgb(x(3.1338561*n-1.6168667*t-.4906146*e),x(-.9787684*n+1.9161415*t+.033454*e),x(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),(0,n.default)(_,q,(0,t.extend)(r.Color,{brighter:function(t){return new _(this.h,this.c,this.l+a*(null==t?1:t),this.opacity)},darker:function(t){return new _(this.h,this.c,this.l-a*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}));
},{"./define":930,"./color":811,"./math":931}],813:[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p,exports.Cubehelix=g;var t=require("./define"),e=n(t),r=require("./color"),i=require("./math");function n(t){return t&&t.__esModule?t:{default:t}}var s=-.14861,h=1.78277,a=-.29227,o=-.90649,u=1.97294,l=u*o,c=u*h,d=h*a-o*s;function f(t){if(t instanceof g)return new g(t.h,t.s,t.l,t.opacity);t instanceof r.Rgb||(t=(0,r.rgbConvert)(t));var e=t.r/255,n=t.g/255,s=t.b/255,h=(d*s+l*e-c*n)/(d+l-c),f=s-h,p=(u*(n-h)-a*f)/o,b=Math.sqrt(p*p+f*f)/(u*h*(1-h)),w=b?Math.atan2(p,f)*i.rad2deg-120:NaN;return new g(w<0?w+360:w,b,h,t.opacity)}function p(t,e,r,i){return 1===arguments.length?f(t):new g(t,e,r,null==i?1:i)}function g(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}(0,e.default)(g,p,(0,t.extend)(r.Color,{brighter:function(t){return t=null==t?r.brighter:Math.pow(r.brighter,t),new g(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?r.darker:Math.pow(r.darker,t),new g(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*i.deg2rad,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),l=Math.cos(t),c=Math.sin(t);return new r.Rgb(255*(e+n*(s*l+h*c)),255*(e+n*(a*l+o*c)),255*(e+n*(u*l)),this.opacity)}}));
},{"./define":930,"./color":811,"./math":931}],703:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/color");Object.defineProperty(exports,"color",{enumerable:!0,get:function(){return n(e).default}}),Object.defineProperty(exports,"rgb",{enumerable:!0,get:function(){return e.rgb}}),Object.defineProperty(exports,"hsl",{enumerable:!0,get:function(){return e.hsl}});var r=require("./src/lab");Object.defineProperty(exports,"lab",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(exports,"hcl",{enumerable:!0,get:function(){return r.hcl}}),Object.defineProperty(exports,"lch",{enumerable:!0,get:function(){return r.lch}}),Object.defineProperty(exports,"gray",{enumerable:!0,get:function(){return r.gray}});var t=require("./src/cubehelix");function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"cubehelix",{enumerable:!0,get:function(){return n(t).default}});
},{"./src/color":811,"./src/lab":812,"./src/cubehelix":813}],784:[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){var u=e*e,s=u*e;return((1-3*e+3*u-s)*r+(4-6*u+3*s)*t+(1+3*e+3*u-3*s)*n+s*o)/6}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basis=e,exports.default=function(r){var t=r.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),u=r[o],s=r[o+1],a=o>0?r[o-1]:2*u-s,f=o<t-1?r[o+2]:2*s-u;return e((n-o/t)*t,a,u,s,f)}};
},{}],785:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}};var e=require("./basis");
},{"./basis":784}],922:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=o,exports.gamma=a,exports.default=f;var t=require("./constant"),e=n(t);function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return function(n){return t+n*e}}function u(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,n){var u=n-t;return u?r(t,u>180||u<-180?u-360*Math.round(u/360):u):(0,e.default)(isNaN(t)?n:t)}function a(t){return 1==(t=+t)?f:function(n,r){return r-n?u(n,r,t):(0,e.default)(isNaN(n)?r:n)}}function f(t,n){var u=n-t;return u?r(t,u):(0,e.default)(isNaN(t)?n:t)}
},{"./constant":671}],792:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=void 0;var r=require("d3-color"),e=require("./basis"),t=s(e),o=require("./basisClosed"),a=s(o),u=require("./color"),n=s(u);function s(r){return r&&r.__esModule?r:{default:r}}function i(e){return function(t){var o,a,u=t.length,n=new Array(u),s=new Array(u),i=new Array(u);for(o=0;o<u;++o)a=(0,r.rgb)(t[o]),n[o]=a.r||0,s[o]=a.g||0,i[o]=a.b||0;return n=e(n),s=e(s),i=e(i),a.opacity=1,function(r){return a.r=n(r),a.g=s(r),a.b=i(r),a+""}}}exports.default=function e(t){var o=(0,u.gamma)(t);function a(e,t){var a=o((e=(0,r.rgb)(e)).r,(t=(0,r.rgb)(t)).r),u=o(e.g,t.g),s=o(e.b,t.b),i=(0,n.default)(e.opacity,t.opacity);return function(r){return e.r=a(r),e.g=u(r),e.b=s(r),e.opacity=i(r),e+""}}return a.gamma=e,a}(1);var b=exports.rgbBasis=i(t.default),c=exports.rgbBasisClosed=i(a.default);
},{"d3-color":703,"./basis":784,"./basisClosed":785,"./color":922}],783:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var n,u=t?t.length:0,o=e?Math.min(u,e.length):0,a=new Array(o),f=new Array(u);for(n=0;n<o;++n)a[n]=(0,r.default)(e[n],t[n]);for(;n<u;++n)f[n]=t[n];return function(e){for(n=0;n<o;++n)f[n]=a[n](e);return f}};var e=require("./value"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./value":782}],786:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var r=new Date;return t-=e=+e,function(n){return r.setTime(e+t*n),r}};
},{}],787:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t-=e=+e,function(r){return e+t*r}};
},{}],788:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var u,n={},o={};for(u in null!==e&&"object"==typeof e||(e={}),null!==r&&"object"==typeof r||(r={}),r)u in e?n[u]=(0,t.default)(e[u],r[u]):o[u]=r[u];return function(e){for(u in n)o[u]=n[u](e);return o}};var e=require("./value"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"./value":782}],790:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){var o,c,d,f=t.lastIndex=u.lastIndex=0,s=-1,x=[],a=[];for(e+="",r+="";(o=t.exec(e))&&(c=u.exec(r));)(d=c.index)>f&&(d=r.slice(f,d),x[s]?x[s]+=d:x[++s]=d),(o=o[0])===(c=c[0])?x[s]?x[s]+=c:x[++s]=c:(x[++s]=null,a.push({i:s,x:(0,n.default)(o,c)})),f=u.lastIndex;return f<r.length&&(d=r.slice(f),x[s]?x[s]+=d:x[++s]=d),x.length<2?a[0]?l(a[0].x):i(r):(r=a.length,function(e){for(var n,t=0;t<r;++t)x[(n=a[t]).i]=n.x(e);return x.join("")})};var e=require("./number"),n=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u=new RegExp(t.source,"g");function i(e){return function(){return e}}function l(e){return function(n){return e(n)+""}}
},{"./number":787}],782:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,u){var o,f=typeof u;return null==u||"boolean"===f?(0,y.default)(u):("number"===f?i.default:"string"===f?(o=(0,e.color)(u))?(u=o,t.default):s.default:u instanceof e.color?t.default:u instanceof Date?n.default:Array.isArray(u)?a.default:"function"!=typeof u.valueOf&&"function"!=typeof u.toString||isNaN(u)?d.default:i.default)(r,u)};var e=require("d3-color"),r=require("./rgb"),t=b(r),u=require("./array"),a=b(u),o=require("./date"),n=b(o),f=require("./number"),i=b(f),l=require("./object"),d=b(l),c=require("./string"),s=b(c),q=require("./constant"),y=b(q);function b(e){return e&&e.__esModule?e:{default:e}}
},{"d3-color":703,"./rgb":792,"./array":783,"./date":786,"./number":787,"./object":788,"./string":790,"./constant":671}],789:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t-=e=+e,function(r){return Math.round(e+t*r)}};
},{}],959:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,e,r,s,l,n){var o,c,u;return(o=Math.sqrt(a*a+e*e))&&(a/=o,e/=o),(u=a*r+e*s)&&(r-=a*u,s-=e*u),(c=Math.sqrt(r*r+s*s))&&(r/=c,s/=c,u/=c),a*s<e*r&&(a=-a,e=-e,u=-u,o=-o),{translateX:l,translateY:n,rotate:Math.atan2(e,a)*t,skewX:Math.atan(u)*t,scaleX:o,scaleY:c}};var t=180/Math.PI,a=exports.identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};
},{}],933:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=s,exports.parseSvg=d;var e,t,r,n,o=require("./decompose"),u=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(n){return"none"===n?o.identity:(e||(e=document.createElement("DIV"),t=document.documentElement,r=document.defaultView),e.style.transform=n,n=r.getComputedStyle(t.appendChild(e),null).getPropertyValue("transform"),t.removeChild(e),n=n.slice(7,-1).split(","),(0,u.default)(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function d(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,u.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}
},{"./decompose":959}],871:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var e=require("../number"),t=s(e),r=require("./parse");function s(e){return e&&e.__esModule?e:{default:e}}function n(e,r,s,n){function a(e){return e.length?e.pop()+" ":""}return function(u,l){var o=[],p=[];return u=e(u),l=e(l),function(e,n,a,u,l,o){if(e!==a||n!==u){var p=l.push("translate(",null,r,null,s);o.push({i:p-4,x:(0,t.default)(e,a)},{i:p-2,x:(0,t.default)(n,u)})}else(a||u)&&l.push("translate("+a+r+u+s)}(u.translateX,u.translateY,l.translateX,l.translateY,o,p),function(e,r,s,u){e!==r?(e-r>180?r+=360:r-e>180&&(e+=360),u.push({i:s.push(a(s)+"rotate(",null,n)-2,x:(0,t.default)(e,r)})):r&&s.push(a(s)+"rotate("+r+n)}(u.rotate,l.rotate,o,p),function(e,r,s,u){e!==r?u.push({i:s.push(a(s)+"skewX(",null,n)-2,x:(0,t.default)(e,r)}):r&&s.push(a(s)+"skewX("+r+n)}(u.skewX,l.skewX,o,p),function(e,r,s,n,u,l){if(e!==s||r!==n){var o=u.push(a(u)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,t.default)(e,s)},{i:o-2,x:(0,t.default)(r,n)})}else 1===s&&1===n||u.push(a(u)+"scale("+s+","+n+")")}(u.scaleX,u.scaleY,l.scaleX,l.scaleY,o,p),u=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}var a=exports.interpolateTransformCss=n(r.parseCss,"px, ","px)","deg)"),u=exports.interpolateTransformSvg=n(r.parseSvg,", ",")",")");
},{"../number":787,"./parse":933}],791:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(M,h){var i,f,s=M[0],c=M[1],l=M[2],p=h[0],x=h[1],v=h[2],d=p-s,g=x-c,q=d*d+g*g;if(q<n)f=Math.log(v/l)/t,i=function(e){return[s+e*d,c+e*g,l*Math.exp(t*e*f)]};else{var _=Math.sqrt(q),b=(v*v-l*l+r*q)/(2*l*e*_),j=(v*v-l*l-r*q)/(2*v*e*_),y=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(j*j+1)-j);f=(O-y)/t,i=function(r){var n=r*f,M=a(y),h=l/(e*_)*(M*o(t*n+y)-u(y));return[s+h*d,c+h*g,l*M/a(t*n+y)]}}return i.duration=1e3*f,i};var t=Math.SQRT2,e=2,r=4,n=1e-12;function a(t){return((t=Math.exp(t))+1/t)/2}function u(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}
},{}],793:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=void 0;var e=require("d3-color"),t=require("./color"),r=o(t);function o(e){return e&&e.__esModule?e:{default:e}}function u(t){return function(o,u){var l=t((o=(0,e.hsl)(o)).h,(u=(0,e.hsl)(u)).h),n=(0,r.default)(o.s,u.s),s=(0,r.default)(o.l,u.l),a=(0,r.default)(o.opacity,u.opacity);return function(e){return o.h=l(e),o.s=n(e),o.l=s(e),o.opacity=a(e),o+""}}}exports.default=u(t.hue);var l=exports.hslLong=u(r.default);
},{"d3-color":703,"./color":922}],794:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("d3-color"),t=require("./color"),r=u(t);function u(e){return e&&e.__esModule?e:{default:e}}function a(t,u){var a=(0,r.default)((t=(0,e.lab)(t)).l,(u=(0,e.lab)(u)).l),l=(0,r.default)(t.a,u.a),o=(0,r.default)(t.b,u.b),c=(0,r.default)(t.opacity,u.opacity);return function(e){return t.l=a(e),t.a=l(e),t.b=o(e),t.opacity=c(e),t+""}}
},{"d3-color":703,"./color":922}],795:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=void 0;var e=require("d3-color"),t=require("./color"),r=o(t);function o(e){return e&&e.__esModule?e:{default:e}}function u(t){return function(o,u){var c=t((o=(0,e.hcl)(o)).h,(u=(0,e.hcl)(u)).h),l=(0,r.default)(o.c,u.c),n=(0,r.default)(o.l,u.l),a=(0,r.default)(o.opacity,u.opacity);return function(e){return o.h=c(e),o.c=l(e),o.l=n(e),o.opacity=a(e),o+""}}}exports.default=u(t.hue);var c=exports.hclLong=u(r.default);
},{"d3-color":703,"./color":922}],796:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=void 0;var e=require("d3-color"),t=require("./color"),u=r(t);function r(e){return e&&e.__esModule?e:{default:e}}function o(t){return function r(o){function l(r,l){var n=t((r=(0,e.cubehelix)(r)).h,(l=(0,e.cubehelix)(l)).h),i=(0,u.default)(r.s,l.s),a=(0,u.default)(r.l,l.l),c=(0,u.default)(r.opacity,l.opacity);return function(e){return r.h=n(e),r.s=i(e),r.l=a(Math.pow(e,o)),r.opacity=c(e),r+""}}return o=+o,l.gamma=r,l}(1)}exports.default=o(t.hue);var l=exports.cubehelixLong=o(u.default);
},{"d3-color":703,"./color":922}],797:[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,n=r.length-1,a=r[0],o=new Array(n<0?0:n);t<n;)o[t]=e(a,a=r[++t]);return function(e){var r=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[r](e-r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],798:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e(o/(r-1));return t};
},{}],699:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/value");Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return j(e).default}});var r=require("./src/array");Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return j(r).default}});var t=require("./src/basis");Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return j(t).default}});var n=require("./src/basisClosed");Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return j(n).default}});var u=require("./src/date");Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return j(u).default}});var o=require("./src/number");Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return j(o).default}});var i=require("./src/object");Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return j(i).default}});var a=require("./src/round");Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return j(a).default}});var l=require("./src/string");Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return j(l).default}});var s=require("./src/transform/index");Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return s.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return s.interpolateTransformSvg}});var c=require("./src/zoom");Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return j(c).default}});var p=require("./src/rgb");Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return j(p).default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return p.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return p.rgbBasisClosed}});var f=require("./src/hsl");Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return j(f).default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return f.hslLong}});var b=require("./src/lab");Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return j(b).default}});var d=require("./src/hcl");Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return j(d).default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return d.hclLong}});var g=require("./src/cubehelix");Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return j(g).default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return g.cubehelixLong}});var m=require("./src/piecewise");Object.defineProperty(exports,"piecewise",{enumerable:!0,get:function(){return j(m).default}});var x=require("./src/quantize");function j(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return j(x).default}});
},{"./src/value":782,"./src/array":783,"./src/basis":784,"./src/basisClosed":785,"./src/date":786,"./src/number":787,"./src/object":788,"./src/round":789,"./src/string":790,"./src/transform/index":871,"./src/zoom":791,"./src/rgb":792,"./src/hsl":793,"./src/lab":794,"./src/hcl":795,"./src/cubehelix":796,"./src/piecewise":797,"./src/quantize":798}],678:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return+e};
},{}],681:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deinterpolateLinear=l,exports.copy=g,exports.default=v;var n=require("d3-array"),r=require("d3-interpolate"),e=require("./array"),t=require("./constant"),u=a(t),i=require("./number"),o=a(i);function a(n){return n&&n.__esModule?n:{default:n}}var c=[0,1];function l(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:(0,u.default)(r)}function f(n){return function(r,e){var t=n(r=+r,e=+e);return function(n){return n<=r?0:n>=e?1:t(n)}}}function s(n){return function(r,e){var t=n(r=+r,e=+e);return function(n){return n<=0?r:n>=1?e:t(n)}}}function p(n,r,e,t){var u=n[0],i=n[1],o=r[0],a=r[1];return i<u?(u=e(i,u),o=t(a,o)):(u=e(u,i),o=t(o,a)),function(n){return o(u(n))}}function d(r,e,t,u){var i=Math.min(r.length,e.length)-1,o=new Array(i),a=new Array(i),c=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++c<i;)o[c]=t(r[c],r[c+1]),a[c]=u(e[c],e[c+1]);return function(e){var t=(0,n.bisect)(r,e,1,i)-1;return a[t](o[t](e))}}function g(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function v(n,t){var u,i,a,g=c,v=c,h=r.interpolate,m=!1;function y(){return u=Math.min(g.length,v.length)>2?d:p,i=a=null,q}function q(r){return(i||(i=u(g,v,m?f(n):n,h)))(+r)}return q.invert=function(n){return(a||(a=u(v,g,l,m?s(t):t)))(+n)},q.domain=function(n){return arguments.length?(g=e.map.call(n,o.default),y()):g.slice()},q.range=function(n){return arguments.length?(v=e.slice.call(n),y()):v.slice()},q.rangeRound=function(n){return v=e.slice.call(n),h=r.interpolateRound,y()},q.clamp=function(n){return arguments.length?(m=!!n,y()):m},q.interpolate=function(n){return arguments.length?(h=n,y()):h},y()}
},{"d3-array":697,"d3-interpolate":699,"./array":677,"./constant":671,"./number":678}],954:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]};
},{}],923:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(e=(0,t.default)(Math.abs(e)))?e[1]:NaN};var e=require("./formatDecimal"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"./formatDecimal":954}],924:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return function(r,n){for(var u=r.length,s=[],o=0,i=e[0],a=0;u>0&&i>0&&(a+i+1>n&&(i=Math.max(1,n-a)),s.push(r.substring(u-=i,u+i)),!((a+=i+1)>n));)i=e[o=(o+1)%e.length];return s.reverse().join(t)}};
},{}],925:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}};
},{}],801:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(t){return new s(t)}function s(i){if(!(s=t.exec(i)))throw new Error("invalid format: "+i);var s;this.fill=s[1]||" ",this.align=s[2]||">",this.sign=s[3]||"-",this.symbol=s[4]||"",this.zero=!!s[5],this.width=s[6]&&+s[6],this.comma=!!s[7],this.precision=s[8]&&+s[8].slice(1),this.trim=!!s[9],this.type=s[10]||""}i.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};
},{}],926:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){e:for(var r,t=e.length,s=1,a=-1;s<t;++s)switch(e[s]){case".":a=r=s;break;case"0":0===a&&(a=s),r=s;break;default:if(a>0){if(!+e[s])break e;a=0}}return a>0?e.slice(0,a)+e.slice(r+1):e};
},{}],928:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prefixExponent=void 0,exports.default=function(e,t){var o=(0,r.default)(e,t);if(!o)return e+"";var a=o[0],i=o[1],u=i-(exports.prefixExponent=n=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,f=a.length;return u===f?a:u>f?a+new Array(u-f+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+(0,r.default)(e,Math.max(0,t+u-1))[0]};var e=require("./formatDecimal"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var n=exports.prefixExponent=void 0;
},{"./formatDecimal":954}],955:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var n=(0,r.default)(e,t);if(!n)return e+"";var u=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+u:u.length>a+1?u.slice(0,a+1)+"."+u.slice(a+1):u+new Array(a-u.length+2).join("0")};var e=require("./formatDecimal"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}
},{"./formatDecimal":954}],927:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./formatPrefixAuto"),n=u(t),r=require("./formatRounded"),e=u(r);function u(t){return t&&t.__esModule?t:{default:t}}exports.default={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return(0,e.default)(100*t,n)},r:e.default,s:n.default,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};
},{"./formatPrefixAuto":928,"./formatRounded":955}],800:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.grouping&&e.thousands?(0,a.default)(e.grouping,e.thousands):h.default,n=e.currency,i=e.decimal,l=e.numerals?(0,u.default)(e.numerals):h.default,s=e.percent||"%";function d(e){var r=(e=(0,f.default)(e)).fill,a=e.align,u=e.sign,d=e.symbol,h=e.zero,p=e.width,M=e.comma,x=e.precision,v=e.trim,y=e.type;"n"===y?(M=!0,y="g"):c.default[y]||(null==x&&(x=12),v=!0,y="g"),(h||"0"===r&&"="===a)&&(h=!0,r="0",a="=");var b="$"===d?n[0]:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",q="$"===d?n[1]:/[%p]/.test(y)?s:"",k=c.default[y],w=/[defgprs%]/.test(y);function P(e){var n,f,s,c=b,d=q;if("c"===y)d=k(e)+d,e="";else{var P=(e=+e)<0;if(e=k(Math.abs(e),x),v&&(e=(0,o.default)(e)),P&&0==+e&&(P=!1),c=(P?"("===u?u:"-":"-"===u||"("===u?"":u)+c,d=("s"===y?g[8+m.prefixExponent/3]:"")+d+(P&&"("===u?")":""),w)for(n=-1,f=e.length;++n<f;)if(48>(s=e.charCodeAt(n))||s>57){d=(46===s?i+e.slice(n+1):e.slice(n))+d,e=e.slice(0,n);break}}M&&!h&&(e=t(e,1/0));var _=c.length+e.length+d.length,A=_<p?new Array(p-_+1).join(r):"";switch(M&&h&&(e=t(A+e,A.length?p-d.length:1/0),A=""),a){case"<":e=c+e+d+A;break;case"=":e=c+A+e+d;break;case"^":e=A.slice(0,_=A.length>>1)+c+e+d+A.slice(_);break;default:e=A+c+e+d}return l(e)}return x=null==x?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),P.toString=function(){return e+""},P}return{format:d,formatPrefix:function(e,t){var a=d(((e=(0,f.default)(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor((0,r.default)(t)/3))),u=Math.pow(10,-n),i=g[8+n/3];return function(e){return a(u*e)+i}}}};var e=require("./exponent"),r=p(e),t=require("./formatGroup"),a=p(t),n=require("./formatNumerals"),u=p(n),i=require("./formatSpecifier"),f=p(i),l=require("./formatTrim"),o=p(l),s=require("./formatTypes"),c=p(s),m=require("./formatPrefixAuto"),d=require("./identity"),h=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var g=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];
},{"./exponent":923,"./formatGroup":924,"./formatNumerals":925,"./formatSpecifier":801,"./formatTrim":926,"./formatTypes":927,"./formatPrefixAuto":928,"./identity":674}],799:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatPrefix=exports.format=void 0,exports.default=u;var r,e=require("./locale"),t=o(e);function o(r){return r&&r.__esModule?r:{default:r}}var f=exports.format=void 0,a=exports.formatPrefix=void 0;function u(e){return r=(0,t.default)(e),exports.format=f=r.format,exports.formatPrefix=a=r.formatPrefix,r}u({decimal:".",thousands:",",grouping:[3],currency:["$",""]});
},{"./locale":800}],802:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return Math.max(0,-(0,t.default)(Math.abs(e)))};var e=require("./exponent"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"./exponent":923}],803:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,a){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,t.default)(a)/3)))-(0,t.default)(Math.abs(e)))};var e=require("./exponent"),t=a(e);function a(e){return e&&e.__esModule?e:{default:e}}
},{"./exponent":923}],804:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,u){return e=Math.abs(e),u=Math.abs(u)-e,Math.max(0,(0,t.default)(u)-(0,t.default)(e))+1};var e=require("./exponent"),t=u(e);function u(e){return e&&e.__esModule?e:{default:e}}
},{"./exponent":923}],698:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/defaultLocale");Object.defineProperty(exports,"formatDefaultLocale",{enumerable:!0,get:function(){return u(e).default}}),Object.defineProperty(exports,"format",{enumerable:!0,get:function(){return e.format}}),Object.defineProperty(exports,"formatPrefix",{enumerable:!0,get:function(){return e.formatPrefix}});var r=require("./src/locale");Object.defineProperty(exports,"formatLocale",{enumerable:!0,get:function(){return u(r).default}});var t=require("./src/formatSpecifier");Object.defineProperty(exports,"formatSpecifier",{enumerable:!0,get:function(){return u(t).default}});var n=require("./src/precisionFixed");Object.defineProperty(exports,"precisionFixed",{enumerable:!0,get:function(){return u(n).default}});var o=require("./src/precisionPrefix");Object.defineProperty(exports,"precisionPrefix",{enumerable:!0,get:function(){return u(o).default}});var i=require("./src/precisionRound");function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"precisionRound",{enumerable:!0,get:function(){return u(i).default}});
},{"./src/defaultLocale":799,"./src/locale":800,"./src/formatSpecifier":801,"./src/precisionFixed":802,"./src/precisionPrefix":803,"./src/precisionRound":804}],682:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,i,s){var t,c=a[0],n=a[a.length-1],o=(0,e.tickStep)(c,n,null==i?10:i);switch((s=(0,r.formatSpecifier)(null==s?",f":s)).type){case"s":var p=Math.max(Math.abs(c),Math.abs(n));return null!=s.precision||isNaN(t=(0,r.precisionPrefix)(o,p))||(s.precision=t),(0,r.formatPrefix)(s,p);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(t=(0,r.precisionRound)(o,Math.max(Math.abs(c),Math.abs(n))))||(s.precision=t-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(t=(0,r.precisionFixed)(o))||(s.precision=t-2*("%"===s.type))}return(0,r.format)(s)};var e=require("d3-array"),r=require("d3-format");
},{"d3-array":697,"d3-format":698}],583:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearish=a,exports.default=c;var e=require("d3-array"),t=require("d3-interpolate"),r=require("./continuous"),n=u(r),i=require("./tickFormat"),o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function a(t){var r=t.domain;return t.ticks=function(t){var n=r();return(0,e.ticks)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(e,t){return(0,o.default)(r(),e,t)},t.nice=function(n){null==n&&(n=10);var i,o=r(),u=0,a=o.length-1,c=o[u],l=o[a];return l<c&&(i=c,c=l,l=i,i=u,u=a,a=i),(i=(0,e.tickIncrement)(c,l,n))>0?(c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i,i=(0,e.tickIncrement)(c,l,n)):i<0&&(c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i,i=(0,e.tickIncrement)(c,l,n)),i>0?(o[u]=Math.floor(c/i)*i,o[a]=Math.ceil(l/i)*i,r(o)):i<0&&(o[u]=Math.ceil(c*i)/i,o[a]=Math.floor(l*i)/i,r(o)),t},t}function c(){var e=(0,n.default)(r.deinterpolateLinear,t.interpolateNumber);return e.copy=function(){return(0,r.copy)(e,c())},a(e)}
},{"d3-array":697,"d3-interpolate":699,"./continuous":681,"./tickFormat":682}],582:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("./array"),r=require("./linear"),n=require("./number"),t=u(n);function u(e){return e&&e.__esModule?e:{default:e}}function i(){var n=[0,1];function u(e){return+e}return u.invert=u,u.domain=u.range=function(r){return arguments.length?(n=e.map.call(r,t.default),u):n.slice()},u.copy=function(){return i().domain(n)},(0,r.linearish)(u)}
},{"./array":677,"./linear":583,"./number":678}],680:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var r,l=0,o=(e=e.slice()).length-1,s=e[l],u=e[o];return u<s&&(r=l,l=o,o=r,r=s,s=u,u=r),e[l]=t.floor(s),e[o]=t.ceil(u),e};
},{}],584:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var t=require("d3-array"),n=require("d3-format"),r=require("./constant"),e=f(r),u=require("./nice"),o=f(u),i=require("./continuous"),a=f(i);function f(t){return t&&t.__esModule?t:{default:t}}function c(t,n){return(n=Math.log(n/t))?function(r){return Math.log(r/t)/n}:(0,e.default)(n)}function l(t,n){return t<0?function(r){return-Math.pow(-n,r)*Math.pow(-t,1-r)}:function(r){return Math.pow(n,r)*Math.pow(t,1-r)}}function h(t){return isFinite(t)?+("1e"+t):t<0?0:t}function M(t){return 10===t?h:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function s(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function d(t){return function(n){return-t(-n)}}function p(){var r=(0,a.default)(c,l).domain([1,10]),e=r.domain,u=10,f=s(10),h=M(10);function g(){return f=s(u),h=M(u),e()[0]<0&&(f=d(f),h=d(h)),r}return r.base=function(t){return arguments.length?(u=+t,g()):u},r.domain=function(t){return arguments.length?(e(t),g()):e()},r.ticks=function(n){var r,o=e(),i=o[0],a=o[o.length-1];(r=a<i)&&(s=i,i=a,a=s);var c,l,M,s=f(i),d=f(a),p=null==n?10:+n,g=[];if(!(u%1)&&d-s<p){if(s=Math.round(s)-1,d=Math.round(d)+1,i>0){for(;s<d;++s)for(l=1,c=h(s);l<u;++l)if(!((M=c*l)<i)){if(M>a)break;g.push(M)}}else for(;s<d;++s)for(l=u-1,c=h(s);l>=1;--l)if(!((M=c*l)<i)){if(M>a)break;g.push(M)}}else g=(0,t.ticks)(s,d,Math.min(d-s,p)).map(h);return r?g.reverse():g},r.tickFormat=function(t,e){if(null==e&&(e=10===u?".0e":","),"function"!=typeof e&&(e=(0,n.format)(e)),t===1/0)return e;null==t&&(t=10);var o=Math.max(1,u*t/r.ticks().length);return function(t){var n=t/h(Math.round(f(t)));return n*u<u-.5&&(n*=u),n<=o?e(t):""}},r.nice=function(){return e((0,o.default)(e(),{floor:function(t){return h(Math.floor(f(t)))},ceil:function(t){return h(Math.ceil(f(t)))}}))},r.copy=function(){return(0,i.copy)(r,p().base(u))},r}
},{"d3-array":697,"d3-format":698,"./constant":671,"./nice":680,"./continuous":681}],586:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c,exports.sqrt=f;var n=require("./constant"),e=o(n),t=require("./linear"),r=require("./continuous"),u=o(r);function o(n){return n&&n.__esModule?n:{default:n}}function i(n,e){return n<0?-Math.pow(-n,e):Math.pow(n,e)}function c(){var n=1,o=(0,u.default)(function(t,r){return(r=i(r,n)-(t=i(t,n)))?function(e){return(i(e,n)-t)/r}:(0,e.default)(r)},function(e,t){return t=i(t,n)-(e=i(e,n)),function(r){return i(e+t*r,1/n)}}),f=o.domain;return o.exponent=function(e){return arguments.length?(n=+e,f(f())):n},o.copy=function(){return(0,r.copy)(o,c().exponent(n))},(0,t.linearish)(o)}function f(){return c().exponent(.5)}
},{"./constant":671,"./linear":583,"./continuous":681}],587:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("d3-array"),e=require("./array");function r(){var t=[],i=[],u=[];function a(){var e=0,r=Math.max(1,i.length);for(u=new Array(r-1);++e<r;)u[e-1]=(0,n.quantile)(t,e/r);return l}function l(e){if(!isNaN(e=+e))return i[(0,n.bisect)(u,e)]}return l.invertExtent=function(n){var e=i.indexOf(n);return e<0?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},l.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,i=0,u=e.length;i<u;++i)null==(r=e[i])||isNaN(r=+r)||t.push(r);return t.sort(n.ascending),a()},l.range=function(n){return arguments.length?(i=e.slice.call(n),a()):i.slice()},l.quantiles=function(){return u.slice()},l.copy=function(){return r().domain(t).range(i)},l}
},{"d3-array":697,"./array":677}],588:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=require("d3-array"),e=require("./array"),n=require("./linear");function t(){var i=0,u=1,a=1,o=[.5],c=[0,1];function f(e){if(e<=e)return c[(0,r.bisect)(o,e,0,a)]}function l(){var r=-1;for(o=new Array(a);++r<a;)o[r]=((r+1)*u-(r-a)*i)/(a+1);return f}return f.domain=function(r){return arguments.length?(i=+r[0],u=+r[1],l()):[i,u]},f.range=function(r){return arguments.length?(a=(c=e.slice.call(r)).length-1,l()):c.slice()},f.invertExtent=function(r){var e=c.indexOf(r);return e<0?[NaN,NaN]:e<1?[i,o[0]]:e>=a?[o[a-1],u]:[o[e-1],o[e]]},f.copy=function(){return t().domain([i,u]).range(c)},(0,n.linearish)(f)}
},{"d3-array":697,"./array":677,"./linear":583}],589:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("d3-array"),n=require("./array");function r(){var t=[.5],i=[0,1],u=1;function a(n){if(n<=n)return i[(0,e.bisect)(t,n,0,u)]}return a.domain=function(e){return arguments.length?(t=n.slice.call(e),u=Math.min(t.length,i.length-1),a):t.slice()},a.range=function(e){return arguments.length?(i=n.slice.call(e),u=Math.min(t.length,i.length-1),a):i.slice()},a.invertExtent=function(e){var n=i.indexOf(e);return[t[n-1],t[n]]},a.copy=function(){return r().domain(t).range(i)},a}
},{"d3-array":697,"./array":677}],828:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=new Date,n=new Date;function t(r,o,u,f){function i(e){return r(e=new Date(+e)),e}return i.floor=i,i.ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},i.round=function(e){var n=i(e),t=i.ceil(e);return e-n<t-e?n:t},i.offset=function(e,n){return o(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(e,n,t){var u,f=[];if(e=i.ceil(e),t=null==t?1:Math.floor(t),!(e<n&&t>0))return f;do{f.push(u=new Date(+e)),o(e,t),r(e)}while(u<e&&e<n);return f},i.filter=function(e){return t(function(n){if(n>=n)for(;r(n),!e(n);)n.setTime(n-1)},function(n,t){if(n>=n)if(t<0)for(;++t<=0;)for(;o(n,-1),!e(n););else for(;--t>=0;)for(;o(n,1),!e(n););})},u&&(i.count=function(t,o){return e.setTime(+t),n.setTime(+o),r(e),r(n),Math.floor(u(e,n))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(f?function(n){return f(n)%e==0}:function(n){return i.count(0,n)%e==0}):i:null}),i}
},{}],829:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.milliseconds=void 0;var e=require("./interval"),t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,t.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,t.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null},exports.default=r;var i=exports.milliseconds=r.range;
},{"./interval":828}],932:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.durationSecond=1e3,r=exports.durationMinute=6e4,t=exports.durationHour=36e5,o=exports.durationDay=864e5,u=exports.durationWeek=6048e5;
},{}],830:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seconds=void 0;var e=require("./interval"),t=r(e),n=require("./duration");function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,t.default)(function(e){e.setTime(Math.floor(e/n.durationSecond)*n.durationSecond)},function(e,t){e.setTime(+e+t*n.durationSecond)},function(e,t){return(t-e)/n.durationSecond},function(e){return e.getUTCSeconds()});exports.default=o;var u=exports.seconds=o.range;
},{"./interval":828,"./duration":932}],831:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minutes=void 0;var e=require("./interval"),t=n(e),u=require("./duration");function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,t.default)(function(e){e.setTime(Math.floor(e/u.durationMinute)*u.durationMinute)},function(e,t){e.setTime(+e+t*u.durationMinute)},function(e,t){return(t-e)/u.durationMinute},function(e){return e.getMinutes()});exports.default=r;var i=exports.minutes=r.range;
},{"./interval":828,"./duration":932}],832:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hours=void 0;var r=require("./interval"),e=u(r),t=require("./duration");function u(r){return r&&r.__esModule?r:{default:r}}var o=(0,e.default)(function(r){var e=r.getTimezoneOffset()*t.durationMinute%t.durationHour;e<0&&(e+=t.durationHour),r.setTime(Math.floor((+r-e)/t.durationHour)*t.durationHour+e)},function(r,e){r.setTime(+r+e*t.durationHour)},function(r,e){return(e-r)/t.durationHour},function(r){return r.getHours()});exports.default=o;var n=exports.hours=o.range;
},{"./interval":828,"./duration":932}],833:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.days=void 0;var e=require("./interval"),t=n(e),r=require("./duration");function n(e){return e&&e.__esModule?e:{default:e}}var u=(0,t.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.durationMinute)/r.durationDay},function(e){return e.getDate()-1});exports.default=u;var o=exports.days=u.range;
},{"./interval":828,"./duration":932}],834:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.saturdays=exports.fridays=exports.thursdays=exports.wednesdays=exports.tuesdays=exports.mondays=exports.sundays=exports.saturday=exports.friday=exports.thursday=exports.wednesday=exports.tuesday=exports.monday=exports.sunday=void 0;var e=require("./interval"),t=r(e),s=require("./duration");function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(0,t.default)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s.durationMinute)/s.durationWeek})}var o=exports.sunday=a(0),d=exports.monday=a(1),n=exports.tuesday=a(2),u=exports.wednesday=a(3),p=exports.thursday=a(4),y=exports.friday=a(5),x=exports.saturday=a(6),i=exports.sundays=o.range,f=exports.mondays=d.range,g=exports.tuesdays=n.range,c=exports.wednesdays=u.range,l=exports.thursdays=p.range,m=exports.fridays=y.range,v=exports.saturdays=x.range;
},{"./interval":828,"./duration":932}],835:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.months=void 0;var t=require("./interval"),e=n(t);function n(t){return t&&t.__esModule?t:{default:t}}var r=(0,e.default)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});exports.default=r;var o=exports.months=r.range;
},{"./interval":828}],836:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.years=void 0;var e=require("./interval"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,t.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});u.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,t.default)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)}):null},exports.default=u;var l=exports.years=u.range;
},{"./interval":828}],837:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMinutes=void 0;var e=require("./interval"),t=n(e),u=require("./duration");function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,t.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*u.durationMinute)},function(e,t){return(t-e)/u.durationMinute},function(e){return e.getUTCMinutes()});exports.default=r;var i=exports.utcMinutes=r.range;
},{"./interval":828,"./duration":932}],838:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcHours=void 0;var e=require("./interval"),r=u(e),t=require("./duration");function u(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,r){e.setTime(+e+r*t.durationHour)},function(e,r){return(r-e)/t.durationHour},function(e){return e.getUTCHours()});exports.default=o;var n=exports.utcHours=o.range;
},{"./interval":828,"./duration":932}],839:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcDays=void 0;var e=require("./interval"),t=u(e),r=require("./duration");function u(e){return e&&e.__esModule?e:{default:e}}var n=(0,t.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/r.durationDay},function(e){return e.getUTCDate()-1});exports.default=n;var a=exports.utcDays=n.range;
},{"./interval":828,"./duration":932}],840:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcSaturdays=exports.utcFridays=exports.utcThursdays=exports.utcWednesdays=exports.utcTuesdays=exports.utcMondays=exports.utcSundays=exports.utcSaturday=exports.utcFriday=exports.utcThursday=exports.utcWednesday=exports.utcTuesday=exports.utcMonday=exports.utcSunday=void 0;var t=require("./interval"),e=s(t),r=require("./duration");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(0,e.default)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/r.durationWeek})}var a=exports.utcSunday=u(0),o=exports.utcMonday=u(1),d=exports.utcTuesday=u(2),n=exports.utcWednesday=u(3),c=exports.utcThursday=u(4),p=exports.utcFriday=u(5),y=exports.utcSaturday=u(6),x=exports.utcSundays=a.range,i=exports.utcMondays=o.range,T=exports.utcTuesdays=d.range,g=exports.utcWednesdays=n.range,f=exports.utcThursdays=c.range,S=exports.utcFridays=p.range,l=exports.utcSaturdays=y.range;
},{"./interval":828,"./duration":932}],841:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMonths=void 0;var t=require("./interval"),e=n(t);function n(t){return t&&t.__esModule?t:{default:t}}var r=(0,e.default)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});exports.default=r;var o=exports.utcMonths=r.range;
},{"./interval":828}],842:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcYears=void 0;var e=require("./interval"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,t.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});u.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,t.default)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null},exports.default=u;var l=exports.utcYears=u.range;
},{"./interval":828}],702:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/interval");Object.defineProperty(exports,"timeInterval",{enumerable:!0,get:function(){return m(e).default}});var t=require("./src/millisecond");Object.defineProperty(exports,"timeMillisecond",{enumerable:!0,get:function(){return m(t).default}}),Object.defineProperty(exports,"timeMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}}),Object.defineProperty(exports,"utcMillisecond",{enumerable:!0,get:function(){return m(t).default}}),Object.defineProperty(exports,"utcMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}});var r=require("./src/second");Object.defineProperty(exports,"timeSecond",{enumerable:!0,get:function(){return m(r).default}}),Object.defineProperty(exports,"timeSeconds",{enumerable:!0,get:function(){return r.seconds}}),Object.defineProperty(exports,"utcSecond",{enumerable:!0,get:function(){return m(r).default}}),Object.defineProperty(exports,"utcSeconds",{enumerable:!0,get:function(){return r.seconds}});var n=require("./src/minute");Object.defineProperty(exports,"timeMinute",{enumerable:!0,get:function(){return m(n).default}}),Object.defineProperty(exports,"timeMinutes",{enumerable:!0,get:function(){return n.minutes}});var u=require("./src/hour");Object.defineProperty(exports,"timeHour",{enumerable:!0,get:function(){return m(u).default}}),Object.defineProperty(exports,"timeHours",{enumerable:!0,get:function(){return u.hours}});var o=require("./src/day");Object.defineProperty(exports,"timeDay",{enumerable:!0,get:function(){return m(o).default}}),Object.defineProperty(exports,"timeDays",{enumerable:!0,get:function(){return o.days}});var c=require("./src/week");Object.defineProperty(exports,"timeWeek",{enumerable:!0,get:function(){return c.sunday}}),Object.defineProperty(exports,"timeWeeks",{enumerable:!0,get:function(){return c.sundays}}),Object.defineProperty(exports,"timeSunday",{enumerable:!0,get:function(){return c.sunday}}),Object.defineProperty(exports,"timeSundays",{enumerable:!0,get:function(){return c.sundays}}),Object.defineProperty(exports,"timeMonday",{enumerable:!0,get:function(){return c.monday}}),Object.defineProperty(exports,"timeMondays",{enumerable:!0,get:function(){return c.mondays}}),Object.defineProperty(exports,"timeTuesday",{enumerable:!0,get:function(){return c.tuesday}}),Object.defineProperty(exports,"timeTuesdays",{enumerable:!0,get:function(){return c.tuesdays}}),Object.defineProperty(exports,"timeWednesday",{enumerable:!0,get:function(){return c.wednesday}}),Object.defineProperty(exports,"timeWednesdays",{enumerable:!0,get:function(){return c.wednesdays}}),Object.defineProperty(exports,"timeThursday",{enumerable:!0,get:function(){return c.thursday}}),Object.defineProperty(exports,"timeThursdays",{enumerable:!0,get:function(){return c.thursdays}}),Object.defineProperty(exports,"timeFriday",{enumerable:!0,get:function(){return c.friday}}),Object.defineProperty(exports,"timeFridays",{enumerable:!0,get:function(){return c.fridays}}),Object.defineProperty(exports,"timeSaturday",{enumerable:!0,get:function(){return c.saturday}}),Object.defineProperty(exports,"timeSaturdays",{enumerable:!0,get:function(){return c.saturdays}});var i=require("./src/month");Object.defineProperty(exports,"timeMonth",{enumerable:!0,get:function(){return m(i).default}}),Object.defineProperty(exports,"timeMonths",{enumerable:!0,get:function(){return i.months}});var s=require("./src/year");Object.defineProperty(exports,"timeYear",{enumerable:!0,get:function(){return m(s).default}}),Object.defineProperty(exports,"timeYears",{enumerable:!0,get:function(){return s.years}});var a=require("./src/utcMinute");Object.defineProperty(exports,"utcMinute",{enumerable:!0,get:function(){return m(a).default}}),Object.defineProperty(exports,"utcMinutes",{enumerable:!0,get:function(){return a.utcMinutes}});var d=require("./src/utcHour");Object.defineProperty(exports,"utcHour",{enumerable:!0,get:function(){return m(d).default}}),Object.defineProperty(exports,"utcHours",{enumerable:!0,get:function(){return d.utcHours}});var f=require("./src/utcDay");Object.defineProperty(exports,"utcDay",{enumerable:!0,get:function(){return m(f).default}}),Object.defineProperty(exports,"utcDays",{enumerable:!0,get:function(){return f.utcDays}});var y=require("./src/utcWeek");Object.defineProperty(exports,"utcWeek",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcWeeks",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcSunday",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcSundays",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcMonday",{enumerable:!0,get:function(){return y.utcMonday}}),Object.defineProperty(exports,"utcMondays",{enumerable:!0,get:function(){return y.utcMondays}}),Object.defineProperty(exports,"utcTuesday",{enumerable:!0,get:function(){return y.utcTuesday}}),Object.defineProperty(exports,"utcTuesdays",{enumerable:!0,get:function(){return y.utcTuesdays}}),Object.defineProperty(exports,"utcWednesday",{enumerable:!0,get:function(){return y.utcWednesday}}),Object.defineProperty(exports,"utcWednesdays",{enumerable:!0,get:function(){return y.utcWednesdays}}),Object.defineProperty(exports,"utcThursday",{enumerable:!0,get:function(){return y.utcThursday}}),Object.defineProperty(exports,"utcThursdays",{enumerable:!0,get:function(){return y.utcThursdays}}),Object.defineProperty(exports,"utcFriday",{enumerable:!0,get:function(){return y.utcFriday}}),Object.defineProperty(exports,"utcFridays",{enumerable:!0,get:function(){return y.utcFridays}}),Object.defineProperty(exports,"utcSaturday",{enumerable:!0,get:function(){return y.utcSaturday}}),Object.defineProperty(exports,"utcSaturdays",{enumerable:!0,get:function(){return y.utcSaturdays}});var p=require("./src/utcMonth");Object.defineProperty(exports,"utcMonth",{enumerable:!0,get:function(){return m(p).default}}),Object.defineProperty(exports,"utcMonths",{enumerable:!0,get:function(){return p.utcMonths}});var b=require("./src/utcYear");function m(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"utcYear",{enumerable:!0,get:function(){return m(b).default}}),Object.defineProperty(exports,"utcYears",{enumerable:!0,get:function(){return b.utcYears}});
},{"./src/interval":828,"./src/millisecond":829,"./src/second":830,"./src/minute":831,"./src/hour":832,"./src/day":833,"./src/week":834,"./src/month":835,"./src/year":836,"./src/utcMinute":837,"./src/utcHour":838,"./src/utcDay":839,"./src/utcWeek":840,"./src/utcMonth":841,"./src/utcYear":842}],815:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var n=require("d3-time");function t(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function e(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function r(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function u(u){var i=u.dateTime,o=u.date,a=u.time,f=u.periods,l=u.days,vn=u.shortDays,mn=u.months,Cn=u.shortMonths,Dn=g(f),Tn=s(f),xn=g(l),Mn=s(l),Un=g(vn),wn=s(vn),Yn=g(mn),Hn=s(mn),pn=g(Cn),Sn=s(Cn),Ln={a:function(n){return vn[n.getDay()]},A:function(n){return l[n.getDay()]},b:function(n){return Cn[n.getMonth()]},B:function(n){return mn[n.getMonth()]},c:null,d:F,e:F,f:X,H:V,I:W,j:j,L:Q,m:b,M:B,p:function(n){return f[+(n.getHours()>=12)]},Q:yn,s:dn,S:I,u:_,U:O,V:P,w:$,W:q,x:null,X:null,y:z,Y:E,Z:R,"%":hn},An={a:function(n){return vn[n.getUTCDay()]},A:function(n){return l[n.getUTCDay()]},b:function(n){return Cn[n.getUTCMonth()]},B:function(n){return mn[n.getUTCMonth()]},c:null,d:k,e:k,f:nn,H:G,I:J,j:K,L:N,m:tn,M:en,p:function(n){return f[+(n.getUTCHours()>=12)]},Q:yn,s:dn,S:rn,u:un,U:cn,V:on,w:an,W:fn,x:null,X:null,y:ln,Y:gn,Z:sn,"%":hn},Zn={a:function(n,t,e){var r=Un.exec(t.slice(e));return r?(n.w=wn[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=xn.exec(t.slice(e));return r?(n.w=Mn[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=pn.exec(t.slice(e));return r?(n.m=Sn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=Yn.exec(t.slice(e));return r?(n.m=Hn[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,t,e){return Wn(n,i,t,e)},d:M,e:M,f:S,H:w,I:w,j:U,L:p,m:x,M:Y,p:function(n,t,e){var r=Dn.exec(t.slice(e));return r?(n.p=Tn[r[0].toLowerCase()],e+r[0].length):-1},Q:A,s:Z,S:H,u:y,U:d,V:v,w:h,W:m,x:function(n,t,e){return Wn(n,o,t,e)},X:function(n,t,e){return Wn(n,a,t,e)},y:D,Y:C,Z:T,"%":L};function Fn(n,t){return function(e){var r,u,i,o=[],a=-1,f=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++a<l;)37===n.charCodeAt(a)&&(o.push(n.slice(f,a)),null!=(u=c[r=n.charAt(++a)])?r=n.charAt(++a):u="e"===r?" ":"0",(i=t[r])&&(r=i(e,u)),o.push(r),f=a+1);return o.push(n.slice(f,a)),o.join("")}}function Vn(t,u){return function(c){var i,o,a=r(1900);if(Wn(a,t,c+="",0)!=c.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(o=(i=e(r(a.y))).getUTCDay())>4||0===o?n.utcMonday.ceil(i):(0,n.utcMonday)(i),i=n.utcDay.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(i=(o=(i=u(r(a.y))).getDay())>4||0===o?n.timeMonday.ceil(i):(0,n.timeMonday)(i),i=n.timeDay.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?e(r(a.y)).getUTCDay():u(r(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,e(a)):u(a)}}function Wn(n,t,e,r){for(var u,i,o=0,a=t.length,f=e.length;o<a;){if(r>=f)return-1;if(37===(u=t.charCodeAt(o++))){if(u=t.charAt(o++),!(i=Zn[u in c?t.charAt(o++):u])||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}return Ln.x=Fn(o,Ln),Ln.X=Fn(a,Ln),Ln.c=Fn(i,Ln),An.x=Fn(o,An),An.X=Fn(a,An),An.c=Fn(i,An),{format:function(n){var t=Fn(n+="",Ln);return t.toString=function(){return n},t},parse:function(n){var e=Vn(n+="",t);return e.toString=function(){return n},e},utcFormat:function(n){var t=Fn(n+="",An);return t.toString=function(){return n},t},utcParse:function(n){var t=Vn(n,e);return t.toString=function(){return n},t}}}var c={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function f(n,t,e){var r=n<0?"-":"",u=(r?-n:n)+"",c=u.length;return r+(c<e?new Array(e-c+1).join(t)+u:u)}function l(n){return n.replace(a,"\\$&")}function g(n){return new RegExp("^(?:"+n.map(l).join("|")+")","i")}function s(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function h(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function y(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function d(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function v(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function m(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function C(n,t,e){var r=i.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function D(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function T(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function x(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function M(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function U(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function w(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Y(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function H(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function p(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function S(n,t,e){var r=i.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function L(n,t,e){var r=o.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function A(n,t,e){var r=i.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function Z(n,t,e){var r=i.exec(t.slice(e));return r?(n.Q=1e3*+r[0],e+r[0].length):-1}function F(n,t){return f(n.getDate(),t,2)}function V(n,t){return f(n.getHours(),t,2)}function W(n,t){return f(n.getHours()%12||12,t,2)}function j(t,e){return f(1+n.timeDay.count((0,n.timeYear)(t),t),e,3)}function Q(n,t){return f(n.getMilliseconds(),t,3)}function X(n,t){return Q(n,t)+"000"}function b(n,t){return f(n.getMonth()+1,t,2)}function B(n,t){return f(n.getMinutes(),t,2)}function I(n,t){return f(n.getSeconds(),t,2)}function _(n){var t=n.getDay();return 0===t?7:t}function O(t,e){return f(n.timeSunday.count((0,n.timeYear)(t),t),e,2)}function P(t,e){var r=t.getDay();return t=r>=4||0===r?(0,n.timeThursday)(t):n.timeThursday.ceil(t),f(n.timeThursday.count((0,n.timeYear)(t),t)+(4===(0,n.timeYear)(t).getDay()),e,2)}function $(n){return n.getDay()}function q(t,e){return f(n.timeMonday.count((0,n.timeYear)(t),t),e,2)}function z(n,t){return f(n.getFullYear()%100,t,2)}function E(n,t){return f(n.getFullYear()%1e4,t,4)}function R(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function k(n,t){return f(n.getUTCDate(),t,2)}function G(n,t){return f(n.getUTCHours(),t,2)}function J(n,t){return f(n.getUTCHours()%12||12,t,2)}function K(t,e){return f(1+n.utcDay.count((0,n.utcYear)(t),t),e,3)}function N(n,t){return f(n.getUTCMilliseconds(),t,3)}function nn(n,t){return N(n,t)+"000"}function tn(n,t){return f(n.getUTCMonth()+1,t,2)}function en(n,t){return f(n.getUTCMinutes(),t,2)}function rn(n,t){return f(n.getUTCSeconds(),t,2)}function un(n){var t=n.getUTCDay();return 0===t?7:t}function cn(t,e){return f(n.utcSunday.count((0,n.utcYear)(t),t),e,2)}function on(t,e){var r=t.getUTCDay();return t=r>=4||0===r?(0,n.utcThursday)(t):n.utcThursday.ceil(t),f(n.utcThursday.count((0,n.utcYear)(t),t)+(4===(0,n.utcYear)(t).getUTCDay()),e,2)}function an(n){return n.getUTCDay()}function fn(t,e){return f(n.utcMonday.count((0,n.utcYear)(t),t),e,2)}function ln(n,t){return f(n.getUTCFullYear()%100,t,2)}function gn(n,t){return f(n.getUTCFullYear()%1e4,t,4)}function sn(){return"+0000"}function hn(){return"%"}function yn(n){return+n}function dn(n){return Math.floor(+n/1e3)}
},{"d3-time":702}],814:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcParse=exports.utcFormat=exports.timeParse=exports.timeFormat=void 0,exports.default=i;var e,t=require("./locale"),r=a(t);function a(e){return e&&e.__esModule?e:{default:e}}var o=exports.timeFormat=void 0,s=exports.timeParse=void 0,u=exports.utcFormat=void 0,d=exports.utcParse=void 0;function i(t){return e=(0,r.default)(t),exports.timeFormat=o=e.format,exports.timeParse=s=e.parse,exports.utcFormat=u=e.utcFormat,exports.utcParse=d=e.utcParse,e}i({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});
},{"./locale":815}],816:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isoSpecifier=void 0;var e=require("./defaultLocale"),t=exports.isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function r(e){return e.toISOString()}var o=Date.prototype.toISOString?r:(0,e.utcFormat)(t);exports.default=o;
},{"./defaultLocale":814}],817:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./isoFormat"),r=require("./defaultLocale");function t(e){var r=new Date(e);return isNaN(r)?null:r}var a=+new Date("2000-01-01T00:00:00.000Z")?t:(0,r.utcParse)(e.isoSpecifier);exports.default=a;
},{"./isoFormat":816,"./defaultLocale":814}],701:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/defaultLocale");Object.defineProperty(exports,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return u(e).default}}),Object.defineProperty(exports,"timeFormat",{enumerable:!0,get:function(){return e.timeFormat}}),Object.defineProperty(exports,"timeParse",{enumerable:!0,get:function(){return e.timeParse}}),Object.defineProperty(exports,"utcFormat",{enumerable:!0,get:function(){return e.utcFormat}}),Object.defineProperty(exports,"utcParse",{enumerable:!0,get:function(){return e.utcParse}});var r=require("./src/locale");Object.defineProperty(exports,"timeFormatLocale",{enumerable:!0,get:function(){return u(r).default}});var t=require("./src/isoFormat");Object.defineProperty(exports,"isoFormat",{enumerable:!0,get:function(){return u(t).default}});var o=require("./src/isoParse");function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"isoParse",{enumerable:!0,get:function(){return u(o).default}});
},{"./src/defaultLocale":814,"./src/locale":815,"./src/isoFormat":816,"./src/isoParse":817}],590:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calendar=D,exports.default=function(){return D(r.timeYear,r.timeMonth,r.timeWeek,r.timeDay,r.timeHour,r.timeMinute,r.timeSecond,r.timeMillisecond,n.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var e=require("d3-array"),t=require("d3-interpolate"),r=require("d3-time"),n=require("d3-time-format"),i=require("./array"),u=require("./continuous"),a=l(u),o=require("./nice"),c=l(o);function l(e){return e&&e.__esModule?e:{default:e}}var f=1e3,m=60*f,d=60*m,p=24*d,s=7*p,v=30*p,y=365*p;function h(e){return new Date(e)}function q(e){return e instanceof Date?+e:+new Date(+e)}function D(r,n,o,l,M,b,g,k,w){var S=(0,a.default)(u.deinterpolateLinear,t.interpolateNumber),_=S.invert,x=S.domain,F=w(".%L"),I=w(":%S"),L=w("%I:%M"),Y=w("%I %p"),j=w("%a %d"),B=w("%b %d"),H=w("%B"),N=w("%Y"),O=[[g,1,f],[g,5,5*f],[g,15,15*f],[g,30,30*f],[b,1,m],[b,5,5*m],[b,15,15*m],[b,30,30*m],[M,1,d],[M,3,3*d],[M,6,6*d],[M,12,12*d],[l,1,p],[l,2,2*p],[o,1,s],[n,1,v],[n,3,3*v],[r,1,y]];function P(e){return(g(e)<e?F:b(e)<e?I:M(e)<e?L:l(e)<e?Y:n(e)<e?o(e)<e?j:B:r(e)<e?H:N)(e)}function W(t,n,i,u){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(i-n)/t,o=(0,e.bisector)(function(e){return e[2]}).right(O,a);o===O.length?(u=(0,e.tickStep)(n/y,i/y,t),t=r):o?(u=(o=O[a/O[o-1][2]<O[o][2]/a?o-1:o])[1],t=o[0]):(u=(0,e.tickStep)(n,i,t),t=k)}return null==u?t:t.every(u)}return S.invert=function(e){return new Date(_(e))},S.domain=function(e){return arguments.length?x(i.map.call(e,q)):x().map(h)},S.ticks=function(e,t){var r,n=x(),i=n[0],u=n[n.length-1],a=u<i;return a&&(r=i,i=u,u=r),r=(r=W(e,i,u,t))?r.range(i,u+1):[],a?r.reverse():r},S.tickFormat=function(e,t){return null==t?P:w(t)},S.nice=function(e,t){var r=x();return(e=W(e,r[0],r[r.length-1],t))?x((0,c.default)(r,e)):S},S.copy=function(){return(0,u.copy)(S,D(r,n,o,l,M,b,g,k,w))},S}
},{"d3-array":697,"d3-interpolate":699,"d3-time":702,"d3-time-format":701,"./array":677,"./continuous":681,"./nice":680}],591:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return(0,e.calendar)(u.utcYear,u.utcMonth,u.utcWeek,u.utcDay,u.utcHour,u.utcMinute,u.utcSecond,u.utcMillisecond,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var e=require("./time"),t=require("d3-time-format"),u=require("d3-time");
},{"./time":590,"d3-time-format":701,"d3-time":702}],683:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})};
},{}],592:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./colors"),f=r(e);function r(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,f.default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");
},{"./colors":683}],593:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./colors"),d=c(e);function c(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,d.default)("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");
},{"./colors":683}],594:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./colors"),d=a(e);function a(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,d.default)("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");
},{"./colors":683}],595:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./colors"),f=c(e);function c(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,f.default)("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");
},{"./colors":683}],596:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("d3-color"),r=require("d3-interpolate");exports.default=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(300,.5,0),(0,e.cubehelix)(-240,.5,1));
},{"d3-color":703,"d3-interpolate":699}],597:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cool=exports.warm=void 0,exports.default=function(e){(e<0||e>1)&&(e-=Math.floor(e));var r=Math.abs(e-.5);return l.h=360*e-100,l.s=1.5-1.5*r,l.l=.8-.9*r,l+""};var e=require("d3-color"),r=require("d3-interpolate"),o=exports.warm=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(-100,.75,.35),(0,e.cubehelix)(80,1.5,.8)),t=exports.cool=(0,r.interpolateCubehelixLong)((0,e.cubehelix)(260,.75,.35),(0,e.cubehelix)(80,1.5,.8)),l=(0,e.cubehelix)();
},{"d3-color":703,"d3-interpolate":699}],598:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.plasma=exports.inferno=exports.magma=void 0;var f=require("./colors"),e=a(f);function a(f){return f&&f.__esModule?f:{default:f}}function d(f){var e=f.length;return function(a){return f[Math.max(0,Math.min(e-1,Math.floor(a*e)))]}}exports.default=d((0,e.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var c=exports.magma=d((0,e.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),b=exports.inferno=d((0,e.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),t=exports.plasma=d((0,e.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));
},{"./colors":683}],599:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("./linear");function r(t){var e=0,u=1,i=!1;function a(n){var r=(n-e)/(u-e);return t(i?Math.max(0,Math.min(1,r)):r)}return a.domain=function(n){return arguments.length?(e=+n[0],u=+n[1],a):[e,u]},a.clamp=function(n){return arguments.length?(i=!!n,a):i},a.interpolator=function(n){return arguments.length?(t=n,a):t},a.copy=function(){return r(t).domain([e,u]).clamp(i)},(0,n.linearish)(a)}
},{"./linear":583}],514:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/band");Object.defineProperty(exports,"scaleBand",{enumerable:!0,get:function(){return x(e).default}}),Object.defineProperty(exports,"scalePoint",{enumerable:!0,get:function(){return e.point}});var r=require("./src/identity");Object.defineProperty(exports,"scaleIdentity",{enumerable:!0,get:function(){return x(r).default}});var t=require("./src/linear");Object.defineProperty(exports,"scaleLinear",{enumerable:!0,get:function(){return x(t).default}});var n=require("./src/log");Object.defineProperty(exports,"scaleLog",{enumerable:!0,get:function(){return x(n).default}});var u=require("./src/ordinal");Object.defineProperty(exports,"scaleOrdinal",{enumerable:!0,get:function(){return x(u).default}}),Object.defineProperty(exports,"scaleImplicit",{enumerable:!0,get:function(){return u.implicit}});var a=require("./src/pow");Object.defineProperty(exports,"scalePow",{enumerable:!0,get:function(){return x(a).default}}),Object.defineProperty(exports,"scaleSqrt",{enumerable:!0,get:function(){return a.sqrt}});var o=require("./src/quantile");Object.defineProperty(exports,"scaleQuantile",{enumerable:!0,get:function(){return x(o).default}});var i=require("./src/quantize");Object.defineProperty(exports,"scaleQuantize",{enumerable:!0,get:function(){return x(i).default}});var c=require("./src/threshold");Object.defineProperty(exports,"scaleThreshold",{enumerable:!0,get:function(){return x(c).default}});var l=require("./src/time");Object.defineProperty(exports,"scaleTime",{enumerable:!0,get:function(){return x(l).default}});var f=require("./src/utcTime");Object.defineProperty(exports,"scaleUtc",{enumerable:!0,get:function(){return x(f).default}});var s=require("./src/category10");Object.defineProperty(exports,"schemeCategory10",{enumerable:!0,get:function(){return x(s).default}});var p=require("./src/category20b");Object.defineProperty(exports,"schemeCategory20b",{enumerable:!0,get:function(){return x(p).default}});var b=require("./src/category20c");Object.defineProperty(exports,"schemeCategory20c",{enumerable:!0,get:function(){return x(b).default}});var d=require("./src/category20");Object.defineProperty(exports,"schemeCategory20",{enumerable:!0,get:function(){return x(d).default}});var m=require("./src/cubehelix");Object.defineProperty(exports,"interpolateCubehelixDefault",{enumerable:!0,get:function(){return x(m).default}});var g=require("./src/rainbow");Object.defineProperty(exports,"interpolateRainbow",{enumerable:!0,get:function(){return x(g).default}}),Object.defineProperty(exports,"interpolateWarm",{enumerable:!0,get:function(){return g.warm}}),Object.defineProperty(exports,"interpolateCool",{enumerable:!0,get:function(){return g.cool}});var y=require("./src/viridis");Object.defineProperty(exports,"interpolateViridis",{enumerable:!0,get:function(){return x(y).default}}),Object.defineProperty(exports,"interpolateMagma",{enumerable:!0,get:function(){return y.magma}}),Object.defineProperty(exports,"interpolateInferno",{enumerable:!0,get:function(){return y.inferno}}),Object.defineProperty(exports,"interpolatePlasma",{enumerable:!0,get:function(){return y.plasma}});var P=require("./src/sequential");function x(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"scaleSequential",{enumerable:!0,get:function(){return x(P).default}});
},{"./src/band":581,"./src/identity":582,"./src/linear":583,"./src/log":584,"./src/ordinal":585,"./src/pow":586,"./src/quantile":587,"./src/quantize":588,"./src/threshold":589,"./src/time":590,"./src/utcTime":591,"./src/category10":592,"./src/category20b":593,"./src/category20c":594,"./src/category20":595,"./src/cubehelix":596,"./src/rainbow":597,"./src/viridis":598,"./src/sequential":599}],353:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=l(e),r=require("prop-types"),n=l(r),o=require("classnames"),u=l(o),a=require("../util/PureRender"),i=l(a),c=require("../util/ReactUtils");function l(e){return e&&e.__esModule?e:{default:e}}var s,f,p,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(0,i.default)((p=f=function(r){function n(){return d(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return m(n,e.Component),b(n,[{key:"render",value:function(){var e=this.props,r=e.cx,n=e.cy,o=e.r,a=e.className,i=(0,u.default)("recharts-dot",a);return r===+r&&n===+n&&o===+o?t.default.createElement("circle",y({},(0,c.getPresentationAttributes)(this.props),(0,c.filterEventAttributes)(this.props,null,!0),{className:i,cx:r,cy:n,r:o})):null}}]),n}(),f.displayName="Dot",f.propTypes={className:n.default.string,cx:n.default.number,cy:n.default.number,r:n.default.number},s=p))||s;exports.default=v;
},{"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../util/ReactUtils":459}],364:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=O(e),r=require("react"),n=O(r),a=require("prop-types"),u=O(a),o=require("classnames"),l=O(o),i=require("../util/PureRender"),s=O(i),f=require("../container/Layer"),c=O(f),d=require("../shape/Dot"),p=O(d),y=require("../util/ReactUtils"),h=require("../component/Label"),b=O(h),m=require("../util/DataUtils"),x=require("../util/ChartUtils");function O(e){return e&&e.__esModule?e:{default:e}}var v,w,T,g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(0,s.default)((T=w=function(e){function a(){return _(this,a),A(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return q(a,r.Component),E(a,[{key:"getCoordinate",value:function(){var e=this.props,t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,u=n.scale,o=a.scale,l={cx:u(t)+(u.bandwidth?u.bandwidth()/2:0),cy:o(r)+(o.bandwidth?o.bandwidth()/2:0)};return(0,x.validateCoordinateInRange)(l.cx,u)&&(0,x.validateCoordinateInRange)(l.cy,o)?l:null}},{key:"renderDot",value:function(e,r){return n.default.isValidElement(e)?n.default.cloneElement(e,r):(0,t.default)(e)?e(r):n.default.createElement(p.default,g({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"}))}},{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,a=e.r,u=(0,m.isNumOrStr)(t),o=(0,m.isNumOrStr)(r);if(!u||!o)return null;var i=this.getCoordinate();if(!i)return null;var s=this.props,f=s.shape,d=s.className,p=g({},(0,y.getPresentationAttributes)(this.props),(0,y.filterEventAttributes)(this.props),i);return n.default.createElement(c.default,{className:(0,l.default)("recharts-reference-dot",d)},this.renderDot(f,p),b.default.renderCallByParent(this.props,{x:i.cx-a,y:i.cy-a,width:2*a,height:2*a}))}}]),a}(),w.displayName="ReferenceDot",w.propTypes=g({},y.PRESENTATION_ATTRIBUTES,y.EVENT_ATTRIBUTES,{r:u.default.number,xAxis:u.default.shape({scale:u.default.func}),yAxis:u.default.shape({scale:u.default.func}),isFront:u.default.bool,alwaysShow:u.default.bool,x:u.default.oneOfType([u.default.number,u.default.string]),y:u.default.oneOfType([u.default.number,u.default.string]),className:u.default.oneOfType([u.default.number,u.default.string]),yAxisId:u.default.oneOfType([u.default.string,u.default.number]),xAxisId:u.default.oneOfType([u.default.string,u.default.number]),shape:u.default.oneOfType([u.default.func,u.default.element])}),w.defaultProps={isFront:!1,alwaysShow:!1,xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},v=T))||v;exports.default=P;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../container/Layer":341,"../shape/Dot":353,"../util/ReactUtils":459,"../component/Label":347,"../util/DataUtils":458,"../util/ChartUtils":462}],363:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=x(e),r=require("react"),n=x(r),a=require("prop-types"),i=x(a),u=require("classnames"),o=x(u),l=require("../util/PureRender"),s=x(l),f=require("../container/Layer"),d=x(f),c=require("../util/ReactUtils"),y=require("../component/Label"),p=x(y),h=require("../util/DataUtils"),b=require("../util/ChartUtils");function x(e){return e&&e.__esModule?e:{default:e}}var m,v,w,O=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e,r){return n.default.isValidElement(e)?n.default.cloneElement(e,r):(0,t.default)(e)?e(r):n.default.createElement("line",A({},r,{className:"recharts-reference-line-line"}))},j=(0,s.default)((w=v=function(e){function t(){return E(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,r.Component),g(t,[{key:"getEndPoints",value:function(e,t){var r=this.props,n=r.xAxis,a=r.yAxis,i=r.viewBox,u=i.x,o=i.y,l=i.width,s=i.height;if(t){var f=this.props.y,d=a.scale,c=d.bandwidth?d.bandwidth()/2:0,y=d(f)+c;if((0,b.validateCoordinateInRange)(y,d))return"left"===a.orientation?[{x:u,y:y},{x:u+l,y:y}]:[{x:u+l,y:y},{x:u,y:y}]}else if(e){var p=this.props.x,h=n.scale,x=h.bandwidth?h.bandwidth()/2:0,m=h(p)+x;if((0,b.validateCoordinateInRange)(m,h))return"top"===n.orientation?[{x:m,y:o},{x:m,y:o+s}]:[{x:m,y:o+s},{x:m,y:o}]}return null}},{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,a=e.shape,i=e.className,u=(0,h.isNumOrStr)(t),l=(0,h.isNumOrStr)(r);if(!u&&!l)return null;var s=this.getEndPoints(u,l);if(!s)return null;var f=O(s,2),y=f[0],b=f[1],x=A({},(0,c.getPresentationAttributes)(this.props),(0,c.filterEventAttributes)(this.props),{x1:y.x,y1:y.y,x2:b.x,y2:b.y});return n.default.createElement(d.default,{className:(0,o.default)("recharts-reference-line",i)},_(a,x),p.default.renderCallByParent(this.props,{x:Math.min(x.x1,x.x2),y:Math.min(x.y1,x.y2),width:Math.abs(x.x2-x.x1),height:Math.abs(x.y2-x.y1)}))}}]),t}(),v.displayName="ReferenceLine",v.propTypes=A({},c.PRESENTATION_ATTRIBUTES,{viewBox:i.default.shape({x:i.default.number,y:i.default.number,width:i.default.number,height:i.default.number}),xAxis:i.default.object,yAxis:i.default.object,isFront:i.default.bool,alwaysShow:i.default.bool,x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string]),className:i.default.oneOfType([i.default.number,i.default.string]),yAxisId:i.default.oneOfType([i.default.string,i.default.number]),xAxisId:i.default.oneOfType([i.default.string,i.default.number]),shape:i.default.func}),v.defaultProps={isFront:!1,alwaysShow:!1,xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1},m=w))||m;exports.default=j;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../container/Layer":341,"../util/ReactUtils":459,"../component/Label":347,"../util/DataUtils":458,"../util/ChartUtils":462}],351:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=c(e),n=require("prop-types"),a=c(n),i=require("classnames"),r=c(i),o=require("react-smooth"),u=c(o),s=require("../util/PureRender"),l=c(s),f=require("../util/ReactUtils");function c(e){return e&&e.__esModule?e:{default:e}}var p,h,d,m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=function(e,t,n,a,i){var r=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,u=a>=0?1:0,s=void 0;if(r>0&&i instanceof Array){for(var l=[],f=0;f<4;f++)l[f]=i[f]>r?r:i[f];s="M"+e+","+(t+o*l[0]),l[0]>0&&(s+="A "+l[0]+","+l[0]+",0,0,"+u+","+(e+l[0])+","+t),s+="L "+(e+n-l[1])+","+t,l[1]>0&&(s+="A "+l[1]+","+l[1]+",0,0,"+u+",\n        "+(e+n)+","+(t+o*l[1])),s+="L "+(e+n)+","+(t+a-o*l[2]),l[2]>0&&(s+="A "+l[2]+","+l[2]+",0,0,"+u+",\n        "+(e+n-l[2])+","+(t+a)),s+="L "+(e+l[3])+","+(t+a),l[3]>0&&(s+="A "+l[3]+","+l[3]+",0,0,"+u+",\n        "+e+","+(t+a-o*l[3])),s+="Z"}else if(r>0&&i===+i&&i>0){var c=Math.min(r,i);s="M "+e+","+(t+o*c)+"\n            A "+c+","+c+",0,0,"+u+","+(e+c)+","+t+"\n            L "+(e+n-c)+","+t+"\n            A "+c+","+c+",0,0,"+u+","+(e+n)+","+(t+o*c)+"\n            L "+(e+n)+","+(t+a-o*c)+"\n            A "+c+","+c+",0,0,"+u+","+(e+n-c)+","+(t+a)+"\n            L "+(e+c)+","+(t+a)+"\n            A "+c+","+c+",0,0,"+u+","+e+","+(t+a-o*c)+" Z"}else s="M "+e+","+t+" h "+n+" v "+a+" h "+-n+" Z";return s},E=(0,l.default)((d=h=function(n){function a(){var e,t,n;g(this,a);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=n=y(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={totalLength:-1},y(n,t)}return v(a,e.Component),b(a,[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(e){}}},{key:"render",value:function(){var e=this,n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.radius,c=n.className,p=this.state.totalLength,h=this.props,d=h.animationEasing,b=h.animationDuration,g=h.animationBegin,y=h.isAnimationActive,v=h.isUpdateAnimationActive;if(a!==+a||i!==+i||o!==+o||s!==+s||0===o||0===s)return null;var E=(0,r.default)("recharts-rectangle",c);return v?t.default.createElement(u.default,{canBegin:p>0,from:{width:o,height:s,x:a,y:i},to:{width:o,height:s,x:a,y:i},duration:b,animationEasing:d,isActive:v},function(n){var a=n.width,i=n.height,r=n.x,o=n.y;return t.default.createElement(u.default,{canBegin:p>0,from:"0px "+(-1===p?1:p)+"px",to:p+"px 0px",attributeName:"strokeDasharray",begin:g,duration:b,isActive:y,easing:d},t.default.createElement("path",m({},(0,f.getPresentationAttributes)(e.props),(0,f.filterEventAttributes)(e.props),{className:E,d:A(r,o,a,i,l),ref:function(t){e.node=t}})))}):t.default.createElement("path",m({},(0,f.getPresentationAttributes)(this.props),(0,f.filterEventAttributes)(this.props),{className:E,d:A(a,i,o,s,l)}))}}]),a}(),h.displayName="Rectangle",h.propTypes=m({},f.PRESENTATION_ATTRIBUTES,f.EVENT_ATTRIBUTES,{className:a.default.string,x:a.default.number,y:a.default.number,width:a.default.number,height:a.default.number,radius:a.default.oneOfType([a.default.number,a.default.array]),isAnimationActive:a.default.bool,isUpdateAnimationActive:a.default.bool,animationBegin:a.default.number,animationDuration:a.default.number,animationEasing:a.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"])}),h.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p=d))||p;exports.default=E;
},{"react":8,"prop-types":96,"classnames":495,"react-smooth":506,"../util/PureRender":456,"../util/ReactUtils":459}],365:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=O(e),r=require("react"),a=O(r),n=require("prop-types"),u=O(n),i=require("classnames"),l=O(i),o=require("../util/PureRender"),f=O(o),s=require("../container/Layer"),d=O(s),c=require("../component/Label"),p=O(c),y=require("../util/ReactUtils"),h=require("../util/DataUtils"),b=require("../util/ChartUtils"),m=require("../shape/Rectangle"),v=O(m);function O(e){return e&&e.__esModule?e:{default:e}}var g,x,w,T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=(0,f.default)((w=x=function(e){function n(){return _(this,n),j(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return q(n,r.Component),R(n,[{key:"getRect",value:function(e,t,r,a){var n=this.props,u=n.x1,i=n.x2,l=n.y1,o=n.y2,f=n.xAxis,s=n.yAxis,d=f.scale,c=s.scale,p=d.bandwidth?d.bandwidth()/2:0,y=c.bandwidth?c.bandwidth()/2:0,h=d.range(),m=c.range(),v=void 0,O=void 0,g=void 0,x=void 0;return v=e?d(u)+p:h[0],O=t?d(i)+p:h[1],g=r?c(l)+y:m[0],x=a?c(o)+y:m[1],(0,b.validateCoordinateInRange)(v,d)&&(0,b.validateCoordinateInRange)(O,d)&&(0,b.validateCoordinateInRange)(g,c)&&(0,b.validateCoordinateInRange)(x,c)?{x:Math.min(v,O),y:Math.min(g,x),width:Math.abs(O-v),height:Math.abs(x-g)}:null}},{key:"renderRect",value:function(e,r){return a.default.isValidElement(e)?a.default.cloneElement(e,r):(0,t.default)(e)?e(r):a.default.createElement(v.default,T({},r,{className:"recharts-reference-area-rect"}))}},{key:"render",value:function(){var e=this.props,t=e.x1,r=e.x2,n=e.y1,u=e.y2,i=e.className,o=(0,h.isNumOrStr)(t),f=(0,h.isNumOrStr)(r),s=(0,h.isNumOrStr)(n),c=(0,h.isNumOrStr)(u);if(!(o||f||s||c))return null;var y=this.getRect(o,f,s,c);if(!y)return null;var b=this.props.shape;return a.default.createElement(d.default,{className:(0,l.default)("recharts-reference-area",i)},this.renderRect(b,T({},this.props,y)),p.default.renderCallByParent(this.props,y))}}]),n}(),x.displayName="ReferenceArea",x.propTypes=T({},y.PRESENTATION_ATTRIBUTES,{viewBox:u.default.shape({x:u.default.number,y:u.default.number,width:u.default.number,height:u.default.number}),xAxis:u.default.object,yAxis:u.default.object,isFront:u.default.bool,alwaysShow:u.default.bool,x1:u.default.oneOfType([u.default.number,u.default.string]),x2:u.default.oneOfType([u.default.number,u.default.string]),y1:u.default.oneOfType([u.default.number,u.default.string]),y2:u.default.oneOfType([u.default.number,u.default.string]),className:u.default.oneOfType([u.default.number,u.default.string]),yAxisId:u.default.oneOfType([u.default.string,u.default.number]),xAxisId:u.default.oneOfType([u.default.string,u.default.number]),shape:u.default.oneOfType([u.default.func,u.default.element])}),x.defaultProps={isFront:!1,alwaysShow:!1,xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},g=w))||g;exports.default=A;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../container/Layer":341,"../component/Label":347,"../util/ReactUtils":459,"../util/DataUtils":458,"../util/ChartUtils":462,"../shape/Rectangle":351}],375:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=u(e),r=require("prop-types"),a=u(r),o=require("../container/Layer"),n=u(o),i=require("../util/ReactUtils");function u(e){return e&&e.__esModule?e:{default:e}}var l,f,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function d(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(f=l=function(r){function a(){return y(this,a),p(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return v(a,e.Component),c(a,[{key:"renderErrorBars",value:function(){var e=this.props,r=e.offset,a=e.layout,o=e.width,u=e.dataKey,l=e.data,f=e.dataPointFormatter,c=e.xAxis,y=e.yAxis,p=d(e,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),v=(0,i.getPresentationAttributes)(p);return l.map(function(e,i){var l=f(e,u),d=l.x,p=l.y,b=l.value,h=l.errorVal;if(!h)return null;var x=void 0,m=void 0,O=void 0,w=void 0,j=void 0,P=void 0,_=void 0,g=void 0,E=void 0,k=void 0,A=void 0,q=void 0;return Array.isArray(h)?(A=h[0],q=h[1]):(A=h,q=h),"vertical"===a?(_=c.scale,m=p+r,O=_((x=b)-A),w=m+o,g={x1:j=_(x+q),y1:w,x2:j,y2:P=m-o},E={x1:O,y1:m,x2:j,y2:m},k={x1:O,y1:w,x2:O,y2:P}):"horizontal"===a&&(_=y.scale,O=(x=d+r)-o,j=x+o,w=_((m=b)-A),g={x1:O,y1:P=_(m+q),x2:j,y2:P},E={x1:x,y1:w,x2:x,y2:P},k={x1:O,y1:w,x2:j,y2:w}),t.default.createElement(n.default,s({className:"recharts-errorBar",key:i},v),t.default.createElement("line",g),t.default.createElement("line",E),t.default.createElement("line",k))})}},{key:"render",value:function(){return t.default.createElement(n.default,{className:"recharts-errorBars"},this.renderErrorBars())}}]),a}(),l.propTypes={dataKey:a.default.oneOfType([a.default.string,a.default.number,a.default.func]).isRequired,data:a.default.array,xAxis:a.default.object,yAxis:a.default.object,layout:a.default.string,dataPointFormatter:a.default.func,stroke:a.default.string,strokeWidth:a.default.number,width:a.default.number,offset:a.default.number},l.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},f);exports.default=b;
},{"react":8,"prop-types":96,"../container/Layer":341,"../util/ReactUtils":459}],462:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseDomainOfCategoryAxis=exports.getBandSizeOfAxis=exports.validateCoordinateInRange=exports.parseSpecifiedDomain=exports.MAX_VALUE_REG=exports.MIN_VALUE_REG=exports.getDomainOfStackGroups=exports.getStackedDataOfItem=exports.detectReferenceElementsDomain=exports.getBaseValueOfBar=exports.getCateCoordinateOfBar=exports.getCateCoordinateOfLine=exports.getTicksOfScale=exports.calculateDomainOfTicks=exports.getStackGroupsByAxisId=exports.getStackedData=exports.offsetSign=exports.truncateByDomain=exports.findPositionOfBar=exports.checkDomainOfScale=exports.parseScale=exports.combineEventHandlers=exports.getTicksOfAxis=exports.getCoordinatesOfGrid=exports.isCategorialAxis=exports.getDomainOfItemsWithSameAxis=exports.parseErrorBarsOfAxis=exports.getDomainOfErrorBars=exports.appendOffsetOfLegend=exports.getBarPosition=exports.getBarSizeList=exports.getLegendProps=exports.getMainColorOfGraphicItem=exports.calculateActiveTickIndex=exports.getDomainOfDataByKey=exports.getValueByDataKey=void 0;var e=require("lodash/isEqual"),t=_(e),r=require("lodash/sortBy"),a=_(r),n=require("lodash/isNaN"),i=_(n),o=require("lodash/isString"),s=_(o),u=require("lodash/max"),c=_(u),l=require("lodash/min"),f=_(l),p=require("lodash/isArray"),d=_(p),m=require("lodash/flatMap"),x=_(m),h=require("lodash/isFunction"),g=_(h),v=require("lodash/get"),y=_(v),k=require("lodash/isNil"),O=_(k),b=require("recharts-scale"),S=require("d3-scale"),M=P(S),A=require("d3-shape"),D=require("./DataUtils"),B=require("../cartesian/ReferenceDot"),T=_(B),N=require("../cartesian/ReferenceLine"),C=_(N),I=require("../cartesian/ReferenceArea"),L=_(I),q=require("../cartesian/ErrorBar"),G=_(q),z=require("../component/Legend"),E=_(z),w=require("./ReactUtils");function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var j=exports.getValueByDataKey=function(e,t,r){return(0,O.default)(e)||(0,O.default)(t)?r:(0,D.isNumOrStr)(t)?(0,y.default)(e,t,r):(0,g.default)(t)?t(e):r},U=exports.getDomainOfDataByKey=function(e,t,r,a){var n=(0,x.default)(e,function(e){return j(e,t)});if("number"===r){var i=n.filter(D.isNumber);return[Math.min.apply(null,i),Math.max.apply(null,i)]}return(a?n.filter(function(e){return!(0,O.default)(e)}):n).map(function(e){return(0,D.isNumOrStr)(e)?e:""})},W=exports.calculateActiveTickIndex=function(e,t,r,a){var n=-1,i=t.length;if(i>1){if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,s=0;s<i;s++){var u=s>0?r[s-1].coordinate:r[i-1].coordinate,c=r[s].coordinate,l=s>=i-1?r[0].coordinate:r[s+1].coordinate,f=void 0;if((0,D.mathSign)(c-u)!==(0,D.mathSign)(l-c)){var p=[];if((0,D.mathSign)(l-c)===(0,D.mathSign)(o[1]-o[0])){f=l;var d=c+o[1]-o[0];p[0]=Math.min(d,(d+u)/2),p[1]=Math.max(d,(d+u)/2)}else{f=u;var m=l+o[1]-o[0];p[0]=Math.min(c,(m+c)/2),p[1]=Math.max(c,(m+c)/2)}var x=[Math.min(c,(f+c)/2),Math.max(c,(f+c)/2)];if(e>x[0]&&e<=x[1]||e>=p[0]&&e<=p[1]){n=r[s].index;break}}else{var h=Math.min(u,l),g=Math.max(u,l);if(e>(h+c)/2&&e<=(g+c)/2){n=r[s].index;break}}}else for(var v=0;v<i;v++)if(0===v&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<i-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===i-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){n=t[v].index;break}}else n=0;return n},H=exports.getMainColorOfGraphicItem=function(e){var t=void 0;switch(e.type.displayName){case"Line":case"Area":case"Radar":t=e.props.stroke;break;default:t=e.props.fill}return t},F=exports.getLegendProps=function(e){var t=e.children,r=e.formatedGraphicalItems,a=e.legendWidth,n=e.legendContent,i=(0,w.findChildByType)(t,E.default);if(!i)return null;var o=void 0;return o=i.props&&i.props.payload?i.props&&i.props.payload:"children"===n?(r||[]).reduce(function(e,t){var r=t.item,a=t.props,n=a.sectors||a.data||[];return e.concat(n.map(function(e){return{type:i.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.props,a=r.dataKey,n=r.name,o=r.legendType;return{inactive:r.hide,dataKey:a,type:i.props.iconType||o||"square",color:H(t),value:n||a,payload:t.props}}),K({},i.props,E.default.getWithHeight(i,a),{payload:o,item:i})},X=exports.getBarSizeList=function(e){var t=e.barSize,r=e.stackGroups,a=void 0===r?{}:r;if(!a)return{};for(var n={},i=Object.keys(a),o=0,s=i.length;o<s;o++)for(var u=a[i[o]].stackGroups,c=Object.keys(u),l=0,f=c.length;l<f;l++){var p=u[c[l]],d=p.items,m=p.cateAxisId,x=d.filter(function(e){return(0,w.getDisplayName)(e.type).indexOf("Bar")>=0});if(x&&x.length){var h=x[0].props.barSize,g=x[0].props[m];n[g]||(n[g]=[]),n[g].push({item:x[0],stackList:x.slice(1),barSize:(0,O.default)(h)?t:h})}}return n},$=exports.getBarPosition=function(e){var t=e.barGap,r=e.barCategoryGap,a=e.bandSize,n=e.sizeList,i=void 0===n?[]:n,o=e.maxBarSize,s=i.length;if(s<1)return null;var u=(0,D.getPercentValue)(t,a,0,!0),c=void 0;if(i[0].barSize===+i[0].barSize){var l=!1,f=a/s,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(s-1)*u)>=a&&(p-=(s-1)*u,u=0),p>=a&&f>0&&(l=!0,p=s*(f*=.9));var d={offset:((a-p)/2>>0)-u,size:0};c=i.reduce(function(e,t){var r=[].concat(V(e),[{item:t.item,position:{offset:d.offset+d.size+u,size:l?f:t.barSize}}]);return d=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:d})}),r},[])}else{var m=(0,D.getPercentValue)(r,a,0,!0);a-2*m-(s-1)*u<=0&&(u=0);var x=(a-2*m-(s-1)*u)/s;x>1&&(x>>=0);var h=o===+o?Math.min(x,o):x;c=i.reduce(function(e,t,r){var a=[].concat(V(e),[{item:t.item,position:{offset:m+(x+u)*r+(x-h)/2,size:h}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){a.push({item:e,position:a[a.length-1].position})}),a},[])}return c},J=exports.appendOffsetOfLegend=function(e,t,r,a){var n=r.children,i=r.width,o=r.height,s=r.margin,u=i-(s.left||0)-(s.right||0),c=o-(s.top||0)-(s.bottom||0),l=F({children:n,items:t,legendWidth:u,legendHeight:c}),f=e;if(l){var p=a||{},d=l.align,m=l.verticalAlign,x=l.layout;("vertical"===x||"horizontal"===x&&"center"===m)&&(0,D.isNumber)(e[d])&&(f=K({},e,R({},d,f[d]+(p.width||0)))),("horizontal"===x||"vertical"===x&&"center"===d)&&(0,D.isNumber)(e[m])&&(f=K({},e,R({},m,f[m]+(p.height||0))))}return f},Q=exports.getDomainOfErrorBars=function(e,t,r,a){var n=t.props.children,i=(0,w.findAllByType)(n,G.default).filter(function(e){var t=e.props.direction;return!(!(0,O.default)(t)&&!(0,O.default)(a))||a.indexOf(t)>=0});if(i&&i.length){var o=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var a=j(t,r,0),n=(0,d.default)(a)?[(0,f.default)(a),(0,c.default)(a)]:[a,a],i=o.reduce(function(e,r){var a=j(t,r,0),i=n[0]-Math.abs((0,d.default)(a)?a[0]:a),o=n[1]+Math.abs((0,d.default)(a)?a[1]:a);return[Math.min(i,e[0]),Math.max(o,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},Y=exports.parseErrorBarsOfAxis=function(e,t,r,a){var n=t.map(function(t){return Q(e,t,r,a)}).filter(function(e){return!(0,O.default)(e)});return n&&n.length?n.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null},Z=exports.getDomainOfItemsWithSameAxis=function(e,t,r,a){var n=t.map(function(t){var n=t.props.dataKey;return"number"===r&&n&&Q(e,t,n)||U(e,n,r,a)});if("number"===r)return n.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return n.reduce(function(e,t){for(var r=0,a=t.length;r<a;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},ee=exports.isCategorialAxis=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},te=exports.getCoordinatesOfGrid=function(e,t,r){var a=void 0,n=void 0,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(n=!0),e.coordinate});return a||i.push(t),n||i.push(r),i},re=exports.getTicksOfAxis=function(e,t,r){if(!e)return null;var a=e.scale,n=e.duplicateDomain,i=e.type,o=e.range,s=(t||r)&&"category"===i&&a.bandwidth?a.bandwidth()/2:0;return s="angleAxis"===e.axisType?2*(0,D.mathSign)(o[0]-o[1])*s:s,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=n?n.indexOf(e):e;return{coordinate:a(t)+s,value:e,offset:s}}):e.isCategorial&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:a(e),value:e,index:t,offset:s}}):a.ticks&&!r?a.ticks(e.tickCount).map(function(e){return{coordinate:a(e)+s,value:e,offset:s}}):a.domain().map(function(e,t){return{coordinate:a(e)+s,value:n?n[e]:e,index:t,offset:s}})},ae=exports.combineEventHandlers=function(e,t,r){var a=void 0;return(0,g.default)(r)?a=r:(0,g.default)(t)&&(a=t),(0,g.default)(e)||a?function(t,r,n,i){(0,g.default)(e)&&e(t,r,n,i),(0,g.default)(a)&&a(t,r,n,i)}:null},ne=exports.parseScale=function(e,t){var r=e.scale,a=e.type,n=e.layout,i=e.axisType;if("auto"===r)return"radial"===n&&"radiusAxis"===i?{scale:M.scaleBand(),realScaleType:"band"}:"radial"===n&&"angleAxis"===i?{scale:M.scaleLinear(),realScaleType:"linear"}:"category"===a&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0)?{scale:M.scalePoint(),realScaleType:"point"}:"category"===a?{scale:M.scaleBand(),realScaleType:"band"}:{scale:M.scaleLinear(),realScaleType:"linear"};if((0,s.default)(r)){var o="scale"+r.slice(0,1).toUpperCase()+r.slice(1);return{scale:(M[o]||M.scalePoint)(),realScaleType:M[o]?o:"point"}}return(0,g.default)(r)?{scale:r}:{scale:M.scalePoint(),realScaleType:"point"}},ie=1e-4,oe=exports.checkDomainOfScale=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,a=e.range(),n=Math.min(a[0],a[1])-ie,i=Math.max(a[0],a[1])+ie,o=e(t[0]),s=e(t[r-1]);(o<n||o>i||s<n||s>i)&&e.domain([t[0],t[r-1]])}},se=exports.findPositionOfBar=function(e,t){if(!e)return null;for(var r=0,a=e.length;r<a;r++)if(e[r].item===t)return e[r].position;return null},ue=exports.truncateByDomain=function(e,t){if(!t||2!==t.length||!(0,D.isNumber)(t[0])||!(0,D.isNumber)(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!(0,D.isNumber)(e[0])||e[0]<r)&&(n[0]=r),(!(0,D.isNumber)(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<r&&(n[1]=r),n},ce=exports.offsetSign=function(e){var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,o=0,s=0;s<t;++s){var u=(0,i.default)(e[s][r][1])?e[s][r][0]:e[s][r][1];u>=0?(e[s][r][0]=n,e[s][r][1]=n+u,n=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+u,o=e[s][r][1])}},le={sign:ce,expand:A.stackOffsetExpand,none:A.stackOffsetNone,silhouette:A.stackOffsetSilhouette,wiggle:A.stackOffsetWiggle},fe=exports.getStackedData=function(e,t,r){var a=t.map(function(e){return e.props.dataKey});return(0,A.stack)().keys(a).value(function(e,t){return+j(e,t,0)}).order(A.stackOrderNone).offset(le[r])(e)},pe=exports.getStackGroupsByAxisId=function(e,t,r,a,n,i){if(!e)return null;var o=(i?t.reverse():t).reduce(function(e,t){var n=t.props,i=n.stackId;if(n.hide)return e;var o=t.props[r],s=e[o]||{hasStack:!1,stackGroups:{}};if((0,D.isNumOrStr)(i)){var u=s.stackGroups[i]||{numericAxisId:r,cateAxisId:a,items:[]};u.items.push(t),s.hasStack=!0,s.stackGroups[i]=u}else s.stackGroups[(0,D.uniqueId)("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[t]};return K({},e,R({},o,s))},{});return Object.keys(o).reduce(function(t,i){var s=o[i];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce(function(t,i){var o=s.stackGroups[i];return K({},t,R({},i,{numericAxisId:r,cateAxisId:a,items:o.items,stackedData:fe(e,o.items,n)}))},{})),K({},t,R({},i,s))},{})},de=exports.calculateDomainOfTicks=function(e,t){return"number"===t?[Math.min.apply(null,e),Math.max.apply(null,e)]:e},me=exports.getTicksOfScale=function(e,t){var r=t.realScaleType,a=t.type,n=t.tickCount,i=t.originalDomain,o=t.allowDecimals,s=r||t.scale;if("auto"!==s&&"linear"!==s)return null;if(n&&"number"===a&&i&&("auto"===i[0]||"auto"===i[1])){var u=e.domain(),c=(0,b.getNiceTickValues)(u,n,o);return e.domain(de(c,a)),{niceTicks:c}}if(n&&"number"===a){var l=e.domain();return{niceTicks:(0,b.getTickValuesFixedDomain)(l,n,o)}}return null},xe=exports.getCateCoordinateOfLine=function(e){var t=e.axis,r=e.ticks,a=e.bandSize,n=e.entry,i=e.index;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!(0,O.default)(n[t.dataKey])){var o=(0,D.findEntryInArray)(r,"value",n[t.dataKey]);if(o)return o.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var s=j(n,t.dataKey);return(0,O.default)(s)?null:t.scale(s)},he=exports.getCateCoordinateOfBar=function(e){var t=e.axis,r=e.ticks,a=e.offset,n=e.bandSize,i=e.entry,o=e.index;if("category"===t.type)return r[o]?r[o].coordinate+a:null;var s=j(i,t.dataKey,t.domain[o]);return(0,O.default)(s)?null:t.scale(s)-n/2+a},ge=exports.getBaseValueOfBar=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return a<=0&&n>=0?0:n<0?n:a}return r[0]},ve=exports.detectReferenceElementsDomain=function(e,t,r,a,n){var i=(0,w.findAllByType)(e,C.default),o=(0,w.findAllByType)(e,T.default),s=i.concat(o),u=(0,w.findAllByType)(e,L.default),c=a+"Id",l=a[0],f=t;if(s.length&&(f=s.reduce(function(e,t){if(t.props[c]===r&&t.props.alwaysShow&&(0,D.isNumber)(t.props[l])){var a=t.props[l];return[Math.min(e[0],a),Math.max(e[1],a)]}return e},f)),u.length){var p=l+"1",d=l+"2";f=u.reduce(function(e,t){if(t.props[c]===r&&t.props.alwaysShow&&(0,D.isNumber)(t.props[p])&&(0,D.isNumber)(t.props[d])){var a=t.props[p],n=t.props[d];return[Math.min(e[0],a,n),Math.max(e[1],a,n)]}return e},f)}return n&&n.length&&(f=n.reduce(function(e,t){return(0,D.isNumber)(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},f)),f},ye=exports.getStackedDataOfItem=function(e,t){var r=e.props.stackId;if((0,D.isNumOrStr)(r)){var a=t[r];if(a&&a.items.length){for(var n=-1,i=0,o=a.items.length;i<o;i++)if(a.items[i]===e){n=i;break}return n>=0?a.stackedData[n]:null}}return null},ke=function(e){return e.reduce(function(e,t){return[Math.min.apply(null,t.concat([e[0]]).filter(D.isNumber)),Math.max.apply(null,t.concat([e[1]]).filter(D.isNumber))]},[1/0,-1/0])},Oe=exports.getDomainOfStackGroups=function(e,t,r){return Object.keys(e).reduce(function(a,n){var i=e[n].stackedData.reduce(function(e,a){var n=ke(a.slice(t,r+1));return[Math.min(e[0],n[0]),Math.max(e[1],n[1])]},[1/0,-1/0]);return[Math.min(i[0],a[0]),Math.max(i[1],a[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},be=exports.MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Se=exports.MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Me=exports.parseSpecifiedDomain=function(e,t,r){if(!(0,d.default)(e))return t;var a=[];if((0,D.isNumber)(e[0]))a[0]=r?e[0]:Math.min(e[0],t[0]);else if(be.test(e[0])){var n=+be.exec(e[0])[1];a[0]=t[0]-n}else(0,g.default)(e[0])?a[0]=e[0](t[0]):a[0]=t[0];if((0,D.isNumber)(e[1]))a[1]=r?e[1]:Math.max(e[1],t[1]);else if(Se.test(e[1])){var i=+Se.exec(e[1])[1];a[1]=t[1]+i}else(0,g.default)(e[1])?a[1]=e[1](t[1]):a[1]=t[1];return a},Ae=exports.validateCoordinateInRange=function(e,t){if(!t)return!1;var r=t.range(),a=r[0],n=r[r.length-1];return a<=n?e>=a&&e<=n:e>=n&&e<=a},De=exports.getBandSizeOfAxis=function(e,t){if(e&&e.scale&&e.scale.bandwidth)return e.scale.bandwidth();if(e&&t&&t.length>=2){for(var r=(0,a.default)(t,function(e){return e.coordinate}),n=1/0,i=1,o=r.length;i<o;i++){var s=r[i],u=r[i-1];n=Math.min((s.coordinate||0)-(u.coordinate||0),n)}return n===1/0?0:n}return 0},Be=exports.parseDomainOfCategoryAxis=function(e,r,a){return e&&e.length?(0,t.default)(e,(0,y.default)(a,"type.defaultProps.domain"))?r:e:r};
},{"lodash/isEqual":507,"lodash/sortBy":556,"lodash/isNaN":511,"lodash/isString":554,"lodash/max":557,"lodash/min":513,"lodash/isArray":502,"lodash/flatMap":558,"lodash/isFunction":498,"lodash/get":552,"lodash/isNil":497,"recharts-scale":640,"d3-scale":514,"d3-shape":510,"./DataUtils":458,"../cartesian/ReferenceDot":364,"../cartesian/ReferenceLine":363,"../cartesian/ReferenceArea":365,"../cartesian/ErrorBar":375,"../component/Legend":342,"./ReactUtils":459}],464:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inRangeOfSector=exports.formatAngleOfSector=exports.getAngleOfPoint=exports.distanceBetweenPoints=exports.formatAxisMap=exports.getMaxRadius=exports.polarToCartesian=exports.radianToDegree=exports.degreeToRadian=exports.RADIAN=void 0;var e=require("lodash/isNil"),r=n(e),t=require("./DataUtils"),a=require("./ChartUtils");function n(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s=exports.RADIAN=Math.PI/180,u=exports.degreeToRadian=function(e){return e*Math.PI/180},l=exports.radianToDegree=function(e){return 180*e/Math.PI},c=exports.polarToCartesian=function(e,r,t,a){return{x:e+Math.cos(-s*a)*t,y:r+Math.sin(-s*a)*t}},f=exports.getMaxRadius=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(t.left||0)-(t.right||0)),Math.abs(r-(t.top||0)-(t.bottom||0)))/2},g=exports.formatAxisMap=function(e,n,s,u,l){var c=e.width,g=e.height,d=e.startAngle,p=e.endAngle,x=(0,t.getPercentValue)(e.cx,c,c/2),h=(0,t.getPercentValue)(e.cy,g,g/2),v=f(c,g,s),M=(0,t.getPercentValue)(e.innerRadius,v,0),A=(0,t.getPercentValue)(e.outerRadius,v,.8*v);return Object.keys(n).reduce(function(e,t){var s=n[t],c=s.domain,f=s.reversed,g=void 0;(0,r.default)(s.range)?("angleAxis"===u?g=[d,p]:"radiusAxis"===u&&(g=[M,A]),f&&(g=[g[1],g[0]])):(g=s.range,d=g[0],p=g[1]);var v=(0,a.parseScale)(s,l),y=v.realScaleType,P=v.scale;P.domain(c).range(g),(0,a.checkDomainOfScale)(P);var R=(0,a.getTicksOfScale)(P,o({},s,{realScaleType:y})),O=o({},s,R,{range:g,radius:A,realScaleType:y,scale:P,cx:x,cy:h,innerRadius:M,outerRadius:A,startAngle:d,endAngle:p});return o({},e,i({},t,O))},{})},d=exports.distanceBetweenPoints=function(e,r){var t=e.x,a=e.y,n=r.x,o=r.y;return Math.sqrt(Math.pow(t-n,2)+Math.pow(a-o,2))},p=exports.getAngleOfPoint=function(e,r){var t=e.x,a=e.y,n=r.cx,o=r.cy,i=d({x:t,y:a},{x:n,y:o});if(i<=0)return{radius:i};var s=(t-n)/i,u=Math.acos(s);return a>o&&(u=2*Math.PI-u),{radius:i,angle:l(u),angleInRadian:u}},x=exports.formatAngleOfSector=function(e){var r=e.startAngle,t=e.endAngle,a=Math.floor(r/360),n=Math.floor(t/360),o=Math.min(a,n);return{startAngle:r-360*o,endAngle:t-360*o}},h=function(e,r){var t=r.startAngle,a=r.endAngle,n=Math.floor(t/360),o=Math.floor(a/360);return e+360*Math.min(n,o)},v=exports.inRangeOfSector=function(e,r){var t=e.x,a=e.y,n=p({x:t,y:a},r),i=n.radius,s=n.angle,u=r.innerRadius,l=r.outerRadius;if(i<u||i>l)return!1;if(0===i)return!0;var c=x(r),f=c.startAngle,g=c.endAngle,d=s,v=void 0;if(f<=g){for(;d>g;)d-=360;for(;d<f;)d+=360;v=d>=f&&d<=g}else{for(;d>f;)d-=360;for(;d<g;)d+=360;v=d>=g&&d<=f}return v?o({},r,{radius:i,angle:h(d,r)}):null};
},{"lodash/isNil":497,"./DataUtils":458,"./ChartUtils":462}],347:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isObject"),t=y(e),r=require("lodash/isFunction"),i=y(r),n=require("lodash/isNil"),a=y(n),l=require("react"),d=y(l),u=require("prop-types"),o=y(u),s=require("classnames"),c=y(s),f=require("./Text"),h=y(f),m=require("../util/ReactUtils"),x=require("../util/DataUtils"),v=require("../util/PolarUtils");function y(e){return e&&e.__esModule?e:{default:e}}var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function p(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var b=o.default.shape({x:o.default.number,y:o.default.number,width:o.default.number,height:o.default.number}),g=o.default.shape({cx:o.default.number,cy:o.default.number,innerRadius:o.default.number,outerRadius:o.default.number,startAngle:o.default.number,endAngle:o.default.number}),B={viewBox:o.default.oneOfType([b,g]),formatter:o.default.func,value:o.default.oneOfType([o.default.number,o.default.string]),offset:o.default.number,position:o.default.oneOf(["top","left","right","bottom","inside","outside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight","insideStart","insideEnd","end","center"]),children:o.default.oneOfType([o.default.arrayOf(o.default.node),o.default.node]),className:o.default.string,content:o.default.oneOfType([o.default.element,o.default.func])},N={offset:5},w=function(e){var t=e.value,r=e.formatter,n=(0,a.default)(e.children)?t:e.children;return(0,i.default)(r)?r(n):n},E=function(e,t){return(0,x.mathSign)(t-e)*Math.min(Math.abs(t-e),360)},R=function(e,t,r){var i=e.position,n=e.viewBox,l=e.offset,u=e.className,o=n.cx,s=n.cy,f=n.innerRadius,h=n.outerRadius,m=n.startAngle,y=n.endAngle,p=n.clockWise,b=(f+h)/2,g=E(m,y),B=g>=0?1:-1,N=void 0,w=void 0;"insideStart"===i?(N=m+B*l,w=p):"insideEnd"===i?(N=y-B*l,w=!p):"end"===i&&(N=y+B*l,w=p),w=g<=0?w:!w;var R=(0,v.polarToCartesian)(o,s,b,N),T=(0,v.polarToCartesian)(o,s,b,N+359*(w?1:-1)),O="M"+R.x+","+R.y+"\n    A"+b+","+b+",0,1,"+(w?0:1)+",\n    "+T.x+","+T.y,q=(0,a.default)(e.id)?(0,x.uniqueId)("recharts-radial-line-"):e.id;return d.default.createElement("text",A({},r,{dominantBaseline:"central",className:(0,c.default)("recharts-radial-bar-label",u)}),d.default.createElement("defs",null,d.default.createElement("path",{id:q,d:O})),d.default.createElement("textPath",{xlinkHref:"#"+q},t))},T=function(e){var t=e.viewBox,r=e.offset,i=e.position,n=t.cx,a=t.cy,l=t.innerRadius,d=t.outerRadius,u=(t.startAngle+t.endAngle)/2;if("outside"===i){var o=(0,v.polarToCartesian)(n,a,d+r,u),s=o.x;return{x:s,y:o.y,textAnchor:s>=n?"start":"end",verticalAnchor:"middle"}}if("center"===i)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};var c=(l+d)/2,f=(0,v.polarToCartesian)(n,a,c,u);return{x:f.x,y:f.y,textAnchor:"middle",verticalAnchor:"middle"}},O=function(e){var r=e.viewBox,i=e.offset,n=e.position,a=r.x,l=r.y,d=r.width,u=r.height,o=u>=0?1:-1;return"top"===n?{x:a+d/2,y:l-o*i,textAnchor:"middle",verticalAnchor:"end"}:"bottom"===n?{x:a+d/2,y:l+u+o*i,textAnchor:"middle",verticalAnchor:"start"}:"left"===n?{x:a-i,y:l+u/2,textAnchor:"end",verticalAnchor:"middle"}:"right"===n?{x:a+d+i,y:l+u/2,textAnchor:"start",verticalAnchor:"middle"}:"insideLeft"===n?{x:a+i,y:l+u/2,textAnchor:"start",verticalAnchor:"middle"}:"insideRight"===n?{x:a+d-i,y:l+u/2,textAnchor:"end",verticalAnchor:"middle"}:"insideTop"===n?{x:a+d/2,y:l+o*i,textAnchor:"middle",verticalAnchor:"start"}:"insideBottom"===n?{x:a+d/2,y:l+u-o*i,textAnchor:"middle",verticalAnchor:"end"}:"insideTopLeft"===n?{x:a+i,y:l+o*i,textAnchor:"start",verticalAnchor:"start"}:"insideTopRight"===n?{x:a+d-i,y:l+o*i,textAnchor:"end",verticalAnchor:"start"}:"insideBottomLeft"===n?{x:a+i,y:l+u-o*i,textAnchor:"start",verticalAnchor:"end"}:"insideBottomRight"===n?{x:a+d-i,y:l+u-o*i,textAnchor:"end",verticalAnchor:"end"}:(0,t.default)(n)&&((0,x.isNumber)(n.x)||(0,x.isPercent)(n.x))&&((0,x.isNumber)(n.y)||(0,x.isPercent)(n.y))?{x:a+(0,x.getPercentValue)(n.x,d),y:l+(0,x.getPercentValue)(n.y,u),textAnchor:"end",verticalAnchor:"end"}:{x:a+d/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"}},q=function(e){return(0,x.isNumber)(e.cx)};function P(e){var t=e.viewBox,r=e.position,n=e.value,u=e.children,o=e.content,s=e.className,f=void 0===s?"":s;if(!t||(0,a.default)(n)&&(0,a.default)(u)&&!(0,l.isValidElement)(o)&&!(0,i.default)(o))return null;if((0,l.isValidElement)(o))return(0,l.cloneElement)(o,e);var x=void 0;if((0,i.default)(o)){if(x=o(e),(0,l.isValidElement)(x))return x}else x=w(e);var v=q(t),y=(0,m.getPresentationAttributes)(e);if(v&&("insideStart"===r||"insideEnd"===r||"end"===r))return R(e,x,y);var p=v?T(e):O(e);return d.default.createElement(h.default,A({className:(0,c.default)("recharts-label",f)},y,p),x)}P.displayName="Label",P.defaultProps=N,P.propTypes=B;var k=function(e){var t=e.cx,r=e.cy,i=e.angle,n=e.startAngle,a=e.endAngle,l=e.r,d=e.radius,u=e.innerRadius,o=e.outerRadius,s=e.x,c=e.y,f=e.top,h=e.left,m=e.width,v=e.height,y=e.clockWise;if((0,x.isNumber)(m)&&(0,x.isNumber)(v)){if((0,x.isNumber)(s)&&(0,x.isNumber)(c))return{x:s,y:c,width:m,height:v};if((0,x.isNumber)(f)&&(0,x.isNumber)(h))return{x:f,y:h,width:m,height:v}}return(0,x.isNumber)(s)&&(0,x.isNumber)(c)?{x:s,y:c,width:0,height:0}:(0,x.isNumber)(t)&&(0,x.isNumber)(r)?{cx:t,cy:r,startAngle:n||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:o||d||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},L=function(e,r){return e?!0===e?d.default.createElement(P,{key:"label-implicit",viewBox:r}):(0,x.isNumOrStr)(e)?d.default.createElement(P,{key:"label-implicit",viewBox:r,value:e}):(0,l.isValidElement)(e)||(0,i.default)(e)?d.default.createElement(P,{key:"label-implicit",content:e,viewBox:r}):(0,t.default)(e)?d.default.createElement(P,A({viewBox:r},e,{key:"label-implicit"})):null:null},V=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,n=k(e),a=(0,m.findAllByType)(i,P).map(function(e,r){return(0,l.cloneElement)(e,{viewBox:t||n,key:"label-"+r})});return r?[L(e.label,t||n)].concat(p(a)):a};P.parseViewBox=k,P.renderCallByParent=V,exports.default=P;
},{"lodash/isObject":500,"lodash/isFunction":498,"lodash/isNil":497,"react":8,"prop-types":96,"classnames":495,"./Text":345,"../util/ReactUtils":459,"../util/DataUtils":458,"../util/PolarUtils":464}],501:[function(require,module,exports) {
function n(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}module.exports=n;
},{}],348:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isObject"),t=A(e),a=require("lodash/isFunction"),r=A(a),l=require("lodash/isNil"),u=A(l),i=require("lodash/last"),n=A(i),d=require("lodash/isArray"),c=A(d),o=require("react"),s=A(o),f=require("prop-types"),y=A(f),p=require("./Label"),v=A(p),b=require("../container/Layer"),h=A(b),m=require("../util/ReactUtils"),q=require("../util/ChartUtils");function A(e){return e&&e.__esModule?e:{default:e}}var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function O(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function k(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var L={id:y.default.string,data:y.default.arrayOf(y.default.object),valueAccessor:y.default.func,clockWise:y.default.bool,dataKey:y.default.oneOfType([y.default.string,y.default.number,y.default.func])},E={valueAccessor:function(e){return(0,c.default)(e.value)?(0,n.default)(e.value):e.value}};function j(e){var t=e.data,a=e.valueAccessor,r=e.dataKey,l=e.clockWise,i=e.id,n=k(e,["data","valueAccessor","dataKey","clockWise","id"]);return t&&t.length?s.default.createElement(h.default,{className:"recharts-label-list"},t.map(function(e,t){var d=(0,u.default)(r)?a(e,t):(0,q.getValueByDataKey)(e&&e.payload,r),c=(0,u.default)(i)?{}:{id:i+"-"+t};return s.default.createElement(v.default,g({},(0,m.getPresentationAttributes)(e),n,c,{index:t,value:d,viewBox:v.default.parseViewBox((0,u.default)(l)?e:g({},e,{clockWise:l})),key:"label-"+t}))})):null}j.propTypes=L,j.displayName="LabelList";var x=function(e,a){return e?!0===e?s.default.createElement(j,{key:"labelList-implicit",data:a}):s.default.isValidElement(e)||(0,r.default)(e)?s.default.createElement(j,{key:"labelList-implicit",data:a,content:e}):(0,t.default)(e)?s.default.createElement(j,g({data:a},e,{key:"labelList-implicit"})):null:null},P=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&a&&!e.label)return null;var r=e.children,l=(0,m.findAllByType)(r,j).map(function(e,a){return(0,o.cloneElement)(e,{data:t,key:"labelList-"+a})});return a?[x(e.label,t)].concat(O(l)):l};j.renderCallByParent=P,j.defaultProps=E,exports.default=j;
},{"lodash/isObject":500,"lodash/isFunction":498,"lodash/isNil":497,"lodash/last":501,"lodash/isArray":502,"react":8,"prop-types":96,"./Label":347,"../container/Layer":341,"../util/ReactUtils":459,"../util/ChartUtils":462}],349:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=d(e),r=require("prop-types"),t=d(r),a=require("classnames"),i=d(a),u=require("../util/PureRender"),s=d(u),o=require("../util/ReactUtils"),c=require("../util/PolarUtils"),l=require("../util/DataUtils");function d(e){return e&&e.__esModule?e:{default:e}}var f,y,p,g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},h=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();function b(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function R(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function A(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var x=function(e,n){return(0,l.mathSign)(n-e)*Math.min(Math.abs(n-e),359.999)},T=function(e){var n=e.cx,r=e.cy,t=e.radius,a=e.angle,i=e.sign,u=e.isExternal,s=e.cornerRadius,o=s*(u?1:-1)+t,l=Math.asin(s/o)/c.RADIAN,d=a+i*l;return{center:(0,c.polarToCartesian)(n,r,o,d),circleTangency:(0,c.polarToCartesian)(n,r,t,d),lineTangency:(0,c.polarToCartesian)(n,r,o*Math.cos(l*c.RADIAN),a),theta:l}},m=function(e){var n=e.cx,r=e.cy,t=e.innerRadius,a=e.outerRadius,i=e.startAngle,u=e.endAngle,s=x(i,u),o=i+s,l=(0,c.polarToCartesian)(n,r,a,i),d=(0,c.polarToCartesian)(n,r,a,o),f="M "+l.x+","+l.y+"\n    A "+a+","+a+",0,\n    "+ +(Math.abs(s)>180)+","+ +(i>o)+",\n    "+d.x+","+d.y+"\n  ";if(t>0){var y=(0,c.polarToCartesian)(n,r,t,i),p=(0,c.polarToCartesian)(n,r,t,o);f+="L "+p.x+","+p.y+"\n            A "+t+","+t+",0,\n            "+ +(Math.abs(s)>180)+","+ +(i<=o)+",\n            "+y.x+","+y.y+" Z"}else f+="L "+n+","+r+" Z";return f},v=function(e){var n=e.cx,r=e.cy,t=e.innerRadius,a=e.outerRadius,i=e.cornerRadius,u=e.startAngle,s=e.endAngle,o=(0,l.mathSign)(s-u),c=T({cx:n,cy:r,radius:a,angle:u,sign:o,cornerRadius:i}),d=c.circleTangency,f=c.lineTangency,y=c.theta,p=T({cx:n,cy:r,radius:a,angle:s,sign:-o,cornerRadius:i}),g=p.circleTangency,h=p.lineTangency,b=p.theta,R=Math.abs(u-s)-y-b;if(R<0)return m({cx:n,cy:r,innerRadius:t,outerRadius:a,startAngle:u,endAngle:s});var A="M "+f.x+","+f.y+"\n    A"+i+","+i+",0,0,"+ +(o<0)+","+d.x+","+d.y+"\n    A"+a+","+a+",0,"+ +(R>180)+","+ +(o<0)+","+g.x+","+g.y+"\n    A"+i+","+i+",0,0,"+ +(o<0)+","+h.x+","+h.y+"\n  ";if(t>0){var x=T({cx:n,cy:r,radius:t,angle:u,sign:o,isExternal:!0,cornerRadius:i}),v=x.circleTangency,M=x.lineTangency,O=x.theta,_=T({cx:n,cy:r,radius:t,angle:s,sign:-o,isExternal:!0,cornerRadius:i}),P=_.circleTangency,E=_.lineTangency,j=_.theta,w=Math.abs(u-s)-O-j;if(w<0)return A+"L"+n+","+r+"Z";A+="L"+E.x+","+E.y+"\n      A"+i+","+i+",0,0,"+ +(o<0)+","+P.x+","+P.y+"\n      A"+t+","+t+",0,"+ +(w>180)+","+ +(o>0)+","+v.x+","+v.y+"\n      A"+i+","+i+",0,0,"+ +(o<0)+","+M.x+","+M.y+"Z"}else A+="L"+n+","+r+"Z";return A},M=(0,s.default)((p=y=function(r){function t(){return b(this,t),R(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,e.Component),h(t,[{key:"render",value:function(){var e=this.props,r=e.cx,t=e.cy,a=e.innerRadius,u=e.outerRadius,s=e.cornerRadius,c=e.startAngle,d=e.endAngle,f=e.className;if(u<a||c===d)return null;var y=(0,i.default)("recharts-sector",f),p=u-a,h=(0,l.getPercentValue)(s,p,0,!0),b=void 0;return b=h>0&&Math.abs(c-d)<360?v({cx:r,cy:t,innerRadius:a,outerRadius:u,cornerRadius:Math.min(h,p/2),startAngle:c,endAngle:d}):m({cx:r,cy:t,innerRadius:a,outerRadius:u,startAngle:c,endAngle:d}),n.default.createElement("path",g({},(0,o.getPresentationAttributes)(this.props),(0,o.filterEventAttributes)(this.props),{className:y,d:b}))}}]),t}(),y.displayName="Sector",y.propTypes=g({},o.PRESENTATION_ATTRIBUTES,{className:t.default.string,cx:t.default.number,cy:t.default.number,innerRadius:t.default.number,outerRadius:t.default.number,startAngle:t.default.number,endAngle:t.default.number,cornerRadius:t.default.oneOfType([t.default.number,t.default.string])}),y.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0},f=p))||f;exports.default=M;
},{"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../util/ReactUtils":459,"../util/PolarUtils":464,"../util/DataUtils":458}],350:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isArray"),t=y(e),r=require("lodash/isFunction"),n=y(r),u=require("react"),a=y(u),o=require("prop-types"),i=y(o),s=require("d3-shape"),l=require("classnames"),c=y(l),f=require("../util/PureRender"),p=y(f),v=require("../util/ReactUtils"),d=require("../util/DataUtils");function y(e){return e&&e.__esModule?e:{default:e}}var b,h,O,m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P={curveBasisClosed:s.curveBasisClosed,curveBasisOpen:s.curveBasisOpen,curveBasis:s.curveBasis,curveLinearClosed:s.curveLinearClosed,curveLinear:s.curveLinear,curveMonotoneX:s.curveMonotoneX,curveMonotoneY:s.curveMonotoneY,curveNatural:s.curveNatural,curveStep:s.curveStep,curveStepAfter:s.curveStepAfter,curveStepBefore:s.curveStepBefore},j=function(e){return e.x===+e.x&&e.y===+e.y},B=function(e){return e.x},C=function(e){return e.y},T=function(e,t){if((0,n.default)(e))return e;var r="curve"+e.slice(0,1).toUpperCase()+e.slice(1);return"curveMonotone"===r&&t?P[r+("vertical"===t?"Y":"X")]:P[r]||s.curveLinear},q=(0,p.default)((O=h=function(e){function r(){return g(this,r),N(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _(r,u.Component),x(r,[{key:"getPath",value:function(){var e=this.props,r=e.type,n=e.points,u=e.baseLine,a=e.layout,o=e.connectNulls,i=T(r,a),l=o?n.filter(function(e){return j(e)}):n,c=void 0;if((0,t.default)(u)){var f=l.map(function(e,t){return m({},e,{base:u[t]})});return(c="vertical"===a?(0,s.area)().y(C).x1(B).x0(function(e){return e.base.x}):(0,s.area)().x(B).y1(C).y0(function(e){return e.base.y})).defined(j).curve(i),c(f)}return(c="vertical"===a&&(0,d.isNumber)(u)?(0,s.area)().y(C).x1(B).x0(u):(0,d.isNumber)(u)?(0,s.area)().x(B).y1(C).y0(u):(0,s.line)().x(B).y(C)).defined(j).curve(i),c(l)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.points,n=e.path,u=e.pathRef;if(!(r&&r.length||n))return null;var o=r&&r.length?this.getPath():n;return a.default.createElement("path",m({},(0,v.getPresentationAttributes)(this.props),(0,v.filterEventAttributes)(this.props,null,!0),{className:(0,c.default)("recharts-curve",t),d:o,ref:u}))}}]),r}(),h.displayName="Curve",h.propTypes=m({},v.PRESENTATION_ATTRIBUTES,{className:i.default.string,type:i.default.oneOfType([i.default.oneOf(["basis","basisClosed","basisOpen","linear","linearClosed","natural","monotoneX","monotoneY","monotone","step","stepBefore","stepAfter"]),i.default.func]),layout:i.default.oneOf(["horizontal","vertical"]),baseLine:i.default.oneOfType([i.default.number,i.default.array]),points:i.default.arrayOf(i.default.object),connectNulls:i.default.bool,path:i.default.string,pathRef:i.default.func}),h.defaultProps={type:"linear",points:[],connectNulls:!1},b=O))||b;exports.default=q;
},{"lodash/isArray":502,"lodash/isFunction":498,"react":8,"prop-types":96,"d3-shape":510,"classnames":495,"../util/PureRender":456,"../util/ReactUtils":459,"../util/DataUtils":458}],352:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=l(e),r=require("prop-types"),n=l(r),o=require("classnames"),u=l(o),a=require("../util/PureRender"),i=l(a),s=require("../util/ReactUtils");function l(e){return e&&e.__esModule?e:{default:e}}var p,f,c,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){return e.reduce(function(e,t){return t.x===+t.x&&t.y===+t.y&&e.push([t.x,t.y]),e},[]).join(" ")},m=(0,i.default)((c=f=function(r){function n(){return d(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return v(n,e.Component),b(n,[{key:"render",value:function(){var e=this.props,r=e.points,n=e.className;if(!r||!r.length)return null;var o=(0,u.default)("recharts-polygon",n);return t.default.createElement("polygon",y({},(0,s.getPresentationAttributes)(this.props),(0,s.filterEventAttributes)(this.props),{className:o,points:O(r)}))}}]),n}(),f.displayName="Polygon",f.propTypes=y({},s.PRESENTATION_ATTRIBUTES,{className:n.default.string,points:n.default.arrayOf(n.default.shape({x:n.default.number,y:n.default.number}))}),p=c))||p;exports.default=m;
},{"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../util/ReactUtils":459}],354:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=f(e),r=require("prop-types"),n=f(r),u=require("classnames"),o=f(u),a=require("../util/PureRender"),i=f(a),s=require("../util/DataUtils"),l=require("../util/ReactUtils");function f(e){return e&&e.__esModule?e:{default:e}}var c,p,b,h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(0,i.default)((b=p=function(r){function n(){return y(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return v(n,e.Component),d(n,[{key:"getPath",value:function(e,t,r,n,u,o){return"M"+e+","+u+"v"+n+"M"+o+","+t+"h"+r}},{key:"render",value:function(){var e=this.props,r=e.x,n=e.y,u=e.width,a=e.height,i=e.top,f=e.left,c=e.className;return(0,s.isNumber)(r)&&(0,s.isNumber)(n)&&(0,s.isNumber)(u)&&(0,s.isNumber)(a)&&(0,s.isNumber)(i)&&(0,s.isNumber)(f)?t.default.createElement("path",h({},(0,l.getPresentationAttributes)(this.props),{className:(0,o.default)("recharts-cross",c),d:this.getPath(r,n,u,a,i,f)})):null}}]),n}(),p.displayName="Cross",p.propTypes=h({},l.PRESENTATION_ATTRIBUTES,{x:n.default.number,y:n.default.number,width:n.default.number,height:n.default.number,top:n.default.number,left:n.default.number,className:n.default.string}),p.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0},c=b))||c;exports.default=g;
},{"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../util/DataUtils":458,"../util/ReactUtils":459}],356:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=c(e),t=require("prop-types"),n=c(t),a=require("../util/PureRender"),o=c(a),i=require("../util/PolarUtils"),l=require("../util/ReactUtils");function c(e){return e&&e.__esModule?e:{default:e}}var u,s,p,f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},d=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function y(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function h(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function g(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var b=(0,o.default)((p=s=function(t){function n(){return y(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return g(n,e.Component),d(n,[{key:"getPolygonPath",value:function(e){var r=this.props,t=r.cx,n=r.cy,a="";return r.polarAngles.forEach(function(r,o){var l=(0,i.polarToCartesian)(t,n,e,r);a+=o?"L "+l.x+","+l.y:"M "+l.x+","+l.y}),a+="Z"}},{key:"renderPolarAngles",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.innerRadius,o=e.outerRadius,c=e.polarAngles;if(!c||!c.length)return null;var u=f({stroke:"#ccc"},(0,l.getPresentationAttributes)(this.props));return r.default.createElement("g",{className:"recharts-polar-grid-angle"},c.map(function(e,l){var c=(0,i.polarToCartesian)(t,n,a,e),s=(0,i.polarToCartesian)(t,n,o,e);return r.default.createElement("line",f({},u,{key:"line-"+l,x1:c.x,y1:c.y,x2:s.x,y2:s.y}))}))}},{key:"renderConcentricCircle",value:function(e,t,n){var a=this.props,o=a.cx,i=a.cy,c=f({stroke:"#ccc"},(0,l.getPresentationAttributes)(this.props),{fill:"none"},n);return r.default.createElement("circle",f({},c,{className:"recharts-polar-grid-concentric-circle",key:"circle-"+t,cx:o,cy:i,r:e}))}},{key:"renderConcentricPolygon",value:function(e,t,n){var a=f({stroke:"#ccc"},(0,l.getPresentationAttributes)(this.props),{fill:"none"},n);return r.default.createElement("path",f({},a,{className:"recharts-polar-grid-concentric-polygon",key:"path-"+t,d:this.getPolygonPath(e)}))}},{key:"renderConcentricPath",value:function(){var e=this,t=this.props,n=t.polarRadius,a=t.gridType;return n&&n.length?r.default.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(r,t){return"circle"===a?e.renderConcentricCircle(r,t):e.renderConcentricPolygon(r,t)})):null}},{key:"render",value:function(){return this.props.outerRadius<=0?null:r.default.createElement("g",{className:"recharts-polar-grid"},this.renderPolarAngles(),this.renderConcentricPath())}}]),n}(),s.displayName="PolarGrid",s.propTypes=f({},l.PRESENTATION_ATTRIBUTES,{cx:n.default.number,cy:n.default.number,innerRadius:n.default.number,outerRadius:n.default.number,polarAngles:n.default.arrayOf(n.default.number),polarRadius:n.default.arrayOf(n.default.number),gridType:n.default.oneOf(["polygon","circle"])}),s.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,gridType:"polygon"},u=p))||u;exports.default=b;
},{"react":8,"prop-types":96,"../util/PureRender":456,"../util/PolarUtils":464,"../util/ReactUtils":459}],504:[function(require,module,exports) {
var e=require("./_baseExtremum"),r=require("./_baseIteratee"),t=require("./_baseLt");function u(u,a){return u&&u.length?e(u,r(a,2),t):void 0}module.exports=u;
},{"./_baseExtremum":562,"./_baseIteratee":561,"./_baseLt":563}],505:[function(require,module,exports) {
var e=require("./_baseExtremum"),r=require("./_baseGt"),t=require("./_baseIteratee");function u(u,a){return u&&u.length?e(u,t(a,2),r):void 0}module.exports=u;
},{"./_baseExtremum":562,"./_baseGt":564,"./_baseIteratee":561}],357:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=g(e),r=require("lodash/minBy"),a=g(r),n=require("lodash/maxBy"),i=g(n),o=require("react"),u=g(o),l=require("prop-types"),c=g(l),s=require("../util/PureRender"),f=g(s),d=require("../component/Text"),p=g(d),y=require("../component/Label"),h=g(y),m=require("../container/Layer"),k=g(m),b=require("../util/ReactUtils"),x=require("../util/PolarUtils");function g(e){return e&&e.__esModule?e:{default:e}}var v,T,O,w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function E(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(0,f.default)((O=T=function(e){function r(){return P(this,r),q(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _(r,o.Component),A(r,[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,a=r.angle,n=r.cx,i=r.cy;return(0,x.polarToCartesian)(n,i,t,a)}},{key:"getTickTextAnchor",value:function(){var e=void 0;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,o=e.ticks,u=(0,i.default)(o,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:(0,a.default)(o,function(e){return e.coordinate||0}).coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.angle,n=e.ticks,i=e.axisLine,o=E(e,["cx","cy","angle","ticks","axisLine"]),l=n.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),c=(0,x.polarToCartesian)(t,r,l[0],a),s=(0,x.polarToCartesian)(t,r,l[1],a),f=w({},(0,b.getPresentationAttributes)(o),{fill:"none"},(0,b.getPresentationAttributes)(i),{x1:c.x,y1:c.y,x2:s.x,y2:s.y});return u.default.createElement("line",w({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTickItem",value:function(e,r,a){return u.default.isValidElement(e)?u.default.cloneElement(e,r):(0,t.default)(e)?e(r):u.default.createElement(p.default,w({},r,{className:"recharts-polar-radius-axis-tick-value"}),a)}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,a=t.tick,n=t.angle,i=t.tickFormatter,o=t.stroke,l=E(t,["ticks","tick","angle","tickFormatter","stroke"]),c=this.getTickTextAnchor(),s=(0,b.getPresentationAttributes)(l),f=(0,b.getPresentationAttributes)(a),d=r.map(function(t,r){var l=e.getTickValueCoord(t),d=w({textAnchor:c,transform:"rotate("+(90-n)+", "+l.x+", "+l.y+")"},s,{stroke:"none",fill:o},f,{index:r},l,{payload:t});return u.default.createElement(k.default,w({className:"recharts-polar-radius-axis-tick",key:"tick-"+r},(0,b.filterEventsOfChild)(e.props,t,r)),e.renderTickItem(a,d,i?i(t.value):t.value))});return u.default.createElement(k.default,{className:"recharts-polar-radius-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,a=e.tick;return t&&t.length?u.default.createElement(k.default,{className:"recharts-polar-radius-axis"},r&&this.renderAxisLine(),a&&this.renderTicks(),h.default.renderCallByParent(this.props,this.getViewBox())):null}}]),r}(),T.displayName="PolarRadiusAxis",T.axisType="radiusAxis",T.propTypes=w({},b.PRESENTATION_ATTRIBUTES,b.EVENT_ATTRIBUTES,{type:c.default.oneOf(["number","category"]),cx:c.default.number,cy:c.default.number,hide:c.default.bool,radiusAxisId:c.default.oneOfType([c.default.string,c.default.number]),angle:c.default.number,tickCount:c.default.number,ticks:c.default.arrayOf(c.default.shape({value:c.default.any,coordinate:c.default.number})),orientation:c.default.oneOf(["left","right","middle"]),axisLine:c.default.oneOfType([c.default.bool,c.default.object]),tick:c.default.oneOfType([c.default.bool,c.default.object,c.default.element,c.default.func]),stroke:c.default.string,tickFormatter:c.default.func,domain:c.default.arrayOf(c.default.oneOfType([c.default.number,c.default.oneOf(["auto","dataMin","dataMax"])])),scale:c.default.oneOfType([c.default.oneOf(["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utcTime","sequential","threshold"]),c.default.func]),allowDataOverflow:c.default.bool,allowDuplicatedCategory:c.default.bool}),T.defaultProps={type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,domain:[0,"auto"],allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0},v=O))||v;exports.default=C;
},{"lodash/isFunction":498,"lodash/minBy":504,"lodash/maxBy":505,"react":8,"prop-types":96,"../util/PureRender":456,"../component/Text":345,"../component/Label":347,"../container/Layer":341,"../util/ReactUtils":459,"../util/PolarUtils":464}],358:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=x(e),r=require("react"),a=x(r),n=require("prop-types"),i=x(n),o=require("../util/PureRender"),l=x(o),u=require("../container/Layer"),s=x(u),c=require("../util/ReactUtils"),f=require("../shape/Dot"),d=x(f),p=require("../shape/Polygon"),y=x(p),h=require("../component/Text"),b=x(h),m=require("../util/PolarUtils");function x(e){return e&&e.__esModule?e:{default:e}}var g,k,T,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},O=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L=Math.PI/180,_=1e-5,j=(0,l.default)((T=k=function(e){function n(){return E(this,n),A(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return P(n,r.Component),O(n,[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,a=t.cy,n=t.radius,i=t.orientation,o=t.tickLine,l=o&&o.size||8,u=(0,m.polarToCartesian)(r,a,n,e.coordinate),s=(0,m.polarToCartesian)(r,a,n+("inner"===i?-1:1)*l,e.coordinate);return{x1:u.x,y1:u.y,x2:s.x,y2:s.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*L);return r>_?"outer"===t?"start":"end":r<-_?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,i=e.axisLine,o=e.axisLineType,l=v({},(0,c.getPresentationAttributes)(this.props),{fill:"none"},(0,c.getPresentationAttributes)(i));if("circle"===o)return a.default.createElement(d.default,v({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var u=this.props.ticks.map(function(e){return(0,m.polarToCartesian)(t,r,n,e.coordinate)});return a.default.createElement(y.default,v({className:"recharts-polar-angle-axis-line"},l,{points:u}))}},{key:"renderTickItem",value:function(e,r,n){return a.default.isValidElement(e)?a.default.cloneElement(e,r):(0,t.default)(e)?e(r):a.default.createElement(b.default,v({},r,{className:"recharts-polar-angle-axis-tick-value"}),n)}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,n=t.tick,i=t.tickLine,o=t.tickFormatter,l=t.stroke,u=(0,c.getPresentationAttributes)(this.props),f=(0,c.getPresentationAttributes)(n),d=v({},u,{fill:"none"},(0,c.getPresentationAttributes)(i)),p=r.map(function(t,r){var p=e.getTickLineCoord(t),y=e.getTickTextAnchor(t),h=v({textAnchor:y},u,{stroke:"none",fill:l},f,{index:r,payload:t,x:p.x2,y:p.y2});return a.default.createElement(s.default,v({className:"recharts-polar-angle-axis-tick",key:"tick-"+r},(0,c.filterEventsOfChild)(e.props,t,r)),i&&a.default.createElement("line",v({className:"recharts-polar-angle-axis-tick-line"},d,p)),n&&e.renderTickItem(n,h,o?o(t.value):t.value))});return a.default.createElement(s.default,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,n=e.axisLine;return r<=0||!t||!t.length?null:a.default.createElement(s.default,{className:"recharts-polar-angle-axis"},n&&this.renderAxisLine(),this.renderTicks())}}]),n}(),k.displayName="PolarAngleAxis",k.axisType="angleAxis",k.propTypes=v({},c.PRESENTATION_ATTRIBUTES,c.EVENT_ATTRIBUTES,{type:i.default.oneOf(["number","category"]),angleAxisId:i.default.oneOfType([i.default.string,i.default.number]),dataKey:i.default.oneOfType([i.default.number,i.default.string,i.default.func]),cx:i.default.number,cy:i.default.number,radius:i.default.oneOfType([i.default.number,i.default.string]),hide:i.default.bool,scale:i.default.oneOfType([i.default.oneOf(c.SCALE_TYPES),i.default.func]),axisLine:i.default.oneOfType([i.default.bool,i.default.object]),axisLineType:i.default.oneOf(["polygon","circle"]),tickLine:i.default.oneOfType([i.default.bool,i.default.object]),tick:i.default.oneOfType([i.default.bool,i.default.func,i.default.object,i.default.element]),ticks:i.default.arrayOf(i.default.shape({value:i.default.any,coordinate:i.default.number})),stroke:i.default.string,orientation:i.default.oneOf(["inner","outer"]),tickFormatter:i.default.func,allowDuplicatedCategory:i.default.bool}),k.defaultProps={type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,domain:[0,"auto"],orientation:"outer",axisLine:!0,tickLine:!0,tick:!0,hide:!1,allowDuplicatedCategory:!0},g=T))||g;exports.default=j;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"../util/PureRender":456,"../container/Layer":341,"../util/ReactUtils":459,"../shape/Dot":353,"../shape/Polygon":352,"../component/Text":345,"../util/PolarUtils":464}],359:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=w(e),a=require("lodash/isPlainObject"),n=w(a),r=require("lodash/isFunction"),i=w(r),l=require("lodash/isNil"),u=w(l),o=require("react"),s=w(o),d=require("prop-types"),f=w(d),c=require("react-smooth"),p=w(c),m=require("classnames"),g=w(m),h=require("../util/PureRender"),y=w(h),v=require("../container/Layer"),A=w(v),b=require("../shape/Sector"),E=w(b),O=require("../shape/Curve"),P=w(O),R=require("../component/Text"),S=w(R),T=require("../component/Label"),x=w(T),q=require("../component/LabelList"),N=w(q),I=require("../component/Cell"),L=w(I),k=require("../util/ReactUtils"),D=require("../util/PolarUtils"),K=require("../util/DataUtils"),_=require("../util/ChartUtils"),j=require("../util/LogUtils");function w(e){return e&&e.__esModule?e:{default:e}}var B,C,V,M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},U=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Y=(0,y.default)((V=C=function(e){function a(){var e,t,n;F(this,a);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=n=W(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),n.state={isAnimationFinished:!1,isAnimationStarted:!1},n.id=(0,K.uniqueId)("recharts-pie-"),n.cachePrevData=function(e){n.setState({prevSectors:e})},n.handleAnimationEnd=function(){n.setState({isAnimationFinished:!0})},n.handleAnimationStart=function(){n.setState({isAnimationStarted:!0})},W(n,t)}return G(a,o.Component),U(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.sectors;e.isAnimationActive!==this.props.isAnimationActive?this.cachePrevData([]):e.animationId!==a&&this.cachePrevData(n)}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"renderLabelLineItem",value:function(e,t){return s.default.isValidElement(e)?s.default.cloneElement(e,t):(0,i.default)(e)?e(t):s.default.createElement(P.default,M({},t,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(e,t,a){if(s.default.isValidElement(e))return s.default.cloneElement(e,t);var n=a;return(0,i.default)(e)&&(n=e(t),s.default.isValidElement(n))?n:s.default.createElement(S.default,M({},t,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),n)}},{key:"renderLabels",value:function(e){var t=this;if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,n=a.label,r=a.labelLine,i=a.dataKey,l=a.valueKey,o=(0,k.getPresentationAttributes)(this.props),d=(0,k.getPresentationAttributes)(n),f=(0,k.getPresentationAttributes)(r),c=n&&n.offsetRadius||20,p=e.map(function(e,a){var p=(e.startAngle+e.endAngle)/2,m=(0,D.polarToCartesian)(e.cx,e.cy,e.outerRadius+c,p),g=M({},o,e,{stroke:"none"},d,{index:a,textAnchor:t.getTextAnchor(m.x,e.cx)},m),h=M({},o,e,{fill:"none",stroke:e.fill},f,{index:a,points:[(0,D.polarToCartesian)(e.cx,e.cy,e.outerRadius,p),m]}),y=i;return(0,u.default)(i)&&(0,u.default)(l)?y="value":(0,u.default)(i)&&(y=l),s.default.createElement(A.default,{key:"label-"+a},r&&t.renderLabelLineItem(r,h),t.renderLabelItem(n,g,(0,_.getValueByDataKey)(e,y)))});return s.default.createElement(A.default,{className:"recharts-pie-labels"},p)}},{key:"renderSectorItem",value:function(e,t){return s.default.isValidElement(e)?s.default.cloneElement(e,t):(0,i.default)(e)?e(t):(0,n.default)(e)?s.default.createElement(E.default,M({},t,e)):s.default.createElement(E.default,t)}},{key:"renderSectorsStatically",value:function(e){var t=this,a=this.props.activeShape;return e.map(function(e,n){return s.default.createElement(A.default,M({className:"recharts-pie-sector"},(0,k.filterEventsOfChild)(t.props,e,n),{key:"sector-"+n}),t.renderSectorItem(t.isActiveIndex(n)?a:null,e))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,a=t.sectors,n=t.isAnimationActive,r=t.animationBegin,i=t.animationDuration,l=t.animationEasing,u=t.animationId,o=this.state.prevSectors;return s.default.createElement(p.default,{begin:r,duration:i,isActive:n,easing:l,from:{t:0},to:{t:1},key:"pie-"+u,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,r=[],i=(a&&a[0]).startAngle;return a.forEach(function(e,t){var a=o&&o[t],l=t>0?e.paddingAngle:0;if(a){var u=(0,K.interpolateNumber)(a.endAngle-a.startAngle,e.endAngle-e.startAngle),s=M({},e,{startAngle:i+l,endAngle:i+u(n)+l});r.push(s),i=s.endAngle}else{var d=e.endAngle,f=e.startAngle,c=(0,K.interpolateNumber)(0,d-f)(n),p=M({},e,{startAngle:i+l,endAngle:i+c+l});r.push(p),i=p.endAngle}}),s.default.createElement(A.default,null,e.renderSectorsStatically(r))})}},{key:"renderSectors",value:function(){var e=this.props,a=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&a&&a.length)||r&&(0,t.default)(r,a)?this.renderSectorsStatically(a):this.renderSectorsWithAnimation()}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.sectors,n=e.className,r=e.label,i=e.cx,l=e.cy,o=e.innerRadius,d=e.outerRadius,f=e.isAnimationActive,c=e.id;if(t||!a||!a.length||!(0,K.isNumber)(i)||!(0,K.isNumber)(l)||!(0,K.isNumber)(o)||!(0,K.isNumber)(d))return null;var p=this.state.isAnimationFinished,m=(0,g.default)("recharts-pie",n);return s.default.createElement(A.default,{className:m},s.default.createElement("g",{clipPath:"url(#"+((0,u.default)(c)?this.id:c)+")"},this.renderSectors()),r&&this.renderLabels(a),x.default.renderCallByParent(this.props,null,!1),(!f||p)&&N.default.renderCallByParent(this.props,a,!1))}}]),a}(),C.displayName="Pie",C.propTypes=M({},k.PRESENTATION_ATTRIBUTES,k.EVENT_ATTRIBUTES,{className:f.default.string,animationId:f.default.number,cx:f.default.oneOfType([f.default.number,f.default.string]),cy:f.default.oneOfType([f.default.number,f.default.string]),startAngle:f.default.number,endAngle:f.default.number,paddingAngle:f.default.number,innerRadius:f.default.oneOfType([f.default.number,f.default.string]),outerRadius:f.default.oneOfType([f.default.number,f.default.string]),cornerRadius:f.default.oneOfType([f.default.number,f.default.string]),dataKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]).isRequired,nameKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]),valueKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]),data:f.default.arrayOf(f.default.object),minAngle:f.default.number,legendType:f.default.oneOf(k.LEGEND_TYPES),maxRadius:f.default.number,sectors:f.default.arrayOf(f.default.object),hide:f.default.bool,labelLine:f.default.oneOfType([f.default.object,f.default.func,f.default.element,f.default.bool]),label:f.default.oneOfType([f.default.shape({offsetRadius:f.default.number}),f.default.func,f.default.element,f.default.bool]),activeShape:f.default.oneOfType([f.default.object,f.default.func,f.default.element]),activeIndex:f.default.oneOfType([f.default.number,f.default.arrayOf(f.default.number)]),isAnimationActive:f.default.bool,animationBegin:f.default.number,animationDuration:f.default.number,animationEasing:f.default.oneOf(["ease","ease-in","ease-out","ease-in-out","spring","linear"]),id:f.default.string}),C.defaultProps={stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!(0,k.isSsr)(),animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name"},C.parseDeltaAngle=function(e){var t=e.startAngle,a=e.endAngle;return(0,K.mathSign)(a-t)*Math.min(Math.abs(a-t),360)},C.getRealPieData=function(e){var t=e.props,a=t.data,n=t.children,r=(0,k.getPresentationAttributes)(e.props),i=(0,k.findAllByType)(n,L.default);return a&&a.length?a.map(function(e,t){return M({payload:e},r,e,i&&i[t]&&i[t].props)}):i&&i.length?i.map(function(e){return M({},r,e.props)}):[]},C.parseCoordinateOfPie=function(e,t){var a=t.top,n=t.left,r=t.width,i=t.height,l=(0,D.getMaxRadius)(r,i);return{cx:n+(0,K.getPercentValue)(e.props.cx,r,r/2),cy:a+(0,K.getPercentValue)(e.props.cy,i,i/2),innerRadius:(0,K.getPercentValue)(e.props.innerRadius,l,0),outerRadius:(0,K.getPercentValue)(e.props.outerRadius,l,.8*l),maxRadius:e.props.maxRadius||Math.sqrt(r*r+i*i)/2}},C.getComposedData=function(e){var t=e.item,a=e.offset,n=e.onItemMouseLeave,r=e.onItemMouseEnter,i=Y.getRealPieData(t);if(!i||!i.length)return[];var l=t.props,o=l.cornerRadius,s=l.startAngle,d=l.endAngle,f=l.paddingAngle,c=l.dataKey,p=l.nameKey,m=l.valueKey,g=Math.abs(t.props.minAngle),h=Y.parseCoordinateOfPie(t,a),y=i.length,v=Y.parseDeltaAngle({startAngle:s,endAngle:d}),A=Math.abs(v),b=A-y*g-(A>=360?y:y-1)*f,E=c;(0,u.default)(c)&&(0,u.default)(m)?((0,j.warn)(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),E="value"):(0,u.default)(c)&&((0,j.warn)(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),E=m);var O=i.reduce(function(e,t){var a=(0,_.getValueByDataKey)(t,E,0);return e+((0,K.isNumber)(a)?a:0)},0),P=void 0;if(O>0){var R=void 0;P=i.map(function(e,t){var a=(0,_.getValueByDataKey)(e,E,0),n=(0,_.getValueByDataKey)(e,p,t),r=((0,K.isNumber)(a)?a:0)/O,i=void 0,l=(i=t?R.endAngle+(0,K.mathSign)(v)*f:s)+(0,K.mathSign)(v)*(g+r*b),u=(i+l)/2,d=(h.innerRadius+h.outerRadius)/2,c=[{name:n,value:a,payload:e}],m=(0,D.polarToCartesian)(h.cx,h.cy,d,u);return R=M({percent:r,cornerRadius:o,name:n,tooltipPayload:c,midAngle:u,middleRadius:d,tooltipPosition:m},e,h,{value:(0,_.getValueByDataKey)(e,E),startAngle:i,endAngle:l,payload:e,paddingAngle:(0,K.mathSign)(v)*f})})}return M({},h,{sectors:P,data:i,onMouseLeave:n,onMouseEnter:r})},B=V))||B;exports.default=Y;
},{"lodash/isEqual":507,"lodash/isPlainObject":508,"lodash/isFunction":498,"lodash/isNil":497,"react":8,"prop-types":96,"react-smooth":506,"classnames":495,"../util/PureRender":456,"../container/Layer":341,"../shape/Sector":349,"../shape/Curve":350,"../component/Text":345,"../component/Label":347,"../component/LabelList":348,"../component/Cell":346,"../util/ReactUtils":459,"../util/PolarUtils":464,"../util/DataUtils":458,"../util/ChartUtils":462,"../util/LogUtils":463}],360:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=D(e),a=require("lodash/isFunction"),n=D(a),r=require("react"),i=D(r),o=require("prop-types"),u=D(o),l=require("react-smooth"),s=D(l),d=require("classnames"),f=D(d),c=require("../util/DataUtils"),p=require("../util/PureRender"),m=D(p),y=require("../util/ReactUtils"),h=require("../util/PolarUtils"),v=require("../util/ChartUtils"),b=require("../shape/Polygon"),g=D(b),A=require("../shape/Dot"),E=D(A),P=require("../container/Layer"),O=D(P),x=require("../component/LabelList"),T=D(x);function D(e){return e&&e.__esModule?e:{default:e}}var q,S,N,_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(0,m.default)((N=S=function(e){function a(){var e,t,n;I(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=M(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),n.state={isAnimationFinished:!1},n.cachePrevData=function(e){n.setState({prevPoints:e})},n.handleAnimationEnd=function(){n.setState({isAnimationFinished:!0})},n.handleAnimationStart=function(){n.setState({isAnimationFinished:!1})},n.handleMouseEnter=function(e){var t=n.props.onMouseEnter;t&&t(n.props,e)},n.handleMouseLeave=function(e){var t=n.props.onMouseLeave;t&&t(n.props,e)},M(n,t)}return k(a,r.Component),j(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.points;e.animationId!==a&&this.cachePrevData(n)}},{key:"renderDotItem",value:function(e,t){return i.default.isValidElement(e)?i.default.cloneElement(e,t):(0,n.default)(e)?e(t):i.default.createElement(E.default,_({},t,{className:"recharts-radar-dot"}))}},{key:"renderDots",value:function(e){var t=this,a=this.props,n=a.dot,r=a.dataKey,o=(0,y.getPresentationAttributes)(this.props),u=(0,y.getPresentationAttributes)(n),l=e.map(function(e,a){var i=_({key:"dot-"+a,r:3},o,u,{dataKey:r,cx:e.x,cy:e.y,index:a,playload:e});return t.renderDotItem(n,i)});return i.default.createElement(O.default,{className:"recharts-radar-dots"},l)}},{key:"renderPolygonStatically",value:function(e){var t=this.props,a=t.shape,r=t.dot,o=void 0;return o=i.default.isValidElement(a)?i.default.cloneElement(a,_({},this.props,{points:e})):(0,n.default)(a)?a(_({},this.props,{points:e})):i.default.createElement(g.default,_({},(0,y.filterEventAttributes)(this.props),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},(0,y.getPresentationAttributes)(this.props),{points:e})),i.default.createElement(O.default,{className:"recharts-radar-polygon"},o,r?this.renderDots(e):null)}},{key:"renderPolygonWithAnimation",value:function(){var e=this,t=this.props,a=t.points,n=t.isAnimationActive,r=t.animationBegin,o=t.animationDuration,u=t.animationEasing,l=t.animationId,d=this.state.prevPoints;return i.default.createElement(s.default,{begin:r,duration:o,isActive:n,easing:u,from:{t:0},to:{t:1},key:"radar-"+l,onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var n=t.t,r=a.map(function(e,t){var a=d&&d[t];if(a){var r=(0,c.interpolateNumber)(a.x,e.x),i=(0,c.interpolateNumber)(a.y,e.y);return _({},e,{x:r(n),y:i(n)})}var o=(0,c.interpolateNumber)(e.cx,e.x),u=(0,c.interpolateNumber)(e.cy,e.y);return _({},e,{x:o(n),y:u(n)})});return e.renderPolygonStatically(r)})}},{key:"renderPolygon",value:function(){var e=this.props,a=e.points,n=e.isAnimationActive,r=this.state.prevPoints;return!(n&&a&&a.length)||r&&(0,t.default)(r,a)?this.renderPolygonStatically(a):this.renderPolygonWithAnimation()}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.className,n=e.points,r=e.isAnimationActive;if(t||!n||!n.length)return null;var o=this.state.isAnimationFinished,u=(0,f.default)("recharts-radar",a);return i.default.createElement(O.default,{className:u},this.renderPolygon(),(!r||o)&&T.default.renderCallByParent(this.props,n))}}]),a}(),S.displayName="Radar",S.propTypes=_({},y.PRESENTATION_ATTRIBUTES,{className:u.default.string,dataKey:u.default.oneOfType([u.default.number,u.default.string,u.default.func]).isRequired,angleAxisId:u.default.oneOfType([u.default.string,u.default.number]),radiusAxisId:u.default.oneOfType([u.default.string,u.default.number]),points:u.default.arrayOf(u.default.shape({x:u.default.number,y:u.default.number,cx:u.default.number,cy:u.default.number,angle:u.default.number,radius:u.default.number,value:u.default.number,payload:u.default.object})),shape:u.default.oneOfType([u.default.element,u.default.func]),activeDot:u.default.oneOfType([u.default.object,u.default.element,u.default.func,u.default.bool]),dot:u.default.oneOfType([u.default.object,u.default.element,u.default.func,u.default.bool]),label:u.default.oneOfType([u.default.element,u.default.func,u.default.object,u.default.bool]),legendType:u.default.oneOf(y.LEGEND_TYPES),hide:u.default.bool,onMouseEnter:u.default.func,onMouseLeave:u.default.func,onClick:u.default.func,isAnimationActive:u.default.bool,animationId:u.default.number,animationBegin:u.default.number,animationDuration:u.default.number,animationEasing:u.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"])}),S.defaultProps={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!(0,y.isSsr)(),animationBegin:0,animationDuration:1500,animationEasing:"ease"},S.getComposedData=function(e){var t=e.radiusAxis,a=e.angleAxis,n=e.displayedData,r=e.dataKey,i=e.bandSize,o=a.cx,u=a.cy;return{points:n.map(function(e,n){var l=(0,v.getValueByDataKey)(e,a.dataKey,n),s=(0,v.getValueByDataKey)(e,r,0),d=a.scale(l)+(i||0),f=t.scale(s);return _({},(0,h.polarToCartesian)(o,u,f,d),{name:l,value:s,cx:o,cy:u,radius:f,angle:d,payload:e})})}},q=N))||q;exports.default=w;
},{"lodash/isEqual":507,"lodash/isFunction":498,"react":8,"prop-types":96,"react-smooth":506,"classnames":495,"../util/DataUtils":458,"../util/PureRender":456,"../util/ReactUtils":459,"../util/PolarUtils":464,"../util/ChartUtils":462,"../shape/Polygon":352,"../shape/Dot":353,"../container/Layer":341,"../component/LabelList":348}],361:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=T(e),a=require("lodash/isFunction"),n=T(a),r=require("lodash/isArray"),i=T(r),u=require("react"),o=T(u),l=require("prop-types"),s=T(l),d=require("classnames"),c=T(d),f=require("react-smooth"),p=T(f),h=require("../shape/Sector"),m=T(h),b=require("../container/Layer"),v=T(b),g=require("../util/ReactUtils"),y=require("../util/PureRender"),A=T(y),S=require("../component/LabelList"),O=T(S),k=require("../component/Cell"),x=T(k),E=require("../util/DataUtils"),P=require("../util/ChartUtils");function T(e){return e&&e.__esModule?e:{default:e}}var R,B,q,D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},M=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function N(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=(0,A.default)((q=B=function(e){function a(){var e,t,n;_(this,a);for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];return t=n=j(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),n.state={isAnimationFinished:!1},n.cachePrevData=function(e){n.setState({prevData:e})},n.handleAnimationEnd=function(){n.setState({isAnimationFinished:!0})},n.handleAnimationStart=function(){n.setState({isAnimationFinished:!1})},j(n,t)}return C(a,u.Component),M(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.data;e.animationId!==a&&this.cachePrevData(n)}},{key:"getDeltaAngle",value:function(){var e=this.props,t=e.startAngle,a=e.endAngle;return(0,E.mathSign)(a-t)*Math.min(Math.abs(a-t),360)}},{key:"renderSectorShape",value:function(e,t){return o.default.isValidElement(e)?o.default.cloneElement(e,t):(0,n.default)(e)?e(t):o.default.createElement(m.default,t)}},{key:"renderSectorsStatically",value:function(e){var t=this,a=this.props,n=a.shape,r=a.activeShape,i=a.activeIndex,u=a.cornerRadius,o=N(a,["shape","activeShape","activeIndex","cornerRadius"]),l=(0,g.getPresentationAttributes)(o);return e.map(function(e,a){var o=D({},l,{cornerRadius:u},e,(0,g.filterEventsOfChild)(t.props,e,a),{key:"sector-"+a,className:"recharts-radial-bar-sector"});return t.renderSectorShape(a===i?r:n,o)})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,a=t.data,n=t.isAnimationActive,r=t.animationBegin,i=t.animationDuration,u=t.animationEasing,l=t.animationId,s=this.state.prevData;return o.default.createElement(p.default,{begin:r,duration:i,isActive:n,easing:u,from:{t:0},to:{t:1},key:"radialBar-"+l,onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,r=a.map(function(e,t){var a=s&&s[t];if(a){var r=(0,E.interpolateNumber)(a.startAngle,e.startAngle),i=(0,E.interpolateNumber)(a.endAngle,e.endAngle);return D({},e,{startAngle:r(n),endAngle:i(n)})}var u=e.endAngle,o=e.startAngle,l=(0,E.interpolateNumber)(o,u);return D({},e,{endAngle:l(n)})});return o.default.createElement(v.default,null,e.renderSectorsStatically(r))})}},{key:"renderSectors",value:function(){var e=this.props,a=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&a&&a.length)||r&&(0,t.default)(r,a)?this.renderSectorsStatically(a):this.renderSectorsWithAnimation()}},{key:"renderBackground",value:function(e){var t=this,a=this.props.cornerRadius,n=(0,g.getPresentationAttributes)(this.props.background);return e.map(function(e,r){e.value;var i=e.background,u=N(e,["value","background"]);if(!i)return null;var o=D({cornerRadius:a},u,{fill:"#eee"},i,n,(0,g.filterEventsOfChild)(t.props,e,r),{index:r,key:"sector-"+r,className:"recharts-radial-bar-background-sector"});return t.renderSectorShape(i,o)})}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.data,n=e.className,r=e.background,i=e.isAnimationActive;if(t||!a||!a.length)return null;var u=this.state.isAnimationFinished,l=(0,c.default)("recharts-area",n);return o.default.createElement(v.default,{className:l},r&&o.default.createElement(v.default,{className:"recharts-radial-bar-background"},this.renderBackground(a)),o.default.createElement(v.default,{className:"recharts-radial-bar-sectors"},this.renderSectors(a)),(!i||u)&&O.default.renderCallByParent(D({},this.props,{clockWise:this.getDeltaAngle()<0}),a))}}]),a}(),B.displayName="RadialBar",B.propTypes=D({},g.PRESENTATION_ATTRIBUTES,{className:s.default.string,angleAxisId:s.default.oneOfType([s.default.string,s.default.number]),radiusAxisId:s.default.oneOfType([s.default.string,s.default.number]),shape:s.default.oneOfType([s.default.func,s.default.element]),activeShape:s.default.oneOfType([s.default.object,s.default.func,s.default.element]),activeIndex:s.default.number,dataKey:s.default.oneOfType([s.default.string,s.default.number,s.default.func]).isRequired,cornerRadius:s.default.oneOfType([s.default.number,s.default.string]),minPointSize:s.default.number,maxBarSize:s.default.number,data:s.default.arrayOf(s.default.shape({cx:s.default.number,cy:s.default.number,innerRadius:s.default.number,outerRadius:s.default.number,value:s.default.value})),legendType:s.default.oneOf(g.LEGEND_TYPES),label:s.default.oneOfType([s.default.bool,s.default.func,s.default.element,s.default.object]),background:s.default.oneOfType([s.default.bool,s.default.func,s.default.object,s.default.element]),hide:s.default.bool,onMouseEnter:s.default.func,onMouseLeave:s.default.func,onClick:s.default.func,isAnimationActive:s.default.bool,animationBegin:s.default.number,animationDuration:s.default.number,animationEasing:s.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear","spring"])}),B.defaultProps={angleAxisId:0,radiusAxisId:0,minPointSize:0,hide:!1,legendType:"rect",data:[],isAnimationActive:!(0,g.isSsr)(),animationBegin:0,animationDuration:1500,animationEasing:"ease"},B.getComposedData=function(e){var t=e.item,a=e.props,n=e.radiusAxis,r=e.radiusAxisTicks,u=e.angleAxis,o=e.angleAxisTicks,l=e.displayedData,s=e.dataKey,d=e.stackedData,c=e.barPosition,f=e.bandSize,p=e.dataStartIndex,h=(0,P.findPositionOfBar)(c,t);if(!h)return[];var m=u.cx,b=u.cy,v=a.layout,y=t.props,A=y.children,S=y.minPointSize,O="radial"===v?u:n,k=d?O.scale.domain():null,T=(0,P.getBaseValueOfBar)({props:a,numericAxis:O}),R=(0,g.findAllByType)(A,x.default);return{data:l.map(function(e,t){var l=void 0,c=void 0,g=void 0,y=void 0,A=void 0,O=void 0;if(d?l=(0,P.truncateByDomain)(d[p+t],k):(l=(0,P.getValueByDataKey)(e,s),(0,i.default)(l)||(l=[T,l])),"radial"===v){c=(0,P.getCateCoordinateOfBar)({axis:n,ticks:r,bandSize:f,offset:h.offset,entry:e,index:t}),A=u.scale(l[1]),y=u.scale(l[0]),g=c+h.size;var x=A-y;if(Math.abs(S)>0&&Math.abs(x)<Math.abs(S))A+=(0,E.mathSign)(x||S)*(Math.abs(S)-Math.abs(x));O={background:{cx:m,cy:b,innerRadius:c,outerRadius:g,startAngle:a.startAngle,endAngle:a.endAngle}}}else{c=n.scale(l[0]),g=n.scale(l[1]),A=(y=(0,P.getCateCoordinateOfBar)({axis:u,ticks:o,bandSize:f,offset:h.offset,entry:e,index:t}))+h.size;var B=g-c;if(Math.abs(S)>0&&Math.abs(B)<Math.abs(S))g+=(0,E.mathSign)(B||S)*(Math.abs(S)-Math.abs(B))}return D({},e,O,{payload:e,value:d?l:l[1],cx:m,cy:b,innerRadius:c,outerRadius:g,startAngle:y,endAngle:A},R&&R[t]&&R[t].props)}),layout:v}},R=q))||R;exports.default=I;
},{"lodash/isEqual":507,"lodash/isFunction":498,"lodash/isArray":502,"react":8,"prop-types":96,"classnames":495,"react-smooth":506,"../shape/Sector":349,"../container/Layer":341,"../util/ReactUtils":459,"../util/PureRender":456,"../component/LabelList":348,"../component/Cell":346,"../util/DataUtils":458,"../util/ChartUtils":462}],663:[function(require,module,exports) {
var r=Math.ceil,a=Math.max;function t(t,e,o,n){for(var u=-1,c=a(r((e-t)/(o||1)),0),f=Array(c);c--;)f[n?c:++u]=t,t+=o;return f}module.exports=t;
},{}],664:[function(require,module,exports) {
var e=require("./toNumber"),r=1/0,u=1.7976931348623157e308;function o(o){return o?(o=e(o))===r||o===-r?(o<0?-1:1)*u:o==o?o:0:0===o?o:0}module.exports=o;
},{"./toNumber":560}],566:[function(require,module,exports) {
var e=require("./_baseRange"),r=require("./_isIterateeCall"),i=require("./toFinite");function t(t){return function(n,o,u){return u&&"number"!=typeof u&&r(n,o,u)&&(o=u=void 0),n=i(n),void 0===o?(o=n,n=0):o=i(o),u=void 0===u?n<o?1:-1:i(u),e(n,o,u,t)}}module.exports=t;
},{"./_baseRange":663,"./_isIterateeCall":655,"./toFinite":664}],509:[function(require,module,exports) {
var e=require("./_createRange"),r=e();module.exports=r;
},{"./_createRange":566}],465:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};function r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var t=["Webkit","Moz","O","ms"],n=exports.generatePrefixStyle=function(n,u){if(!n)return null;var o=n.replace(/(\w)/,function(e){return e.toUpperCase()}),a=t.reduce(function(t,n){return e({},t,r({},n+o,u))},{});return a[n]=u,a};
},{}],362:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/range"),t=T(e),a=require("lodash/isFunction"),r=T(a),n=require("react"),l=T(n),i=require("prop-types"),s=T(i),d=require("classnames"),u=T(d),o=require("d3-scale"),h=require("../util/ChartUtils"),c=require("../util/PureRender"),f=T(c),v=require("../container/Layer"),g=T(v),p=require("../component/Text"),m=T(p),x=require("../util/DataUtils"),y=require("../util/CssPrefixUtils");function T(e){return e&&e.__esModule?e:{default:e}}var b,S,M,X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=(0,f.default)((M=S=function(e){function a(e){w(this,a);var t=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleDrag=function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])},t.handleDragEnd=function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1})},t.handleLeaveWrapper=function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=setTimeout(t.handleDragEnd,1e3))},t.handleEnterSlideOrTraveller=function(){t.setState({isTextActive:!0})},t.handleLeaveSlideOrTraveller=function(){t.setState({isTextActive:!1})},t.handleSlideDragStart=function(e){var a=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX})},t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state=e.data&&e.data.length?t.updateScale(e):{},t}return O(a,n.Component),k(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,r=a.data,n=a.width,l=a.x,i=a.travellerWidth,s=a.updateId;(e.data!==r||e.updateId!==s)&&e.data&&e.data.length?this.setState(this.updateScale(e)):e.width===n&&e.x===l&&e.travellerWidth===i||(this.scale.range([e.x,e.x+e.width-e.travellerWidth]),this.scaleValues=this.scale.domain().map(function(e){return t.scale(e)}),this.setState({startX:this.scale(e.startIndex),endX:this.scale(e.endIndex)}))}},{key:"componentWillUnmount",value:function(){this.scale=null,this.scaleValues=null,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)}},{key:"getIndexInRange",value:function(e,t){for(var a=0,r=e.length-1;r-a>1;){var n=Math.floor((a+r)/2);e[n]>t?r=n:a=n}return t>=e[r]?r:a}},{key:"getIndex",value:function(e){var t=e.startX,a=e.endX,r=this.props,n=r.gap,l=r.data.length-1,i=Math.min(t,a),s=Math.max(t,a),d=this.getIndexInRange(this.scaleValues,i),u=this.getIndexInRange(this.scaleValues,s);return{startIndex:d-d%n,endIndex:u===l?l:u-u%n}}},{key:"getTextOfTick",value:function(e){var t=this.props,a=t.data,n=t.tickFormatter,l=t.dataKey,i=(0,h.getValueByDataKey)(a[e],l,e);return(0,r.default)(n)?n(i):i}},{key:"handleSlideDrag",value:function(e){var t=this.state,a=t.slideMoveStartX,r=t.startX,n=t.endX,l=this.props,i=l.x,s=l.width,d=l.travellerWidth,u=l.startIndex,o=l.endIndex,h=l.onChange,c=e.pageX-a;c>0?c=Math.min(c,i+s-d-n,i+s-d-r):c<0&&(c=Math.max(c,i-r,i-n));var f=this.getIndex({startX:r+c,endX:n+c});f.startIndex===u&&f.endIndex===o||!h||h(f),this.setState({startX:r+c,endX:n+c,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var a=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:a.pageX})}},{key:"handleTravellerMove",value:function(e){var t,a=this.state,r=a.brushMoveStartX,n=a.movingTravellerId,l=a.endX,i=a.startX,s=this.state[n],d=this.props,u=d.x,o=d.width,h=d.travellerWidth,c=d.onChange,f=d.gap,v=d.data,g={startX:this.state.startX,endX:this.state.endX},p=e.pageX-r;p>0?p=Math.min(p,u+o-h-s):p<0&&(p=Math.max(p,u-s)),g[n]=s+p;var m=this.getIndex(g),x=m.startIndex,y=m.endIndex;this.setState((I(t={},n,s+p),I(t,"brushMoveStartX",e.pageX),t),function(){var e;c&&(e=v.length-1,("startX"===n&&(l>i?x%f==0:y%f==0)||l<i&&y===e||"endX"===n&&(l>i?y%f==0:x%f==0)||l>i&&y===e)&&c(m))})}},{key:"updateScale",value:function(e){var a=this,r=e.data,n=e.startIndex,l=e.endIndex,i=e.x,s=e.width,d=e.travellerWidth,u=r.length;return this.scale=(0,o.scalePoint)().domain((0,t.default)(0,u)).range([i,i+s-d]),this.scaleValues=this.scale.domain().map(function(e){return a.scale(e)}),{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:this.scale(n),endX:this.scale(l)}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,a=e.y,r=e.width,n=e.height,i=e.fill,s=e.stroke;return l.default.createElement("rect",{stroke:s,fill:i,x:t,y:a,width:r,height:n})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,a=e.y,r=e.width,i=e.height,s=e.data,d=e.children,u=e.padding,o=n.Children.only(d);return o?l.default.cloneElement(o,{x:t,y:a,width:r,height:i,margin:u,compact:!0,data:s}):null}},{key:"renderTraveller",value:function(e,t){var a=this.props,r=a.y,n=a.travellerWidth,i=a.height,s=a.stroke,d=Math.floor(r+i/2)-1,u=Math.max(e,this.props.x);return l.default.createElement(g.default,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],style:{cursor:"col-resize"}},l.default.createElement("rect",{x:u,y:r,width:n,height:i,fill:s,stroke:"none"}),l.default.createElement("line",{x1:u+1,y1:d,x2:u+n-1,y2:d,fill:"none",stroke:"#fff"}),l.default.createElement("line",{x1:u+1,y1:d+2,x2:u+n-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderSlide",value:function(e,t){var a=this.props,r=a.y,n=a.height,i=a.stroke;return l.default.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:Math.min(e,t),y:r,width:Math.abs(t-e),height:n})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,a=e.endIndex,r=e.y,n=e.height,i=e.travellerWidth,s=e.stroke,d=this.state,u=d.startX,o=d.endX,h={pointerEvents:"none",fill:s};return l.default.createElement(g.default,{className:"recharts-brush-texts"},l.default.createElement(m.default,X({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,o)-5,y:r+n/2},h),this.getTextOfTick(t)),l.default.createElement(m.default,X({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,o)+i+5,y:r+n/2},h),this.getTextOfTick(a)))}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.className,r=e.children,n=e.x,i=e.y,s=e.width,d=e.height,o=this.state,h=o.startX,c=o.endX,f=o.isTextActive,v=o.isSlideMoving,p=o.isTravellerMoving;if(!t||!t.length||!(0,x.isNumber)(n)||!(0,x.isNumber)(i)||!(0,x.isNumber)(s)||!(0,x.isNumber)(d)||s<=0||d<=0)return null;var m=(0,u.default)("recharts-brush",a),T=1===l.default.Children.count(r),b=(0,y.generatePrefixStyle)("userSelect","none");return l.default.createElement(g.default,{className:m,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(h,c),this.renderTraveller(h,"startX"),this.renderTraveller(c,"endX"),(f||v||p)&&this.renderText())}}]),a}(),S.displayName="Brush",S.propTypes={className:s.default.string,fill:s.default.string,stroke:s.default.string,x:s.default.number,y:s.default.number,width:s.default.number,height:s.default.number.isRequired,travellerWidth:s.default.number,gap:s.default.number,padding:s.default.shape({top:s.default.number,right:s.default.number,bottom:s.default.number,left:s.default.number}),dataKey:s.default.oneOfType([s.default.string,s.default.number,s.default.func]),data:s.default.array,startIndex:s.default.number,endIndex:s.default.number,tickFormatter:s.default.func,children:s.default.node,onChange:s.default.func,updateId:s.default.oneOfType([s.default.string,s.default.number])},S.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1}},b=M))||b;exports.default=D;
},{"lodash/range":509,"lodash/isFunction":498,"react":8,"prop-types":96,"classnames":495,"d3-scale":514,"../util/ChartUtils":462,"../util/PureRender":456,"../container/Layer":341,"../component/Text":345,"../util/DataUtils":458,"../util/CssPrefixUtils":465}],366:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=g(e),i=require("react"),r=g(i),n=require("prop-types"),o=g(n),a=require("classnames"),c=g(a),u=require("../util/PureRender"),l=require("../util/DOMUtils"),s=require("../container/Layer"),d=g(s),f=require("../component/Text"),h=g(f),k=require("../component/Label"),p=g(k),v=require("../util/ReactUtils"),m=require("../util/DataUtils");function g(e){return e&&e.__esModule?e:{default:e}}var b,y,w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},x=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function T(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(y=b=function(e){function n(){return S(this,n),E(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return C(n,i.Component),x(n,[{key:"shouldComponentUpdate",value:function(e,t){var i=e.viewBox,r=T(e,["viewBox"]),n=this.props,o=n.viewBox,a=T(n,["viewBox"]);return!(0,u.shallowEqual)(i,o)||!(0,u.shallowEqual)(r,a)||!(0,u.shallowEqual)(t,this.state)}},{key:"getTickLineCoord",value:function(e){var t=this.props,i=t.x,r=t.y,n=t.width,o=t.height,a=t.orientation,c=t.tickSize,u=t.mirror,l=t.tickMargin,s=void 0,d=void 0,f=void 0,h=void 0,k=void 0,p=void 0,v=u?-1:1,g=e.tickSize||c,b=(0,m.isNumber)(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":s=d=e.coordinate,p=(f=(h=r+!u*o)-v*g)-v*l,k=b;break;case"left":f=h=e.coordinate,k=(s=(d=i+!u*n)-v*g)-v*l,p=b;break;case"right":f=h=e.coordinate,k=(s=(d=i+u*n)+v*g)+v*l,p=b;break;default:s=d=e.coordinate,p=(f=(h=r+u*o)+v*g)+v*l,k=b}return{line:{x1:s,y1:f,x2:d,y2:h},tick:{x:k,y:p}}}},{key:"getTickTextAnchor",value:function(){var e=this.props,t=e.orientation,i=e.mirror,r=void 0;switch(t){case"left":r=i?"start":"end";break;case"right":r=i?"end":"start";break;default:r="middle"}return r}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,i=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=i?"start":"end";break;default:r=i?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,i=e.y,n=e.width,o=e.height,a=e.orientation,c=e.axisLine,u=e.mirror,l=w({},(0,v.getPresentationAttributes)(this.props),{fill:"none"},(0,v.getPresentationAttributes)(c));if("top"===a||"bottom"===a){var s="top"===a&&!u||"bottom"===a&&u;l=w({},l,{x1:t,y1:i+s*o,x2:t+n,y2:i+s*o})}else{var d="left"===a&&!u||"right"===a&&u;l=w({},l,{x1:t+d*n,y1:i,x2:t+d*n,y2:i+o})}return r.default.createElement("line",w({className:"recharts-cartesian-axis-line"},l))}},{key:"renderTickItem",value:function(e,i,n){return r.default.isValidElement(e)?r.default.cloneElement(e,i):(0,t.default)(e)?e(i):r.default.createElement(h.default,w({},i,{className:"recharts-cartesian-axis-tick-value"}),n)}},{key:"renderTicks",value:function(e){var i=this,o=this.props,a=o.tickLine,c=o.stroke,u=o.tick,l=o.tickFormatter,s=o.unit,f=n.getTicks(w({},this.props,{ticks:e})),h=this.getTickTextAnchor(),k=this.getTickVerticalAnchor(),p=(0,v.getPresentationAttributes)(this.props),m=(0,v.getPresentationAttributes)(u),g=w({},p,{fill:"none"},(0,v.getPresentationAttributes)(a)),b=f.map(function(e,n){var o=i.getTickLineCoord(e),b=o.line,y=o.tick,x=w({textAnchor:h,verticalAnchor:k},p,{stroke:"none",fill:c},m,y,{index:n,payload:e,visibleTicksCount:f.length});return r.default.createElement(d.default,w({className:"recharts-cartesian-axis-tick",key:"tick-"+n},(0,v.filterEventsOfChild)(i.props,e,n)),a&&r.default.createElement("line",w({className:"recharts-cartesian-axis-tick-line"},g,b)),u&&i.renderTickItem(u,x,""+((0,t.default)(l)?l(e.value):e.value)+(s||"")))});return r.default.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var e=this.props,i=e.axisLine,n=e.width,o=e.height,a=e.ticksGenerator,u=e.className;if(e.hide)return null;var l=this.props,s=l.ticks,f=T(l,["ticks"]),h=s;return(0,t.default)(a)&&(h=s&&s.length>0?a(this.props):a(f)),n<=0||o<=0||!h||!h.length?null:r.default.createElement(d.default,{className:(0,c.default)("recharts-cartesian-axis",u)},i&&this.renderAxisLine(),this.renderTicks(h),p.default.renderCallByParent(this.props))}}],[{key:"getTicks",value:function(e){var t=e.tick,i=e.ticks,r=e.viewBox,o=e.minTickGap,a=e.orientation,c=e.interval,u=e.tickFormatter,l=e.unit;return i&&i.length&&t?(0,m.isNumber)(c)||(0,v.isSsr)()?n.getNumberIntervalTicks(i,(0,m.isNumber)(c)?c:0):"preserveStartEnd"===c?n.getTicksStart({ticks:i,tickFormatter:u,viewBox:r,orientation:a,minTickGap:o,unit:l},!0):"preserveStart"===c?n.getTicksStart({ticks:i,tickFormatter:u,viewBox:r,orientation:a,minTickGap:o,unit:l}):n.getTicksEnd({ticks:i,tickFormatter:u,viewBox:r,orientation:a,minTickGap:o,unit:l}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter(function(e,i){return i%(t+1)==0})}},{key:"getTicksStart",value:function(e,i){var r=e.ticks,n=e.tickFormatter,o=e.viewBox,a=e.orientation,c=e.minTickGap,u=e.unit,s=o.x,d=o.y,f=o.width,h=o.height,k="top"===a||"bottom"===a?"width":"height",p=(r||[]).slice(),v=u?(0,l.getStringSize)(u)[k]:0,g=p.length,b=g>=2?(0,m.mathSign)(p[1].coordinate-p[0].coordinate):1,y=void 0,x=void 0;if(1===b?(y="width"===k?s:d,x="width"===k?s+f:d+h):(y="width"===k?s+f:d+h,x="width"===k?s:d),i){var T=r[g-1],S=(0,t.default)(n)?n(T.value):T.value,E=(0,l.getStringSize)(S)[k]+v,C=b*(T.coordinate+b*E/2-x);p[g-1]=T=w({},T,{tickCoord:C>0?T.coordinate-C*b:T.coordinate}),b*(T.tickCoord-b*E/2-y)>=0&&b*(T.tickCoord+b*E/2-x)<=0&&(x=T.tickCoord-b*(E/2+c),p[g-1]=w({},T,{isShow:!0}))}for(var O=i?g-1:g,A=0;A<O;A++){var N=p[A],P=(0,t.default)(n)?n(N.value):N.value,q=(0,l.getStringSize)(P)[k]+v;if(0===A){var B=b*(N.coordinate-b*q/2-y);p[A]=N=w({},N,{tickCoord:B<0?N.coordinate-B*b:N.coordinate})}else p[A]=N=w({},N,{tickCoord:N.coordinate});b*(N.tickCoord-b*q/2-y)>=0&&b*(N.tickCoord+b*q/2-x)<=0&&(y=N.tickCoord+b*(q/2+c),p[A]=w({},N,{isShow:!0}))}return p.filter(function(e){return e.isShow})}},{key:"getTicksEnd",value:function(e){var i=e.ticks,r=e.tickFormatter,n=e.viewBox,o=e.orientation,a=e.minTickGap,c=e.unit,u=n.x,s=n.y,d=n.width,f=n.height,h="top"===o||"bottom"===o?"width":"height",k=c?(0,l.getStringSize)(c)[h]:0,p=(i||[]).slice(),v=p.length,g=v>=2?(0,m.mathSign)(p[1].coordinate-p[0].coordinate):1,b=void 0,y=void 0;1===g?(b="width"===h?u:s,y="width"===h?u+d:s+f):(b="width"===h?u+d:s+f,y="width"===h?u:s);for(var x=v-1;x>=0;x--){var T=p[x],S=(0,t.default)(r)?r(T.value):T.value,E=(0,l.getStringSize)(S)[h]+k;if(x===v-1){var C=g*(T.coordinate+g*E/2-y);p[x]=T=w({},T,{tickCoord:C>0?T.coordinate-C*g:T.coordinate})}else p[x]=T=w({},T,{tickCoord:T.coordinate});g*(T.tickCoord-g*E/2-b)>=0&&g*(T.tickCoord+g*E/2-y)<=0&&(y=T.tickCoord-g*(E/2+a),p[x]=w({},T,{isShow:!0}))}return p.filter(function(e){return e.isShow})}}]),n}(),b.displayName="CartesianAxis",b.propTypes=w({},v.PRESENTATION_ATTRIBUTES,v.EVENT_ATTRIBUTES,{className:o.default.string,x:o.default.number,y:o.default.number,width:o.default.number,height:o.default.number,orientation:o.default.oneOf(["top","bottom","left","right"]),viewBox:o.default.shape({x:o.default.number,y:o.default.number,width:o.default.number,height:o.default.number}),tick:o.default.oneOfType([o.default.bool,o.default.func,o.default.object,o.default.element]),axisLine:o.default.oneOfType([o.default.bool,o.default.object]),tickLine:o.default.oneOfType([o.default.bool,o.default.object]),mirror:o.default.bool,tickMargin:o.default.number.isRequired,minTickGap:o.default.number,ticks:o.default.array,tickSize:o.default.number,stroke:o.default.string,tickFormatter:o.default.func,ticksGenerator:o.default.func,interval:o.default.oneOfType([o.default.number,o.default.oneOf(["preserveStart","preserveEnd","preserveStartEnd"])])}),b.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"},y);exports.default=O;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"classnames":495,"../util/PureRender":456,"../util/DOMUtils":461,"../container/Layer":341,"../component/Text":345,"../component/Label":347,"../util/ReactUtils":459,"../util/DataUtils":458}],367:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=f(e),r=require("react"),n=f(r),a=require("prop-types"),i=f(a),l=require("../util/PureRender"),o=f(l),u=require("../util/ReactUtils"),s=require("../util/DataUtils");function f(e){return e&&e.__esModule?e:{default:e}}var c,h,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function v(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=(0,o.default)((d=h=function(e){function a(){return g(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return b(a,r.Component),y(a,[{key:"renderLineItem",value:function(e,r){var a=void 0;if(n.default.isValidElement(e))a=n.default.cloneElement(e,r);else if((0,t.default)(e))a=e(r);else{var i=r.x1,l=r.y1,o=r.x2,s=r.y2,f=r.key,c=v(r,["x1","y1","x2","y2","key"]);a=n.default.createElement("line",p({},(0,u.getPresentationAttributes)(c),{x1:i,y1:l,x2:o,y2:s,fill:"none",key:f}))}return a}},{key:"renderHorizontal",value:function(e){var t=this,r=this.props,a=r.x,i=r.width,l=r.horizontal;if(!e||!e.length)return null;var o=e.map(function(e,r){var n=p({},t.props,{x1:a,y1:e,x2:a+i,y2:e,key:"line-"+r,index:r});return t.renderLineItem(l,n)});return n.default.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}},{key:"renderVertical",value:function(e){var t=this,r=this.props,a=r.y,i=r.height,l=r.vertical;if(!e||!e.length)return null;var o=e.map(function(e,r){var n=p({},t.props,{x1:e,y1:a,x2:e,y2:a+i,key:"line-"+r,index:r});return t.renderLineItem(l,n)});return n.default.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}},{key:"renderVerticalStripes",value:function(e){var t=this.props.verticalFill;if(!t||!t.length)return null;var r=this.props,a=r.fillOpacity,i=r.x,l=r.y,o=r.width,u=r.height,s=e.slice().sort(function(e,t){return e-t>0});i!==s[0]&&s.unshift(0);var f=s.map(function(e,r){var f=s[r+1]?s[r+1]-e:i+o-e;if(f<=0)return null;var c=r%t.length;return n.default.createElement("rect",{key:r,x:Math.round(e+i-i),y:l,width:f,height:u,stroke:"none",fill:t[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return n.default.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}},{key:"renderHorizontalStripes",value:function(e){var t=this.props.horizontalFill;if(!t||!t.length)return null;var r=this.props,a=r.fillOpacity,i=r.x,l=r.y,o=r.width,u=r.height,s=e.slice().sort(function(e,t){return e-t>0});l!==s[0]&&s.unshift(0);var f=s.map(function(e,r){var f=s[r+1]?s[r+1]-e:l+u-e;if(f<=0)return null;var c=r%t.length;return n.default.createElement("rect",{key:r,y:Math.round(e+l-l),x:i,height:f,width:o,stroke:"none",fill:t[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return n.default.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}},{key:"renderBackground",value:function(){var e=this.props.fill;if(!e||"none"===e)return null;var t=this.props,r=t.fillOpacity,a=t.x,i=t.y,l=t.width,o=t.height;return n.default.createElement("rect",{x:a,y:i,width:l,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var e=this.props,r=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontal,u=e.vertical,f=e.horizontalCoordinatesGenerator,c=e.verticalCoordinatesGenerator,h=e.xAxis,d=e.yAxis,p=e.offset,y=e.chartWidth,v=e.chartHeight;if(!(0,s.isNumber)(i)||i<=0||!(0,s.isNumber)(l)||l<=0||!(0,s.isNumber)(r)||r!==+r||!(0,s.isNumber)(a)||a!==+a)return null;var g=this.props,m=g.horizontalPoints,b=g.verticalPoints;return m&&m.length||!(0,t.default)(f)||(m=f({yAxis:d,width:y,height:v,offset:p})),b&&b.length||!(0,t.default)(c)||(b=c({xAxis:h,width:y,height:v,offset:p})),n.default.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),o&&this.renderHorizontal(m),u&&this.renderVertical(b),o&&this.renderHorizontalStripes(m),u&&this.renderVerticalStripes(b))}}]),a}(),h.displayName="CartesianGrid",h.propTypes=p({},u.PRESENTATION_ATTRIBUTES,{x:i.default.number,y:i.default.number,width:i.default.number,height:i.default.number,horizontal:i.default.oneOfType([i.default.object,i.default.element,i.default.func,i.default.bool]),vertical:i.default.oneOfType([i.default.object,i.default.element,i.default.func,i.default.bool]),horizontalPoints:i.default.arrayOf(i.default.number),verticalPoints:i.default.arrayOf(i.default.number),horizontalCoordinatesGenerator:i.default.func,verticalCoordinatesGenerator:i.default.func,xAxis:i.default.object,yAxis:i.default.object,offset:i.default.object,chartWidth:i.default.number,chartHeight:i.default.number,verticalFill:i.default.arrayOf(i.default.string),horizontalFill:i.default.arrayOf(i.default.string)}),h.defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]},c=d))||c;exports.default=x;
},{"lodash/isFunction":498,"react":8,"prop-types":96,"../util/PureRender":456,"../util/ReactUtils":459,"../util/DataUtils":458}],368:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=C(e),n=require("lodash/isFunction"),a=C(n),i=require("lodash/isNil"),r=C(i),o=require("react"),l=C(o),u=require("prop-types"),s=C(u),f=require("react-smooth"),d=C(f),c=require("classnames"),p=C(c),h=require("../util/PureRender"),m=C(h),y=require("../shape/Curve"),v=C(y),A=require("../shape/Dot"),b=C(A),g=require("../container/Layer"),x=C(g),E=require("../component/LabelList"),O=C(E),k=require("./ErrorBar"),T=C(k),D=require("../util/DataUtils"),P=require("../util/ReactUtils"),S=require("../util/ChartUtils");function C(e){return e&&e.__esModule?e:{default:e}}var N,w,q,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function L(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z=(0,m.default)((q=w=function(e){function n(){var e,t,a;B(this,n);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=a=R(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),a.state={isAnimationFinished:!0,totalLength:0},a.id=(0,D.uniqueId)("recharts-line-"),a.cachePrevData=function(e){a.setState({prevPoints:e})},a.pathRef=function(e){a.mainCurve=e},a.handleAnimationEnd=function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd()},a.handleAnimationStart=function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart()},R(a,t)}return F(n,o.Component),j(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.animationId,a=t.points;e.animationId!==n&&this.cachePrevData(a)}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}},{key:"getStrokeDasharray",value:function(e,t,n){for(var a=n.reduce(function(e,t){return e+t}),i=parseInt(e/a,10),r=e%a,o=t-e,l=[],u=0,s=0;;s+=n[u],++u)if(s+n[u]>r){l=[].concat(_(n.slice(0,u)),[r-s]);break}var f=l.length%2==0?[0,o]:[o];return[].concat(_(this.repeat(n,i)),_(l),f).map(function(e){return e+"px"}).join(", ")}},{key:"repeat",value:function(e,t){for(var n=e.length%2!=0?[].concat(_(e),[0]):e,a=[],i=0;i<t;++i)a=[].concat(_(a),_(n));return a}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,n=e.xAxis,a=e.yAxis,i=e.layout,r=e.children,o=(0,P.findAllByType)(r,T.default);if(!o)return null;function u(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:(0,S.getValueByDataKey)(e.payload,t)}}return o.map(function(e,r){return l.default.cloneElement(e,{key:r,data:t,xAxis:n,yAxis:a,layout:i,dataPointFormatter:u})})}},{key:"renderDotItem",value:function(e,t){var n=void 0;if(l.default.isValidElement(e))n=l.default.cloneElement(e,t);else if((0,a.default)(e))n=e(t);else{var i=(0,p.default)("recharts-line-dot",e?e.className:"");n=l.default.createElement(b.default,I({},t,{className:i}))}return n}},{key:"renderDots",value:function(){var e=this;if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,n=t.dot,a=t.points,i=t.dataKey,r=(0,P.getPresentationAttributes)(this.props),o=(0,P.getPresentationAttributes)(n),u=(0,P.filterEventAttributes)(n),s=a.map(function(t,a){var l=I({key:"dot-"+a,r:3},r,o,u,{value:t.value,dataKey:i,cx:t.x,cy:t.y,index:a,payload:t.payload});return e.renderDotItem(n,l)});return l.default.createElement(x.default,{className:"recharts-line-dots",key:"dots"},s)}},{key:"renderCurveStatically",value:function(e,t,n){var a=this.props,i=a.type,o=a.layout,u=a.connectNulls,s=a.id,f=(0,r.default)(s)?this.id:s,d=I({},(0,P.getPresentationAttributes)(this.props),(0,P.filterEventAttributes)(this.props),{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-"+f+")":null,points:e},n,{type:i,layout:o,connectNulls:u});return l.default.createElement(v.default,I({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e){var t=this,n=this.props,a=n.points,i=n.strokeDasharray,r=n.isAnimationActive,o=n.animationBegin,u=n.animationDuration,s=n.animationEasing,f=n.animationId,c=n.width,p=n.height,h=(L(n,["points","strokeDasharray","isAnimationActive","animationBegin","animationDuration","animationEasing","animationId","width","height"]),this.state),m=h.prevPoints,y=h.totalLength;return l.default.createElement(d.default,{begin:o,duration:u,isActive:r,easing:s,from:{t:0},to:{t:1},key:"line-"+f,onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var r=n.t;if(m){var o=a.map(function(e,t){if(m[t]){var n=m[t],a=(0,D.interpolateNumber)(n.x,e.x),i=(0,D.interpolateNumber)(n.y,e.y);return I({},e,{x:a(r),y:i(r)})}var o=(0,D.interpolateNumber)(2*c,e.x),l=(0,D.interpolateNumber)(p/2,e.y);return I({},e,{x:o(r),y:l(r)})});return t.renderCurveStatically(o,e)}var l=(0,D.interpolateNumber)(0,y)(r),u=void 0;if(i){var s=i.split(/[,\s]+/gim).map(function(e){return parseFloat(e)});u=t.getStrokeDasharray(l,y,s)}else u=l+"px "+(y-l)+"px";return t.renderCurveStatically(a,e,{strokeDasharray:u})})}},{key:"renderCurve",value:function(e){var n=this.props,a=n.points,i=n.isAnimationActive,r=this.state,o=r.prevPoints,l=r.totalLength;return i&&a&&a.length&&(!o&&l>0||!(0,t.default)(o,a))?this.renderCurveWithAnimation(e):this.renderCurveStatically(a,e)}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.dot,a=e.points,i=e.className,o=e.xAxis,u=e.yAxis,s=e.top,f=e.left,d=e.width,c=e.height,h=e.isAnimationActive,m=e.id;if(t||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=1===a.length,A=(0,p.default)("recharts-line",i),b=o&&o.allowDataOverflow||u&&u.allowDataOverflow,g=(0,r.default)(m)?this.id:m;return l.default.createElement(x.default,{className:A},b?l.default.createElement("defs",null,l.default.createElement("clipPath",{id:"clipPath-"+g},l.default.createElement("rect",{x:f,y:s,width:d,height:c}))):null,!v&&this.renderCurve(b),this.renderErrorBar(),(v||n)&&this.renderDots(),(!h||y)&&O.default.renderCallByParent(this.props,a))}}]),n}(),w.displayName="Line",w.propTypes=I({},P.PRESENTATION_ATTRIBUTES,P.EVENT_ATTRIBUTES,{className:s.default.string,type:s.default.oneOfType([s.default.oneOf(["basis","basisClosed","basisOpen","linear","linearClosed","natural","monotoneX","monotoneY","monotone","step","stepBefore","stepAfter"]),s.default.func]),unit:s.default.oneOfType([s.default.string,s.default.number]),name:s.default.oneOfType([s.default.string,s.default.number]),yAxisId:s.default.oneOfType([s.default.string,s.default.number]),xAxisId:s.default.oneOfType([s.default.string,s.default.number]),yAxis:s.default.object,xAxis:s.default.object,legendType:s.default.oneOf(P.LEGEND_TYPES),layout:s.default.oneOf(["horizontal","vertical"]),connectNulls:s.default.bool,hide:s.default.bool,activeDot:s.default.oneOfType([s.default.object,s.default.element,s.default.func,s.default.bool]),dot:s.default.oneOfType([s.default.object,s.default.element,s.default.func,s.default.bool]),top:s.default.number,left:s.default.number,width:s.default.number,height:s.default.number,points:s.default.arrayOf(s.default.shape({x:s.default.number,y:s.default.number,value:s.default.value})),onAnimationStart:s.default.func,onAnimationEnd:s.default.func,isAnimationActive:s.default.bool,animationBegin:s.default.number,animationDuration:s.default.number,animationEasing:s.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),animationId:s.default.number,id:s.default.string}),w.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!(0,P.isSsr)(),animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,onAnimationStart:function(){},onAnimationEnd:function(){}},w.getComposedData=function(e){var t=e.props,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.dataKey,u=e.bandSize,s=e.displayedData,f=e.offset,d=t.layout,c=s.map(function(e,t){var s=(0,S.getValueByDataKey)(e,l);return"horizontal"===d?{x:(0,S.getCateCoordinateOfLine)({axis:n,ticks:i,bandSize:u,entry:e,index:t}),y:(0,r.default)(s)?null:a.scale(s),value:s,payload:e}:{x:(0,r.default)(s)?null:n.scale(s),y:(0,S.getCateCoordinateOfLine)({axis:a,ticks:o,bandSize:u,entry:e,index:t}),value:s,payload:e}});return I({points:c,layout:d},f)},N=q))||N;exports.default=z;
},{"lodash/isEqual":507,"lodash/isFunction":498,"lodash/isNil":497,"react":8,"prop-types":96,"react-smooth":506,"classnames":495,"../util/PureRender":456,"../shape/Curve":350,"../shape/Dot":353,"../container/Layer":341,"../component/LabelList":348,"./ErrorBar":375,"../util/DataUtils":458,"../util/ReactUtils":459,"../util/ChartUtils":462}],369:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=M(e),a=require("lodash/isNaN"),n=M(a),i=require("lodash/isFunction"),r=M(i),l=require("lodash/isNil"),u=M(l),o=require("lodash/isArray"),s=M(o),d=require("react"),f=M(d),c=require("prop-types"),p=M(c),m=require("classnames"),h=M(m),y=require("react-smooth"),b=M(y),v=require("../shape/Curve"),A=M(v),x=require("../shape/Dot"),g=M(x),E=require("../container/Layer"),O=M(E),N=require("../component/LabelList"),P=M(N),T=require("../util/PureRender"),k=M(T),S=require("../util/ReactUtils"),q=require("../util/DataUtils"),D=require("../util/ChartUtils");function M(e){return e&&e.__esModule?e:{default:e}}var L,w,R,C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z=(0,k.default)((R=w=function(e){function a(){var e,t,n;_(this,a);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return t=n=j(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(l))),n.state={isAnimationFinished:!0},n.id=(0,q.uniqueId)("recharts-area-"),n.cachePrevData=function(e,t){n.setState({prevPoints:e,prevBaseLine:t})},n.handleAnimationEnd=function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),(0,r.default)(e)&&e()},n.handleAnimationStart=function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),(0,r.default)(e)&&e()},j(n,t)}return B(a,d.Component),I(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.points,i=t.baseLine;e.animationId!==a&&this.cachePrevData(n,i)}},{key:"renderDots",value:function(){var e=this;if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,a=t.dot,n=t.points,i=t.dataKey,r=(0,S.getPresentationAttributes)(this.props),l=(0,S.getPresentationAttributes)(a),u=(0,S.filterEventAttributes)(a),o=n.map(function(t,n){var o=C({key:"dot-"+n,r:3},r,l,u,{dataKey:i,cx:t.x,cy:t.y,index:n,value:t.value,payload:t.payload});return e.constructor.renderDotItem(a,o)});return f.default.createElement(O.default,{className:"recharts-area-dots"},o)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,a=t.baseLine,n=t.points,i=t.strokeWidth,r=n[0].x,l=n[n.length-1].x,u=e*Math.abs(r-l),o=Math.max.apply(null,n.map(function(e){return e.y||0}));return(0,q.isNumber)(a)?o=Math.max(a,o):a&&(0,s.default)(a)&&a.length&&(o=Math.max(Math.max.apply(null,a.map(function(e){return e.y||0})),o)),(0,q.isNumber)(o)?f.default.createElement("rect",{x:r<l?r:r-u,y:0,width:u,height:o+(i||1)}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,a=t.baseLine,n=t.points,i=t.strokeWidth,r=n[0].y,l=n[n.length-1].y,u=e*Math.abs(r-l),o=Math.max.apply(null,n.map(function(e){return e.x||0}));return(0,q.isNumber)(a)?o=Math.max(a,o):a&&(0,s.default)(a)&&a.length&&(o=Math.max(Math.max.apply(null,a.map(function(e){return e.x||0})),o)),(0,q.isNumber)(o)?f.default.createElement("rect",{x:0,y:r<l?r:r-u,width:o+(i||1),height:u}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,a){var n=this.props,i=n.layout,r=n.type,l=n.stroke,u=n.connectNulls,o=n.isRange;return f.default.createElement(O.default,{clipPath:a?"url(#clipPath-"+this.id+")":null},f.default.createElement(A.default,C({},this.props,{points:e,baseLine:t,stroke:"none",className:"recharts-area-area"})),"none"!==l&&f.default.createElement(A.default,C({},(0,S.getPresentationAttributes)(this.props),{className:"recharts-area-curve",layout:i,type:r,connectNulls:u,fill:"none",points:e})),"none"!==l&&o&&f.default.createElement(A.default,C({},(0,S.getPresentationAttributes)(this.props),{className:"recharts-area-curve",layout:i,type:r,connectNulls:u,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e){var t=this,a=this.props,i=a.points,r=a.baseLine,l=a.isAnimationActive,o=a.animationBegin,s=a.animationDuration,d=a.animationEasing,c=a.animationId,p=a.id,m=this.state,h=m.prevPoints,y=m.prevBaseLine,v=(0,u.default)(p)?this.id:p;return f.default.createElement(b.default,{begin:o,duration:s,isActive:l,easing:d,from:{t:0},to:{t:1},key:"area-"+c,onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(a){var l=a.t;if(h){var o=i.map(function(e,t){if(h[t]){var a=h[t],n=(0,q.interpolateNumber)(a.x,e.x),i=(0,q.interpolateNumber)(a.y,e.y);return C({},e,{x:n(l),y:i(l)})}return e}),s=void 0;if((0,q.isNumber)(r))s=(0,q.interpolateNumber)(y,r)(l);else if((0,u.default)(r)||(0,n.default)(r)){s=(0,q.interpolateNumber)(y,0)(l)}else s=r.map(function(e,t){if(y[t]){var a=y[t],n=(0,q.interpolateNumber)(a.x,e.x),i=(0,q.interpolateNumber)(a.y,e.y);return C({},e,{x:n(l),y:i(l)})}return e});return t.renderAreaStatically(o,s,e)}return f.default.createElement(O.default,null,f.default.createElement("defs",null,f.default.createElement("clipPath",{id:"animationClipPath-"+v},t.renderClipRect(l))),f.default.createElement(O.default,{clipPath:"url(#animationClipPath-"+v+")"},t.renderAreaStatically(i,r,e)))})}},{key:"renderArea",value:function(e){var a=this.props,n=a.points,i=a.baseLine,r=a.isAnimationActive,l=this.state,u=l.prevPoints,o=l.prevBaseLine,s=l.totalLength;return r&&n&&n.length&&(!u&&s>0||!(0,t.default)(u,n)||!(0,t.default)(o,i))?this.renderAreaWithAnimation(e):this.renderAreaStatically(n,i,e)}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.dot,n=e.points,i=e.className,r=e.top,l=e.left,o=e.xAxis,s=e.yAxis,d=e.width,c=e.height,p=e.isAnimationActive,m=e.id;if(t||!n||!n.length)return null;var y=this.state.isAnimationFinished,b=1===n.length,v=(0,h.default)("recharts-area",i),A=o&&o.allowDataOverflow||s&&s.allowDataOverflow,x=(0,u.default)(m)?this.id:m;return f.default.createElement(O.default,{className:v},A?f.default.createElement("defs",null,f.default.createElement("clipPath",{id:"clipPath-"+x},f.default.createElement("rect",{x:l,y:r,width:d,height:c}))):null,b?null:this.renderArea(A),(a||b)&&this.renderDots(),(!p||y)&&P.default.renderCallByParent(this.props,n))}}]),a}(),w.displayName="Area",w.propTypes=C({},S.PRESENTATION_ATTRIBUTES,S.EVENT_ATTRIBUTES,{className:p.default.string,dataKey:p.default.oneOfType([p.default.string,p.default.number,p.default.func]).isRequired,type:p.default.oneOfType([p.default.oneOf(["basis","basisClosed","basisOpen","linear","linearClosed","natural","monotoneX","monotoneY","monotone","step","stepBefore","stepAfter"]),p.default.func]),unit:p.default.oneOfType([p.default.string,p.default.number]),name:p.default.oneOfType([p.default.string,p.default.number]),yAxisId:p.default.oneOfType([p.default.string,p.default.number]),xAxisId:p.default.oneOfType([p.default.string,p.default.number]),yAxis:p.default.object,xAxis:p.default.object,stackId:p.default.oneOfType([p.default.number,p.default.string]),legendType:p.default.oneOf(S.LEGEND_TYPES),connectNulls:p.default.bool,activeDot:p.default.oneOfType([p.default.object,p.default.element,p.default.func,p.default.bool]),dot:p.default.oneOfType([p.default.func,p.default.element,p.default.object,p.default.bool]),label:p.default.oneOfType([p.default.func,p.default.element,p.default.object,p.default.bool]),hide:p.default.bool,layout:p.default.oneOf(["horizontal","vertical"]),baseLine:p.default.oneOfType([p.default.number,p.default.array]),isRange:p.default.bool,points:p.default.arrayOf(p.default.shape({x:p.default.number,y:p.default.number,value:p.default.oneOfType([p.default.number,p.default.array])})),onAnimationStart:p.default.func,onAnimationEnd:p.default.func,animationId:p.default.number,isAnimationActive:p.default.bool,animationBegin:p.default.number,animationDuration:p.default.number,animationEasing:p.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),id:p.default.string}),w.defaultProps={stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!(0,S.isSsr)(),animationBegin:0,animationDuration:1500,animationEasing:"ease"},w.getBaseValue=function(e,t,a){var n=e.layout,i=e.baseValue;if((0,q.isNumber)(i))return i;var r="horizontal"===n?a:t,l=r.scale.domain();if("number"===r.type){var u=Math.max(l[0],l[1]),o=Math.min(l[0],l[1]);return"dataMin"===i?o:"dataMax"===i?u:u<0?u:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===i?l[0]:"dataMax"===i?l[1]:l[0]},w.getComposedData=function(e){var t=e.props,a=e.xAxis,n=e.yAxis,i=e.xAxisTicks,r=e.yAxisTicks,l=e.bandSize,o=e.dataKey,d=e.stackedData,f=e.dataStartIndex,c=e.displayedData,p=e.offset,m=t.layout,h=d&&d.length,y=z.getBaseValue(t,a,n),b=!1,v=c.map(function(e,t){var c=void 0;return h?c=d[f+t]:(c=(0,D.getValueByDataKey)(e,o),(0,s.default)(c)?b=!0:c=[y,c]),"horizontal"===m?{x:(0,D.getCateCoordinateOfLine)({axis:a,ticks:i,bandSize:l,entry:e,index:t}),y:(0,u.default)(c[1])?null:n.scale(c[1]),value:c,payload:e}:{x:(0,u.default)(c[1])?null:a.scale(c[1]),y:(0,D.getCateCoordinateOfLine)({axis:n,ticks:r,bandSize:l,entry:e,index:t}),value:c,payload:e}}),A=void 0;return A=h||b?v.map(function(e){return{x:"horizontal"===m?e.x:a.scale(e&&e.value[0]),y:"horizontal"===m?n.scale(e&&e.value[0]):e.y}}):"horizontal"===m?n.scale(y):a.scale(y),C({points:v,baseLine:A,layout:m,isRange:b},p)},w.renderDotItem=function(e,t){return f.default.isValidElement(e)?f.default.cloneElement(e,t):(0,r.default)(e)?e(t):f.default.createElement(g.default,C({},t,{className:"recharts-area-dot"}))},L=R))||L;exports.default=z;
},{"lodash/isEqual":507,"lodash/isNaN":511,"lodash/isFunction":498,"lodash/isNil":497,"lodash/isArray":502,"react":8,"prop-types":96,"classnames":495,"react-smooth":506,"../shape/Curve":350,"../shape/Dot":353,"../container/Layer":341,"../component/LabelList":348,"../util/PureRender":456,"../util/ReactUtils":459,"../util/DataUtils":458,"../util/ChartUtils":462}],370:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isNil"),t=R(e),a=require("lodash/isEqual"),n=R(a),i=require("lodash/isFunction"),r=R(i),l=require("lodash/isArray"),u=R(l),o=require("react"),s=R(o),d=require("prop-types"),f=R(d),c=require("classnames"),h=R(c),p=require("react-smooth"),m=R(p),y=require("../shape/Rectangle"),b=R(y),g=require("../container/Layer"),v=R(g),A=require("./ErrorBar"),x=R(A),E=require("../component/Cell"),O=R(E),S=require("../component/LabelList"),k=R(S),w=require("../util/PureRender"),T=R(w),P=require("../util/DataUtils"),B=require("../util/ReactUtils"),q=require("../util/ChartUtils");function R(e){return e&&e.__esModule?e:{default:e}}var D,N,_,z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function j(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V=(0,T.default)((_=N=function(e){function a(){var e,t,n;C(this,a);for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=n=M(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={isAnimationFinished:!1},n.id=(0,P.uniqueId)("recharts-bar-"),n.cachePrevData=function(e){n.setState({prevData:e})},n.handleAnimationEnd=function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd()},n.handleAnimationStart=function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart()},M(n,t)}return F(a,o.Component),I(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.data;e.animationId!==a&&this.cachePrevData(n)}},{key:"renderRectangle",value:function(e,t){return s.default.isValidElement(e)?s.default.cloneElement(e,t):(0,r.default)(e)?e(t):s.default.createElement(b.default,t)}},{key:"renderRectanglesStatically",value:function(e){var t=this,a=this.props.shape,n=(0,B.getPresentationAttributes)(this.props);return e&&e.map(function(e,i){var r=z({},n,e,{index:i});return s.default.createElement(v.default,z({className:"recharts-bar-rectangle"},(0,B.filterEventsOfChild)(t.props,e,i),{key:"rectangle-"+i}),t.renderRectangle(a,r))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,a=t.data,n=t.layout,i=t.isAnimationActive,r=t.animationBegin,l=t.animationDuration,u=t.animationEasing,o=t.animationId,d=(t.width,this.state.prevData);return s.default.createElement(m.default,{begin:r,duration:l,isActive:i,easing:u,from:{t:0},to:{t:1},key:"bar-"+o,onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var i=t.t,r=a.map(function(e,t){var a=d&&d[t];if(a){var r=(0,P.interpolateNumber)(a.x,e.x),l=(0,P.interpolateNumber)(a.y,e.y),u=(0,P.interpolateNumber)(a.width,e.width),o=(0,P.interpolateNumber)(a.height,e.height);return z({},e,{x:r(i),y:l(i),width:u(i),height:o(i)})}if("horizontal"===n){var s=(0,P.interpolateNumber)(0,e.height)(i);return z({},e,{y:e.y+e.height-s,height:s})}var f=(0,P.interpolateNumber)(0,e.width)(i);return z({},e,{width:f})});return s.default.createElement(v.default,null,e.renderRectanglesStatically(r))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,a=e.isAnimationActive,i=this.state.prevData;return!(a&&t&&t.length)||i&&(0,n.default)(i,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(e){var t=this,a=this.props.data,n=(0,B.getPresentationAttributes)(this.props.background);return a.map(function(e,a){e.value;var i=e.background,r=j(e,["value","background"]);if(!i)return null;var l=z({},r,{fill:"#eee"},i,n,(0,B.filterEventsOfChild)(t.props,e,a),{index:a,key:"background-bar-"+a,className:"recharts-bar-background-rectangle"});return t.renderRectangle(i,l)})}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.data,a=e.xAxis,n=e.yAxis,i=e.layout,r=e.children,l=(0,B.findAllByType)(r,x.default);if(!l)return null;var u="vertical"===i?t[0].height/2:t[0].width/2;function o(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:(0,q.getValueByDataKey)(e,t)}}return l.map(function(e,r){return s.default.cloneElement(e,{key:r,data:t,xAxis:a,yAxis:n,layout:i,offset:u,dataPointFormatter:o})})}},{key:"render",value:function(){var e=this.props,a=e.hide,n=e.data,i=e.className,r=e.xAxis,l=e.yAxis,u=e.left,o=e.top,d=e.width,f=e.height,c=e.isAnimationActive,p=e.background,m=e.id;if(a||!n||!n.length)return null;var y=this.state.isAnimationFinished,b=(0,h.default)("recharts-bar",i),g=r&&r.allowDataOverflow||l&&l.allowDataOverflow,A=(0,t.default)(m)?this.id:m;return s.default.createElement(v.default,{className:b},g?s.default.createElement("defs",null,s.default.createElement("clipPath",{id:"clipPath-"+A},s.default.createElement("rect",{x:u,y:o,width:d,height:f}))):null,s.default.createElement(v.default,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-"+A+")":null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(),(!c||y)&&k.default.renderCallByParent(this.props,n))}}]),a}(),N.displayName="Bar",N.propTypes=z({},B.PRESENTATION_ATTRIBUTES,B.EVENT_ATTRIBUTES,{className:f.default.string,layout:f.default.oneOf(["vertical","horizontal"]),xAxisId:f.default.oneOfType([f.default.number,f.default.string]),yAxisId:f.default.oneOfType([f.default.number,f.default.string]),yAxis:f.default.object,xAxis:f.default.object,stackId:f.default.oneOfType([f.default.number,f.default.string]),barSize:f.default.number,unit:f.default.oneOfType([f.default.string,f.default.number]),name:f.default.oneOfType([f.default.string,f.default.number]),dataKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]).isRequired,legendType:f.default.oneOf(B.LEGEND_TYPES),minPointSize:f.default.number,maxBarSize:f.default.number,hide:f.default.bool,shape:f.default.oneOfType([f.default.func,f.default.element]),data:f.default.arrayOf(f.default.shape({x:f.default.number,y:f.default.number,width:f.default.number,height:f.default.number,radius:f.default.oneOfType([f.default.number,f.default.array]),value:f.default.oneOfType([f.default.number,f.default.string,f.default.array])})),onAnimationStart:f.default.func,onAnimationEnd:f.default.func,animationId:f.default.number,isAnimationActive:f.default.bool,animationBegin:f.default.number,animationDuration:f.default.number,animationEasing:f.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),id:f.default.string}),N.defaultProps={xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!(0,B.isSsr)(),animationBegin:0,animationDuration:400,animationEasing:"ease",onAnimationStart:function(){},onAnimationEnd:function(){}},N.getComposedData=function(e){var t=e.props,a=e.item,n=e.barPosition,i=e.bandSize,r=e.xAxis,l=e.yAxis,o=e.xAxisTicks,s=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,c=e.displayedData,h=e.offset,p=(0,q.findPositionOfBar)(n,a);if(!p)return[];var m=t.layout,y=a.props,b=y.dataKey,g=y.children,v=y.minPointSize,A="horizontal"===m?l:r,x=d?A.scale.domain():null,E=(0,q.getBaseValueOfBar)({props:t,numericAxis:A}),S=(0,B.findAllByType)(g,O.default),k=c.map(function(e,t){var a=void 0,n=void 0,c=void 0,h=void 0,y=void 0,g=void 0;if(d?a=(0,q.truncateByDomain)(d[f+t],x):(a=(0,q.getValueByDataKey)(e,b),(0,u.default)(a)||(a=[E,a])),"horizontal"===m){if(n=(0,q.getCateCoordinateOfBar)({axis:r,ticks:o,bandSize:i,offset:p.offset,entry:e,index:t}),c=l.scale(a[1]),h=p.size,y=l.scale(a[0])-l.scale(a[1]),g={x:n,y:l.y,width:h,height:l.height},Math.abs(v)>0&&Math.abs(y)<Math.abs(v)){var A=(0,P.mathSign)(y||v)*(Math.abs(v)-Math.abs(y));c-=A,y+=A}}else n=r.scale(a[0]),c=(0,q.getCateCoordinateOfBar)({axis:l,ticks:s,bandSize:i,offset:p.offset,entry:e,index:t}),h=r.scale(a[1])-r.scale(a[0]),y=p.size,g={x:r.x,y:c,width:r.width,height:y},Math.abs(v)>0&&Math.abs(h)<Math.abs(v)&&(h+=(0,P.mathSign)(h||v)*(Math.abs(v)-Math.abs(h)));return z({},e,{x:n,y:c,width:h,height:y,value:d?a:a[1],payload:e,background:g},S&&S[t]&&S[t].props)});return z({data:k,layout:m},h)},D=_))||D;exports.default=V;
},{"lodash/isNil":497,"lodash/isEqual":507,"lodash/isFunction":498,"lodash/isArray":502,"react":8,"prop-types":96,"classnames":495,"react-smooth":506,"../shape/Rectangle":351,"../container/Layer":341,"./ErrorBar":375,"../component/Cell":346,"../component/LabelList":348,"../util/PureRender":456,"../util/DataUtils":458,"../util/ReactUtils":459,"../util/ChartUtils":462}],374:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=o(t),r=require("../util/PureRender"),u=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var a,f,l,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(0,u.default)((l=f=function(t){function n(){return p(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,e.Component),i(n,[{key:"render",value:function(){return null}}]),n}(),f.displayName="ZAxis",f.propTypes={type:n.default.oneOf(["number","category"]),name:n.default.oneOfType([n.default.string,n.default.number]),unit:n.default.oneOfType([n.default.string,n.default.number]),zAxisId:n.default.oneOfType([n.default.string,n.default.number]),dataKey:n.default.oneOfType([n.default.string,n.default.number,n.default.func]),range:n.default.arrayOf(n.default.number),scale:n.default.oneOfType([n.default.oneOf(["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utcTime","sequential","threshold"]),n.default.func])},f.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"},a=l))||a;exports.default=d;
},{"react":8,"prop-types":96,"../util/PureRender":456}],371:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isEqual"),t=_(e),a=require("lodash/isFunction"),n=_(a),i=require("lodash/isNil"),r=_(i),l=require("react"),o=_(l),u=require("prop-types"),s=_(u),d=require("react-smooth"),f=_(d),c=require("classnames"),p=_(c),y=require("../util/PureRender"),m=_(y),h=require("../container/Layer"),b=_(h),v=require("../component/LabelList"),x=_(v),A=require("../util/ReactUtils"),g=require("./ZAxis"),E=_(g),O=require("../shape/Curve"),T=_(O),P=require("../shape/Symbols"),S=_(P),q=require("./ErrorBar"),w=_(q),I=require("../component/Cell"),k=_(I),z=require("../util/DataUtils"),N=require("../util/ChartUtils");function _(e){return e&&e.__esModule?e:{default:e}}var j,B,C,K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},D=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=(0,m.default)((C=B=function(e){function a(){var e,t,n;L(this,a);for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=n=M(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={isAnimationFinished:!1},n.cachePrevPoints=function(e){n.setState({prevPoints:e})},n.handleAnimationEnd=function(){n.setState({isAnimationFinished:!0})},n.handleAnimationStart=function(){n.setState({isAnimationFinished:!1})},n.id=(0,z.uniqueId)("recharts-scatter-"),M(n,t)}return R(a,l.Component),D(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.animationId,n=t.points;e.animationId!==a&&this.cachePrevPoints(n)}},{key:"renderSymbolItem",value:function(e,t){return o.default.isValidElement(e)?o.default.cloneElement(e,t):(0,n.default)(e)?e(t):o.default.createElement(S.default,K({},t,{type:e}))}},{key:"renderSymbolsStatically",value:function(e){var t=this,a=this.props,n=a.shape,i=a.activeShape,r=a.activeIndex,l=(0,A.getPresentationAttributes)(this.props);return e.map(function(e,a){var u=K({key:"symbol-"+a},l,e);return o.default.createElement(b.default,K({className:"recharts-scatter-symbol"},(0,A.filterEventsOfChild)(t.props,e,a),{key:"symbol-"+a}),t.renderSymbolItem(r===a?i:n,u))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,t=this.props,a=t.points,n=t.isAnimationActive,i=t.animationBegin,r=t.animationDuration,l=t.animationEasing,u=t.animationId,s=this.state.prevPoints;return o.default.createElement(f.default,{begin:i,duration:r,isActive:n,easing:l,from:{t:0},to:{t:1},key:"pie-"+u,onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var n=t.t,i=a.map(function(e,t){var a=s&&s[t];if(a){var i=(0,z.interpolateNumber)(a.cx,e.cx),r=(0,z.interpolateNumber)(a.cy,e.cy),l=(0,z.interpolateNumber)(a.size,e.size);return K({},e,{cx:i(n),cy:r(n),size:l(n)})}var o=(0,z.interpolateNumber)(0,e.size);return K({},e,{size:o(n)})});return o.default.createElement(b.default,null,e.renderSymbolsStatically(i))})}},{key:"renderSymbols",value:function(){var e=this.props,a=e.points,n=e.isAnimationActive,i=this.state.prevPoints;return!(n&&a&&a.length)||i&&(0,t.default)(i,a)?this.renderSymbolsStatically(a):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,a=e.xAxis,n=e.yAxis,i=e.children,r=(0,A.findAllByType)(i,w.default);if(!r)return null;function l(e,t){return{x:e.cx,y:e.cy,value:e.y,errorVal:(0,N.getValueByDataKey)(e,t)}}function u(e,t){return{x:e.cx,y:e.cy,value:e.x,errorVal:(0,N.getValueByDataKey)(e,t)}}return r.map(function(e,i){var r=e.props.direction;return o.default.cloneElement(e,{key:i,data:t,xAxis:a,yAxis:n,layout:"x"===r?"vertical":"horizontal",dataPointFormatter:"x"===r?u:l})})}},{key:"renderLine",value:function(){var e=this.props,t=e.points,a=e.line,i=e.lineType,r=e.lineJointType,l=(0,A.getPresentationAttributes)(this.props),u=(0,A.getPresentationAttributes)(a),s=void 0,d=void 0;if("joint"===i)s=t.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===i){var f=(0,z.getLinearRegression)(t),c=f.xmin,p=f.xmax,y=f.a,m=f.b,h=function(e){return y*e+m};s=[{x:c,y:h(c)},{x:p,y:h(p)}]}var v=K({},l,{fill:"none",stroke:l&&l.fill},u,{points:s});return d=o.default.isValidElement(a)?o.default.cloneElement(a,v):(0,n.default)(a)?a(v):o.default.createElement(T.default,K({},v,{type:r})),o.default.createElement(b.default,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.points,n=e.line,i=e.className,l=e.xAxis,u=e.yAxis,s=e.left,d=e.top,f=e.width,c=e.height,y=e.id;if(t||!a||!a.length)return null;var m=this.state,h=m.isAnimationActive,v=m.isAnimationFinished,A=(0,p.default)("recharts-scatter",i),g=l&&l.allowDataOverflow||u&&u.allowDataOverflow,E=(0,r.default)(y)?this.id:y;return o.default.createElement(b.default,{className:A,clipPath:g?"url(#clipPath-"+E+")":null},g?o.default.createElement("defs",null,o.default.createElement("clipPath",{id:"clipPath-"+E},o.default.createElement("rect",{x:s,y:d,width:f,height:c}))):null,n&&this.renderLine(),this.renderErrorBar(),o.default.createElement(b.default,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!h||v)&&x.default.renderCallByParent(this.props,a))}}]),a}(),B.displayName="Scatter",B.propTypes=K({},A.EVENT_ATTRIBUTES,A.PRESENTATION_ATTRIBUTES,{xAxisId:s.default.oneOfType([s.default.string,s.default.number]),yAxisId:s.default.oneOfType([s.default.string,s.default.number]),zAxisId:s.default.oneOfType([s.default.string,s.default.number]),line:s.default.oneOfType([s.default.bool,s.default.object,s.default.func,s.default.element]),lineType:s.default.oneOf(["fitting","joint"]),lineJointType:s.default.oneOfType([s.default.oneOf(["basis","basisClosed","basisOpen","linear","linearClosed","natural","monotoneX","monotoneY","monotone","step","stepBefore","stepAfter"]),s.default.func]),legendType:s.default.oneOf(A.LEGEND_TYPES),className:s.default.string,name:s.default.oneOfType([s.default.string,s.default.number]),activeIndex:s.default.number,activeShape:s.default.oneOfType([s.default.object,s.default.func,s.default.element]),shape:s.default.oneOfType([s.default.oneOf(["circle","cross","diamond","square","star","triangle","wye"]),s.default.element,s.default.func]),points:s.default.arrayOf(s.default.shape({cx:s.default.number,cy:s.default.number,size:s.default.number,node:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string]),z:s.default.oneOfType([s.default.number,s.default.string])}),payload:s.default.any})),hide:s.default.bool,isAnimationActive:s.default.bool,animationId:s.default.number,animationBegin:s.default.number,animationDuration:s.default.number,animationEasing:s.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"])}),B.defaultProps={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!(0,A.isSsr)(),animationBegin:0,animationDuration:400,animationEasing:"linear"},B.getComposedData=function(e){var t=e.xAxis,a=e.yAxis,n=e.zAxis,i=e.item,l=e.displayedData,o=e.onItemMouseLeave,u=e.onItemMouseEnter,s=e.offset,d=e.xAxisTicks,f=(0,A.findAllByType)(i.props.children,k.default),c=(0,r.default)(t.dataKey)?i.props.dataKey:t.dataKey,p=(0,r.default)(a.dataKey)?i.props.dataKey:a.dataKey,y=n&&n.dataKey,m=n?n.range:E.default.defaultProps.range,h=m&&m[0],b=t.scale.bandwidth?t.scale.bandwidth():0,v=a.scale.bandwidth?a.scale.bandwidth():0,x=l.map(function(e,i){var l=e[c],o=e[p],u=!(0,r.default)(y)&&e[y]||"-",s=[{name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:e},{name:a.name||a.dataKey,unit:a.unit||"",value:o,payload:e}];"-"!==u&&s.push({name:n.name||n.dataKey,unit:n.unit||"",value:u,payload:e});var m=(0,N.getCateCoordinateOfLine)({axis:t,ticks:d,bandSize:b,entry:e,index:i}),x=(0,N.getCateCoordinateOfLine)({axis:a,ticks:d,bandSize:v,entry:e,index:i}),A="-"!==u?n.scale(u):h,g=Math.sqrt(Math.max(A,0)/Math.PI);return K({},e,{cx:m,cy:x,x:m-g,y:x-g,xAxis:t,yAxis:a,zAxis:n,width:2*g,height:2*g,size:A,node:{x:l,y:o,z:u},tooltipPayload:s,tooltipPosition:{x:m,y:x},payload:e},f&&f[i]&&f[i].props)});return K({onMouseLeave:o,onMouseEnter:u,points:x},s)},j=C))||j;exports.default=F;
},{"lodash/isEqual":507,"lodash/isFunction":498,"lodash/isNil":497,"react":8,"prop-types":96,"react-smooth":506,"classnames":495,"../util/PureRender":456,"../container/Layer":341,"../component/LabelList":348,"../util/ReactUtils":459,"./ZAxis":374,"../shape/Curve":350,"../shape/Symbols":355,"./ErrorBar":375,"../component/Cell":346,"../util/DataUtils":458,"../util/ChartUtils":462}],372:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),a=n(t),r=require("../util/PureRender"),u=n(r),o=require("../util/ReactUtils");function n(e){return e&&e.__esModule?e:{default:e}}var l,f,i,d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(0,u.default)((i=f=function(t){function a(){return c(this,a),p(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return s(a,e.Component),d(a,[{key:"render",value:function(){return null}}]),a}(),f.displayName="XAxis",f.propTypes={allowDecimals:a.default.bool,allowDuplicatedCategory:a.default.bool,hide:a.default.bool,name:a.default.oneOfType([a.default.string,a.default.number]),unit:a.default.oneOfType([a.default.string,a.default.number]),xAxisId:a.default.oneOfType([a.default.string,a.default.number]),domain:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.number,a.default.func,a.default.oneOf(["auto","dataMin","dataMax"])])),dataKey:a.default.oneOfType([a.default.string,a.default.number,a.default.func]),width:a.default.number,height:a.default.number,mirror:a.default.bool,orientation:a.default.oneOf(["top","bottom"]),type:a.default.oneOf(["number","category"]),ticks:a.default.array,tickCount:a.default.number,tickFormatter:a.default.func,padding:a.default.shape({left:a.default.number,right:a.default.number}),allowDataOverflow:a.default.bool,scale:a.default.oneOfType([a.default.oneOf(o.SCALE_TYPES),a.default.func]),tick:a.default.oneOfType([a.default.bool,a.default.func,a.default.object,a.default.element]),axisLine:a.default.oneOfType([a.default.bool,a.default.object]),tickLine:a.default.oneOfType([a.default.bool,a.default.object]),minTickGap:a.default.number,tickSize:a.default.number,interval:a.default.oneOfType([a.default.number,a.default.oneOf(["preserveStart","preserveEnd","preserveStartEnd"])]),reversed:a.default.bool},f.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",domain:[0,"auto"],padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0},l=i))||l;exports.default=b;
},{"react":8,"prop-types":96,"../util/PureRender":456,"../util/ReactUtils":459}],373:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),a=o(t),u=require("../util/PureRender"),n=o(u);function o(e){return e&&e.__esModule?e:{default:e}}var r,l,f,i=function(){function e(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,a,u){return a&&e(t.prototype,a),u&&e(t,u),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(0,n.default)((f=l=function(t){function a(){return d(this,a),p(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return c(a,e.Component),i(a,[{key:"render",value:function(){return null}}]),a}(),l.displayName="YAxis",l.propTypes={allowDecimals:a.default.bool,allowDuplicatedCategory:a.default.bool,hide:a.default.bool,name:a.default.oneOfType([a.default.string,a.default.number]),unit:a.default.oneOfType([a.default.string,a.default.number]),yAxisId:a.default.oneOfType([a.default.string,a.default.number]),domain:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.number,a.default.func,a.default.oneOf(["auto","dataMin","dataMax"])])),dataKey:a.default.oneOfType([a.default.string,a.default.number,a.default.func]),ticks:a.default.array,tickCount:a.default.number,tickFormatter:a.default.func,width:a.default.number,height:a.default.number,mirror:a.default.bool,orientation:a.default.oneOf(["left","right"]),type:a.default.oneOf(["number","category"]),padding:a.default.shape({top:a.default.number,bottom:a.default.number}),allowDataOverflow:a.default.bool,scale:a.default.oneOfType([a.default.oneOf(["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utcTime","sequential","threshold"]),a.default.func]),tick:a.default.oneOfType([a.default.bool,a.default.func,a.default.object,a.default.element]),axisLine:a.default.oneOfType([a.default.bool,a.default.object]),tickLine:a.default.oneOfType([a.default.bool,a.default.object]),minTickGap:a.default.number,tickSize:a.default.number,interval:a.default.oneOfType([a.default.number,a.default.oneOf(["preserveStart","preserveEnd","preserveStartEnd"])]),reversed:a.default.bool},l.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",domain:[0,"auto"],padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1},r=f))||r;exports.default=s;
},{"react":8,"prop-types":96,"../util/PureRender":456}],571:[function(require,module,exports) {
var i=require("./debounce"),e=require("./isObject"),n="Expected a function";function r(r,t,a){var o=!0,u=!0;if("function"!=typeof r)throw new TypeError(n);return e(a)&&(o="leading"in a?!!a.leading:o,u="trailing"in a?!!a.trailing:u),i(r,t,{leading:o,maxWait:t,trailing:u})}module.exports=r;
},{"./debounce":503,"./isObject":500}],684:[function(require,module,exports) {
function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function t(e){return"function"==typeof e}function s(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}module.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},e.prototype.emit=function(e){var s,r,o,h,v,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((s=arguments[1])instanceof Error)throw s;var u=new Error('Uncaught, unspecified "error" event. ('+s+")");throw u.context=s,u}if(i(r=this._events[e]))return!1;if(t(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),r.apply(this,h)}else if(n(r))for(h=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,v=0;v<o;v++)l[v].apply(this,h);return!0},e.prototype.addListener=function(s,r){var o;if(!t(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,t(r.listener)?r.listener:r),this._events[s]?n(this._events[s])?this._events[s].push(r):this._events[s]=[this._events[s],r]:this._events[s]=r,n(this._events[s])&&!this._events[s].warned&&(o=i(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[s].length>o&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(e,s){if(!t(s))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,s.apply(this,arguments))}return i.listener=s,this.on(e,i),this},e.prototype.removeListener=function(e,s){var i,r,o,h;if(!t(s))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,r=-1,i===s||t(i.listener)&&i.listener===s)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,s);else if(n(i)){for(h=o;h-- >0;)if(i[h]===s||i[h].listener&&i[h].listener===s){r=h;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,s)}return this},e.prototype.removeAllListeners=function(e){var s,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(s in this._events)"removeListener"!==s&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(t(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},e.prototype.listeners=function(e){return this._events&&this._events[e]?t(this._events[e])?[this._events[e]]:this._events[e].slice():[]},e.prototype.listenerCount=function(e){if(this._events){var s=this._events[e];if(t(s))return 1;if(s)return s.length}return 0},e.listenerCount=function(e,t){return e.listenerCount(t)};
},{}],551:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SYNC_EVENT=exports.eventCenter=void 0;var e=require("events"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var s=new t.default;s.setMaxListeners&&s.setMaxListeners(10),exports.eventCenter=s;var n=exports.SYNC_EVENT="recharts.syncMouseEvents";
},{"events":684}],466:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/sortBy"),t=Y(e),a=require("lodash/isFunction"),r=Y(a),i=require("lodash/range"),n=Y(i),o=require("lodash/throttle"),s=Y(o),d=require("lodash/isNil"),l=Y(d),u=require("react"),c=Y(u),p=require("prop-types"),f=Y(p),h=require("classnames"),y=Y(h),v=require("../container/Surface"),x=Y(v),g=require("../container/Layer"),m=Y(g),A=require("../component/Tooltip"),I=Y(A),k=require("../component/Legend"),b=Y(k),O=require("../shape/Curve"),E=Y(O),C=require("../shape/Cross"),M=Y(C),S=require("../shape/Sector"),T=Y(S),G=require("../shape/Dot"),w=Y(G),D=require("../shape/Rectangle"),B=Y(D),P=require("../util/ReactUtils"),L=require("../cartesian/CartesianAxis"),N=Y(L),R=require("../cartesian/Brush"),q=Y(R),z=require("../util/DOMUtils"),j=require("../util/DataUtils"),_=require("../util/ChartUtils"),K=require("../util/PolarUtils"),U=require("../util/PureRender"),W=require("../util/Events");function Y(e){return e&&e.__esModule?e:{default:e}}var H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},V=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function X(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ee={xAxis:["bottom","top"],yAxis:["left","right"]},te={x:0,y:0},ae=function(e){var a,i,o,d=e.chartName,p=e.GraphicalChild,h=e.eventType,v=void 0===h?"axis":h,g=e.axisComponents,A=e.legendContent,k=e.formatAxisMap,O=e.defaultProps,C=e.propTypes;return i=a=function(e){function t(e){Q(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.call(a);var r=a.constructor.createDefaultState(e);return a.state=H({},r,{updateId:0},a.updateStateOfAxisMapsOffsetAndStackGroups(H({props:e},r,{updateId:0}))),a.uniqueChartId=(0,l.default)(e.id)?(0,j.uniqueId)("recharts"):e.id,e.throttleDelay&&(a.triggeredAfterMouseMove=(0,s.default)(a.triggeredAfterMouseMove,e.throttleDelay)),a}return $(t,u.Component),V(t,[{key:"componentDidMount",value:function(){(0,l.default)(this.props.syncId)||this.addListener()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.data,r=t.children,i=t.width,n=t.height,o=t.layout,s=t.stackOffset,d=t.margin,u=this.state.updateId;if(e.data===a&&e.width===i&&e.height===n&&e.layout===o&&e.stackOffset===s&&(0,U.shallowEqual)(e.margin,d)){if(!(0,P.isChildrenEqual)(e.children,r)){var c=!(0,l.default)(e.data)?u:u+1,p=this.state,f=p.dataStartIndex,h=p.dataEndIndex,y=H({},this.constructor.createDefaultState(e),{dataEndIndex:h,dataStartIndex:f});this.setState(H({},y,{updateId:c},this.updateStateOfAxisMapsOffsetAndStackGroups(H({props:e},y,{updateId:c}))))}}else{var v=this.constructor.createDefaultState(e);this.setState(H({},v,{updateId:u+1},this.updateStateOfAxisMapsOffsetAndStackGroups(H({props:e},v,{updateId:u+1}))))}(0,l.default)(this.props.syncId)&&!(0,l.default)(e.syncId)&&this.addListener(),!(0,l.default)(this.props.syncId)&&(0,l.default)(e.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){(0,l.default)(this.props.syncId)||this.removeListener(),"function"==typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getAxisMap",value:function(e,t){var a=t.axisType,r=void 0===a?"xAxis":a,i=t.AxisComp,n=t.graphicalItems,o=t.stackGroups,s=t.dataStartIndex,d=t.dataEndIndex,l=e.children,u=r+"Id",c=(0,P.findAllByType)(l,i),p={};return c&&c.length?p=this.getAxisMapByAxes(e,{axes:c,graphicalItems:n,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:s,dataEndIndex:d}):n&&n.length&&(p=this.getAxisMapByItems(e,{Axis:i,graphicalItems:n,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:s,dataEndIndex:d})),p}},{key:"getAxisMapByAxes",value:function(e,t){var a=this,r=t.axes,i=t.graphicalItems,o=t.axisType,s=t.axisIdKey,d=t.stackGroups,u=t.dataStartIndex,c=t.dataEndIndex,p=e.layout,f=e.children,h=e.stackOffset,y=(0,_.isCategorialAxis)(p,o);return r.reduce(function(t,r){var v=r.props,x=v.type,g=v.dataKey,m=v.allowDataOverflow,A=v.allowDuplicatedCategory,I=v.scale,k=v.ticks,b=r.props[s],O=a.constructor.getDisplayedData(e,{graphicalItems:i.filter(function(e){return e.props[s]===b}),dataStartIndex:u,dataEndIndex:c}),E=O.length;if(!t[b]){var C=void 0,M=void 0,S=void 0;if(g){if(C=(0,_.getDomainOfDataByKey)(O,g,x),"category"===x&&y){var T=(0,j.hasDuplicate)(C);A&&T?(M=C,C=(0,n.default)(0,E)):A||(C=(0,_.parseDomainOfCategoryAxis)(r.props.domain,C,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(J(e),[t])},[]))}else if("category"===x)C=A?C.filter(function(e){return""!==e&&!(0,l.default)(e)}):(0,_.parseDomainOfCategoryAxis)(r.props.domain,C,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||(0,l.default)(t)?e:[].concat(J(e),[t])},[]);else if("number"===x){var G=(0,_.parseErrorBarsOfAxis)(O,i.filter(function(e){return e.props[s]===b&&!e.props.hide}),g,o);G&&(C=G)}!y||"number"!==x&&"auto"===I||(S=(0,_.getDomainOfDataByKey)(O,g,"category"))}else C=y?(0,n.default)(0,E):d&&d[b]&&d[b].hasStack&&"number"===x?"expand"===h?[0,1]:(0,_.getDomainOfStackGroups)(d[b].stackGroups,u,c):(0,_.getDomainOfItemsWithSameAxis)(O,i.filter(function(e){return e.props[s]===b&&!e.props.hide}),x,!0);return"number"===x&&(C=(0,_.detectReferenceElementsDomain)(f,C,b,o,k),r.props.domain&&(C=(0,_.parseSpecifiedDomain)(r.props.domain,C,m))),H({},t,F({},b,H({},r.props,{axisType:o,domain:C,categoricalDomain:S,duplicateDomain:M,originalDomain:r.props.domain,isCategorial:y,layout:p})))}return t},{})}},{key:"getAxisMapByItems",value:function(e,t){var a=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,s=t.stackGroups,d=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,p=this.constructor.getDisplayedData(e,{graphicalItems:a,dataStartIndex:d,dataEndIndex:l}),f=p.length,h=(0,_.isCategorialAxis)(u,i),y=-1;return a.reduce(function(e,t){var v=t.props[o];if(!e[v]){y++;var x=void 0;return h?x=(0,n.default)(0,f):s&&s[v]&&s[v].hasStack?(x=(0,_.getDomainOfStackGroups)(s[v].stackGroups,d,l),x=(0,_.detectReferenceElementsDomain)(c,x,v,i)):(x=(0,_.parseSpecifiedDomain)(r.defaultProps.domain,(0,_.getDomainOfItemsWithSameAxis)(p,a.filter(function(e){return e.props[o]===v&&!e.props.hide}),"number"),r.defaultProps.allowDataOverflow),x=(0,_.detectReferenceElementsDomain)(c,x,v,i)),H({},e,F({},v,H({axisType:i},r.defaultProps,{hide:!0,orientation:ee[i]&&ee[i][y%2],domain:x,originalDomain:r.defaultProps.domain,isCategorial:h,layout:u})))}return e},{})}},{key:"getActiveCoordinate",value:function(e,t,a){var r=this.props.layout,i=e.find(function(e){return e&&e.index===t});if(i){if("horizontal"===r)return{x:i.coordinate,y:a.y};if("vertical"===r)return{x:a.x,y:i.coordinate};if("centric"===r){var n=i.coordinate,o=a.radius;return H({},a,(0,K.polarToCartesian)(a.cx,a.cy,o,n),{angle:n,radius:o})}var s=i.coordinate,d=a.angle;return H({},a,(0,K.polarToCartesian)(a.cx,a.cy,s,d),{angle:d,radius:s})}return te}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=(0,z.getOffset)(this.container),a=(0,z.calculateChartCoordinate)(e,t),r=this.inRange(a.chartX,a.chartY);if(!r)return null;var i=this.state,n=i.xAxisMap,o=i.yAxisMap;if("axis"!==v&&n&&o){var s=(0,j.getAnyElementOfObject)(n).scale,d=(0,j.getAnyElementOfObject)(o).scale,l=s&&s.invert?s.invert(a.chartX):null,u=d&&d.invert?d.invert(a.chartY):null;return H({},a,{xValue:l,yValue:u})}var c=this.state,p=c.orderedTooltipTicks,f=c.tooltipAxis,h=c.tooltipTicks,y=this.calculateTooltipPos(r),x=(0,_.calculateActiveTickIndex)(y,p,h,f);if(x>=0&&h){var g=h[x]&&h[x].value,m=this.getTooltipContent(x,g),A=this.getActiveCoordinate(p,x,r);return H({},a,{activeTooltipIndex:x,activeLabel:g,activePayload:m,activeCoordinate:A})}return null}},{key:"getTooltipContent",value:function(e,t){var a=this.state,r=a.graphicalItems,i=a.tooltipAxis,n=this.constructor.getDisplayedData(this.props,this.state);return e<0||!r||!r.length||e>=n.length?null:r.reduce(function(a,r){if(r.props.hide)return a;var o=r.props,s=o.dataKey,d=o.name,l=o.unit,u=o.formatter,c=o.data,p=void 0;return(p=i.dataKey&&!i.allowDuplicatedCategory?(0,j.findEntryInArray)(c||n,i.dataKey,t):n[e])?[].concat(J(a),[H({},(0,P.getPresentationAttributes)(r),{dataKey:s,unit:l,formatter:u,name:d||s,color:(0,_.getMainColorOfGraphicItem)(r),value:(0,_.getValueByDataKey)(p,s),payload:p})]):a},[])}},{key:"getFormatItems",value:function(e,t){var a=this,r=t.graphicalItems,i=t.stackGroups,n=t.offset,o=t.updateId,s=t.dataStartIndex,d=t.dataEndIndex,u=e.barSize,c=e.layout,p=e.barGap,f=e.barCategoryGap,h=e.maxBarSize,y=this.getAxisNameByLayout(c),v=y.numericAxisName,x=y.cateAxisName,m=this.constructor.hasBar(r),A=m&&(0,_.getBarSizeList)({barSize:u,stackGroups:i}),I=[];return r.forEach(function(r,u){var y,k=a.constructor.getDisplayedData(e,{dataStartIndex:s,dataEndIndex:d},r),b=r.props,O=b.dataKey,E=b.maxBarSize,C=r.props[v+"Id"],M=r.props[x+"Id"],S=g.reduce(function(e,a){var i,n=t[a.axisType+"Map"],o=r.props[a.axisType+"Id"],s=n&&n[o];return H({},e,(F(i={},a.axisType,s),F(i,a.axisType+"Ticks",(0,_.getTicksOfAxis)(s)),i))},{}),T=S[x],G=S[x+"Ticks"],w=i&&i[C]&&i[C].hasStack&&(0,_.getStackedDataOfItem)(r,i[C].stackGroups),D=(0,_.getBandSizeOfAxis)(T,G),B=(0,l.default)(E)?h:E,L=m&&(0,_.getBarPosition)({barGap:p,barCategoryGap:f,bandSize:D,sizeList:A[M],maxBarSize:B}),N=r&&r.type&&r.type.getComposedData;N&&I.push({props:H({},N(H({},S,{displayedData:k,props:e,dataKey:O,item:r,bandSize:D,barPosition:L,offset:n,stackedData:w,layout:c,dataStartIndex:s,dataEndIndex:d,onItemMouseLeave:(0,_.combineEventHandlers)(a.handleItemMouseLeave,null,r.props.onMouseLeave),onItemMouseEnter:(0,_.combineEventHandlers)(a.handleItemMouseEnter,null,r.props.onMouseEnter)})),(y={key:r.key||"item-"+u},F(y,v,S[v]),F(y,x,S[x]),F(y,"animationId",o),y)),childIndex:(0,P.parseChildIndex)(r,e.children),item:r})}),I}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,a=t.activeCoordinate,r=t.offset,i=t.tooltipAxisBandSize,n=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?a.x-n:r.left+.5,y:"horizontal"===e?r.top+.5:a.y-n,width:"horizontal"===e?i:r.width-1,height:"horizontal"===e?r.height-1:i}}},{key:"getCursorPoints",value:function(){var e=this.props.layout,t=this.state,a=t.activeCoordinate,r=t.offset,i=void 0,n=void 0,o=void 0,s=void 0;if("horizontal"===e)o=i=a.x,n=r.top,s=r.top+r.height;else if("vertical"===e)s=n=a.y,i=r.left,o=r.left+r.width;else if(!(0,l.default)(a.cx)||!(0,l.default)(a.cy)){if("centric"!==e){var d=a.cx,u=a.cy,c=a.radius,p=a.startAngle,f=a.endAngle;return{points:[(0,K.polarToCartesian)(d,u,c,p),(0,K.polarToCartesian)(d,u,c,f)],cx:d,cy:u,radius:c,startAngle:p,endAngle:f}}var h=a.cx,y=a.cy,v=a.innerRadius,x=a.outerRadius,g=a.angle,m=(0,K.polarToCartesian)(h,y,v,g),A=(0,K.polarToCartesian)(h,y,x,g);i=m.x,n=m.y,o=A.x,s=A.y}return[{x:i,y:n},{x:o,y:s}]}},{key:"getAxisNameByLayout",value:function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}}},{key:"calculateTooltipPos",value:function(e){var t=this.props.layout;return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}},{key:"inRange",value:function(e,t){var a=this.props.layout;if("horizontal"===a||"vertical"===a){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var i=this.state,n=i.angleAxisMap,o=i.radiusAxisMap;if(n&&o){var s=(0,j.getAnyElementOfObject)(n);return(0,K.inRangeOfSector)({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=(0,P.findChildByType)(e,I.default)&&"axis"===v?{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove}:{},a=(0,P.filterEventAttributes)(this.props,this.handleOuterEvent);return H({},a,t)}},{key:"updateStateOfAxisMapsOffsetAndStackGroups",value:function(e){var t=this,a=e.props,r=e.dataStartIndex,i=e.dataEndIndex,n=e.updateId;if(!(0,P.validateWidthHeight)({props:a}))return null;var o=a.children,s=a.layout,l=a.stackOffset,u=a.data,c=a.reverseStackOrder,f=this.getAxisNameByLayout(s),h=f.numericAxisName,y=f.cateAxisName,v=(0,P.findAllByType)(o,p),x=(0,_.getStackGroupsByAxisId)(u,v,h+"Id",y+"Id",l,c),m=g.reduce(function(e,n){var o=n.axisType+"Map";return H({},e,F({},o,t.getAxisMap(a,H({},n,{graphicalItems:v,stackGroups:n.axisType===h&&x,dataStartIndex:r,dataEndIndex:i}))))},{}),A=this.calculateOffset(H({},m,{props:a,graphicalItems:v}));Object.keys(m).forEach(function(e){m[e]=k(a,m[e],A,e.replace("Map",""),d)});var I=m[y+"Map"],b=this.tooltipTicksGenerator(I),O=this.getFormatItems(a,H({},m,{dataStartIndex:r,dataEndIndex:i,updateId:n,graphicalItems:v,stackGroups:x,offset:A}));return H({formatedGraphicalItems:O,graphicalItems:v,offset:A,stackGroups:x},b,m)}},{key:"addListener",value:function(){W.eventCenter.on(W.SYNC_EVENT,this.handleReceiveSyncEvent),W.eventCenter.setMaxListeners&&W.eventCenter._maxListeners&&W.eventCenter.setMaxListeners(W.eventCenter._maxListeners+1)}},{key:"removeListener",value:function(){W.eventCenter.removeListener(W.SYNC_EVENT,this.handleReceiveSyncEvent),W.eventCenter.setMaxListeners&&W.eventCenter._maxListeners&&W.eventCenter.setMaxListeners(W.eventCenter._maxListeners-1)}},{key:"calculateOffset",value:function(e){var t=e.props,a=e.graphicalItems,r=e.xAxisMap,i=void 0===r?{}:r,n=e.yAxisMap,o=void 0===n?{}:n,s=t.width,d=t.height,l=t.children,u=t.margin||{},c=(0,P.findChildByType)(l,q.default),p=(0,P.findChildByType)(l,b.default),f=Object.keys(o).reduce(function(e,t){var a=o[t],r=a.orientation;return a.mirror||a.hide?e:H({},e,F({},r,e[r]+a.width))},{left:u.left||0,right:u.right||0}),h=Object.keys(i).reduce(function(e,t){var a=i[t],r=a.orientation;return a.mirror||a.hide?e:H({},e,F({},r,e[r]+a.height))},{top:u.top||0,bottom:u.bottom||0}),y=H({},h,f),v=y.bottom;if(c&&(y.bottom+=c.props.height||q.default.defaultProps.height),p&&this.legendInstance){var x=this.legendInstance.getBBox();y=(0,_.appendOffsetOfLegend)(y,a,t,x)}return H({brushBottom:v},y,{width:s-y.left-y.right,height:d-y.top-y.bottom})}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;(0,l.default)(t)||W.eventCenter.emit(W.SYNC_EVENT,t,this.uniqueChartId,e)}},{key:"filterFormatItem",value:function(e,t,a){for(var r=this.state.formatedGraphicalItems,i=0,n=r.length;i<n;i++){var o=r[i];if(o.item===e||o.props.key===e.key||t===(0,P.getDisplayName)(o.item.type)&&a===o.childIndex)return o}return null}},{key:"renderAxis",value:function(e,t,a,r){var i=this.props,n=i.width,o=i.height;return c.default.createElement(N.default,H({},e,{className:"recharts-"+e.axisType+" "+e.axisType,key:t.key||a+"-"+r,viewBox:{x:0,y:0,width:n,height:o},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderLegend",value:function(){var e=this,t=this.state.formatedGraphicalItems,a=this.props,r=a.children,i=a.width,n=a.height,o=this.props.margin||{},s=i-(o.left||0)-(o.right||0),d=n-(o.top||0)-(o.bottom||0),l=(0,_.getLegendProps)({children:r,formatedGraphicalItems:t,legendWidth:s,legendHeight:d,legendContent:A});if(!l)return null;var c=l.item,p=X(l,["item"]);return(0,u.cloneElement)(c,H({},p,{chartWidth:i,chartHeight:n,margin:o,ref:function(t){e.legendInstance=t},onBBoxUpdate:this.handleLegendBBoxUpdate}))}},{key:"renderTooltip",value:function(){var e=this.props.children,t=(0,P.findChildByType)(e,I.default);if(!t)return null;var a=this.state,r=a.isTooltipActive,i=a.activeCoordinate,n=a.activePayload,o=a.activeLabel,s=a.offset;return(0,u.cloneElement)(t,{viewBox:H({},s,{x:s.left,y:s.top}),active:r,label:o,payload:r?n:[],coordinate:i})}},{key:"renderActiveDot",value:function(e,t){var a=void 0;return a=(0,u.isValidElement)(e)?(0,u.cloneElement)(e,t):(0,r.default)(e)?e(t):c.default.createElement(w.default,t),c.default.createElement(m.default,{className:"recharts-active-dot",key:t.key},a)}},{key:"renderActivePoints",value:function(e){var t=e.item,a=e.activePoint,r=e.basePoint,i=e.childIndex,n=e.isRange,o=[],s=t.props.key,d=t.item.props,l=d.activeDot,u=d.dataKey,c=H({index:i,dataKey:u,cx:a.x,cy:a.y,r:4,fill:(0,_.getMainColorOfGraphicItem)(t.item),strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value,key:s+"-activePoint-"+i},(0,P.getPresentationAttributes)(l),(0,P.filterEventAttributes)(l));return o.push(this.renderActiveDot(l,c,i)),r?o.push(this.renderActiveDot(l,H({},c,{cx:r.x,cy:r.y,key:s+"-basePoint-"+i}),i)):n&&o.push(null),o}},{key:"render",value:function(){var e=this;if(!(0,P.validateWidthHeight)(this))return null;var t=this.props,a=t.children,r=t.className,i=t.width,n=t.height,o=t.style,s=t.compact,d=X(t,["children","className","width","height","style","compact"]),l=(0,P.getPresentationAttributes)(d),u={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis}};if(s)return c.default.createElement(x.default,H({},l,{width:i,height:n}),(0,P.renderByOrder)(a,u));var p=this.parseEventsOfWrapper();return c.default.createElement("div",H({className:(0,y.default)("recharts-wrapper",r),style:H({},o,{position:"relative",cursor:"default",width:i,height:n})},p,{ref:function(t){e.container=t}}),c.default.createElement(x.default,H({},l,{width:i,height:n}),(0,P.renderByOrder)(a,u)),this.renderLegend(),this.renderTooltip())}}]),t}(),a.displayName=d,a.propTypes=H({syncId:f.default.oneOfType([f.default.string,f.default.number]),compact:f.default.bool,width:f.default.number,height:f.default.number,data:f.default.arrayOf(f.default.object),layout:f.default.oneOf(["horizontal","vertical"]),stackOffset:f.default.oneOf(["sign","expand","none","wiggle","silhouette"]),throttleDelay:f.default.number,margin:f.default.shape({top:f.default.number,right:f.default.number,bottom:f.default.number,left:f.default.number}),barCategoryGap:f.default.oneOfType([f.default.number,f.default.string]),barGap:f.default.oneOfType([f.default.number,f.default.string]),barSize:f.default.oneOfType([f.default.number,f.default.string]),maxBarSize:f.default.number,style:f.default.object,className:f.default.string,children:f.default.oneOfType([f.default.arrayOf(f.default.node),f.default.node]),onClick:f.default.func,onMouseLeave:f.default.func,onMouseEnter:f.default.func,onMouseMove:f.default.func,onMouseDown:f.default.func,onMouseUp:f.default.func,reverseStackOrder:f.default.bool,id:f.default.string},C),a.defaultProps=H({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1},O),a.createDefaultState=function(e){var t=e.children,a=(0,P.findChildByType)(t,q.default);return{chartX:0,chartY:0,dataStartIndex:a&&a.props&&a.props.startIndex||0,dataEndIndex:a&&a.props&&a.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!1}},a.hasBar=function(e){return!(!e||!e.length)&&e.some(function(e){var t=(0,P.getDisplayName)(e&&e.type);return t&&t.indexOf("Bar")>=0})},a.getDisplayedData=function(e,t,a){var r=t.graphicalItems,i=t.dataStartIndex,n=t.dataEndIndex,o=(r||[]).reduce(function(e,t){var a=t.props.data;return a&&a.length?[].concat(J(e),J(a)):e},[]);if(o&&o.length>0)return o;if(a&&a.props&&a.props.data&&a.props.data.length>0)return a.props.data;var s=e.data;return s&&s.length&&(0,j.isNumber)(i)&&(0,j.isNumber)(n)?s.slice(i,n+1):[]},o=function(){var e=this;this.handleLegendBBoxUpdate=function(t){if(t&&e.legendInstance){var a=e.state,r=a.dataStartIndex,i=a.dataEndIndex,n=a.updateId;e.setState(e.updateStateOfAxisMapsOffsetAndStackGroups({props:e.props,dataStartIndex:r,dataEndIndex:i,updateId:n}))}},this.handleReceiveSyncEvent=function(t,a,r){var i=e.props,n=i.syncId,o=i.layout,s=e.state.updateId;if(n===t&&a!==e.uniqueChartId){var d=r.dataStartIndex,u=r.dataEndIndex;if((0,l.default)(r.dataStartIndex)&&(0,l.default)(r.dataEndIndex))if((0,l.default)(r.activeTooltipIndex))e.setState(r);else{var c=r.chartX,p=r.chartY,f=r.activeTooltipIndex,h=e.state,y=h.offset,v=h.tooltipTicks;if(!y)return;var x=H({},y,{x:y.left,y:y.top}),g=Math.min(c,x.x+x.width),m=Math.min(p,x.y+x.height),A=v[f]&&v[f].value,I=e.getTooltipContent(f),k=v[f]?{x:"horizontal"===o?v[f].coordinate:g,y:"horizontal"===o?m:v[f].coordinate}:te;e.setState(H({},r,{activeLabel:A,activeCoordinate:k,activePayload:I}))}else e.setState(H({dataStartIndex:d,dataEndIndex:u},e.updateStateOfAxisMapsOffsetAndStackGroups({props:e.props,dataStartIndex:d,dataEndIndex:u,updateId:s})))}},this.handleBrushChange=function(t){var a=t.startIndex,r=t.endIndex;if(a!==e.state.dataStartIndex||r!==e.state.dataEndIndex){var i=e.state.updateId;e.setState(function(){return H({dataStartIndex:a,dataEndIndex:r},e.updateStateOfAxisMapsOffsetAndStackGroups({props:e.props,dataStartIndex:a,dataEndIndex:r,updateId:i}))}),e.triggerSyncEvent({dataStartIndex:a,dataEndIndex:r})}},this.handleMouseEnter=function(t){var a=e.props.onMouseEnter,i=e.getMouseInfo(t);if(i){var n=H({},i,{isTooltipActive:!0});e.setState(n),e.triggerSyncEvent(n),(0,r.default)(a)&&a(n,t)}},this.triggeredAfterMouseMove=function(t){var a=e.props.onMouseMove,i=e.getMouseInfo(t),n=i?H({},i,{isTooltipActive:!0}):{isTooltipActive:!1};e.setState(n),e.triggerSyncEvent(n),(0,r.default)(a)&&a(n,t)},this.handleItemMouseEnter=function(t){e.setState(function(){return{isTooltipActive:!0,activeItem:t,activePayload:t.tooltipPayload,activeCoordinate:t.tooltipPosition||{x:t.cx,y:t.cy}}})},this.handleItemMouseLeave=function(){e.setState(function(){return{isTooltipActive:!1}})},this.handleMouseMove=function(t){t&&(0,r.default)(t.persist)&&t.persist(),e.triggeredAfterMouseMove(t)},this.handleMouseLeave=function(t){var a=e.props.onMouseLeave,i={isTooltipActive:!1};e.setState(i),e.triggerSyncEvent(i),(0,r.default)(a)&&a(i,t)},this.handleOuterEvent=function(t){var a=(0,P.getReactEventByType)(t);if(a&&(0,r.default)(e.props[a])){var i=e.getMouseInfo(t);(0,e.props[a])(i,t)}},this.handleClick=function(t){var a=e.props.onClick;(0,r.default)(a)&&a(e.getMouseInfo(t),t)},this.handleMouseDown=function(t){var a=e.props.onMouseDown;(0,r.default)(a)&&a(e.getMouseInfo(t),t)},this.handleMouseUp=function(t){var a=e.props.onMouseUp;(0,r.default)(a)&&a(e.getMouseInfo(t),t)},this.handleTouchMove=function(t){null!=t.changedTouches&&t.changedTouches.length>0&&e.handleMouseMove(t.changedTouches[0])},this.verticalCoordinatesGenerator=function(e){var t=e.xAxis,a=e.width,r=e.height,i=e.offset;return(0,_.getCoordinatesOfGrid)(N.default.getTicks(H({},N.default.defaultProps,t,{ticks:(0,_.getTicksOfAxis)(t,!0),viewBox:{x:0,y:0,width:a,height:r}})),i.left,i.left+i.width)},this.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,a=e.width,r=e.height,i=e.offset;return(0,_.getCoordinatesOfGrid)(N.default.getTicks(H({},N.default.defaultProps,t,{ticks:(0,_.getTicksOfAxis)(t,!0),viewBox:{x:0,y:0,width:a,height:r}})),i.top,i.top+i.height)},this.axesTicksGenerator=function(e){return(0,_.getTicksOfAxis)(e,!0)},this.tooltipTicksGenerator=function(e){var a=(0,j.getAnyElementOfObject)(e),r=(0,_.getTicksOfAxis)(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:(0,t.default)(r,function(e){return e.coordinate}),tooltipAxis:a,tooltipAxisBandSize:(0,_.getBandSizeOfAxis)(a)}},this.renderCursor=function(t){var a=e.state,r=a.isTooltipActive,i=a.activeCoordinate,n=a.activePayload,o=a.offset;if(!(t&&t.props.cursor&&r&&i))return null;var s=e.props.layout,l=void 0,c=E.default;if("ScatterChart"===d)l=i,c=M.default;else if("BarChart"===d)l=e.getCursorRectangle(),c=B.default;else if("radial"===s){var p=e.getCursorPoints(),f=p.cx,h=p.cy,y=p.radius;l={cx:f,cy:h,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:y,outerRadius:y},c=T.default}else l={points:e.getCursorPoints()},c=E.default;var v=t.key||"_recharts-cursor",x=H({stroke:"#ccc"},o,l,(0,P.getPresentationAttributes)(t.props.cursor),{payload:n,key:v,className:"recharts-tooltip-cursor"});return(0,u.isValidElement)(t.props.cursor)?(0,u.cloneElement)(t.props.cursor,x):(0,u.createElement)(c,x)},this.renderPolarAxis=function(t,a,r){var i=t.type.axisType,n=e.state[i+"Map"][t.props[i+"Id"]];return(0,u.cloneElement)(t,H({},n,{className:i,key:t.key||a+"-"+r,ticks:(0,_.getTicksOfAxis)(n,!0)}))},this.renderXAxis=function(t,a,r){var i=e.state.xAxisMap[t.props.xAxisId];return e.renderAxis(i,t,a,r)},this.renderYAxis=function(t,a,r){var i=e.state.yAxisMap[t.props.yAxisId];return e.renderAxis(i,t,a,r)},this.renderGrid=function(t){var a=e.state,r=a.xAxisMap,i=a.yAxisMap,n=a.offset,o=e.props,s=o.width,d=o.height,l=(0,j.getAnyElementOfObject)(r),c=(0,j.getAnyElementOfObject)(i),p=t.props||{};return(0,u.cloneElement)(t,{key:t.key||"grid",x:(0,j.isNumber)(p.x)?p.x:n.left,y:(0,j.isNumber)(p.y)?p.y:n.top,width:(0,j.isNumber)(p.width)?p.width:n.width,height:(0,j.isNumber)(p.height)?p.height:n.height,xAxis:l,yAxis:c,offset:n,chartWidth:s,chartHeight:d,verticalCoordinatesGenerator:e.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:e.horizontalCoordinatesGenerator})},this.renderPolarGrid=function(t){var a=e.state,r=a.radiusAxisMap,i=a.angleAxisMap,n=(0,j.getAnyElementOfObject)(r),o=(0,j.getAnyElementOfObject)(i),s=o.cx,d=o.cy,l=o.innerRadius,c=o.outerRadius;return(0,u.cloneElement)(t,{polarAngles:(0,_.getTicksOfAxis)(o,!0).map(function(e){return e.coordinate}),polarRadius:(0,_.getTicksOfAxis)(n,!0).map(function(e){return e.coordinate}),cx:s,cy:d,innerRadius:l,outerRadius:c,key:t.key||"polar-grid"})},this.renderBrush=function(t){var a=e.props,r=a.margin,i=a.data,n=e.state,o=n.offset,s=n.dataStartIndex,d=n.dataEndIndex,l=n.updateId;return(0,u.cloneElement)(t,{key:t.key||"_recharts-brush",onChange:(0,_.combineEventHandlers)(e.handleBrushChange,null,t.props.onChange),data:i,x:(0,j.isNumber)(t.props.x)?t.props.x:o.left,y:(0,j.isNumber)(t.props.y)?t.props.y:o.top+o.height+o.brushBottom-(r.bottom||0),width:(0,j.isNumber)(t.props.width)?t.props.width:o.width,startIndex:s,endIndex:d,updateId:"brush-"+l})},this.renderReferenceElement=function(t,a,r){if(!t)return null;var i=e.state,n=i.xAxisMap,o=i.yAxisMap,s=i.offset,d=t.props,l=d.xAxisId,c=d.yAxisId;return(0,u.cloneElement)(t,{key:t.key||a+"-"+r,xAxis:n[l],yAxis:o[c],viewBox:{x:s.left,y:s.top,width:s.width,height:s.height}})},this.renderGraphicChild=function(t,a,r){var i=e.filterFormatItem(t,a,r);if(!i)return null;var n=(0,u.cloneElement)(t,i.props),o=e.state,s=o.isTooltipActive,d=o.tooltipAxis,c=o.activeTooltipIndex,p=o.activeLabel,f=e.props.children,h=(0,P.findChildByType)(f,I.default),y=i.props,v=y.points,x=y.isRange,g=y.baseLine,m=i.item.props,A=m.activeDot;if(!m.hide&&s&&h&&A&&c>=0){var k=void 0,b=void 0;if(d.dataKey&&!d.allowDuplicatedCategory?(k=(0,j.findEntryInArray)(v,"payload."+d.dataKey,p),b=x&&g&&(0,j.findEntryInArray)(g,"payload."+d.dataKey,p)):(k=v[c],b=x&&g&&g[c]),!(0,l.default)(k))return[n].concat(J(e.renderActivePoints({item:i,activePoint:k,basePoint:b,childIndex:c,isRange:x})))}return x?[n,null,null]:[n,null]}},i};exports.default=ae;
},{"lodash/sortBy":556,"lodash/isFunction":498,"lodash/range":509,"lodash/throttle":571,"lodash/isNil":497,"react":8,"prop-types":96,"classnames":495,"../container/Surface":340,"../container/Layer":341,"../component/Tooltip":343,"../component/Legend":342,"../shape/Curve":350,"../shape/Cross":354,"../shape/Sector":349,"../shape/Dot":353,"../shape/Rectangle":351,"../util/ReactUtils":459,"../cartesian/CartesianAxis":366,"../cartesian/Brush":362,"../util/DOMUtils":461,"../util/DataUtils":458,"../util/ChartUtils":462,"../util/PolarUtils":464,"../util/PureRender":456,"../util/Events":551}],467:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatAxisMap=void 0;var t=require("./ChartUtils"),e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=exports.formatAxisMap=function(i,o,a,h,l){var n=i.width,p=i.height,d=i.layout,s=Object.keys(o),c={left:a.left,leftMirror:a.left,right:n-a.right,rightMirror:n-a.right,top:a.top,topMirror:a.top,bottom:p-a.bottom,bottomMirror:p-a.bottom};return s.reduce(function(i,n){var p=o[n],s=p.orientation,f=p.domain,g=p.padding,v=void 0===g?{}:g,x=p.mirror,u=p.reversed,b=s+(x?"Mirror":""),m=void 0,y=void 0,A=void 0,w=void 0;m="xAxis"===h?[a.left+(v.left||0),a.left+a.width-(v.right||0)]:"yAxis"===h?"horizontal"===d?[a.top+a.height-(v.bottom||0),a.top+(v.top||0)]:[a.top+(v.top||0),a.top+a.height-(v.bottom||0)]:p.range,u&&(m=[m[1],m[0]]);var O=(0,t.parseScale)(p,l),M=O.scale,S=O.realScaleType;M.domain(f).range(m),(0,t.checkDomainOfScale)(M);var j=(0,t.getTicksOfScale)(M,e({},p,{realScaleType:S}));"xAxis"===h?(w="top"===s&&!x||"bottom"===s&&x,y=a.left,A=c[b]-w*p.height):"yAxis"===h&&(w="left"===s&&!x||"right"===s&&x,y=c[b]-w*p.width,A=a.top);var T=e({},p,j,{realScaleType:S,x:y,y:A,scale:M,width:"xAxis"===h?a.width:p.width,height:"yAxis"===h?a.height:p.height});return T.bandSize=(0,t.getBandSizeOfAxis)(T,j),p.hide||"xAxis"!==h?p.hide||(c[b]+=(w?-1:1)*T.width):c[b]+=(w?-1:1)*T.height,e({},i,r({},n,T))},{})};
},{"./ChartUtils":462}],376:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./generateCategoricalChart"),a=n(e),i=require("../cartesian/Line"),r=n(i),t=require("../cartesian/XAxis"),s=n(t),u=require("../cartesian/YAxis"),l=n(u),x=require("../util/CartesianUtils");function n(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,a.default)({chartName:"LineChart",GraphicalChild:r.default,axisComponents:[{axisType:"xAxis",AxisComp:s.default},{axisType:"yAxis",AxisComp:l.default}],formatAxisMap:x.formatAxisMap});
},{"./generateCategoricalChart":466,"../cartesian/Line":368,"../cartesian/XAxis":372,"../cartesian/YAxis":373,"../util/CartesianUtils":467}],377:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./generateCategoricalChart"),a=o(e),r=require("../cartesian/Bar"),i=o(r),t=require("../cartesian/XAxis"),s=o(t),u=require("../cartesian/YAxis"),l=o(u),x=require("../util/CartesianUtils");function o(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,a.default)({chartName:"BarChart",GraphicalChild:i.default,axisComponents:[{axisType:"xAxis",AxisComp:s.default},{axisType:"yAxis",AxisComp:l.default}],formatAxisMap:x.formatAxisMap});
},{"./generateCategoricalChart":466,"../cartesian/Bar":370,"../cartesian/XAxis":372,"../cartesian/YAxis":373,"../util/CartesianUtils":467}],378:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prop-types"),t=f(e),a=require("./generateCategoricalChart"),r=f(a),u=require("../polar/PolarAngleAxis"),l=f(u),i=require("../polar/PolarRadiusAxis"),n=f(i),d=require("../util/PolarUtils"),s=require("../polar/Pie"),o=f(s);function f(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,r.default)({chartName:"PieChart",GraphicalChild:o.default,eventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:l.default},{axisType:"radiusAxis",AxisComp:n.default}],formatAxisMap:d.formatAxisMap,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},propTypes:{layout:t.default.oneOf(["centric"]),startAngle:t.default.number,endAngle:t.default.number,cx:t.default.oneOfType([t.default.number,t.default.string]),cy:t.default.oneOfType([t.default.number,t.default.string]),innerRadius:t.default.oneOfType([t.default.number,t.default.string]),outerRadius:t.default.oneOfType([t.default.number,t.default.string])}});
},{"prop-types":96,"./generateCategoricalChart":466,"../polar/PolarAngleAxis":358,"../polar/PolarRadiusAxis":357,"../util/PolarUtils":464,"../polar/Pie":359}],379:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=E(e),n=require("lodash/isNaN"),a=E(n),i=require("react"),r=E(i),o=require("prop-types"),u=E(o),l=require("react-smooth"),d=E(l),h=require("classnames"),s=E(h),f=require("../container/Surface"),c=E(f),p=require("../container/Layer"),v=E(p),m=require("../shape/Rectangle"),y=E(m),g=require("../util/ReactUtils"),w=require("../component/Tooltip"),b=E(w),x=require("../util/PureRender"),A=E(x),M=require("../util/ChartUtils");function E(e){return e&&e.__esModule?e:{default:e}}var O,k,N,T=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function C(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var K=function e(t){var n=t.depth,i=t.node,r=t.index,o=t.valueKey,u=i.children,l=n+1,d=u&&u.length?u.map(function(t,n){return e({depth:l,node:t,index:n,valueKey:o})}):null,h=void 0;return h=u&&u.length?d.reduce(function(e,t){return e+t.value},0):(0,a.default)(i[o])||i[o]<=0?0:i[o],q({},i,{children:d,value:h,depth:n,index:r})},S=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}},B=function(e,t){var n=t<0?0:t;return e.map(function(e){var t=e.value*n;return q({},e,{area:(0,a.default)(t)||t<=0?0:t})})},D=function(e,t,n){var a=t*t,i=e.area*e.area,r=e.reduce(function(e,t){return{min:Math.min(e.min,t.area),max:Math.max(e.max,t.area)}},{min:1/0,max:0}),o=r.min,u=r.max;return i?Math.max(a*u*n/i,i/(a*o*n)):1/0},R=function(e,t,n,a){var i=t?Math.round(e.area/t):0;(a||i>n.height)&&(i=n.height);for(var r=n.x,o=void 0,u=0,l=e.length;u<l;u++)(o=e[u]).x=r,o.y=n.y,o.height=i,o.width=Math.min(i?Math.round(o.area/i):0,n.x+n.width-r),r+=o.width;return o.z=!0,o.width+=n.x+n.width-r,q({},n,{y:n.y+i,height:n.height-i})},L=function(e,t,n,a){var i=t?Math.round(e.area/t):0;(a||i>n.width)&&(i=n.width);for(var r=n.y,o=void 0,u=0,l=e.length;u<l;u++)(o=e[u]).x=n.x,o.y=r,o.width=i,o.height=Math.min(i?Math.round(o.area/i):0,n.y+n.height-r),r+=o.height;return o.z=!1,o.height+=n.y+n.height-r,q({},n,{x:n.x+i,width:n.width-i})},U=function(e,t,n,a){return t===n.width?R(e,t,n,a):L(e,t,n,a)},I=function e(t,n){var a=t.children;if(a&&a.length){var i=S(t),r=[],o=1/0,u=void 0,l=void 0,d=Math.min(i.width,i.height),h=B(a,i.width*i.height/t.value),s=h.slice();for(r.area=0;s.length>0;)r.push(u=s[0]),r.area+=u.area,(l=D(r,d,n))<=o?(s.shift(),o=l):(r.area-=r.pop().area,i=U(r,d,i,!1),d=Math.min(i.width,i.height),r.length=r.area=0,o=1/0);return r.length&&(i=U(r,d,i,!0),r.length=r.area=0),q({},t,{children:h.map(function(t){return e(t,n)})})}return t},V=(0,A.default)((N=k=function(e){function n(){var e,t,a;P(this,n);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=a=_(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),a.state=a.createDefaultState(),_(a,t)}return j(n,i.Component),T(n,[{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&this.setState(this.createDefaultState())}},{key:"createDefaultState",value:function(){return{isTooltipActive:!1,activeNode:null}}},{key:"handleMouseEnter",value:function(e,t){var n=this.props,a=n.onMouseEnter,i=n.children;(0,g.findChildByType)(i,b.default)?this.setState({isTooltipActive:!0,activeNode:e},function(){a&&a(e,t)}):a&&a(e,t)}},{key:"handleMouseLeave",value:function(e,t){var n=this.props,a=n.onMouseLeave,i=n.children;(0,g.findChildByType)(i,b.default)?this.setState({isTooltipActive:!1,activeNode:null},function(){a&&a(e,t)}):a&&a(e,t)}},{key:"handleClick",value:function(e){var t=this.props.onClick;t&&t(e)}},{key:"renderAnimatedItem",value:function(e,t,n){var a=this,i=this.props,o=i.isAnimationActive,u=i.animationBegin,l=i.animationDuration,h=i.animationEasing,s=i.isUpdateAnimationActive,f=t.width,c=t.height,p=t.x,m=t.y,y=parseInt((2*Math.random()-1)*f,10),g={};return n&&(g={onMouseEnter:this.handleMouseEnter.bind(this,t),onMouseLeave:this.handleMouseLeave.bind(this,t),onClick:this.handleClick.bind(this,t)}),r.default.createElement(d.default,{from:{x:p,y:m,width:f,height:c},to:{x:p,y:m,width:f,height:c},duration:l,easing:h,isActive:s},function(n){var i=n.x,f=n.y,c=n.width,p=n.height;return r.default.createElement(d.default,{from:"translate("+y+"px, "+y+"px)",to:"translate(0, 0)",attributeName:"transform",begin:u,easing:h,isActive:o,duration:l},r.default.createElement(v.default,g,a.renderContentItem(e,q({},t,{isAnimationActive:o,isUpdateAnimationActive:!s,width:c,height:p,x:i,y:f}))))})}},{key:"renderContentItem",value:function(e,n){return r.default.isValidElement(e)?r.default.cloneElement(e,n):(0,t.default)(e)?e(n):r.default.createElement(y.default,q({fill:"#fff",stroke:"#000"},n))}},{key:"renderNode",value:function(e,t,n){var a=this,i=this.props.content,o=q({},(0,g.getPresentationAttributes)(this.props),t,{root:e}),u=!t.children||!t.children.length;return r.default.createElement(v.default,{key:"recharts-treemap-node-"+n,className:"recharts-treemap-depth-"+t.depth},this.renderAnimatedItem(i,o,u),t.children&&t.children.length?t.children.map(function(e,n){return a.renderNode(t,e,n)}):null)}},{key:"renderAllNodes",value:function(){var e=this.props,t=e.width,n=e.height,a=e.data,i=e.dataKey,r=e.aspectRatio,o=K({depth:0,node:{children:a,x:0,y:0,width:t,height:n},index:0,valueKey:i}),u=I(o,r);return this.renderNode(u,u,0)}},{key:"renderTooltip",value:function(){var e=this.props,t=e.children,n=e.nameKey,a=(0,g.findChildByType)(t,b.default);if(!a)return null;var i=this.props,o=i.width,u=i.height,l=i.dataKey,d=this.state,h=d.isTooltipActive,s=d.activeNode,f={x:0,y:0,width:o,height:u},c=s?{x:s.x+s.width/2,y:s.y+s.height/2}:null,p=h&&s?[{payload:s,name:(0,M.getValueByDataKey)(s,n,""),value:(0,M.getValueByDataKey)(s,l)}]:[];return r.default.cloneElement(a,{viewBox:f,active:h,coordinate:c,label:"",payload:p})}},{key:"render",value:function(){if(!(0,g.validateWidthHeight)(this))return null;var e=this.props,t=e.width,n=e.height,a=e.className,i=e.style,o=e.children,u=C(e,["width","height","className","style","children"]),l=(0,g.getPresentationAttributes)(u);return r.default.createElement("div",{className:(0,s.default)("recharts-wrapper",a),style:q({},i,{position:"relative",cursor:"default",width:t,height:n})},r.default.createElement(c.default,q({},l,{width:t,height:n}),this.renderAllNodes(),(0,g.filterSvgElements)(o)),this.renderTooltip())}}]),n}(),k.displayName="Treemap",k.propTypes={width:u.default.number,height:u.default.number,data:u.default.array,style:u.default.object,aspectRatio:u.default.number,content:u.default.oneOfType([u.default.element,u.default.func]),fill:u.default.string,stroke:u.default.string,className:u.default.string,nameKey:u.default.oneOfType([u.default.string,u.default.number,u.default.func]),dataKey:u.default.oneOfType([u.default.string,u.default.number,u.default.func]),children:u.default.oneOfType([u.default.arrayOf(u.default.node),u.default.node]),onMouseEnter:u.default.func,onMouseLeave:u.default.func,onClick:u.default.func,isAnimationActive:u.default.bool,isUpdateAnimationActive:u.default.bool,animationBegin:u.default.number,animationDuration:u.default.number,animationEasing:u.default.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"])},k.defaultProps={dataKey:"value",aspectRatio:.5*(1+Math.sqrt(5)),isAnimationActive:!(0,g.isSsr)(),isUpdateAnimationActive:!(0,g.isSsr)(),animationBegin:0,animationDuration:1500,animationEasing:"linear"},O=N))||O;exports.default=V;
},{"lodash/isFunction":498,"lodash/isNaN":511,"react":8,"prop-types":96,"react-smooth":506,"classnames":495,"../container/Surface":340,"../container/Layer":341,"../shape/Rectangle":351,"../util/ReactUtils":459,"../component/Tooltip":343,"../util/PureRender":456,"../util/ChartUtils":462}],567:[function(require,module,exports) {
function o(o,r){for(var e,n=-1,t=o.length;++n<t;){var v=r(o[n]);void 0!==v&&(e=void 0===e?v:e+v)}return e}module.exports=o;
},{}],512:[function(require,module,exports) {
var e=require("./_baseIteratee"),r=require("./_baseSum");function t(t,u){return t&&t.length?r(t,e(u,2)):0}module.exports=t;
},{"./_baseIteratee":561,"./_baseSum":567}],380:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash/isFunction"),t=x(e),r=require("lodash/sumBy"),n=x(r),a=require("lodash/min"),u=x(a),o=require("lodash/maxBy"),i=x(o),l=require("react"),d=x(l),s=require("prop-types"),f=x(s),c=require("classnames"),h=x(c),y=require("../container/Surface"),p=x(y),v=require("../container/Layer"),g=x(v),m=require("../component/Tooltip"),k=x(m),b=require("../shape/Rectangle"),E=x(b),T=require("../util/PureRender"),w=x(T),L=require("../util/ReactUtils"),O=require("../util/ChartUtils");function x(e){return e&&e.__esModule?e:{default:e}}var P,N,M,C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function X(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S={x:0,y:0},W=function(e,t){var r=+e,n=t-r;return function(e){return r+n*e}},K=function(e){return e.y+e.dy/2},A=function(e){return e&&e.value||0},R=function(e,t){return t.reduce(function(t,r){return t+A(e[r])},0)},Y=function(e,t,r){return r.reduce(function(r,n){var a=t[n],u=e[a.source];return r+K(u)*A(t[n])},0)},D=function(e,t,r){return r.reduce(function(r,n){var a=t[n],u=e[a.target];return r+K(u)*A(t[n])},0)},V=function(e,t){return e.y-t.y},I=function(e,t){for(var r=[],n=[],a=[],u=[],o=0,i=e.length;o<i;o++){var l=e[o];l.source===t&&(a.push(l.target),u.push(o)),l.target===t&&(r.push(l.source),n.push(o))}return{sourceNodes:r,sourceLinks:n,targetLinks:u,targetNodes:a}},U=function e(t,r){for(var n=r.targetNodes,a=0,u=n.length;a<u;a++){var o=t[n[a]];o&&(o.depth=Math.max(r.depth+1,o.depth),e(t,o))}},F=function(e,t,r){for(var n=e.nodes,a=e.links,u=n.map(function(e,t){var r=I(a,t);return q({},e,r,{value:Math.max(R(a,r.sourceLinks),R(a,r.targetLinks)),depth:0})}),o=0,l=u.length;o<l;o++){var d=u[o];d.sourceNodes.length||U(u,d)}var s=(0,i.default)(u,function(e){return e.depth}).depth;if(s>=1)for(var f=(t-r)/s,c=0,h=u.length;c<h;c++){var y=u[c];y.targetNodes.length||(y.depth=s),y.x=y.depth*f,y.dx=r}return{tree:u,maxDepth:s}},H=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var a=e[r];t[a.depth]||(t[a.depth]=[]),t[a.depth].push(a)}return t},z=function(e,t,r,a){for(var o=(0,u.default)(e.map(function(e){return(t-(e.length-1)*r)/(0,n.default)(e,A)})),i=0,l=e.length;i<l;i++)for(var d=0,s=e[i].length;d<s;d++){var f=e[i][d];f.y=d,f.dy=f.value*o}return a.map(function(e){return q({},e,{dy:A(e)*o})})},G=function(e,t,r){for(var n=0,a=e.length;n<a;n++){var u=e[n],o=u.length;u.sort(V);for(var i=0,l=0;l<o;l++){var d=u[l],s=i-d.y;s>0&&(d.y+=s),i=d.y+d.dy+r}i=t+r;for(var f=o-1;f>=0;f--){var c=u[f],h=c.y+c.dy+r-i;if(!(h>0))break;c.y-=h,i=c.y}}},J=function(e,t,r,n){for(var a=0,u=t.length;a<u;a++)for(var o=t[a],i=0,l=o.length;i<l;i++){var d=o[i];if(d.sourceLinks.length){var s=R(r,d.sourceLinks),f=Y(e,r,d.sourceLinks)/s;d.y+=(f-K(d))*n}}},Q=function(e,t,r,n){for(var a=t.length-1;a>=0;a--)for(var u=t[a],o=0,i=u.length;o<i;o++){var l=u[o];if(l.targetLinks.length){var d=R(r,l.targetLinks),s=D(e,r,l.targetLinks)/d;l.y+=(s-K(l))*n}}},Z=function(e,t){for(var r=0,n=e.length;r<n;r++){var a=e[r],u=0,o=0;a.targetLinks.sort(function(r,n){return e[t[r].target].y-e[t[n].target].y}),a.sourceLinks.sort(function(r,n){return e[t[r].source].y-e[t[n].source].y});for(var i=0,l=a.targetLinks.length;i<l;i++){var d=t[a.targetLinks[i]];d&&(d.sy=u,u+=d.dy)}for(var s=0,f=a.sourceLinks.length;s<f;s++){var c=t[a.sourceLinks[s]];c&&(c.ty=o,o+=c.dy)}}},$=function(e){var t=e.data,r=e.width,n=e.height,a=e.iterations,u=e.nodeWidth,o=e.nodePadding,i=t.links,l=F(t,r,u).tree,d=H(l),s=z(d,n,o,i);G(d,n,o);for(var f=1,c=1;c<=a;c++)Q(l,d,s,f*=.99),G(d,n,o),J(l,d,s,f),G(d,n,o);return Z(l,s),{nodes:l,links:s}},ee=function(e,t){return"node"===t?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:(e.sourceX+e.targetX)/2,y:(e.sourceY+e.targetY)/2}},te=function(e,t,r){var n=e.payload;return"node"===t?[{payload:e,name:(0,O.getValueByDataKey)(n,r,""),value:(0,O.getValueByDataKey)(n,"value")}]:n.source&&n.target?[{payload:e,name:(0,O.getValueByDataKey)(n.source,r,"")+" - "+(0,O.getValueByDataKey)(n.target,r,""),value:(0,O.getValueByDataKey)(n,"value")}]:[]},re=(0,w.default)((M=N=function(e){function r(e){_(this,r);var t=j(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state=t.createDefaultState(e),t}return B(r,l.Component),C(r,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,r=t.data,n=t.width,a=t.height,u=t.margin,o=t.iterations,i=t.nodeWidth,l=t.nodePadding,d=t.nameKey;e.data===r&&e.width===n&&e.height===a&&(0,T.shallowEqual)(e.margin,u)&&e.iterations===o&&e.nodeWidth===i&&e.nodePadding===l&&e.nameKey===d||this.setState(this.createDefaultState(e))}},{key:"createDefaultState",value:function(e){var t=e.data,r=e.width,n=e.height,a=e.margin,u=e.iterations,o=e.nodeWidth,i=e.nodePadding,l=r-(a&&a.left||0)-(a&&a.right||0),d=n-(a&&a.top||0)-(a&&a.bottom||0),s=$({data:t,width:l,height:d,iterations:u,nodeWidth:o,nodePadding:i}),f=s.links;return{activeElement:null,activeElementType:null,isTooltipActive:!1,nodes:s.nodes,links:f}}},{key:"handleMouseEnter",value:function(e,t,r){var n=this.props,a=n.onMouseEnter,u=n.children;(0,L.findChildByType)(u,k.default)?this.setState({activeElement:e,activeElementType:t,isTooltipActive:!0},function(){a&&a(e,t,r)}):a&&a(e,t,r)}},{key:"handleMouseLeave",value:function(e,t,r){var n=this.props,a=n.onMouseLeave,u=n.children;(0,L.findChildByType)(u,k.default)?this.setState({isTooltipActive:!1},function(){a&&a(e,t,r)}):a&&a(e,t,r)}},{key:"renderLinkItem",value:function(e,r){if(d.default.isValidElement(e))return d.default.cloneElement(e,r);if((0,t.default)(e))return e(r);var n=r.sourceX,a=r.sourceY,u=r.sourceControlX,o=r.targetX,i=r.targetY,l=r.targetControlX,s=r.linkWidth,f=X(r,["sourceX","sourceY","sourceControlX","targetX","targetY","targetControlX","linkWidth"]);return d.default.createElement("path",q({className:"recharts-sankey-link",d:"\n          M"+n+","+a+"\n          C"+u+","+a+" "+l+","+i+" "+o+","+i+"\n        ",fill:"none",stroke:"#333",strokeWidth:s,strokeOpacity:"0.2"},(0,L.getPresentationAttributes)(f)))}},{key:"renderLinks",value:function(e,t){var r=this,n=this.props,a=n.linkCurvature,u=n.link,o=n.margin,i=o.top||0,l=o.left||0;return d.default.createElement(g.default,{className:"recharts-sankey-links",key:"recharts-sankey-links"},e.map(function(e,n){var o=e.sy,s=e.ty,f=e.dy,c=t[e.source],h=t[e.target],y=c.x+c.dx+l,p=h.x+l,v=W(y,p),m=v(a),k=v(1-a),b=c.y+o+f/2+i,E=h.y+s+f/2+i,T=q({sourceX:y,targetX:p,sourceY:b,targetY:E,sourceControlX:m,targetControlX:k,sourceRelativeY:o,targetRelativeY:s,linkWidth:f,index:n,payload:q({},e,{source:c,target:h})},(0,L.getPresentationAttributes)(u)),w={onMouseEnter:r.handleMouseEnter.bind(r,T,"link"),onMouseLeave:r.handleMouseLeave.bind(r,T,"link")};return d.default.createElement(g.default,q({key:"link"+n},w),r.renderLinkItem(u,T))}))}},{key:"renderNodeItem",value:function(e,r){return d.default.isValidElement(e)?d.default.cloneElement(e,r):(0,t.default)(e)?e(r):d.default.createElement(E.default,q({className:"recharts-sankey-node",fill:"#0088fe",fillOpacity:"0.8"},r))}},{key:"renderNodes",value:function(e){var t=this,r=this.props,n=r.node,a=r.margin,u=a.top||0,o=a.left||0;return d.default.createElement(g.default,{className:"recharts-sankey-nodes",key:"recharts-sankey-nodes"},e.map(function(e,r){var a=e.x,i=e.y,l=e.dx,s=e.dy,f=q({},(0,L.getPresentationAttributes)(n),{x:a+o,y:i+u,width:l,height:s,index:r,payload:e}),c={onMouseEnter:t.handleMouseEnter.bind(t,f,"node"),onMouseLeave:t.handleMouseLeave.bind(t,f,"node")};return d.default.createElement(g.default,q({key:"node"+r},c),t.renderNodeItem(n,f))}))}},{key:"renderTooltip",value:function(){var e=this.props,t=e.children,r=e.width,n=e.height,a=e.nameKey,u=(0,L.findChildByType)(t,k.default);if(!u)return null;var o=this.state,i=o.isTooltipActive,l=o.activeElement,s=o.activeElementType,f={x:0,y:0,width:r,height:n},c=l?ee(l,s):S,h=l?te(l,s,a):[];return d.default.cloneElement(u,{viewBox:f,active:i,coordinate:c,label:"",payload:h})}},{key:"render",value:function(){if(!(0,L.validateWidthHeight)(this))return null;var e=this.props,t=e.width,r=e.height,n=e.className,a=e.style,u=e.children,o=X(e,["width","height","className","style","children"]),i=this.state,l=i.links,s=i.nodes,f=(0,L.getPresentationAttributes)(o);return d.default.createElement("div",{className:(0,h.default)("recharts-wrapper",n),style:q({},a,{position:"relative",cursor:"default",width:t,height:r})},d.default.createElement(p.default,q({},f,{width:t,height:r}),(0,L.filterSvgElements)(u),this.renderLinks(l,s),this.renderNodes(s)),this.renderTooltip())}}]),r}(),N.displayName="Sankey",N.propTypes=q({},L.PRESENTATION_ATTRIBUTES,L.EVENT_ATTRIBUTES,{nameKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]),dataKey:f.default.oneOfType([f.default.string,f.default.number,f.default.func]),width:f.default.number,height:f.default.number,data:f.default.shape({nodes:f.default.array,links:f.default.arrayOf(f.default.shape({target:f.default.number,source:f.default.number,value:f.default.number}))}),nodePadding:f.default.number,nodeWidth:f.default.number,linkCurvature:f.default.number,iterations:f.default.number,node:f.default.oneOfType([f.default.object,f.default.element,f.default.func]),link:f.default.oneOfType([f.default.object,f.default.element,f.default.func]),style:f.default.object,className:f.default.string,children:f.default.oneOfType([f.default.arrayOf(f.default.node),f.default.node]),margin:f.default.shape({top:f.default.number,right:f.default.number,bottom:f.default.number,left:f.default.number})}),N.defaultProps={nodePadding:10,nodeWidth:10,nameKey:"name",dataKey:"value",linkCurvature:.5,iterations:32,margin:{top:5,right:5,bottom:5,left:5}},P=M))||P;exports.default=re;
},{"lodash/isFunction":498,"lodash/sumBy":512,"lodash/min":513,"lodash/maxBy":505,"react":8,"prop-types":96,"classnames":495,"../container/Surface":340,"../container/Layer":341,"../component/Tooltip":343,"../shape/Rectangle":351,"../util/PureRender":456,"../util/ReactUtils":459,"../util/ChartUtils":462}],381:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prop-types"),a=o(e),r=require("./generateCategoricalChart"),t=o(r),u=require("../polar/Radar"),l=o(u),i=require("../polar/PolarAngleAxis"),d=o(i),n=require("../polar/PolarRadiusAxis"),s=o(n),f=require("../util/PolarUtils");function o(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,t.default)({chartName:"RadarChart",GraphicalChild:l.default,axisComponents:[{axisType:"angleAxis",AxisComp:d.default},{axisType:"radiusAxis",AxisComp:s.default}],formatAxisMap:f.formatAxisMap,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},propTypes:{layout:a.default.oneOf(["centric"]),startAngle:a.default.number,endAngle:a.default.number,cx:a.default.oneOfType([a.default.number,a.default.string]),cy:a.default.oneOfType([a.default.number,a.default.string]),innerRadius:a.default.oneOfType([a.default.number,a.default.string]),outerRadius:a.default.oneOfType([a.default.number,a.default.string])}});
},{"prop-types":96,"./generateCategoricalChart":466,"../polar/Radar":360,"../polar/PolarAngleAxis":358,"../polar/PolarRadiusAxis":357,"../util/PolarUtils":464}],382:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./generateCategoricalChart"),a=p(e),i=require("../cartesian/Scatter"),r=p(i),t=require("../cartesian/XAxis"),s=p(t),u=require("../cartesian/YAxis"),x=p(u),l=require("../cartesian/ZAxis"),n=p(l),o=require("../util/CartesianUtils");function p(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,a.default)({chartName:"ScatterChart",GraphicalChild:r.default,eventType:"single",axisComponents:[{axisType:"xAxis",AxisComp:s.default},{axisType:"yAxis",AxisComp:x.default},{axisType:"zAxis",AxisComp:n.default}],formatAxisMap:o.formatAxisMap});
},{"./generateCategoricalChart":466,"../cartesian/Scatter":371,"../cartesian/XAxis":372,"../cartesian/YAxis":373,"../cartesian/ZAxis":374,"../util/CartesianUtils":467}],383:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./generateCategoricalChart"),a=o(e),r=require("../cartesian/Area"),i=o(r),t=require("../cartesian/XAxis"),s=o(t),u=require("../cartesian/YAxis"),l=o(u),x=require("../util/CartesianUtils");function o(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,a.default)({chartName:"AreaChart",GraphicalChild:i.default,axisComponents:[{axisType:"xAxis",AxisComp:s.default},{axisType:"yAxis",AxisComp:l.default}],formatAxisMap:x.formatAxisMap});
},{"./generateCategoricalChart":466,"../cartesian/Area":369,"../cartesian/XAxis":372,"../cartesian/YAxis":373,"../util/CartesianUtils":467}],384:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prop-types"),a=f(e),r=require("./generateCategoricalChart"),t=f(r),u=require("../polar/PolarAngleAxis"),l=f(u),i=require("../polar/PolarRadiusAxis"),d=f(i),n=require("../util/PolarUtils"),s=require("../polar/RadialBar"),o=f(s);function f(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,t.default)({chartName:"RadialBarChart",GraphicalChild:o.default,legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:l.default},{axisType:"radiusAxis",AxisComp:d.default}],formatAxisMap:n.formatAxisMap,defaultProps:{layout:"radial",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},propTypes:{layout:a.default.oneOf(["radial"]),startAngle:a.default.number,endAngle:a.default.number,cx:a.default.oneOfType([a.default.number,a.default.string]),cy:a.default.oneOfType([a.default.number,a.default.string]),innerRadius:a.default.oneOfType([a.default.number,a.default.string]),outerRadius:a.default.oneOfType([a.default.number,a.default.string])}});
},{"prop-types":96,"./generateCategoricalChart":466,"../polar/PolarAngleAxis":358,"../polar/PolarRadiusAxis":357,"../util/PolarUtils":464,"../polar/RadialBar":361}],385:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./generateCategoricalChart"),a=q(e),r=require("../cartesian/Area"),i=q(r),t=require("../cartesian/Bar"),s=q(t),u=require("../cartesian/Line"),l=q(u),x=require("../cartesian/Scatter"),n=q(x),o=require("../cartesian/XAxis"),d=q(o),c=require("../cartesian/YAxis"),f=q(c),p=require("../cartesian/ZAxis"),A=q(p),C=require("../util/CartesianUtils");function q(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,a.default)({chartName:"ComposedChart",GraphicalChild:[l.default,i.default,s.default,n.default],axisComponents:[{axisType:"xAxis",AxisComp:d.default},{axisType:"yAxis",AxisComp:f.default},{axisType:"zAxis",AxisComp:A.default}],formatAxisMap:C.formatAxisMap});
},{"./generateCategoricalChart":466,"../cartesian/Area":369,"../cartesian/Bar":370,"../cartesian/Line":368,"../cartesian/Scatter":371,"../cartesian/XAxis":372,"../cartesian/YAxis":373,"../cartesian/ZAxis":374,"../util/CartesianUtils":467}],319:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposedChart=exports.RadialBarChart=exports.AreaChart=exports.ScatterChart=exports.RadarChart=exports.Sankey=exports.Treemap=exports.PieChart=exports.BarChart=exports.LineChart=exports.ErrorBar=exports.ZAxis=exports.YAxis=exports.XAxis=exports.Scatter=exports.Bar=exports.Area=exports.Line=exports.CartesianGrid=exports.CartesianAxis=exports.ReferenceArea=exports.ReferenceDot=exports.ReferenceLine=exports.Brush=exports.RadialBar=exports.Radar=exports.Pie=exports.PolarAngleAxis=exports.PolarRadiusAxis=exports.PolarGrid=exports.Symbols=exports.Cross=exports.Dot=exports.Polygon=exports.Rectangle=exports.Curve=exports.Sector=exports.LabelList=exports.Label=exports.Text=exports.Cell=exports.ResponsiveContainer=exports.Tooltip=exports.Legend=exports.Layer=exports.Surface=void 0,require("./polyfill");var e=require("./container/Surface"),r=Me(e),t=require("./container/Layer"),a=Me(t),o=require("./component/Legend"),s=Me(o),i=require("./component/Tooltip"),p=Me(i),x=require("./component/ResponsiveContainer"),u=Me(x),l=require("./component/Cell"),n=Me(l),d=require("./component/Text"),f=Me(d),c=require("./component/Label"),q=Me(c),C=require("./component/LabelList"),h=Me(C),A=require("./shape/Sector"),R=Me(A),L=require("./shape/Curve"),P=Me(L),B=require("./shape/Rectangle"),S=Me(B),m=require("./shape/Polygon"),y=Me(m),g=require("./shape/Dot"),b=Me(g),v=require("./shape/Cross"),T=Me(v),D=require("./shape/Symbols"),G=Me(D),_=require("./polar/PolarGrid"),k=Me(_),E=require("./polar/PolarRadiusAxis"),X=Me(E),Y=require("./polar/PolarAngleAxis"),Z=Me(Y),M=require("./polar/Pie"),j=Me(M),O=require("./polar/Radar"),w=Me(O),z=require("./polar/RadialBar"),F=Me(z),H=require("./cartesian/Brush"),I=Me(H),J=require("./cartesian/ReferenceLine"),K=Me(J),N=require("./cartesian/ReferenceDot"),Q=Me(N),U=require("./cartesian/ReferenceArea"),V=Me(U),W=require("./cartesian/CartesianAxis"),$=Me(W),ee=require("./cartesian/CartesianGrid"),re=Me(ee),te=require("./cartesian/Line"),ae=Me(te),oe=require("./cartesian/Area"),se=Me(oe),ie=require("./cartesian/Bar"),pe=Me(ie),xe=require("./cartesian/Scatter"),ue=Me(xe),le=require("./cartesian/XAxis"),ne=Me(le),de=require("./cartesian/YAxis"),fe=Me(de),ce=require("./cartesian/ZAxis"),qe=Me(ce),Ce=require("./cartesian/ErrorBar"),he=Me(Ce),Ae=require("./chart/LineChart"),Re=Me(Ae),Le=require("./chart/BarChart"),Pe=Me(Le),Be=require("./chart/PieChart"),Se=Me(Be),me=require("./chart/Treemap"),ye=Me(me),ge=require("./chart/Sankey"),be=Me(ge),ve=require("./chart/RadarChart"),Te=Me(ve),De=require("./chart/ScatterChart"),Ge=Me(De),_e=require("./chart/AreaChart"),ke=Me(_e),Ee=require("./chart/RadialBarChart"),Xe=Me(Ee),Ye=require("./chart/ComposedChart"),Ze=Me(Ye);function Me(e){return e&&e.__esModule?e:{default:e}}exports.Surface=r.default,exports.Layer=a.default,exports.Legend=s.default,exports.Tooltip=p.default,exports.ResponsiveContainer=u.default,exports.Cell=n.default,exports.Text=f.default,exports.Label=q.default,exports.LabelList=h.default,exports.Sector=R.default,exports.Curve=P.default,exports.Rectangle=S.default,exports.Polygon=y.default,exports.Dot=b.default,exports.Cross=T.default,exports.Symbols=G.default,exports.PolarGrid=k.default,exports.PolarRadiusAxis=X.default,exports.PolarAngleAxis=Z.default,exports.Pie=j.default,exports.Radar=w.default,exports.RadialBar=F.default,exports.Brush=I.default,exports.ReferenceLine=K.default,exports.ReferenceDot=Q.default,exports.ReferenceArea=V.default,exports.CartesianAxis=$.default,exports.CartesianGrid=re.default,exports.Line=ae.default,exports.Area=se.default,exports.Bar=pe.default,exports.Scatter=ue.default,exports.XAxis=ne.default,exports.YAxis=fe.default,exports.ZAxis=qe.default,exports.ErrorBar=he.default,exports.LineChart=Re.default,exports.BarChart=Pe.default,exports.PieChart=Se.default,exports.Treemap=ye.default,exports.Sankey=be.default,exports.RadarChart=Te.default,exports.ScatterChart=Ge.default,exports.AreaChart=ke.default,exports.RadialBarChart=Xe.default,exports.ComposedChart=Ze.default;
},{"./polyfill":337,"./container/Surface":340,"./container/Layer":341,"./component/Legend":342,"./component/Tooltip":343,"./component/ResponsiveContainer":344,"./component/Cell":346,"./component/Text":345,"./component/Label":347,"./component/LabelList":348,"./shape/Sector":349,"./shape/Curve":350,"./shape/Rectangle":351,"./shape/Polygon":352,"./shape/Dot":353,"./shape/Cross":354,"./shape/Symbols":355,"./polar/PolarGrid":356,"./polar/PolarRadiusAxis":357,"./polar/PolarAngleAxis":358,"./polar/Pie":359,"./polar/Radar":360,"./polar/RadialBar":361,"./cartesian/Brush":362,"./cartesian/ReferenceLine":363,"./cartesian/ReferenceDot":364,"./cartesian/ReferenceArea":365,"./cartesian/CartesianAxis":366,"./cartesian/CartesianGrid":367,"./cartesian/Line":368,"./cartesian/Area":369,"./cartesian/Bar":370,"./cartesian/Scatter":371,"./cartesian/XAxis":372,"./cartesian/YAxis":373,"./cartesian/ZAxis":374,"./cartesian/ErrorBar":375,"./chart/LineChart":376,"./chart/BarChart":377,"./chart/PieChart":378,"./chart/Treemap":379,"./chart/Sankey":380,"./chart/RadarChart":381,"./chart/ScatterChart":382,"./chart/AreaChart":383,"./chart/RadialBarChart":384,"./chart/ComposedChart":385}],113:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const s=exports.colors={pain:"#C170FF",impulsivity:"#F4BA67",riskTolerance:"#FB8E66",negativeMood:"#7085FF",boredom:"#70FFC1",pessimism:"#C1FF70",stress:"#70D4FF",susceptibility:"#F8AF46",craving:"#FF6461",loneliness:"#FD9BB2"},e=exports.texts={pain:"Pain",impulsivity:"Impulsivity",riskTolerance:"Risk Tolerance",negativeMood:"Negative Mood",boredom:"Boredom",pessimism:"Pessimism",stress:"Stress",susceptibility:"Susceptibility",craving:"Craving",loneliness:"Loneliness"};
},{}],217:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,a,r,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=require("react"),n=h(s),o=require("mobx-react"),d=require("mobx"),c=require("../../../../assets/chart"),i=h(c),u=require("../../../../mock/mock-copy.json"),f=h(u),p=require("recharts"),m=require("../../../../utils/constants");function h(e){return e&&e.__esModule?e:{default:e}}const y=["Sun 10","Mon 11","Tues 12","Wed 13","Thurs 14","Fri 15","Sat 16","Sun 17","Mon 18","Tues 19","Wed 20","Thurs 21","Fri 22","Sat 23","Sat 24"];let E=(e=(0,o.inject)("dashboard"))(t=(0,o.observer)(t=class extends n.default.Component{render(){return n.default.createElement("div",{className:"chart section"},n.default.createElement(O,{dashboard:this.props.dashboard}),n.default.createElement(v,l({dateRangeIdx:this.props.dashboard.dateRangeIdx},(0,d.toJS)(this.props.dashboard.toggles))))}})||t)||t;const g=e=>e.filter(e=>e).map(e=>n.default.createElement("linearGradient",{key:e,id:e,x1:"0",y1:"0",x2:"0",y2:"1"},n.default.createElement("stop",{offset:"10%",stopColor:m.colors[e],stopOpacity:.3}),n.default.createElement("stop",{offset:"80%",stopColor:m.colors[e],stopOpacity:0}))),x=e=>e.filter(e=>e).map(e=>n.default.createElement(p.Area,{key:e,type:"linear",dataKey:e,stroke:m.colors[e],fillOpacity:1,fill:`'url(#${e})`})),b=e=>{let t=[];for(let a in e)e[a]&&t.push(a);return t};let v=(a=(0,o.inject)("dashboard"))(r=(0,o.observer)(r=class extends n.default.Component{constructor(...e){var t;return t=super(...e),this.renderGradients=(()=>Object.keys(this.props.dashboard.toggles).map(e=>this.props.dashboard.toggles[e]?n.default.createElement("linearGradient",{key:e,id:e,x1:"0",y1:"0",x2:"0",y2:"1"},n.default.createElement("stop",{offset:"10%",stopColor:m.colors[e],stopOpacity:.4}),n.default.createElement("stop",{offset:"80%",stopColor:m.colors[e],stopOpacity:0})):n.default.createElement("linearGradient",{key:e}))),this.renderAreas=(()=>Object.keys(this.props.dashboard.toggles).map(e=>this.props.dashboard.toggles[e]?n.default.createElement(p.Area,{key:e,type:"linear",dataKey:e,stroke:m.colors[e],fillOpacity:1,fill:`url(#${e})`}):n.default.createElement(p.Area,{key:e,dataKey:"null"}))),this.renderCustomTick=(e=>e=>{const{x:t,y:a,stroke:r,payload:l,width:s,height:o}=e,d=y[0===this.props.dashboard.dateRangeIdx?l.value:l.value+7];if(!d)return null;const c=d.split(" ")[0],i=d.split(" ")[1];return n.default.createElement("g",null,n.default.createElement("text",{height:o,width:s,x:t,y:a,textAnchor:"middle"},n.default.createElement("tspan",{x:t,dy:"1.0em",fill:"#666"},c),n.default.createElement("tspan",{x:t,dy:"1.0em",fill:"#666"},i)))}),t}render(){let e=f.default.chartData;return 1===this.props.dashboard.dateRangeIdx&&(e=e.map(e=>{const t=Object.assign({},e);return t.idx=t.idx-7,t})),n.default.createElement(p.AreaChart,{margin:{top:5,bottom:30,left:5,right:30},width:690,height:430,data:e},n.default.createElement(p.CartesianGrid,{horizontal:!1}),n.default.createElement("defs",null,this.renderGradients()),n.default.createElement(p.Tooltip,{content:n.default.createElement(k,null)}),this.renderAreas(),n.default.createElement(p.XAxis,{ticks:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],tick:this.renderCustomTick(e),interval:0,dataKey:"idx",type:"number",allowDataOverflow:!0,domain:[0,7]}),n.default.createElement(p.YAxis,{type:"number",domain:[0,10]}))}})||r)||r;const k=e=>{const{label:t,payload:a}=e;return n.default.createElement("div",{className:"recharts-tooltip"},n.default.createElement("p",{className:"label"},y[t]),a.map((e,t)=>n.default.createElement("p",{key:e.dataKey+t},n.default.createElement("span",{className:"color-box",style:{background:e.color}}),n.default.createElement("span",{className:"text"},`${m.texts[e.name]}: ${e.payload[e.dataKey]}`))))},O=({dashboard:e})=>{const t=e.dateRangeIdx>0,a=e.dateRangeIdx<1,r="fas fa-arrow-left"+(t?" active":""),l="fas fa-arrow-right"+(a?" active":"");return n.default.createElement("div",{className:"date-range-selector"},n.default.createElement("div",{onClick:t?e.prevDateRange:null},n.default.createElement("div",{className:"arrow"+(t?" active":"")},n.default.createElement("i",{className:r}))),n.default.createElement("span",null,e.currentRange),n.default.createElement("div",{onClick:a?e.nextDateRange:null},n.default.createElement("div",{className:"arrow"+(a?" active":"")},n.default.createElement("i",{className:l}))))};exports.default=E;
},{"react":8,"mobx-react":10,"mobx":23,"../../../../assets/chart":455,"../../../../mock/mock-copy.json":24,"recharts":319,"../../../../utils/constants":113}],218:[function(require,module,exports) {
"use strict";var e,r;Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),s=l(t),a=require("mobx-react");function l(e){return e&&e.__esModule?e:{default:e}}const o=e=>{const{active:r,onClick:t,text:a,color:l}=e,o="radio-circle"+(r?" active":""),i={border:"2px solid",background:r?l:"",borderColor:l};return s.default.createElement("span",{onClick:t,className:"radio"},s.default.createElement("span",{style:i,className:o}),s.default.createElement("span",{className:"radio-text"},a))},i={craving:"Craving",riskTolerance:"Risk Tolerance",impulsivity:"Impulsivity",susceptibility:"Susceptibility"},n={negativeMood:"Confidence",pessimism:"Pessimism",boredom:"Boredom",stress:"Stress",pain:"Pain",loneliness:"Loneliness"},c={craving:"#ff6461",riskTolerance:"#fb8e66",impulsivity:"#f8af46",susceptibility:"#f4d25e",negativeMood:"#7085ff",pessimism:"#c1ff70",boredom:"#70ffc1",stress:"#70d4ff",pain:"#c170ff",loneliness:"#fd9bb2"},d={primaryToggles:i,secondaryToggles:n};let u=(e=(0,a.inject)("dashboard"))(r=(0,a.observer)(r=class extends s.default.Component{constructor(...e){var r;return r=super(...e),this.renderToggles=(e=>{const{toggles:r,onToggle:t}=this.props.dashboard;return Object.keys(d[e]).map(a=>s.default.createElement(o,{key:a,color:c[a],active:r[a],text:d[e][a],onClick:()=>t(a)}))}),r}render(){return s.default.createElement("div",{className:"toggle section"},s.default.createElement("h4",null,"Factors"),s.default.createElement("p",null,"Primary"),this.renderToggles("primaryToggles"),s.default.createElement("p",null,"Secondary"),this.renderToggles("secondaryToggles"))}})||r)||r;exports.default=u;
},{"react":8,"mobx-react":10}],133:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=c(e),l=require("./chart"),r=c(l),u=require("./toggleSection"),a=c(u),n=require("../../../components/box"),s=c(n);function c(e){return e&&e.__esModule?e:{default:e}}exports.default=(e=>t.default.createElement(s.default,{title:"Weekly Stats",className:"weekly-stats"},t.default.createElement(r.default,null),t.default.createElement(a.default,null)));
},{"react":8,"./chart":217,"./toggleSection":218,"../../../components/box":42}],75:[function(require,module,exports) {
module.exports="celebrate.e461bcd1.png";
},{}],76:[function(require,module,exports) {
module.exports="excited.35b7be29.png";
},{}],77:[function(require,module,exports) {
module.exports="gotchu.f7ff12af.png";
},{}],78:[function(require,module,exports) {
module.exports="hug.d4021432.png";
},{}],79:[function(require,module,exports) {
module.exports="silly.5d9d1ada.png";
},{}],59:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={celebrate:require("./celebrate.png"),excited:require("./excited.png"),gotchu:require("./gotchu.png"),hug:require("./hug.png"),silly:require("./silly.png")};
},{"./celebrate.png":75,"./excited.png":76,"./gotchu.png":77,"./hug.png":78,"./silly.png":79}],92:[function(require,module,exports) {
"use strict";var e,t;Object.defineProperty(exports,"__esModule",{value:!0});var a=require("react"),s=n(a),l=require("../../../assets/stickers"),r=n(l),i=require("../../components/box"),c=n(i),d=require("mobx-react");function n(e){return e&&e.__esModule?e:{default:e}}const o={page1:["hug","excited","gotchu","celebrate"],page2:["silly"]},u={hug:"Hug",excited:"Excited",gotchu:"Gotchu",celebrate:"Celebrate",silly:"Silly"};let h=(e=(0,d.inject)("chat"))(t=(0,d.observer)(t=class extends s.default.Component{constructor(e){super(e),this.onArrowClick=(e=>()=>"right"===e&&"page2"===this.state.page?null:"left"===e&&"page1"===this.state.page?null:void this.setState({page:"right"===e?"page2":"page1"})),this.onSendSticker=(e=>{e.preventDefault(),this.props.chat.sendSticker(this.state.selected)}),this.state={selected:null,page:"page1"}}render(){return s.default.createElement(c.default,{title:"Stickers",className:"stickers"},s.default.createElement("div",{className:"sticker-scroll"},s.default.createElement("div",{className:"arrow left"+("page1"===this.state.page?" disabled":""),onClick:this.onArrowClick("left")},s.default.createElement("i",{className:"fas fa-arrow-left"})),o[this.state.page].map(e=>s.default.createElement("div",{onClick:()=>this.setState({selected:e}),className:"sticker-box"+(this.state.selected===e?" selected":""),key:e},s.default.createElement("img",{src:r.default[e]}),s.default.createElement("p",null,u[e]))),s.default.createElement("div",{className:"arrow right"+("page2"===this.state.page?" disabled":""),onClick:this.onArrowClick("right")},s.default.createElement("i",{className:"fas fa-arrow-right"}))),s.default.createElement("div",{className:"button-section"},s.default.createElement("button",{disabled:!this.state.selected,onClick:this.onSendSticker},"Send to Nyssa")))}})||t)||t;exports.default=h;
},{"react":8,"../../../assets/stickers":59,"../../components/box":42,"mobx-react":10}],107:[function(require,module,exports) {
module.exports="summary-box.9a4b010b.png";
},{}],93:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=l(e),r=require("../../../assets/summary-box.png"),u=l(r),a=require("../../components/box"),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}exports.default=(e=>t.default.createElement(s.default,{title:"Summary",className:"summary"},t.default.createElement("img",{src:u.default})));
},{"react":8,"../../../assets/summary-box.png":107,"../../components/box":42}],94:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=n(e),a=require("../../../mock/mock-copy.json"),l=n(a),r=require("../../../utils/constants"),s=require("../../components/box"),c=n(s);function n(e){return e&&e.__esModule?e:{default:e}}exports.default=(e=>{const a=l.default.mockSuggestions[e.range];return t.default.createElement(c.default,{title:"Suggestions & Tips",className:"suggestion"},t.default.createElement("h4",null,t.default.createElement("i",{className:"fa fa-chart-bar"}),"This week's stats"),t.default.createElement("p",null,a.intro),Object.keys(a.categories).map(e=>{const l=a.categories[e];return[t.default.createElement("h5",{key:`header_${e}`,style:{color:r.colors[e]}},r.texts[e]),t.default.createElement("p",{key:`content_${e}`},l)]}),t.default.createElement("div",{className:"divider"}),t.default.createElement("h4",null,t.default.createElement("i",{className:"fa fa-info-circle"}),"Other support tips"),t.default.createElement("p",null,a.other))});
},{"react":8,"../../../mock/mock-copy.json":24,"../../../utils/constants":113,"../../components/box":42}],71:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=exports.WeeklyStats=require("./weeklyStats").default,t=exports.Stickers=require("./stickers").default,r=exports.Summary=require("./summary").default,s=exports.Suggestions=require("./suggestions").default;
},{"./weeklyStats":133,"./stickers":92,"./summary":93,"./suggestions":94}],18:[function(require,module,exports) {
"use strict";var e,t;Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react"),a=n(r),l=require("mobx-react"),s=require("./components");function n(e){return e&&e.__esModule?e:{default:e}}require("../../styles/dashboard.scss");let u=(e=(0,l.inject)("dashboard"))(t=(0,l.observer)(t=class extends a.default.Component{render(){return a.default.createElement("div",{className:"dashboard-page"},a.default.createElement("div",{className:"flex wrap space-between"},a.default.createElement(s.Summary,null),a.default.createElement(s.Stickers,null)),a.default.createElement(s.WeeklyStats,null),a.default.createElement(s.Suggestions,{range:this.props.dashboard.currentRange}))}})||t)||t;exports.default=u;
},{"react":8,"mobx-react":10,"./components":71,"../../styles/dashboard.scss":54}],29:[function(require,module,exports) {
module.exports="appStores.866574c4.png";
},{}],19:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},t=require("react"),l=d(t),a=require("../../mock/mock-copy.json"),n=d(a);require("../../styles/resources.scss");var r=require("../components/box"),c=d(r),s=require("../../assets/appStores.png"),u=d(s);function d(e){return e&&e.__esModule?e:{default:e}}const{meetingInfo:m,articleInfo:i,preventionInfo:f,hotlineInfo:o}=n.default;let E=class extends l.default.Component{render(){return l.default.createElement("div",{className:"resources-page flex wrap"},l.default.createElement("div",{className:"first-column"},l.default.createElement(p,null),l.default.createElement(h,null),l.default.createElement(g,null)),l.default.createElement("div",{className:"second-column"},l.default.createElement(y,null)))}};const p=t=>l.default.createElement(c.default,{title:"Meetings Near You",className:"meetings"},m.map((t,a)=>l.default.createElement(v,e({key:`meeting_${a}`},t,{noDivider:a===m.length-1})))),v=({title:e,schedule:t,location:a,location_sub:n,address:r,noDivider:c})=>l.default.createElement("div",{className:"meeting"},l.default.createElement("h4",null,e),l.default.createElement("div",{className:"flex wrap"},l.default.createElement("div",{className:"schedule"},l.default.createElement("p",null,l.default.createElement("i",{className:"fas fa-calendar-alt"}),t)),l.default.createElement("div",{className:"location"},l.default.createElement("div",null,l.default.createElement("p",null,l.default.createElement("i",{className:"fas fa-map-marker-alt"}),l.default.createElement("b",null,a)),l.default.createElement("p",null,n),l.default.createElement("a",{className:"address"},r)))),!c&&l.default.createElement("div",{className:"divider"})),h=t=>l.default.createElement(c.default,{title:"How to prevent overdose",className:"prevention"},f.map((t,a)=>l.default.createElement(N,e({key:`meeting_${a}`},t,{noDivider:a===f.length-1}))),l.default.createElement("img",{src:u.default})),N=({title:e,content:t,link:a,filelinks:n,noDivider:r})=>l.default.createElement("div",{className:"prevention-content"},l.default.createElement("h4",null,e),l.default.createElement("p",null,t),a&&l.default.createElement("a",null,a),n.map(e=>l.default.createElement("a",{key:e,className:"link"},l.default.createElement("i",{className:"fa fa-arrow-right"}),e)),!r&&l.default.createElement("div",{className:"divider"})),g=t=>l.default.createElement(c.default,{title:"Helpful articles",className:"articles"},i.map((t,a)=>l.default.createElement(k,e({key:`meeting_${a}`},t))),l.default.createElement("p",{style:{lineHeight:"1.4em",fontSize:18}},"Is not the best kind of originality that which comes after a sound apprenticeship? That which shall prove to be the blending of a firm conception of, “useful precedent”…")),k=({date:e,title:t,content:a})=>l.default.createElement("div",{className:"article"},l.default.createElement("h5",null,e),l.default.createElement("h4",null,t),l.default.createElement("p",null,a)),y=t=>l.default.createElement(c.default,{title:"Hotlines & Resources",className:"hotlines"},o.map((t,a)=>l.default.createElement(b,e({key:`meeting_${a}`},t,{noDivider:a===o.length-1})))),b=({name:e,number:t,link:a,address:n,local:r,content:c,noDivider:s})=>l.default.createElement("div",{className:"hotline"},r&&l.default.createElement("div",{className:"local-tag"},"Local"),l.default.createElement("h4",null,e),l.default.createElement("p",null,c),t&&l.default.createElement("a",null,l.default.createElement("i",{className:"fa fa-phone"}),t),n&&l.default.createElement("a",null,l.default.createElement("i",{className:"fas fa-map-marker-alt"}),n),a&&l.default.createElement("a",null,l.default.createElement("i",{className:"fa fa-link"}),a),!s&&l.default.createElement("div",{className:"divider"}));exports.default=E;
},{"react":8,"../../mock/mock-copy.json":24,"../../styles/resources.scss":54,"../components/box":42,"../../assets/appStores.png":29}],30:[function(require,module,exports) {
module.exports="logo.868c5a50.svg";
},{}],20:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=r(e),a=require("../../assets/logo.svg"),l=r(a);function r(e){return e&&e.__esModule?e:{default:e}}exports.default=(e=>{const{tabs:a,active:r,onSelectTab:s}=e;return t.default.createElement("div",{className:"tab-nav-header"},t.default.createElement("img",{src:l.default,className:"logo"}),Object.keys(a).map((e,l)=>{const c="tab"+(r===e?" active":"");return t.default.createElement("div",{className:c,onClick:()=>s(e),key:e},t.default.createElement("a",null,a[e].title))}))});
},{"react":8,"../../assets/logo.svg":30}],115:[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){if("function"==typeof e&&e.amd)e(["module","exports"],n);else if("undefined"!=typeof exports)n(module,exports);else{var o={exports:{}};n(o,o.exports),t.autosize=o.exports}}(this,function(e,t){"use strict";var n,o,r="function"==typeof Map?new Map:(n=[],o=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return o[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),o.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o.splice(t,1))}}),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function l(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,n=null,o=null,l=null,d=function(){e.clientWidth!==o&&p()},s=function(t){window.removeEventListener("resize",d,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",d,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:s,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),p()}function u(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function a(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",o=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function p(){a();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(o<t?"hidden"===n.overflowY&&(u("scroll"),a(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(u("hidden"),a(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),l!==o){l=o;var r=i("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function d(e){var t=r.get(e);t&&t.destroy()}function s(e){var t=r.get(e);t&&t.update()}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((u=function(e){return e}).destroy=function(e){return e},u.update=function(e){return e}):((u=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return l(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],d),e},u.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=u,e.exports=t.default});
},{}],134:[function(require,module,exports) {
var e=function(e,t,r){return((r=window.getComputedStyle)?r(e):e.currentStyle)[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]};module.exports=e;
},{}],116:[function(require,module,exports) {
var e=require("computed-style");function t(t){var i=e(t,"line-height"),n=parseFloat(i,10);if(i===n+""){var r=t.style.lineHeight;t.style.lineHeight=i+"em",i=e(t,"line-height"),n=parseFloat(i,10),r?t.style.lineHeight=r:delete t.style.lineHeight}if(-1!==i.indexOf("pt")?(n*=4,n/=3):-1!==i.indexOf("mm")?(n*=96,n/=25.4):-1!==i.indexOf("cm")?(n*=96,n/=2.54):-1!==i.indexOf("in")?n*=96:-1!==i.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===i){var l=t.nodeName,d=document.createElement(l);d.innerHTML="&nbsp;","TEXTAREA"===l.toUpperCase()&&d.setAttribute("rows","1");var o=e(t,"font-size");d.style.fontSize=o,d.style.padding="0px",d.style.border="0px";var a=document.body;a.appendChild(d),n=d.offsetHeight,a.removeChild(d)}return n}module.exports=t;
},{"computed-style":134}],89:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};exports.__esModule=!0;var r=require("react"),o=require("prop-types"),i=require("autosize"),s=require("line-height"),a=s,p="autosize:update",u="autosize:destroy",c="autosize:resized",f=function(s){function f(){var e=null!==s&&s.apply(this,arguments)||this;return e.state={lineHeight:null},e.dispatchEvent=function(t){var n=document.createEvent("Event");n.initEvent(t,!0,!1),e.textarea.dispatchEvent(n)},e.updateLineHeight=function(){e.setState({lineHeight:a(e.textarea)})},e.onChange=function(t){var n=e.props.onChange;e.currentValue=t.currentTarget.value,n&&n(t)},e.saveDOMNodeRef=function(t){var n=e.props.innerRef;n&&n(t),e.textarea=t},e.getLocals=function(){var r=e,o=r.props,i=(o.onResize,o.maxRows),s=(o.onChange,o.style),a=(o.innerRef,n(o,["onResize","maxRows","onChange","style","innerRef"])),p=r.state.lineHeight,u=r.saveDOMNodeRef,c=i&&p?p*i:null;return t({},a,{saveDOMNodeRef:u,style:c?t({},s,{maxHeight:c}):s,onChange:e.onChange})},e}return e(f,s),f.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.onResize;"number"==typeof t.maxRows&&this.updateLineHeight(),setTimeout(function(){return i(e.textarea)}),n&&this.textarea.addEventListener(c,n)},f.prototype.componentWillUnmount=function(){var e=this.props.onResize;e&&this.textarea.removeEventListener(c,e),this.dispatchEvent(u)},f.prototype.render=function(){var e=this.getLocals(),o=e.children,i=e.saveDOMNodeRef,s=n(e,["children","saveDOMNodeRef"]);return r.createElement("textarea",t({},s,{ref:i}),o)},f.prototype.componentDidUpdate=function(e){this.props.value===this.currentValue&&this.props.rows===e.rows||this.dispatchEvent(p)},f.defaultProps={rows:1},f.propTypes={rows:o.number,maxRows:o.number,onResize:o.func,innerRef:o.func},f}(r.Component);exports.default=f;
},{"react":8,"prop-types":96,"autosize":115,"line-height":116}],72:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("./TextareaAutosize");exports.default=e.default;
},{"./TextareaAutosize":89}],35:[function(require,module,exports) {
module.exports="avatar.077aba17.png";
},{}],36:[function(require,module,exports) {
module.exports="hotline-avatar.820dbe1b.png";
},{}],21:[function(require,module,exports) {
"use strict";var e,t,a,s;Object.defineProperty(exports,"__esModule",{value:!0});var l=require("react"),r=h(l),c=require("mobx-react"),n=require("react-autosize-textarea"),o=h(n);require("../../styles/chat.scss");var i=require("../../assets/chat/avatar.png"),u=h(i),d=require("../../assets/chat/hotline-avatar.png"),m=h(d),f=require("../../assets/stickers"),p=h(f);function h(e){return e&&e.__esModule?e:{default:e}}const g={nyssa:{text:"Nyssa",color:"#f1b434"},hotline:{text:"Hotline",color:"#ff6461"}};let v=(e=(0,c.inject)("chat"))(t=(0,c.observer)(t=class extends r.default.Component{constructor(...e){var t;return t=super(...e),this.onSubmitMessage=(e=>t=>{this.props.chat.sendMessage(e,t)}),t}render(){const{chat:e}=this.props;let t=e.open?"fas fa-times":"fas fa-comment";return r.default.createElement("div",{className:"chat-bar"},e.open&&e.contacts.map(t=>r.default.createElement(E,{key:t,contact:t,open:e.openBoxes[t],closeBox:()=>e.toggleOpenBox(t),openBox:()=>e.toggleOpenBox(t)})),r.default.createElement("div",{key:t,onClick:()=>e.toggleOpen(),className:"bubble"+(e.open?" opened":" closed")},r.default.createElement("i",{className:t})))}})||t)||t,E=(a=(0,c.inject)("chat"))(s=(0,c.observer)(s=class extends r.default.Component{constructor(e){super(e),this.onUpdate=(e=>{this.setState({message:e})}),this.onSubmit=(e=>t=>{t.preventDefault(),this.props.chat.sendMessage(e,this.state.message),this.setState({message:""})}),this.state={message:""}}componentDidUpdate(){this.refs.chatList&&(this.refs.chatList.scrollTop=this.refs.chatList.scrollHeight)}render(){const{open:e,closeBox:t,openBox:a,contact:s,chat:l}=this.props,c=l.chats[s],n=g[s],o="hotline"===s?m.default:u.default;return r.default.createElement("div",{className:"chat-box"},this.props.open?r.default.createElement("div",{className:"box opened"},r.default.createElement("div",{style:{background:n.color},className:"header"},r.default.createElement("div",{onClick:t},r.default.createElement("i",{className:"fas fa-times"})),n.text),r.default.createElement("ul",{ref:"chatList",className:"messages"},c.map((e,t)=>r.default.createElement("li",{className:e.type,key:`message_${t}`},"received"===e.type&&r.default.createElement("img",{src:o}),r.default.createElement("div",null,r.default.createElement(x,null),r.default.createElement("div",null,e.sticker?r.default.createElement("img",{className:"sticker",src:p.default[e.sticker]}):e.text)))),l.isResponding[s]&&r.default.createElement("li",{className:"received"},r.default.createElement("img",{src:o}),r.default.createElement("div",null,r.default.createElement(x,null),"..."))),r.default.createElement("form",{onSubmit:this.onSubmit(s)},r.default.createElement("input",{ref:"chat-input",value:this.state.message,onChange:e=>this.onUpdate(e.target.value)}))):r.default.createElement("div",{style:{color:n.color},onClick:a,className:"box closed"},r.default.createElement("img",{src:o}),n.text))}})||s)||s;const x=e=>r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"24",viewBox:"0 0 31 24"},r.default.createElement("g",{fillRule:"evenodd"},r.default.createElement("path",{d:"M30.514 0H7v12.246C7 18.738 12.262 24 18.757 24h11.757V0z"}),r.default.createElement("path",{d:"M1.191 24c12.328 0 22.01-7.526 22.633-17H7.147v9C6.805 19.787 3.943 22.774 0 24c.55-.017 1.107 0 1.191 0z"})));exports.default=v;
},{"react":8,"mobx-react":10,"react-autosize-textarea":72,"../../styles/chat.scss":54,"../../assets/chat/avatar.png":35,"../../assets/chat/hotline-avatar.png":36,"../../assets/stickers":59}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=f(e),a=require("../Map/mapPage"),r=f(a),s=require("../Dashboard/dashboardPage"),l=f(s),c=require("../Resources/resourcesPage"),o=f(c),u=require("./header"),d=f(u),n=require("./chatBar"),i=f(n);function f(e){return e&&e.__esModule?e:{default:e}}require("../../styles/tabnavigator.scss");const m={dashboard:{component:l.default,title:"Dashboard"},map:{component:r.default,title:"Map"},resources:{component:o.default,title:"Resources"}};let b=class extends t.default.Component{constructor(e){super(e),this.onSelectTab=(e=>{this.setState({selected:e})}),this.state={selected:"dashboard"}}render(){const{selected:e}=this.state,a=m[e].component;return t.default.createElement("div",{className:"tabbed-navigator"},t.default.createElement(d.default,{onSelectTab:this.onSelectTab,active:this.state.selected,tabs:m}),t.default.createElement("div",{className:"content"},t.default.createElement(a,null),t.default.createElement(i.default,null)))}};exports.default=b;
},{"react":8,"../Map/mapPage":17,"../Dashboard/dashboardPage":18,"../Resources/resourcesPage":19,"./header":20,"./chatBar":21,"../../styles/tabnavigator.scss":54}],14:[function(require,module,exports) {
"use strict";var e,t,i,r,n,a,o,s,l;Object.defineProperty(exports,"__esModule",{value:!0});var u=require("mobx"),c=require("../mock/mock-copy.json"),g=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function b(e,t,i,r,n){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function f(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}const m=()=>({craving:!0,riskTolerance:!0,impulsivity:!1,susceptibility:!1,negativeMood:!1,pessimism:!1,boredom:!1,stress:!1,pain:!1,loneliness:!1}),v=Object.keys(g.default.mockSuggestions);let h=(r=b((i=class{constructor(){d(this,"toggles",r,this),d(this,"dateRangeIdx",n,this),d(this,"onToggle",a,this),d(this,"setDateRange",o,this),d(this,"nextDateRange",s,this),d(this,"prevDateRange",l,this)}get currentRange(){return v[this.dateRangeIdx]}}).prototype,"toggles",[u.observable],{enumerable:!0,initializer:function(){return{craving:!0,riskTolerance:!0,impulsivity:!1,susceptibility:!1,negativeMood:!1,pessimism:!1,boredom:!1,stress:!1,pain:!1,loneliness:!1}}}),n=b(i.prototype,"dateRangeIdx",[u.observable],{enumerable:!0,initializer:function(){return 0}}),a=b(i.prototype,"onToggle",[u.action],{enumerable:!0,initializer:function(){return e=>{this.toggles[e]=!this.toggles[e]}}}),o=b(i.prototype,"setDateRange",[u.action],{enumerable:!0,initializer:function(){return e=>{this.dateRangeIdx=e,console.log(this.dateRangeIdx)}}}),s=b(i.prototype,"nextDateRange",[u.action],{enumerable:!0,initializer:function(){return()=>{this.dateRangeIdx++}}}),l=b(i.prototype,"prevDateRange",[u.action],{enumerable:!0,initializer:function(){return()=>{this.dateRangeIdx--}}}),b(i.prototype,"currentRange",[u.computed],Object.getOwnPropertyDescriptor(i.prototype,"currentRange"),i.prototype),i);exports.default=h;
},{"mobx":23,"../mock/mock-copy.json":24}],15:[function(require,module,exports) {
"use strict";var e,r,i,t,n;Object.defineProperty(exports,"__esModule",{value:!0});var o=require("mobx");function a(e,r,i,t){i&&Object.defineProperty(e,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function l(e,r,i,t,n){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,t){return t(e,r,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null),o}function u(e,r){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}let c=(e=o.action.bound,n=l((t=class{constructor(){a(this,"currentTime",n,this)}setCurrentTime(e){this.currentTime=e}}).prototype,"currentTime",[o.observable],{enumerable:!0,initializer:function(){return 0}}),l(t.prototype,"setCurrentTime",[e],Object.getOwnPropertyDescriptor(t.prototype,"setCurrentTime"),t.prototype),t);exports.default=c;
},{"mobx":23}],16:[function(require,module,exports) {
"use strict";var e,t,i,n,s,o,a,r,l,h,u,c,p,d,m;Object.defineProperty(exports,"__esModule",{value:!0});var y=require("mobx"),g=require("../assets/stickers"),b=f(g);function f(e){return e&&e.__esModule?e:{default:e}}function w(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e,t,i,n,s){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function k(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}const z=()=>{const e=["Thanks, I'll try that!","Thanks, I appreciate it!","Sounds good, thanks!","Hmm... OK!"];return e[Math.floor(e.length*Math.random())]},x=()=>{const e=["Aww, thanks for the sticker!","Haha, thanks!","So cute!","Lol, thanks!","Hehe, so cute!",{type:"received",sticker:"hug",timestamp:Date.now()},{type:"received",sticker:"excited",timestamp:Date.now()},{type:"received",sticker:"gotchu",timestamp:Date.now()},{type:"received",sticker:"celebrate",timestamp:Date.now()},{type:"received",sticker:"silly",timestamp:Date.now()}];return e[Math.floor(e.length*Math.random())]},T=e=>{const t=e.toLowerCase();return["yes","okay","sure","yeah","what's up","going on","tell me"].some(e=>t.includes(e))?"I'm lonely and really craving right now. What do you think I should do?":"Okay, maybe later!"},D=e=>{const t=e.toLowerCase();return["help","urgent","emergency","hospital","treatment"].some(e=>t.includes(e))?"I'm here to help. Let me look up the hospital nearest to you…":["bad","terrible","awful","poorly","sad","not good","miserable","angry"].some(e=>t.includes(e))?"I know it's tough, but you can get through this.":t.includes("talk to")?"I'm listening. Tell me what's on your mind.":"I'm not sure what you mean."};let M=(n=v((i=class{constructor(){w(this,"open",n,this),w(this,"openBoxes",s,this),w(this,"chats",o,this),w(this,"contacts",a,this),w(this,"isResponding",r,this),w(this,"toggleOpen",l,this),w(this,"toggleOpenBox",h,this),w(this,"sendMessage",u,this),w(this,"sendSticker",c,this),w(this,"addToChat",p,this),w(this,"sendFirstMessage",d,this),w(this,"sendFollowingMessage",m,this)}}).prototype,"open",[y.observable],{enumerable:!0,initializer:function(){return!1}}),s=v(i.prototype,"openBoxes",[y.observable],{enumerable:!0,initializer:function(){return{hotline:!1,nyssa:!1}}}),o=v(i.prototype,"chats",[y.observable],{enumerable:!0,initializer:function(){return{hotline:[{type:"received",text:"How can I help you?",timestamp:Date.now()}],nyssa:[{type:"received",text:"Hey, I'm not feeling so well today. Can we talk?",timestamp:Date.now()}]}}}),a=v(i.prototype,"contacts",[y.observable],{enumerable:!0,initializer:function(){return["hotline","nyssa"]}}),r=v(i.prototype,"isResponding",[y.observable],{enumerable:!0,initializer:function(){return{nyssa:!1,hotline:!1}}}),l=v(i.prototype,"toggleOpen",[y.action],{enumerable:!0,initializer:function(){return(e=!this.open)=>{this.open=e}}}),h=v(i.prototype,"toggleOpenBox",[y.action],{enumerable:!0,initializer:function(){return(e,t=!this.openBoxes[e])=>{this.openBoxes[e]=t}}}),u=v(i.prototype,"sendMessage",[y.action],{enumerable:!0,initializer:function(){return(e,t)=>{setTimeout(()=>this.isResponding[e]=!0,2e3),"nyssa"===e&&this.chats[e].length>1?this.sendFollowingMessage(e,t):this.sendFirstMessage(e,t)}}}),c=v(i.prototype,"sendSticker",[y.action],{enumerable:!0,initializer:function(){return e=>{this.toggleOpen(!0),this.toggleOpenBox("nyssa",!0);let t=x();"string"==typeof t&&(t={type:"received",text:t,timestamp:Date.now()}),this.addToChat("nyssa",{type:"sent",sticker:e}),setTimeout(()=>this.isResponding.nyssa=!0,2e3),setTimeout(()=>{this.addToChat("nyssa",t),this.isResponding.nyssa=!1},5e3)}}}),p=v(i.prototype,"addToChat",[y.action],{enumerable:!0,initializer:function(){return(e,t)=>{const i=this.chats[e].slice();i.push(t),this.chats[e]=i}}}),d=v(i.prototype,"sendFirstMessage",[y.action],{enumerable:!0,initializer:function(){return(e,t)=>{this.addToChat(e,{type:"sent",text:t,timestamp:Date.now()}),"nyssa"===e?setTimeout(()=>{this.isResponding[e]=!1,this.addToChat(e,{type:"received",text:T(t),timestamp:Date.now()})},5e3):setTimeout(()=>{this.isResponding[e]=!1,this.addToChat(e,{type:"received",text:D(t),timestamp:Date.now()})},5e3)}}}),m=v(i.prototype,"sendFollowingMessage",[y.action],{enumerable:!0,initializer:function(){return(e,t)=>{this.addToChat(e,{type:"sent",text:t,timestamp:Date.now()}),setTimeout(()=>{this.isResponding[e]=!1,this.addToChat(e,{type:"received",text:z(),timestamp:Date.now()})},5e3)}}}),i);exports.default=M;
},{"mobx":23,"../assets/stickers":59}],7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./dashboard"),r=l(e),a=require("./map"),t=l(a),u=require("./chat"),d=l(u);function l(e){return e&&e.__esModule?e:{default:e}}exports.default=(()=>({dashboard:new r.default,map:new t.default,chat:new d.default}));
},{"./dashboard":14,"./map":15,"./chat":16}],3:[function(require,module,exports) {
"use strict";var e=require("react"),t=d(e),r=require("react-dom"),u=d(r),a=require("./views/TabNav/tabNav.js"),s=d(a),l=require("mobx-react"),o=require("./store/store"),n=d(o);function d(e){return e&&e.__esModule?e:{default:e}}require("./styles/common.scss");const c=document.getElementById("root"),i=(0,n.default)();let m=class extends t.default.Component{render(){return t.default.createElement(l.Provider,this.props.store,t.default.createElement(s.default,null))}};u.default.render(t.default.createElement(m,{store:i}),c);
},{"react":8,"react-dom":9,"./views/TabNav/tabNav.js":6,"mobx-react":10,"./store/store":7,"./styles/common.scss":54}]},{},[3], null)
//# sourceMappingURL=main.8b9bc0ce.map